(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var R4={exports:{}};(function(e){(function(t){if(typeof window>"u")return;var r=!0,s=10,i="",n=0,a="",u=null,p="",d=!1,h={resize:1,click:1},f=128,y=!0,m=1,v="bodyOffset",S=v,_=!0,M="",P={},N=32,z=null,V=!1,H=!1,be="[iFrameSizer]",le=be.length,he="",ue={max:1,min:1,bodyScroll:1,documentElementScroll:1},we="child",Ee=window.parent,Pe="*",fe=0,ct=!1,st=null,$e=16,Ve=1,Jt="scroll",Dt=Jt,Us=window,Kr=function(){L("onMessage function not defined")},lr=function(){},cn=function(){},po={height:function(){return L("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return L("Custom width calculation function not defined"),document.body.scrollWidth}},ho={},ur=!1;function _i(){}try{var fo=Object.create({},{passive:{get:function(){ur=!0}}});window.addEventListener("test",_i,fo),window.removeEventListener("test",_i,fo)}catch{}function cr(E,I,J,oe){E.addEventListener(I,J,ur?oe||{}:!1)}function yo(E,I,J){E.removeEventListener(I,J,!1)}function pn(E){return E.charAt(0).toUpperCase()+E.slice(1)}function x(E){var I,J,oe,ze=null,xt=0,ot=function(){xt=Date.now(),ze=null,oe=E.apply(I,J),ze||(I=J=null)};return function(){var Ot=Date.now();xt||(xt=Ot);var it=$e-(Ot-xt);return I=this,J=arguments,it<=0||it>$e?(ze&&(clearTimeout(ze),ze=null),xt=Ot,oe=E.apply(I,J),ze||(I=J=null)):ze||(ze=setTimeout(ot,it)),oe}}function $(E){return be+"["+he+"] "+E}function O(E){V&&typeof window.console=="object"&&console.log($(E))}function L(E){typeof window.console=="object"&&console.warn($(E))}function U(){Q(),O("Initialising iFrame ("+window.location.href+")"),W(),pe(),B("background",i),B("padding",p),La(),Ge(),Je(),ne(),Ht(),Da(),Ze(),P=Si(),$i("init","Init message from host page"),lr()}function Q(){function E(J){return J==="true"}var I=M.substr(le).split(":");he=I[0],n=t!==I[1]?Number(I[1]):n,d=t!==I[2]?E(I[2]):d,V=t!==I[3]?E(I[3]):V,N=t!==I[4]?Number(I[4]):N,r=t!==I[6]?E(I[6]):r,a=I[7],S=t!==I[8]?I[8]:S,i=I[9],p=I[10],fe=t!==I[11]?Number(I[11]):fe,P.enable=t!==I[12]?E(I[12]):!1,we=t!==I[13]?I[13]:we,Dt=t!==I[14]?I[14]:Dt,H=t!==I[15]?Boolean(I[15]):H}function X(E){var I=E.split("Callback");if(I.length===2){var J="on"+I[0].charAt(0).toUpperCase()+I[0].slice(1);this[J]=this[E],delete this[E],L("Deprecated: '"+E+"' has been renamed '"+J+"'. The old method will be removed in the next major version.")}}function W(){function E(){var J=window.iFrameResizer;O("Reading data from page: "+JSON.stringify(J)),Object.keys(J).forEach(X,J),Kr="onMessage"in J?J.onMessage:Kr,lr="onReady"in J?J.onReady:lr,Pe="targetOrigin"in J?J.targetOrigin:Pe,S="heightCalculationMethod"in J?J.heightCalculationMethod:S,Dt="widthCalculationMethod"in J?J.widthCalculationMethod:Dt}function I(J,oe){return typeof J=="function"&&(O("Setup custom "+oe+"CalcMethod"),po[oe]=J,J="custom"),J}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(E(),S=I(S,"height"),Dt=I(Dt,"width")),O("TargetOrigin for parent set to: "+Pe)}function Z(E,I){return I.indexOf("-")!==-1&&(L("Negative CSS value ignored for "+E),I=""),I}function B(E,I){t!==I&&I!==""&&I!=="null"&&(document.body.style[E]=I,O("Body "+E+' set to "'+I+'"'))}function pe(){t===a&&(a=n+"px"),B("margin",Z("margin",a))}function ne(){document.documentElement.style.height="",document.body.style.height="",O('HTML & body height set to "auto"')}function ee(E){var I={add:function(J){function oe(){$i(E.eventName,E.eventType)}ho[J]=oe,cr(window,J,oe,{passive:!0})},remove:function(J){var oe=ho[J];delete ho[J],yo(window,J,oe)}};E.eventNames&&Array.prototype.map?(E.eventName=E.eventNames[0],E.eventNames.map(I[E.method])):I[E.method](E.eventName),O(pn(E.method)+" event listener: "+E.eventType)}function ge(E){ee({method:E,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ee({method:E,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ee({method:E,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ee({method:E,eventType:"Input",eventName:"input"}),ee({method:E,eventType:"Mouse Up",eventName:"mouseup"}),ee({method:E,eventType:"Mouse Down",eventName:"mousedown"}),ee({method:E,eventType:"Orientation Change",eventName:"orientationchange"}),ee({method:E,eventType:"Print",eventName:["afterprint","beforeprint"]}),ee({method:E,eventType:"Ready State Change",eventName:"readystatechange"}),ee({method:E,eventType:"Touch Start",eventName:"touchstart"}),ee({method:E,eventType:"Touch End",eventName:"touchend"}),ee({method:E,eventType:"Touch Cancel",eventName:"touchcancel"}),ee({method:E,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ee({method:E,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ee({method:E,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),we==="child"&&ee({method:E,eventType:"IFrame Resized",eventName:"resize"})}function Ie(E,I,J,oe){return I!==E&&(E in J||(L(E+" is not a valid option for "+oe+"CalculationMethod."),E=I),O(oe+' calculation method set to "'+E+'"')),E}function Ge(){S=Ie(S,v,ps,"height")}function Je(){Dt=Ie(Dt,Jt,xi,"width")}function Ze(){r===!0?(ge("add"),Ry()):O("Auto Resize disabled")}function pr(){u!==null&&u.disconnect()}function qs(){ge("remove"),pr(),clearInterval(z)}function La(){var E=document.createElement("div");E.style.clear="both",E.style.display="block",E.style.height="0",document.body.appendChild(E)}function Si(){function E(){return{x:window.pageXOffset!==t?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==t?window.pageYOffset:document.documentElement.scrollTop}}function I(it){var ie=it.getBoundingClientRect(),at=E();return{x:parseInt(ie.left,10)+parseInt(at.x,10),y:parseInt(ie.top,10)+parseInt(at.y,10)}}function J(it){function ie(kr){var Bs=I(kr);O("Moving to in page link (#"+at+") at x: "+Bs.x+" y: "+Bs.y),Ne(Bs.y,Bs.x,"scrollToOffset")}var at=it.split("#")[1]||it,Le=decodeURIComponent(at),xr=document.getElementById(Le)||document.getElementsByName(Le)[0];t!==xr?ie(xr):(O("In page link (#"+at+") not found in iFrame, so sending to parent"),Ne(0,0,"inPageLink","#"+at))}function oe(){var it=window.location.hash,ie=window.location.href;it!==""&&it!=="#"&&J(ie)}function ze(){function it(ie){function at(Le){Le.preventDefault(),J(this.getAttribute("href"))}ie.getAttribute("href")!=="#"&&cr(ie,"click",at)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),it)}function xt(){cr(window,"hashchange",oe)}function ot(){setTimeout(oe,f)}function Ot(){Array.prototype.forEach&&document.querySelectorAll?(O("Setting up location.hash handlers"),ze(),xt(),ot()):L("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return P.enable?Ot():O("In page linking not enabled"),{findTarget:J}}function Da(){if(H!==!0)return;function E(J){Ne(0,0,J.type,J.screenY+":"+J.screenX)}function I(J,oe){O("Add event listener: "+oe),cr(window.document,J,E)}I("mouseenter","Mouse Enter"),I("mouseleave","Mouse Leave")}function Ht(){O("Enable public methods"),Us.parentIFrame={autoResize:function(I){return I===!0&&r===!1?(r=!0,Ze()):I===!1&&r===!0&&(r=!1,qs()),Ne(0,0,"autoResize",JSON.stringify(r)),r},close:function(){Ne(0,0,"close")},getId:function(){return he},getPageInfo:function(I){typeof I=="function"?(cn=I,Ne(0,0,"pageInfo")):(cn=function(){},Ne(0,0,"pageInfoStop"))},moveToAnchor:function(I){P.findTarget(I)},reset:function(){T("parentIFrame.reset")},scrollTo:function(I,J){Ne(J,I,"scrollTo")},scrollToOffset:function(I,J){Ne(J,I,"scrollToOffset")},sendMessage:function(I,J){Ne(0,0,"message",JSON.stringify(I),J)},setHeightCalculationMethod:function(I){S=I,Ge()},setWidthCalculationMethod:function(I){Dt=I,Je()},setTargetOrigin:function(I){O("Set targetOrigin: "+I),Pe=I},size:function(I,J){var oe=""+(I||"")+(J?","+J:"");$i("size","parentIFrame.size("+oe+")",I,J)}}}function dr(){N!==0&&(O("setInterval: "+N+"ms"),z=setInterval(function(){$i("interval","setInterval: "+N)},Math.abs(N)))}function Va(){function E(Le){function xr(kr){kr.complete===!1&&(O("Attach listeners to "+kr.src),kr.addEventListener("load",ze,!1),kr.addEventListener("error",xt,!1),it.push(kr))}Le.type==="attributes"&&Le.attributeName==="src"?xr(Le.target):Le.type==="childList"&&Array.prototype.forEach.call(Le.target.querySelectorAll("img"),xr)}function I(Le){it.splice(it.indexOf(Le),1)}function J(Le){O("Remove listeners from "+Le.src),Le.removeEventListener("load",ze,!1),Le.removeEventListener("error",xt,!1),I(Le)}function oe(Le,xr,kr){J(Le.target),$i(xr,kr+": "+Le.target.src)}function ze(Le){oe(Le,"imageLoad","Image loaded")}function xt(Le){oe(Le,"imageLoadFailed","Image load failed")}function ot(Le){$i("mutationObserver","mutationObserver: "+Le[0].target+" "+Le[0].type),Le.forEach(E)}function Ot(){var Le=document.querySelector("body"),xr={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return at=new ie(ot),O("Create body MutationObserver"),at.observe(Le,xr),at}var it=[],ie=window.MutationObserver||window.WebKitMutationObserver,at=Ot();return{disconnect:function(){"disconnect"in at&&(O("Disconnect body MutationObserver"),at.disconnect(),it.forEach(J))}}}function Ry(){var E=0>N;window.MutationObserver||window.WebKitMutationObserver?E?dr():u=Va():(O("MutationObserver not supported in this browser!"),dr())}function bu(E,I){var J=0;return I=I||document.body,J=document.defaultView.getComputedStyle(I,null),J=J!==null?J[E]:0,parseInt(J,s)}function Cy(E){E>$e/2&&($e=2*E,O("Event throttle increased to "+$e+"ms"))}function wu(E,I){for(var J=I.length,oe=0,ze=0,xt=pn(E),ot=Date.now(),Ot=0;Ot<J;Ot++)oe=I[Ot].getBoundingClientRect()[E]+bu("margin"+xt,I[Ot]),oe>ze&&(ze=oe);return ot=Date.now()-ot,O("Parsed "+J+" HTML elements"),O("Element position calculated in "+ot+"ms"),Cy(ot),ze}function za(E){return[E.bodyOffset(),E.bodyScroll(),E.documentElementOffset(),E.documentElementScroll()]}function Wp(E,I){function J(){return L("No tagged elements ("+I+") found on page"),document.querySelectorAll("body *")}var oe=document.querySelectorAll("["+I+"]");return oe.length===0&&J(),wu(E,oe)}function Kp(){return document.querySelectorAll("body *")}var ps={bodyOffset:function(){return document.body.offsetHeight+bu("marginTop")+bu("marginBottom")},offset:function(){return ps.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return po.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,za(ps))},min:function(){return Math.min.apply(null,za(ps))},grow:function(){return ps.max()},lowestElement:function(){return Math.max(ps.bodyOffset()||ps.documentElementOffset(),wu("bottom",Kp()))},taggedElement:function(){return Wp("bottom","data-iframe-height")}},xi={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return po.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(xi.bodyScroll(),xi.documentElementScroll())},max:function(){return Math.max.apply(null,za(xi))},min:function(){return Math.min.apply(null,za(xi))},rightMostElement:function(){return wu("right",Kp())},taggedElement:function(){return Wp("right","data-iframe-width")}};function Qp(E,I,J,oe){function ze(){m=at,Ve=Le,Ne(m,Ve,E)}function xt(){function xr(kr,Bs){var ky=Math.abs(kr-Bs)<=fe;return!ky}return at=t!==J?J:ps[S](),Le=t!==oe?oe:xi[Dt](),xr(m,at)||d&&xr(Ve,Le)}function ot(){return!(E in{init:1,interval:1,size:1})}function Ot(){return S in ue||d&&Dt in ue}function it(){O("No change in size detected")}function ie(){ot()&&Ot()?T(I):E in{interval:1}||it()}var at,Le;xt()||E==="init"?(Zp(),ze()):ie()}var Fy=x(Qp);function $i(E,I,J,oe){function ze(){E in{reset:1,resetPage:1,init:1}||O("Trigger event: "+I)}function xt(){return ct&&E in h}xt()?O("Trigger event cancelled: "+E):(ze(),E==="init"?Qp(E,I,J,oe):Fy(E,I,J,oe))}function Zp(){ct||(ct=!0,O("Trigger event lock on")),clearTimeout(st),st=setTimeout(function(){ct=!1,O("Trigger event lock off"),O("--")},f)}function Yp(E){m=ps[S](),Ve=xi[Dt](),Ne(m,Ve,E)}function T(E){var I=S;S=v,O("Reset trigger event: "+E),Zp(),Yp("reset"),S=I}function Ne(E,I,J,oe,ze){function xt(){t===ze?ze=Pe:O("Message targetOrigin: "+ze)}function ot(){var Ot=E+":"+I,it=he+":"+Ot+":"+J+(t!==oe?":"+oe:"");O("Sending message to host page ("+it+")"),Ee.postMessage(be+it,ze)}xt(),ot()}function Ua(E){var I={init:function(){M=E.data,Ee=E.source,U(),y=!1,setTimeout(function(){_=!1},f)},reset:function(){_?O("Page reset ignored by init"):(O("Page size reset by host page"),Yp("resetPage"))},resize:function(){$i("resizeParent","Parent window requested size check")},moveToAnchor:function(){P.findTarget(ze())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var at=ze();O("PageInfoFromParent called from parent: "+at),cn(JSON.parse(at)),O(" --")},message:function(){var at=ze();O("onMessage called from parent: "+at),Kr(JSON.parse(at)),O(" --")}};function J(){return be===(""+E.data).substr(0,le)}function oe(){return E.data.split("]")[1].split(":")[0]}function ze(){return E.data.substr(E.data.indexOf(":")+1)}function xt(){return!e.exports&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype}function ot(){return E.data.split(":")[2]in{true:1,false:1}}function Ot(){var ie=oe();ie in I?I[ie]():!xt()&&!ot()&&L("Unexpected message ("+E.data+")")}function it(){y===!1?Ot():ot()?I.init():O('Ignored message of type "'+oe()+'". Received before initialization.')}J()&&it()}function Fr(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}cr(window,"message",Ua),cr(window,"readystatechange",Fr),Fr()})()})(R4);function S1(e,t){const r=Object.create(null),s=e.split(",");for(let i=0;i<s.length;i++)r[s[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const C4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F4=S1(C4);function h$(e){return!!e||e===""}function x1(e){if(_e(e)){const t={};for(let r=0;r<e.length;r++){const s=e[r],i=Bt(s)?N4(s):x1(s);if(i)for(const n in i)t[n]=i[n]}return t}else{if(Bt(e))return e;if(yt(e))return e}}const k4=/;(?![^(]*\))/g,P4=/:(.+)/;function N4(e){const t={};return e.split(k4).forEach(r=>{if(r){const s=r.split(P4);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Kl(e){let t="";if(Bt(e))t=e;else if(_e(e))for(let r=0;r<e.length;r++){const s=Kl(e[r]);s&&(t+=s+" ")}else if(yt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function L4(e,t){if(e.length!==t.length)return!1;let r=!0;for(let s=0;r&&s<e.length;s++)r=ha(e[s],t[s]);return r}function ha(e,t){if(e===t)return!0;let r=Xw(e),s=Xw(t);if(r||s)return r&&s?e.getTime()===t.getTime():!1;if(r=Uc(e),s=Uc(t),r||s)return e===t;if(r=_e(e),s=_e(t),r||s)return r&&s?L4(e,t):!1;if(r=yt(e),s=yt(t),r||s){if(!r||!s)return!1;const i=Object.keys(e).length,n=Object.keys(t).length;if(i!==n)return!1;for(const a in e){const u=e.hasOwnProperty(a),p=t.hasOwnProperty(a);if(u&&!p||!u&&p||!ha(e[a],t[a]))return!1}}return String(e)===String(t)}function $1(e,t){return e.findIndex(r=>ha(r,t))}const Rs=e=>Bt(e)?e:e==null?"":_e(e)||yt(e)&&(e.toString===m$||!Ce(e.toString))?JSON.stringify(e,f$,2):String(e),f$=(e,t)=>t&&t.__v_isRef?f$(e,t.value):_l(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,i])=>(r[`${s} =>`]=i,r),{})}:Ql(t)?{[`Set(${t.size})`]:[...t.values()]}:yt(t)&&!_e(t)&&!g$(t)?String(t):t,lt={},wl=[],Ps=()=>{},D4=()=>!1,V4=/^on[^a-z]/,Ef=e=>V4.test(e),I1=e=>e.startsWith("onUpdate:"),wr=Object.assign,M1=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},z4=Object.prototype.hasOwnProperty,Ue=(e,t)=>z4.call(e,t),_e=Array.isArray,_l=e=>wp(e)==="[object Map]",Ql=e=>wp(e)==="[object Set]",Xw=e=>wp(e)==="[object Date]",Ce=e=>typeof e=="function",Bt=e=>typeof e=="string",Uc=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",y$=e=>yt(e)&&Ce(e.then)&&Ce(e.catch),m$=Object.prototype.toString,wp=e=>m$.call(e),U4=e=>wp(e).slice(8,-1),g$=e=>wp(e)==="[object Object]",O1=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ld=S1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tf=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},q4=/-(\w)/g,kl=Tf(e=>e.replace(q4,(t,r)=>r?r.toUpperCase():"")),B4=/\B([A-Z])/g,Zl=Tf(e=>e.replace(B4,"-$1").toLowerCase()),v$=Tf(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ny=Tf(e=>e?`on${v$(e)}`:""),qc=(e,t)=>!Object.is(e,t),Dd=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},kh=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Ph=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let e_;const G4=()=>e_||(e_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ws;class J4{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ws&&(this.parent=Ws,this.index=(Ws.scopes||(Ws.scopes=[])).push(this)-1)}run(t){if(this.active){const r=Ws;try{return Ws=this,t()}finally{Ws=r}}}on(){Ws=this}off(){Ws=this.parent}stop(t){if(this.active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function H4(e,t=Ws){t&&t.active&&t.effects.push(e)}const E1=e=>{const t=new Set(e);return t.w=0,t.n=0,t},b$=e=>(e.w&Zn)>0,w$=e=>(e.n&Zn)>0,W4=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Zn},K4=e=>{const{deps:t}=e;if(t.length){let r=0;for(let s=0;s<t.length;s++){const i=t[s];b$(i)&&!w$(i)?i.delete(e):t[r++]=i,i.w&=~Zn,i.n&=~Zn}t.length=r}},Am=new WeakMap;let Pu=0,Zn=1;const Rm=30;let Cs;const aa=Symbol(""),Cm=Symbol("");class T1{constructor(t,r=null,s){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,H4(this,s)}run(){if(!this.active)return this.fn();let t=Cs,r=Hn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Cs,Cs=this,Hn=!0,Zn=1<<++Pu,Pu<=Rm?W4(this):t_(this),this.fn()}finally{Pu<=Rm&&K4(this),Zn=1<<--Pu,Cs=this.parent,Hn=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Cs===this?this.deferStop=!0:this.active&&(t_(this),this.onStop&&this.onStop(),this.active=!1)}}function t_(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Hn=!0;const _$=[];function Yl(){_$.push(Hn),Hn=!1}function Xl(){const e=_$.pop();Hn=e===void 0?!0:e}function Gr(e,t,r){if(Hn&&Cs){let s=Am.get(e);s||Am.set(e,s=new Map);let i=s.get(r);i||s.set(r,i=E1()),S$(i)}}function S$(e,t){let r=!1;Pu<=Rm?w$(e)||(e.n|=Zn,r=!b$(e)):r=!e.has(Cs),r&&(e.add(Cs),Cs.deps.push(e))}function Yi(e,t,r,s,i,n){const a=Am.get(e);if(!a)return;let u=[];if(t==="clear")u=[...a.values()];else if(r==="length"&&_e(e))a.forEach((p,d)=>{(d==="length"||d>=s)&&u.push(p)});else switch(r!==void 0&&u.push(a.get(r)),t){case"add":_e(e)?O1(r)&&u.push(a.get("length")):(u.push(a.get(aa)),_l(e)&&u.push(a.get(Cm)));break;case"delete":_e(e)||(u.push(a.get(aa)),_l(e)&&u.push(a.get(Cm)));break;case"set":_l(e)&&u.push(a.get(aa));break}if(u.length===1)u[0]&&Fm(u[0]);else{const p=[];for(const d of u)d&&p.push(...d);Fm(E1(p))}}function Fm(e,t){const r=_e(e)?e:[...e];for(const s of r)s.computed&&r_(s);for(const s of r)s.computed||r_(s)}function r_(e,t){(e!==Cs||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Q4=S1("__proto__,__v_isRef,__isVue"),x$=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Uc)),Z4=j1(),Y4=j1(!1,!0),X4=j1(!0),s_=ej();function ej(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const s=tt(this);for(let n=0,a=this.length;n<a;n++)Gr(s,"get",n+"");const i=s[t](...r);return i===-1||i===!1?s[t](...r.map(tt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Yl();const s=tt(this)[t].apply(this,r);return Xl(),s}}),e}function j1(e=!1,t=!1){return function(s,i,n){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&n===(e?t?mj:E$:t?O$:M$).get(s))return s;const a=_e(s);if(!e&&a&&Ue(s_,i))return Reflect.get(s_,i,n);const u=Reflect.get(s,i,n);return(Uc(i)?x$.has(i):Q4(i))||(e||Gr(s,"get",i),t)?u:qt(u)?a&&O1(i)?u:u.value:yt(u)?e?T$(u):gi(u):u}}const tj=$$(),rj=$$(!0);function $$(e=!1){return function(r,s,i,n){let a=r[s];if(Pl(a)&&qt(a)&&!qt(i))return!1;if(!e&&(!Nh(i)&&!Pl(i)&&(a=tt(a),i=tt(i)),!_e(r)&&qt(a)&&!qt(i)))return a.value=i,!0;const u=_e(r)&&O1(s)?Number(s)<r.length:Ue(r,s),p=Reflect.set(r,s,i,n);return r===tt(n)&&(u?qc(i,a)&&Yi(r,"set",s,i):Yi(r,"add",s,i)),p}}function sj(e,t){const r=Ue(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&Yi(e,"delete",t,void 0),s}function ij(e,t){const r=Reflect.has(e,t);return(!Uc(t)||!x$.has(t))&&Gr(e,"has",t),r}function nj(e){return Gr(e,"iterate",_e(e)?"length":aa),Reflect.ownKeys(e)}const I$={get:Z4,set:tj,deleteProperty:sj,has:ij,ownKeys:nj},oj={get:X4,set(e,t){return!0},deleteProperty(e,t){return!0}},aj=wr({},I$,{get:Y4,set:rj}),A1=e=>e,jf=e=>Reflect.getPrototypeOf(e);function ed(e,t,r=!1,s=!1){e=e.__v_raw;const i=tt(e),n=tt(t);r||(t!==n&&Gr(i,"get",t),Gr(i,"get",n));const{has:a}=jf(i),u=s?A1:r?F1:Bc;if(a.call(i,t))return u(e.get(t));if(a.call(i,n))return u(e.get(n));e!==i&&e.get(t)}function td(e,t=!1){const r=this.__v_raw,s=tt(r),i=tt(e);return t||(e!==i&&Gr(s,"has",e),Gr(s,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function rd(e,t=!1){return e=e.__v_raw,!t&&Gr(tt(e),"iterate",aa),Reflect.get(e,"size",e)}function i_(e){e=tt(e);const t=tt(this);return jf(t).has.call(t,e)||(t.add(e),Yi(t,"add",e,e)),this}function n_(e,t){t=tt(t);const r=tt(this),{has:s,get:i}=jf(r);let n=s.call(r,e);n||(e=tt(e),n=s.call(r,e));const a=i.call(r,e);return r.set(e,t),n?qc(t,a)&&Yi(r,"set",e,t):Yi(r,"add",e,t),this}function o_(e){const t=tt(this),{has:r,get:s}=jf(t);let i=r.call(t,e);i||(e=tt(e),i=r.call(t,e)),s&&s.call(t,e);const n=t.delete(e);return i&&Yi(t,"delete",e,void 0),n}function a_(){const e=tt(this),t=e.size!==0,r=e.clear();return t&&Yi(e,"clear",void 0,void 0),r}function sd(e,t){return function(s,i){const n=this,a=n.__v_raw,u=tt(a),p=t?A1:e?F1:Bc;return!e&&Gr(u,"iterate",aa),a.forEach((d,h)=>s.call(i,p(d),p(h),n))}}function id(e,t,r){return function(...s){const i=this.__v_raw,n=tt(i),a=_l(n),u=e==="entries"||e===Symbol.iterator&&a,p=e==="keys"&&a,d=i[e](...s),h=r?A1:t?F1:Bc;return!t&&Gr(n,"iterate",p?Cm:aa),{next(){const{value:f,done:y}=d.next();return y?{value:f,done:y}:{value:u?[h(f[0]),h(f[1])]:h(f),done:y}},[Symbol.iterator](){return this}}}}function dn(e){return function(...t){return e==="delete"?!1:this}}function lj(){const e={get(n){return ed(this,n)},get size(){return rd(this)},has:td,add:i_,set:n_,delete:o_,clear:a_,forEach:sd(!1,!1)},t={get(n){return ed(this,n,!1,!0)},get size(){return rd(this)},has:td,add:i_,set:n_,delete:o_,clear:a_,forEach:sd(!1,!0)},r={get(n){return ed(this,n,!0)},get size(){return rd(this,!0)},has(n){return td.call(this,n,!0)},add:dn("add"),set:dn("set"),delete:dn("delete"),clear:dn("clear"),forEach:sd(!0,!1)},s={get(n){return ed(this,n,!0,!0)},get size(){return rd(this,!0)},has(n){return td.call(this,n,!0)},add:dn("add"),set:dn("set"),delete:dn("delete"),clear:dn("clear"),forEach:sd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=id(n,!1,!1),r[n]=id(n,!0,!1),t[n]=id(n,!1,!0),s[n]=id(n,!0,!0)}),[e,r,t,s]}const[uj,cj,pj,dj]=lj();function R1(e,t){const r=t?e?dj:pj:e?cj:uj;return(s,i,n)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(Ue(r,i)&&i in s?r:s,i,n)}const hj={get:R1(!1,!1)},fj={get:R1(!1,!0)},yj={get:R1(!0,!1)},M$=new WeakMap,O$=new WeakMap,E$=new WeakMap,mj=new WeakMap;function gj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vj(e){return e.__v_skip||!Object.isExtensible(e)?0:gj(U4(e))}function gi(e){return Pl(e)?e:C1(e,!1,I$,hj,M$)}function bj(e){return C1(e,!1,aj,fj,O$)}function T$(e){return C1(e,!0,oj,yj,E$)}function C1(e,t,r,s,i){if(!yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=i.get(e);if(n)return n;const a=vj(e);if(a===0)return e;const u=new Proxy(e,a===2?s:r);return i.set(e,u),u}function Sl(e){return Pl(e)?Sl(e.__v_raw):!!(e&&e.__v_isReactive)}function Pl(e){return!!(e&&e.__v_isReadonly)}function Nh(e){return!!(e&&e.__v_isShallow)}function j$(e){return Sl(e)||Pl(e)}function tt(e){const t=e&&e.__v_raw;return t?tt(t):e}function A$(e){return kh(e,"__v_skip",!0),e}const Bc=e=>yt(e)?gi(e):e,F1=e=>yt(e)?T$(e):e;function R$(e){Hn&&Cs&&(e=tt(e),S$(e.dep||(e.dep=E1())))}function C$(e,t){e=tt(e),e.dep&&Fm(e.dep)}function qt(e){return!!(e&&e.__v_isRef===!0)}function F$(e){return wj(e,!1)}function wj(e,t){return qt(e)?e:new _j(e,t)}class _j{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:tt(t),this._value=r?t:Bc(t)}get value(){return R$(this),this._value}set value(t){const r=this.__v_isShallow||Nh(t)||Pl(t);t=r?t:tt(t),qc(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Bc(t),C$(this))}}function Ke(e){return qt(e)?e.value:e}const Sj={get:(e,t,r)=>Ke(Reflect.get(e,t,r)),set:(e,t,r,s)=>{const i=e[t];return qt(i)&&!qt(r)?(i.value=r,!0):Reflect.set(e,t,r,s)}};function k$(e){return Sl(e)?e:new Proxy(e,Sj)}var P$;class xj{constructor(t,r,s,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[P$]=!1,this._dirty=!0,this.effect=new T1(t,()=>{this._dirty||(this._dirty=!0,C$(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const t=tt(this);return R$(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}P$="__v_isReadonly";function $j(e,t,r=!1){let s,i;const n=Ce(e);return n?(s=e,i=Ps):(s=e.get,i=e.set),new xj(s,i,n||!i,r)}function Wn(e,t,r,s){let i;try{i=s?e(...s):e()}catch(n){Af(n,t,r)}return i}function Ns(e,t,r,s){if(Ce(e)){const n=Wn(e,t,r,s);return n&&y$(n)&&n.catch(a=>{Af(a,t,r)}),n}const i=[];for(let n=0;n<e.length;n++)i.push(Ns(e[n],t,r,s));return i}function Af(e,t,r,s=!0){const i=t?t.vnode:null;if(t){let n=t.parent;const a=t.proxy,u=r;for(;n;){const d=n.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](e,a,u)===!1)return}n=n.parent}const p=t.appContext.config.errorHandler;if(p){Wn(p,null,10,[e,a,u]);return}}Ij(e,r,i,s)}function Ij(e,t,r,s=!0){console.error(e)}let Gc=!1,km=!1;const ir=[];let pi=0;const xl=[];let zi=null,Wo=0;const N$=Promise.resolve();let k1=null;function Mj(e){const t=k1||N$;return e?t.then(this?e.bind(this):e):t}function Oj(e){let t=pi+1,r=ir.length;for(;t<r;){const s=t+r>>>1;Jc(ir[s])<e?t=s+1:r=s}return t}function P1(e){(!ir.length||!ir.includes(e,Gc&&e.allowRecurse?pi+1:pi))&&(e.id==null?ir.push(e):ir.splice(Oj(e.id),0,e),L$())}function L$(){!Gc&&!km&&(km=!0,k1=N$.then(V$))}function Ej(e){const t=ir.indexOf(e);t>pi&&ir.splice(t,1)}function Tj(e){_e(e)?xl.push(...e):(!zi||!zi.includes(e,e.allowRecurse?Wo+1:Wo))&&xl.push(e),L$()}function l_(e,t=Gc?pi+1:0){for(;t<ir.length;t++){const r=ir[t];r&&r.pre&&(ir.splice(t,1),t--,r())}}function D$(e){if(xl.length){const t=[...new Set(xl)];if(xl.length=0,zi){zi.push(...t);return}for(zi=t,zi.sort((r,s)=>Jc(r)-Jc(s)),Wo=0;Wo<zi.length;Wo++)zi[Wo]();zi=null,Wo=0}}const Jc=e=>e.id==null?1/0:e.id,jj=(e,t)=>{const r=Jc(e)-Jc(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function V$(e){km=!1,Gc=!0,ir.sort(jj);const t=Ps;try{for(pi=0;pi<ir.length;pi++){const r=ir[pi];r&&r.active!==!1&&Wn(r,null,14)}}finally{pi=0,ir.length=0,D$(),Gc=!1,k1=null,(ir.length||xl.length)&&V$()}}function Aj(e,t,...r){if(e.isUnmounted)return;const s=e.vnode.props||lt;let i=r;const n=t.startsWith("update:"),a=n&&t.slice(7);if(a&&a in s){const h=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:y}=s[h]||lt;y&&(i=r.map(m=>m.trim())),f&&(i=r.map(Ph))}let u,p=s[u=Ny(t)]||s[u=Ny(kl(t))];!p&&n&&(p=s[u=Ny(Zl(t))]),p&&Ns(p,e,6,i);const d=s[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Ns(d,e,6,i)}}function z$(e,t,r=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const n=e.emits;let a={},u=!1;if(!Ce(e)){const p=d=>{const h=z$(d,t,!0);h&&(u=!0,wr(a,h))};!r&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!n&&!u?(yt(e)&&s.set(e,null),null):(_e(n)?n.forEach(p=>a[p]=null):wr(a,n),yt(e)&&s.set(e,a),a)}function Rf(e,t){return!e||!Ef(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ue(e,t[0].toLowerCase()+t.slice(1))||Ue(e,Zl(t))||Ue(e,t))}let hi=null,U$=null;function Lh(e){const t=hi;return hi=e,U$=e&&e.type.__scopeId||null,t}function Rj(e,t=hi,r){if(!t||e._n)return e;const s=(...i)=>{s._d&&g_(-1);const n=Lh(t),a=e(...i);return Lh(n),s._d&&g_(1),a};return s._n=!0,s._c=!0,s._d=!0,s}function Ly(e){const{type:t,vnode:r,proxy:s,withProxy:i,props:n,propsOptions:[a],slots:u,attrs:p,emit:d,render:h,renderCache:f,data:y,setupState:m,ctx:v,inheritAttrs:S}=e;let _,M;const P=Lh(e);try{if(r.shapeFlag&4){const z=i||s;_=ci(h.call(z,z,f,n,m,y,v)),M=p}else{const z=t;_=ci(z.length>1?z(n,{attrs:p,slots:u,emit:d}):z(n,null)),M=t.props?p:Cj(p)}}catch(z){$c.length=0,Af(z,e,1),_=qr(fa)}let N=_;if(M&&S!==!1){const z=Object.keys(M),{shapeFlag:V}=N;z.length&&V&7&&(a&&z.some(I1)&&(M=Fj(M,a)),N=Nl(N,M))}return r.dirs&&(N=Nl(N),N.dirs=N.dirs?N.dirs.concat(r.dirs):r.dirs),r.transition&&(N.transition=r.transition),_=N,Lh(P),_}const Cj=e=>{let t;for(const r in e)(r==="class"||r==="style"||Ef(r))&&((t||(t={}))[r]=e[r]);return t},Fj=(e,t)=>{const r={};for(const s in e)(!I1(s)||!(s.slice(9)in t))&&(r[s]=e[s]);return r};function kj(e,t,r){const{props:s,children:i,component:n}=e,{props:a,children:u,patchFlag:p}=t,d=n.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&p>=0){if(p&1024)return!0;if(p&16)return s?u_(s,a,d):!!a;if(p&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const y=h[f];if(a[y]!==s[y]&&!Rf(d,y))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:s===a?!1:s?a?u_(s,a,d):!0:!!a;return!1}function u_(e,t,r){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const n=s[i];if(t[n]!==e[n]&&!Rf(r,n))return!0}return!1}function Pj({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Nj=e=>e.__isSuspense;function Lj(e,t){t&&t.pendingBranch?_e(e)?t.effects.push(...e):t.effects.push(e):Tj(e)}function Dj(e,t){if(nr){let r=nr.provides;const s=nr.parent&&nr.parent.provides;s===r&&(r=nr.provides=Object.create(s)),r[e]=t}}function Dy(e,t,r=!1){const s=nr||hi;if(s){const i=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Ce(t)?t.call(s.proxy):t}}const c_={};function la(e,t,r){return q$(e,t,r)}function q$(e,t,{immediate:r,deep:s,flush:i,onTrack:n,onTrigger:a}=lt){const u=nr;let p,d=!1,h=!1;if(qt(e)?(p=()=>e.value,d=Nh(e)):Sl(e)?(p=()=>e,s=!0):_e(e)?(h=!0,d=e.some(M=>Sl(M)||Nh(M)),p=()=>e.map(M=>{if(qt(M))return M.value;if(Sl(M))return ta(M);if(Ce(M))return Wn(M,u,2)})):Ce(e)?t?p=()=>Wn(e,u,2):p=()=>{if(!(u&&u.isUnmounted))return f&&f(),Ns(e,u,3,[y])}:p=Ps,t&&s){const M=p;p=()=>ta(M())}let f,y=M=>{f=_.onStop=()=>{Wn(M,u,4)}};if(Wc)return y=Ps,t?r&&Ns(t,u,3,[p(),h?[]:void 0,y]):p(),Ps;let m=h?[]:c_;const v=()=>{if(!!_.active)if(t){const M=_.run();(s||d||(h?M.some((P,N)=>qc(P,m[N])):qc(M,m)))&&(f&&f(),Ns(t,u,3,[M,m===c_?void 0:m,y]),m=M)}else _.run()};v.allowRecurse=!!t;let S;i==="sync"?S=v:i==="post"?S=()=>Or(v,u&&u.suspense):(v.pre=!0,u&&(v.id=u.uid),S=()=>P1(v));const _=new T1(p,S);return t?r?v():m=_.run():i==="post"?Or(_.run.bind(_),u&&u.suspense):_.run(),()=>{_.stop(),u&&u.scope&&M1(u.scope.effects,_)}}function Vj(e,t,r){const s=this.proxy,i=Bt(e)?e.includes(".")?B$(s,e):()=>s[e]:e.bind(s,s);let n;Ce(t)?n=t:(n=t.handler,r=t);const a=nr;Ll(this);const u=q$(i,n.bind(s),r);return a?Ll(a):ua(),u}function B$(e,t){const r=t.split(".");return()=>{let s=e;for(let i=0;i<r.length&&s;i++)s=s[r[i]];return s}}function ta(e,t){if(!yt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),qt(e))ta(e.value,t);else if(_e(e))for(let r=0;r<e.length;r++)ta(e[r],t);else if(Ql(e)||_l(e))e.forEach(r=>{ta(r,t)});else if(g$(e))for(const r in e)ta(e[r],t);return e}function _p(e){return Ce(e)?{setup:e,name:e.name}:e}const Vd=e=>!!e.type.__asyncLoader,G$=e=>e.type.__isKeepAlive;function zj(e,t){J$(e,"a",t)}function Uj(e,t){J$(e,"da",t)}function J$(e,t,r=nr){const s=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Cf(t,s,r),r){let i=r.parent;for(;i&&i.parent;)G$(i.parent.vnode)&&qj(s,t,r,i),i=i.parent}}function qj(e,t,r,s){const i=Cf(t,e,s,!0);H$(()=>{M1(s[t],i)},r)}function Cf(e,t,r=nr,s=!1){if(r){const i=r[e]||(r[e]=[]),n=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Yl(),Ll(r);const u=Ns(t,r,e,a);return ua(),Xl(),u});return s?i.unshift(n):i.push(n),n}}const nn=e=>(t,r=nr)=>(!Wc||e==="sp")&&Cf(e,t,r),Bj=nn("bm"),Gj=nn("m"),Jj=nn("bu"),Hj=nn("u"),Wj=nn("bum"),H$=nn("um"),Kj=nn("sp"),Qj=nn("rtg"),Zj=nn("rtc");function Yj(e,t=nr){Cf("ec",e,t)}function Hi(e,t){const r=hi;if(r===null)return e;const s=kf(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[a,u,p,d=lt]=t[n];Ce(a)&&(a={mounted:a,updated:a}),a.deep&&ta(u),i.push({dir:a,instance:s,value:u,oldValue:void 0,arg:p,modifiers:d})}return e}function mo(e,t,r,s){const i=e.dirs,n=t&&t.dirs;for(let a=0;a<i.length;a++){const u=i[a];n&&(u.oldValue=n[a].value);let p=u.dir[s];p&&(Yl(),Ns(p,r,8,[e.el,u,e,t]),Xl())}}const Xj=Symbol();function Dh(e,t,r,s){let i;const n=r&&r[s];if(_e(e)||Bt(e)){i=new Array(e.length);for(let a=0,u=e.length;a<u;a++)i[a]=t(e[a],a,void 0,n&&n[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,n&&n[a])}else if(yt(e))if(e[Symbol.iterator])i=Array.from(e,(a,u)=>t(a,u,void 0,n&&n[u]));else{const a=Object.keys(e);i=new Array(a.length);for(let u=0,p=a.length;u<p;u++){const d=a[u];i[u]=t(e[d],d,u,n&&n[u])}}else i=[];return r&&(r[s]=i),i}const Pm=e=>e?o3(e)?kf(e)||e.proxy:Pm(e.parent):null,Vh=wr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pm(e.parent),$root:e=>Pm(e.root),$emit:e=>e.emit,$options:e=>N1(e),$forceUpdate:e=>e.f||(e.f=()=>P1(e.update)),$nextTick:e=>e.n||(e.n=Mj.bind(e.proxy)),$watch:e=>Vj.bind(e)}),eA={get({_:e},t){const{ctx:r,setupState:s,data:i,props:n,accessCache:a,type:u,appContext:p}=e;let d;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return i[t];case 4:return r[t];case 3:return n[t]}else{if(s!==lt&&Ue(s,t))return a[t]=1,s[t];if(i!==lt&&Ue(i,t))return a[t]=2,i[t];if((d=e.propsOptions[0])&&Ue(d,t))return a[t]=3,n[t];if(r!==lt&&Ue(r,t))return a[t]=4,r[t];Nm&&(a[t]=0)}}const h=Vh[t];let f,y;if(h)return t==="$attrs"&&Gr(e,"get",t),h(e);if((f=u.__cssModules)&&(f=f[t]))return f;if(r!==lt&&Ue(r,t))return a[t]=4,r[t];if(y=p.config.globalProperties,Ue(y,t))return y[t]},set({_:e},t,r){const{data:s,setupState:i,ctx:n}=e;return i!==lt&&Ue(i,t)?(i[t]=r,!0):s!==lt&&Ue(s,t)?(s[t]=r,!0):Ue(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:s,appContext:i,propsOptions:n}},a){let u;return!!r[a]||e!==lt&&Ue(e,a)||t!==lt&&Ue(t,a)||(u=n[0])&&Ue(u,a)||Ue(s,a)||Ue(Vh,a)||Ue(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Ue(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let Nm=!0;function tA(e){const t=N1(e),r=e.proxy,s=e.ctx;Nm=!1,t.beforeCreate&&p_(t.beforeCreate,e,"bc");const{data:i,computed:n,methods:a,watch:u,provide:p,inject:d,created:h,beforeMount:f,mounted:y,beforeUpdate:m,updated:v,activated:S,deactivated:_,beforeDestroy:M,beforeUnmount:P,destroyed:N,unmounted:z,render:V,renderTracked:H,renderTriggered:be,errorCaptured:le,serverPrefetch:he,expose:ue,inheritAttrs:we,components:Ee,directives:Pe,filters:fe}=t;if(d&&rA(d,s,null,e.appContext.config.unwrapInjectedRef),a)for(const $e in a){const Ve=a[$e];Ce(Ve)&&(s[$e]=Ve.bind(r))}if(i){const $e=i.call(r,r);yt($e)&&(e.data=gi($e))}if(Nm=!0,n)for(const $e in n){const Ve=n[$e],Jt=Ce(Ve)?Ve.bind(r,r):Ce(Ve.get)?Ve.get.bind(r,r):Ps,Dt=!Ce(Ve)&&Ce(Ve.set)?Ve.set.bind(r):Ps,Us=ya({get:Jt,set:Dt});Object.defineProperty(s,$e,{enumerable:!0,configurable:!0,get:()=>Us.value,set:Kr=>Us.value=Kr})}if(u)for(const $e in u)W$(u[$e],s,r,$e);if(p){const $e=Ce(p)?p.call(r):p;Reflect.ownKeys($e).forEach(Ve=>{Dj(Ve,$e[Ve])})}h&&p_(h,e,"c");function st($e,Ve){_e(Ve)?Ve.forEach(Jt=>$e(Jt.bind(r))):Ve&&$e(Ve.bind(r))}if(st(Bj,f),st(Gj,y),st(Jj,m),st(Hj,v),st(zj,S),st(Uj,_),st(Yj,le),st(Zj,H),st(Qj,be),st(Wj,P),st(H$,z),st(Kj,he),_e(ue))if(ue.length){const $e=e.exposed||(e.exposed={});ue.forEach(Ve=>{Object.defineProperty($e,Ve,{get:()=>r[Ve],set:Jt=>r[Ve]=Jt})})}else e.exposed||(e.exposed={});V&&e.render===Ps&&(e.render=V),we!=null&&(e.inheritAttrs=we),Ee&&(e.components=Ee),Pe&&(e.directives=Pe)}function rA(e,t,r=Ps,s=!1){_e(e)&&(e=Lm(e));for(const i in e){const n=e[i];let a;yt(n)?"default"in n?a=Dy(n.from||i,n.default,!0):a=Dy(n.from||i):a=Dy(n),qt(a)&&s?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[i]=a}}function p_(e,t,r){Ns(_e(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,r)}function W$(e,t,r,s){const i=s.includes(".")?B$(r,s):()=>r[s];if(Bt(e)){const n=t[e];Ce(n)&&la(i,n)}else if(Ce(e))la(i,e.bind(r));else if(yt(e))if(_e(e))e.forEach(n=>W$(n,t,r,s));else{const n=Ce(e.handler)?e.handler.bind(r):t[e.handler];Ce(n)&&la(i,n,e)}}function N1(e){const t=e.type,{mixins:r,extends:s}=t,{mixins:i,optionsCache:n,config:{optionMergeStrategies:a}}=e.appContext,u=n.get(t);let p;return u?p=u:!i.length&&!r&&!s?p=t:(p={},i.length&&i.forEach(d=>zh(p,d,a,!0)),zh(p,t,a)),yt(t)&&n.set(t,p),p}function zh(e,t,r,s=!1){const{mixins:i,extends:n}=t;n&&zh(e,n,r,!0),i&&i.forEach(a=>zh(e,a,r,!0));for(const a in t)if(!(s&&a==="expose")){const u=sA[a]||r&&r[a];e[a]=u?u(e[a],t[a]):t[a]}return e}const sA={data:d_,props:wo,emits:wo,methods:wo,computed:wo,beforeCreate:hr,created:hr,beforeMount:hr,mounted:hr,beforeUpdate:hr,updated:hr,beforeDestroy:hr,beforeUnmount:hr,destroyed:hr,unmounted:hr,activated:hr,deactivated:hr,errorCaptured:hr,serverPrefetch:hr,components:wo,directives:wo,watch:nA,provide:d_,inject:iA};function d_(e,t){return t?e?function(){return wr(Ce(e)?e.call(this,this):e,Ce(t)?t.call(this,this):t)}:t:e}function iA(e,t){return wo(Lm(e),Lm(t))}function Lm(e){if(_e(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function hr(e,t){return e?[...new Set([].concat(e,t))]:t}function wo(e,t){return e?wr(wr(Object.create(null),e),t):t}function nA(e,t){if(!e)return t;if(!t)return e;const r=wr(Object.create(null),e);for(const s in t)r[s]=hr(e[s],t[s]);return r}function oA(e,t,r,s=!1){const i={},n={};kh(n,Ff,1),e.propsDefaults=Object.create(null),K$(e,t,i,n);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=s?i:bj(i):e.type.props?e.props=i:e.props=n,e.attrs=n}function aA(e,t,r,s){const{props:i,attrs:n,vnode:{patchFlag:a}}=e,u=tt(i),[p]=e.propsOptions;let d=!1;if((s||a>0)&&!(a&16)){if(a&8){const h=e.vnode.dynamicProps;for(let f=0;f<h.length;f++){let y=h[f];if(Rf(e.emitsOptions,y))continue;const m=t[y];if(p)if(Ue(n,y))m!==n[y]&&(n[y]=m,d=!0);else{const v=kl(y);i[v]=Dm(p,u,v,m,e,!1)}else m!==n[y]&&(n[y]=m,d=!0)}}}else{K$(e,t,i,n)&&(d=!0);let h;for(const f in u)(!t||!Ue(t,f)&&((h=Zl(f))===f||!Ue(t,h)))&&(p?r&&(r[f]!==void 0||r[h]!==void 0)&&(i[f]=Dm(p,u,f,void 0,e,!0)):delete i[f]);if(n!==u)for(const f in n)(!t||!Ue(t,f)&&!0)&&(delete n[f],d=!0)}d&&Yi(e,"set","$attrs")}function K$(e,t,r,s){const[i,n]=e.propsOptions;let a=!1,u;if(t)for(let p in t){if(Ld(p))continue;const d=t[p];let h;i&&Ue(i,h=kl(p))?!n||!n.includes(h)?r[h]=d:(u||(u={}))[h]=d:Rf(e.emitsOptions,p)||(!(p in s)||d!==s[p])&&(s[p]=d,a=!0)}if(n){const p=tt(r),d=u||lt;for(let h=0;h<n.length;h++){const f=n[h];r[f]=Dm(i,p,f,d[f],e,!Ue(d,f))}}return a}function Dm(e,t,r,s,i,n){const a=e[r];if(a!=null){const u=Ue(a,"default");if(u&&s===void 0){const p=a.default;if(a.type!==Function&&Ce(p)){const{propsDefaults:d}=i;r in d?s=d[r]:(Ll(i),s=d[r]=p.call(null,t),ua())}else s=p}a[0]&&(n&&!u?s=!1:a[1]&&(s===""||s===Zl(r))&&(s=!0))}return s}function Q$(e,t,r=!1){const s=t.propsCache,i=s.get(e);if(i)return i;const n=e.props,a={},u=[];let p=!1;if(!Ce(e)){const h=f=>{p=!0;const[y,m]=Q$(f,t,!0);wr(a,y),m&&u.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!n&&!p)return yt(e)&&s.set(e,wl),wl;if(_e(n))for(let h=0;h<n.length;h++){const f=kl(n[h]);h_(f)&&(a[f]=lt)}else if(n)for(const h in n){const f=kl(h);if(h_(f)){const y=n[h],m=a[f]=_e(y)||Ce(y)?{type:y}:y;if(m){const v=m_(Boolean,m.type),S=m_(String,m.type);m[0]=v>-1,m[1]=S<0||v<S,(v>-1||Ue(m,"default"))&&u.push(f)}}}const d=[a,u];return yt(e)&&s.set(e,d),d}function h_(e){return e[0]!=="$"}function f_(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function y_(e,t){return f_(e)===f_(t)}function m_(e,t){return _e(t)?t.findIndex(r=>y_(r,e)):Ce(t)&&y_(t,e)?0:-1}const Z$=e=>e[0]==="_"||e==="$stable",L1=e=>_e(e)?e.map(ci):[ci(e)],lA=(e,t,r)=>{if(t._n)return t;const s=Rj((...i)=>L1(t(...i)),r);return s._c=!1,s},Y$=(e,t,r)=>{const s=e._ctx;for(const i in e){if(Z$(i))continue;const n=e[i];if(Ce(n))t[i]=lA(i,n,s);else if(n!=null){const a=L1(n);t[i]=()=>a}}},X$=(e,t)=>{const r=L1(t);e.slots.default=()=>r},uA=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=tt(t),kh(t,"_",r)):Y$(t,e.slots={})}else e.slots={},t&&X$(e,t);kh(e.slots,Ff,1)},cA=(e,t,r)=>{const{vnode:s,slots:i}=e;let n=!0,a=lt;if(s.shapeFlag&32){const u=t._;u?r&&u===1?n=!1:(wr(i,t),!r&&u===1&&delete i._):(n=!t.$stable,Y$(t,i)),a=t}else t&&(X$(e,t),a={default:1});if(n)for(const u in i)!Z$(u)&&!(u in a)&&delete i[u]};function e3(){return{app:null,config:{isNativeTag:D4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pA=0;function dA(e,t){return function(s,i=null){Ce(s)||(s=Object.assign({},s)),i!=null&&!yt(i)&&(i=null);const n=e3(),a=new Set;let u=!1;const p=n.app={_uid:pA++,_component:s,_props:i,_container:null,_context:n,_instance:null,version:jA,get config(){return n.config},set config(d){},use(d,...h){return a.has(d)||(d&&Ce(d.install)?(a.add(d),d.install(p,...h)):Ce(d)&&(a.add(d),d(p,...h))),p},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),p},component(d,h){return h?(n.components[d]=h,p):n.components[d]},directive(d,h){return h?(n.directives[d]=h,p):n.directives[d]},mount(d,h,f){if(!u){const y=qr(s,i);return y.appContext=n,h&&t?t(y,d):e(y,d,f),u=!0,p._container=d,d.__vue_app__=p,kf(y.component)||y.component.proxy}},unmount(){u&&(e(null,p._container),delete p._container.__vue_app__)},provide(d,h){return n.provides[d]=h,p}};return p}}function Vm(e,t,r,s,i=!1){if(_e(e)){e.forEach((y,m)=>Vm(y,t&&(_e(t)?t[m]:t),r,s,i));return}if(Vd(s)&&!i)return;const n=s.shapeFlag&4?kf(s.component)||s.component.proxy:s.el,a=i?null:n,{i:u,r:p}=e,d=t&&t.r,h=u.refs===lt?u.refs={}:u.refs,f=u.setupState;if(d!=null&&d!==p&&(Bt(d)?(h[d]=null,Ue(f,d)&&(f[d]=null)):qt(d)&&(d.value=null)),Ce(p))Wn(p,u,12,[a,h]);else{const y=Bt(p),m=qt(p);if(y||m){const v=()=>{if(e.f){const S=y?h[p]:p.value;i?_e(S)&&M1(S,n):_e(S)?S.includes(n)||S.push(n):y?(h[p]=[n],Ue(f,p)&&(f[p]=h[p])):(p.value=[n],e.k&&(h[e.k]=p.value))}else y?(h[p]=a,Ue(f,p)&&(f[p]=a)):m&&(p.value=a,e.k&&(h[e.k]=a))};a?(v.id=-1,Or(v,r)):v()}}}const Or=Lj;function hA(e){return fA(e)}function fA(e,t){const r=G4();r.__VUE__=!0;const{insert:s,remove:i,patchProp:n,createElement:a,createText:u,createComment:p,setText:d,setElementText:h,parentNode:f,nextSibling:y,setScopeId:m=Ps,cloneNode:v,insertStaticContent:S}=e,_=(x,$,O,L=null,U=null,Q=null,X=!1,W=null,Z=!!$.dynamicChildren)=>{if(x===$)return;x&&!_u(x,$)&&(L=_i(x),lr(x,U,Q,!0),x=null),$.patchFlag===-2&&(Z=!1,$.dynamicChildren=null);const{type:B,ref:pe,shapeFlag:ne}=$;switch(B){case D1:M(x,$,O,L);break;case fa:P(x,$,O,L);break;case Vy:x==null&&N($,O,L,X);break;case Ur:Pe(x,$,O,L,U,Q,X,W,Z);break;default:ne&1?H(x,$,O,L,U,Q,X,W,Z):ne&6?fe(x,$,O,L,U,Q,X,W,Z):(ne&64||ne&128)&&B.process(x,$,O,L,U,Q,X,W,Z,cr)}pe!=null&&U&&Vm(pe,x&&x.ref,Q,$||x,!$)},M=(x,$,O,L)=>{if(x==null)s($.el=u($.children),O,L);else{const U=$.el=x.el;$.children!==x.children&&d(U,$.children)}},P=(x,$,O,L)=>{x==null?s($.el=p($.children||""),O,L):$.el=x.el},N=(x,$,O,L)=>{[x.el,x.anchor]=S(x.children,$,O,L,x.el,x.anchor)},z=({el:x,anchor:$},O,L)=>{let U;for(;x&&x!==$;)U=y(x),s(x,O,L),x=U;s($,O,L)},V=({el:x,anchor:$})=>{let O;for(;x&&x!==$;)O=y(x),i(x),x=O;i($)},H=(x,$,O,L,U,Q,X,W,Z)=>{X=X||$.type==="svg",x==null?be($,O,L,U,Q,X,W,Z):ue(x,$,U,Q,X,W,Z)},be=(x,$,O,L,U,Q,X,W)=>{let Z,B;const{type:pe,props:ne,shapeFlag:ee,transition:ge,patchFlag:Ie,dirs:Ge}=x;if(x.el&&v!==void 0&&Ie===-1)Z=x.el=v(x.el);else{if(Z=x.el=a(x.type,Q,ne&&ne.is,ne),ee&8?h(Z,x.children):ee&16&&he(x.children,Z,null,L,U,Q&&pe!=="foreignObject",X,W),Ge&&mo(x,null,L,"created"),ne){for(const Ze in ne)Ze!=="value"&&!Ld(Ze)&&n(Z,Ze,null,ne[Ze],Q,x.children,L,U,ur);"value"in ne&&n(Z,"value",null,ne.value),(B=ne.onVnodeBeforeMount)&&Gs(B,L,x)}le(Z,x,x.scopeId,X,L)}Ge&&mo(x,null,L,"beforeMount");const Je=(!U||U&&!U.pendingBranch)&&ge&&!ge.persisted;Je&&ge.beforeEnter(Z),s(Z,$,O),((B=ne&&ne.onVnodeMounted)||Je||Ge)&&Or(()=>{B&&Gs(B,L,x),Je&&ge.enter(Z),Ge&&mo(x,null,L,"mounted")},U)},le=(x,$,O,L,U)=>{if(O&&m(x,O),L)for(let Q=0;Q<L.length;Q++)m(x,L[Q]);if(U){let Q=U.subTree;if($===Q){const X=U.vnode;le(x,X,X.scopeId,X.slotScopeIds,U.parent)}}},he=(x,$,O,L,U,Q,X,W,Z=0)=>{for(let B=Z;B<x.length;B++){const pe=x[B]=W?Ln(x[B]):ci(x[B]);_(null,pe,$,O,L,U,Q,X,W)}},ue=(x,$,O,L,U,Q,X)=>{const W=$.el=x.el;let{patchFlag:Z,dynamicChildren:B,dirs:pe}=$;Z|=x.patchFlag&16;const ne=x.props||lt,ee=$.props||lt;let ge;O&&go(O,!1),(ge=ee.onVnodeBeforeUpdate)&&Gs(ge,O,$,x),pe&&mo($,x,O,"beforeUpdate"),O&&go(O,!0);const Ie=U&&$.type!=="foreignObject";if(B?we(x.dynamicChildren,B,W,O,L,Ie,Q):X||Jt(x,$,W,null,O,L,Ie,Q,!1),Z>0){if(Z&16)Ee(W,$,ne,ee,O,L,U);else if(Z&2&&ne.class!==ee.class&&n(W,"class",null,ee.class,U),Z&4&&n(W,"style",ne.style,ee.style,U),Z&8){const Ge=$.dynamicProps;for(let Je=0;Je<Ge.length;Je++){const Ze=Ge[Je],pr=ne[Ze],qs=ee[Ze];(qs!==pr||Ze==="value")&&n(W,Ze,pr,qs,U,x.children,O,L,ur)}}Z&1&&x.children!==$.children&&h(W,$.children)}else!X&&B==null&&Ee(W,$,ne,ee,O,L,U);((ge=ee.onVnodeUpdated)||pe)&&Or(()=>{ge&&Gs(ge,O,$,x),pe&&mo($,x,O,"updated")},L)},we=(x,$,O,L,U,Q,X)=>{for(let W=0;W<$.length;W++){const Z=x[W],B=$[W],pe=Z.el&&(Z.type===Ur||!_u(Z,B)||Z.shapeFlag&70)?f(Z.el):O;_(Z,B,pe,null,L,U,Q,X,!0)}},Ee=(x,$,O,L,U,Q,X)=>{if(O!==L){for(const W in L){if(Ld(W))continue;const Z=L[W],B=O[W];Z!==B&&W!=="value"&&n(x,W,B,Z,X,$.children,U,Q,ur)}if(O!==lt)for(const W in O)!Ld(W)&&!(W in L)&&n(x,W,O[W],null,X,$.children,U,Q,ur);"value"in L&&n(x,"value",O.value,L.value)}},Pe=(x,$,O,L,U,Q,X,W,Z)=>{const B=$.el=x?x.el:u(""),pe=$.anchor=x?x.anchor:u("");let{patchFlag:ne,dynamicChildren:ee,slotScopeIds:ge}=$;ge&&(W=W?W.concat(ge):ge),x==null?(s(B,O,L),s(pe,O,L),he($.children,O,pe,U,Q,X,W,Z)):ne>0&&ne&64&&ee&&x.dynamicChildren?(we(x.dynamicChildren,ee,O,U,Q,X,W),($.key!=null||U&&$===U.subTree)&&t3(x,$,!0)):Jt(x,$,O,pe,U,Q,X,W,Z)},fe=(x,$,O,L,U,Q,X,W,Z)=>{$.slotScopeIds=W,x==null?$.shapeFlag&512?U.ctx.activate($,O,L,X,Z):ct($,O,L,U,Q,X,Z):st(x,$,Z)},ct=(x,$,O,L,U,Q,X)=>{const W=x.component=$A(x,L,U);if(G$(x)&&(W.ctx.renderer=cr),IA(W),W.asyncDep){if(U&&U.registerDep(W,$e),!x.el){const Z=W.subTree=qr(fa);P(null,Z,$,O)}return}$e(W,x,$,O,U,Q,X)},st=(x,$,O)=>{const L=$.component=x.component;if(kj(x,$,O))if(L.asyncDep&&!L.asyncResolved){Ve(L,$,O);return}else L.next=$,Ej(L.update),L.update();else $.el=x.el,L.vnode=$},$e=(x,$,O,L,U,Q,X)=>{const W=()=>{if(x.isMounted){let{next:pe,bu:ne,u:ee,parent:ge,vnode:Ie}=x,Ge=pe,Je;go(x,!1),pe?(pe.el=Ie.el,Ve(x,pe,X)):pe=Ie,ne&&Dd(ne),(Je=pe.props&&pe.props.onVnodeBeforeUpdate)&&Gs(Je,ge,pe,Ie),go(x,!0);const Ze=Ly(x),pr=x.subTree;x.subTree=Ze,_(pr,Ze,f(pr.el),_i(pr),x,U,Q),pe.el=Ze.el,Ge===null&&Pj(x,Ze.el),ee&&Or(ee,U),(Je=pe.props&&pe.props.onVnodeUpdated)&&Or(()=>Gs(Je,ge,pe,Ie),U)}else{let pe;const{el:ne,props:ee}=$,{bm:ge,m:Ie,parent:Ge}=x,Je=Vd($);if(go(x,!1),ge&&Dd(ge),!Je&&(pe=ee&&ee.onVnodeBeforeMount)&&Gs(pe,Ge,$),go(x,!0),ne&&pn){const Ze=()=>{x.subTree=Ly(x),pn(ne,x.subTree,x,U,null)};Je?$.type.__asyncLoader().then(()=>!x.isUnmounted&&Ze()):Ze()}else{const Ze=x.subTree=Ly(x);_(null,Ze,O,L,x,U,Q),$.el=Ze.el}if(Ie&&Or(Ie,U),!Je&&(pe=ee&&ee.onVnodeMounted)){const Ze=$;Or(()=>Gs(pe,Ge,Ze),U)}($.shapeFlag&256||Ge&&Vd(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&x.a&&Or(x.a,U),x.isMounted=!0,$=O=L=null}},Z=x.effect=new T1(W,()=>P1(B),x.scope),B=x.update=()=>Z.run();B.id=x.uid,go(x,!0),B()},Ve=(x,$,O)=>{$.component=x;const L=x.vnode.props;x.vnode=$,x.next=null,aA(x,$.props,L,O),cA(x,$.children,O),Yl(),l_(),Xl()},Jt=(x,$,O,L,U,Q,X,W,Z=!1)=>{const B=x&&x.children,pe=x?x.shapeFlag:0,ne=$.children,{patchFlag:ee,shapeFlag:ge}=$;if(ee>0){if(ee&128){Us(B,ne,O,L,U,Q,X,W,Z);return}else if(ee&256){Dt(B,ne,O,L,U,Q,X,W,Z);return}}ge&8?(pe&16&&ur(B,U,Q),ne!==B&&h(O,ne)):pe&16?ge&16?Us(B,ne,O,L,U,Q,X,W,Z):ur(B,U,Q,!0):(pe&8&&h(O,""),ge&16&&he(ne,O,L,U,Q,X,W,Z))},Dt=(x,$,O,L,U,Q,X,W,Z)=>{x=x||wl,$=$||wl;const B=x.length,pe=$.length,ne=Math.min(B,pe);let ee;for(ee=0;ee<ne;ee++){const ge=$[ee]=Z?Ln($[ee]):ci($[ee]);_(x[ee],ge,O,null,U,Q,X,W,Z)}B>pe?ur(x,U,Q,!0,!1,ne):he($,O,L,U,Q,X,W,Z,ne)},Us=(x,$,O,L,U,Q,X,W,Z)=>{let B=0;const pe=$.length;let ne=x.length-1,ee=pe-1;for(;B<=ne&&B<=ee;){const ge=x[B],Ie=$[B]=Z?Ln($[B]):ci($[B]);if(_u(ge,Ie))_(ge,Ie,O,null,U,Q,X,W,Z);else break;B++}for(;B<=ne&&B<=ee;){const ge=x[ne],Ie=$[ee]=Z?Ln($[ee]):ci($[ee]);if(_u(ge,Ie))_(ge,Ie,O,null,U,Q,X,W,Z);else break;ne--,ee--}if(B>ne){if(B<=ee){const ge=ee+1,Ie=ge<pe?$[ge].el:L;for(;B<=ee;)_(null,$[B]=Z?Ln($[B]):ci($[B]),O,Ie,U,Q,X,W,Z),B++}}else if(B>ee)for(;B<=ne;)lr(x[B],U,Q,!0),B++;else{const ge=B,Ie=B,Ge=new Map;for(B=Ie;B<=ee;B++){const Ht=$[B]=Z?Ln($[B]):ci($[B]);Ht.key!=null&&Ge.set(Ht.key,B)}let Je,Ze=0;const pr=ee-Ie+1;let qs=!1,La=0;const Si=new Array(pr);for(B=0;B<pr;B++)Si[B]=0;for(B=ge;B<=ne;B++){const Ht=x[B];if(Ze>=pr){lr(Ht,U,Q,!0);continue}let dr;if(Ht.key!=null)dr=Ge.get(Ht.key);else for(Je=Ie;Je<=ee;Je++)if(Si[Je-Ie]===0&&_u(Ht,$[Je])){dr=Je;break}dr===void 0?lr(Ht,U,Q,!0):(Si[dr-Ie]=B+1,dr>=La?La=dr:qs=!0,_(Ht,$[dr],O,null,U,Q,X,W,Z),Ze++)}const Da=qs?yA(Si):wl;for(Je=Da.length-1,B=pr-1;B>=0;B--){const Ht=Ie+B,dr=$[Ht],Va=Ht+1<pe?$[Ht+1].el:L;Si[B]===0?_(null,dr,O,Va,U,Q,X,W,Z):qs&&(Je<0||B!==Da[Je]?Kr(dr,O,Va,2):Je--)}}},Kr=(x,$,O,L,U=null)=>{const{el:Q,type:X,transition:W,children:Z,shapeFlag:B}=x;if(B&6){Kr(x.component.subTree,$,O,L);return}if(B&128){x.suspense.move($,O,L);return}if(B&64){X.move(x,$,O,cr);return}if(X===Ur){s(Q,$,O);for(let ne=0;ne<Z.length;ne++)Kr(Z[ne],$,O,L);s(x.anchor,$,O);return}if(X===Vy){z(x,$,O);return}if(L!==2&&B&1&&W)if(L===0)W.beforeEnter(Q),s(Q,$,O),Or(()=>W.enter(Q),U);else{const{leave:ne,delayLeave:ee,afterLeave:ge}=W,Ie=()=>s(Q,$,O),Ge=()=>{ne(Q,()=>{Ie(),ge&&ge()})};ee?ee(Q,Ie,Ge):Ge()}else s(Q,$,O)},lr=(x,$,O,L=!1,U=!1)=>{const{type:Q,props:X,ref:W,children:Z,dynamicChildren:B,shapeFlag:pe,patchFlag:ne,dirs:ee}=x;if(W!=null&&Vm(W,null,O,x,!0),pe&256){$.ctx.deactivate(x);return}const ge=pe&1&&ee,Ie=!Vd(x);let Ge;if(Ie&&(Ge=X&&X.onVnodeBeforeUnmount)&&Gs(Ge,$,x),pe&6)ho(x.component,O,L);else{if(pe&128){x.suspense.unmount(O,L);return}ge&&mo(x,null,$,"beforeUnmount"),pe&64?x.type.remove(x,$,O,U,cr,L):B&&(Q!==Ur||ne>0&&ne&64)?ur(B,$,O,!1,!0):(Q===Ur&&ne&384||!U&&pe&16)&&ur(Z,$,O),L&&cn(x)}(Ie&&(Ge=X&&X.onVnodeUnmounted)||ge)&&Or(()=>{Ge&&Gs(Ge,$,x),ge&&mo(x,null,$,"unmounted")},O)},cn=x=>{const{type:$,el:O,anchor:L,transition:U}=x;if($===Ur){po(O,L);return}if($===Vy){V(x);return}const Q=()=>{i(O),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(x.shapeFlag&1&&U&&!U.persisted){const{leave:X,delayLeave:W}=U,Z=()=>X(O,Q);W?W(x.el,Q,Z):Z()}else Q()},po=(x,$)=>{let O;for(;x!==$;)O=y(x),i(x),x=O;i($)},ho=(x,$,O)=>{const{bum:L,scope:U,update:Q,subTree:X,um:W}=x;L&&Dd(L),U.stop(),Q&&(Q.active=!1,lr(X,x,$,O)),W&&Or(W,$),Or(()=>{x.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},ur=(x,$,O,L=!1,U=!1,Q=0)=>{for(let X=Q;X<x.length;X++)lr(x[X],$,O,L,U)},_i=x=>x.shapeFlag&6?_i(x.component.subTree):x.shapeFlag&128?x.suspense.next():y(x.anchor||x.el),fo=(x,$,O)=>{x==null?$._vnode&&lr($._vnode,null,null,!0):_($._vnode||null,x,$,null,null,null,O),l_(),D$(),$._vnode=x},cr={p:_,um:lr,m:Kr,r:cn,mt:ct,mc:he,pc:Jt,pbc:we,n:_i,o:e};let yo,pn;return t&&([yo,pn]=t(cr)),{render:fo,hydrate:yo,createApp:dA(fo,yo)}}function go({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function t3(e,t,r=!1){const s=e.children,i=t.children;if(_e(s)&&_e(i))for(let n=0;n<s.length;n++){const a=s[n];let u=i[n];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[n]=Ln(i[n]),u.el=a.el),r||t3(a,u))}}function yA(e){const t=e.slice(),r=[0];let s,i,n,a,u;const p=e.length;for(s=0;s<p;s++){const d=e[s];if(d!==0){if(i=r[r.length-1],e[i]<d){t[s]=i,r.push(s);continue}for(n=0,a=r.length-1;n<a;)u=n+a>>1,e[r[u]]<d?n=u+1:a=u;d<e[r[n]]&&(n>0&&(t[s]=r[n-1]),r[n]=s)}}for(n=r.length,a=r[n-1];n-- >0;)r[n]=a,a=t[a];return r}const mA=e=>e.__isTeleport,Ur=Symbol(void 0),D1=Symbol(void 0),fa=Symbol(void 0),Vy=Symbol(void 0),$c=[];let Fs=null;function Yt(e=!1){$c.push(Fs=e?null:[])}function gA(){$c.pop(),Fs=$c[$c.length-1]||null}let Hc=1;function g_(e){Hc+=e}function r3(e){return e.dynamicChildren=Hc>0?Fs||wl:null,gA(),Hc>0&&Fs&&Fs.push(e),e}function vr(e,t,r,s,i,n){return r3(se(e,t,r,s,i,n,!0))}function s3(e,t,r,s,i){return r3(qr(e,t,r,s,i,!0))}function vA(e){return e?e.__v_isVNode===!0:!1}function _u(e,t){return e.type===t.type&&e.key===t.key}const Ff="__vInternal",i3=({key:e})=>e!=null?e:null,zd=({ref:e,ref_key:t,ref_for:r})=>e!=null?Bt(e)||qt(e)||Ce(e)?{i:hi,r:e,k:t,f:!!r}:e:null;function se(e,t=null,r=null,s=0,i=null,n=e===Ur?0:1,a=!1,u=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&i3(t),ref:t&&zd(t),scopeId:U$,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null};return u?(z1(p,r),n&128&&e.normalize(p)):r&&(p.shapeFlag|=Bt(r)?8:16),Hc>0&&!a&&Fs&&(p.patchFlag>0||n&6)&&p.patchFlag!==32&&Fs.push(p),p}const qr=bA;function bA(e,t=null,r=null,s=0,i=null,n=!1){if((!e||e===Xj)&&(e=fa),vA(e)){const u=Nl(e,t,!0);return r&&z1(u,r),Hc>0&&!n&&Fs&&(u.shapeFlag&6?Fs[Fs.indexOf(e)]=u:Fs.push(u)),u.patchFlag|=-2,u}if(TA(e)&&(e=e.__vccOpts),t){t=wA(t);let{class:u,style:p}=t;u&&!Bt(u)&&(t.class=Kl(u)),yt(p)&&(j$(p)&&!_e(p)&&(p=wr({},p)),t.style=x1(p))}const a=Bt(e)?1:Nj(e)?128:mA(e)?64:yt(e)?4:Ce(e)?2:0;return se(e,t,r,s,i,a,n,!0)}function wA(e){return e?j$(e)||Ff in e?wr({},e):e:null}function Nl(e,t,r=!1){const{props:s,ref:i,patchFlag:n,children:a}=e,u=t?_A(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&i3(u),ref:t&&t.ref?r&&i?_e(i)?i.concat(zd(t)):[i,zd(t)]:zd(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ur?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nl(e.ssContent),ssFallback:e.ssFallback&&Nl(e.ssFallback),el:e.el,anchor:e.anchor}}function V1(e=" ",t=0){return qr(D1,null,e,t)}function n3(e="",t=!1){return t?(Yt(),s3(fa,null,e)):qr(fa,null,e)}function ci(e){return e==null||typeof e=="boolean"?qr(fa):_e(e)?qr(Ur,null,e.slice()):typeof e=="object"?Ln(e):qr(D1,null,String(e))}function Ln(e){return e.el===null||e.memo?e:Nl(e)}function z1(e,t){let r=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(_e(t))r=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),z1(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Ff in t)?t._ctx=hi:i===3&&hi&&(hi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ce(t)?(t={default:t,_ctx:hi},r=32):(t=String(t),s&64?(r=16,t=[V1(t)]):r=8);e.children=t,e.shapeFlag|=r}function _A(...e){const t={};for(let r=0;r<e.length;r++){const s=e[r];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Kl([t.class,s.class]));else if(i==="style")t.style=x1([t.style,s.style]);else if(Ef(i)){const n=t[i],a=s[i];a&&n!==a&&!(_e(n)&&n.includes(a))&&(t[i]=n?[].concat(n,a):a)}else i!==""&&(t[i]=s[i])}return t}function Gs(e,t,r,s=null){Ns(e,t,7,[r,s])}const SA=e3();let xA=0;function $A(e,t,r){const s=e.type,i=(t?t.appContext:e.appContext)||SA,n={uid:xA++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new J4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Q$(s,i),emitsOptions:z$(s,i),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:s.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Aj.bind(null,n),e.ce&&e.ce(n),n}let nr=null;const Ll=e=>{nr=e,e.scope.on()},ua=()=>{nr&&nr.scope.off(),nr=null};function o3(e){return e.vnode.shapeFlag&4}let Wc=!1;function IA(e,t=!1){Wc=t;const{props:r,children:s}=e.vnode,i=o3(e);oA(e,r,i,t),uA(e,s);const n=i?MA(e,t):void 0;return Wc=!1,n}function MA(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=A$(new Proxy(e.ctx,eA));const{setup:s}=r;if(s){const i=e.setupContext=s.length>1?EA(e):null;Ll(e),Yl();const n=Wn(s,e,0,[e.props,i]);if(Xl(),ua(),y$(n)){if(n.then(ua,ua),t)return n.then(a=>{v_(e,a,t)}).catch(a=>{Af(a,e,0)});e.asyncDep=n}else v_(e,n,t)}else a3(e,t)}function v_(e,t,r){Ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:yt(t)&&(e.setupState=k$(t)),a3(e,r)}let b_;function a3(e,t,r){const s=e.type;if(!e.render){if(!t&&b_&&!s.render){const i=s.template||N1(e).template;if(i){const{isCustomElement:n,compilerOptions:a}=e.appContext.config,{delimiters:u,compilerOptions:p}=s,d=wr(wr({isCustomElement:n,delimiters:u},a),p);s.render=b_(i,d)}}e.render=s.render||Ps}Ll(e),Yl(),tA(e),Xl(),ua()}function OA(e){return new Proxy(e.attrs,{get(t,r){return Gr(e,"get","$attrs"),t[r]}})}function EA(e){const t=s=>{e.exposed=s||{}};let r;return{get attrs(){return r||(r=OA(e))},slots:e.slots,emit:e.emit,expose:t}}function kf(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(k$(A$(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Vh)return Vh[r](e)}}))}function TA(e){return Ce(e)&&"__vccOpts"in e}const ya=(e,t)=>$j(e,t,Wc),jA="3.2.39",AA="http://www.w3.org/2000/svg",Ko=typeof document<"u"?document:null,w_=Ko&&Ko.createElement("template"),RA={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,s)=>{const i=t?Ko.createElementNS(AA,e):Ko.createElement(e,r?{is:r}:void 0);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Ko.createTextNode(e),createComment:e=>Ko.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ko.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,s,i,n){const a=r?r.previousSibling:t.lastChild;if(i&&(i===n||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===n||!(i=i.nextSibling)););else{w_.innerHTML=s?`<svg>${e}</svg>`:e;const u=w_.content;if(s){const p=u.firstChild;for(;p.firstChild;)u.appendChild(p.firstChild);u.removeChild(p)}t.insertBefore(u,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function CA(e,t,r){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function FA(e,t,r){const s=e.style,i=Bt(r);if(r&&!i){for(const n in r)zm(s,n,r[n]);if(t&&!Bt(t))for(const n in t)r[n]==null&&zm(s,n,"")}else{const n=s.display;i?t!==r&&(s.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=n)}}const __=/\s*!important$/;function zm(e,t,r){if(_e(r))r.forEach(s=>zm(e,t,s));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const s=kA(e,t);__.test(r)?e.setProperty(Zl(s),r.replace(__,""),"important"):e[s]=r}}const S_=["Webkit","Moz","ms"],zy={};function kA(e,t){const r=zy[t];if(r)return r;let s=kl(t);if(s!=="filter"&&s in e)return zy[t]=s;s=v$(s);for(let i=0;i<S_.length;i++){const n=S_[i]+s;if(n in e)return zy[t]=n}return t}const x_="http://www.w3.org/1999/xlink";function PA(e,t,r,s,i){if(s&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(x_,t.slice(6,t.length)):e.setAttributeNS(x_,t,r);else{const n=F4(t);r==null||n&&!h$(r)?e.removeAttribute(t):e.setAttribute(t,n?"":r)}}function NA(e,t,r,s,i,n,a){if(t==="innerHTML"||t==="textContent"){s&&a(s,i,n),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const p=r==null?"":r;(e.value!==p||e.tagName==="OPTION")&&(e.value=p),r==null&&e.removeAttribute(t);return}let u=!1;if(r===""||r==null){const p=typeof e[t];p==="boolean"?r=h$(r):r==null&&p==="string"?(r="",u=!0):p==="number"&&(r=0,u=!0)}try{e[t]=r}catch{}u&&e.removeAttribute(t)}const[l3,LA]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let Um=0;const DA=Promise.resolve(),VA=()=>{Um=0},zA=()=>Um||(DA.then(VA),Um=l3());function Gi(e,t,r,s){e.addEventListener(t,r,s)}function UA(e,t,r,s){e.removeEventListener(t,r,s)}function qA(e,t,r,s,i=null){const n=e._vei||(e._vei={}),a=n[t];if(s&&a)a.value=s;else{const[u,p]=BA(t);if(s){const d=n[t]=GA(s,i);Gi(e,u,d,p)}else a&&(UA(e,u,a,p),n[t]=void 0)}}const $_=/(?:Once|Passive|Capture)$/;function BA(e){let t;if($_.test(e)){t={};let s;for(;s=e.match($_);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zl(e.slice(2)),t]}function GA(e,t){const r=s=>{const i=s.timeStamp||l3();(LA||i>=r.attached-1)&&Ns(JA(s,r.value),t,5,[s])};return r.value=e,r.attached=zA(),r}function JA(e,t){if(_e(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const I_=/^on[a-z]/,HA=(e,t,r,s,i=!1,n,a,u,p)=>{t==="class"?CA(e,s,i):t==="style"?FA(e,r,s):Ef(t)?I1(t)||qA(e,t,r,s,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):WA(e,t,s,i))?NA(e,t,s,n,a,u,p):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),PA(e,t,s,i))};function WA(e,t,r,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&I_.test(t)&&Ce(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||I_.test(t)&&Bt(r)?!1:t in e}const Yn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return _e(t)?r=>Dd(t,r):t};function KA(e){e.target.composing=!0}function M_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const u3={created(e,{modifiers:{lazy:t,trim:r,number:s}},i){e._assign=Yn(i);const n=s||i.props&&i.props.type==="number";Gi(e,t?"change":"input",a=>{if(a.target.composing)return;let u=e.value;r&&(u=u.trim()),n&&(u=Ph(u)),e._assign(u)}),r&&Gi(e,"change",()=>{e.value=e.value.trim()}),t||(Gi(e,"compositionstart",KA),Gi(e,"compositionend",M_),Gi(e,"change",M_))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:s,number:i}},n){if(e._assign=Yn(n),e.composing||document.activeElement===e&&e.type!=="range"&&(r||s&&e.value.trim()===t||(i||e.type==="number")&&Ph(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},QA={deep:!0,created(e,t,r){e._assign=Yn(r),Gi(e,"change",()=>{const s=e._modelValue,i=Dl(e),n=e.checked,a=e._assign;if(_e(s)){const u=$1(s,i),p=u!==-1;if(n&&!p)a(s.concat(i));else if(!n&&p){const d=[...s];d.splice(u,1),a(d)}}else if(Ql(s)){const u=new Set(s);n?u.add(i):u.delete(i),a(u)}else a(c3(e,n))})},mounted:O_,beforeUpdate(e,t,r){e._assign=Yn(r),O_(e,t,r)}};function O_(e,{value:t,oldValue:r},s){e._modelValue=t,_e(t)?e.checked=$1(t,s.props.value)>-1:Ql(t)?e.checked=t.has(s.props.value):t!==r&&(e.checked=ha(t,c3(e,!0)))}const ZA={created(e,{value:t},r){e.checked=ha(t,r.props.value),e._assign=Yn(r),Gi(e,"change",()=>{e._assign(Dl(e))})},beforeUpdate(e,{value:t,oldValue:r},s){e._assign=Yn(s),t!==r&&(e.checked=ha(t,s.props.value))}},Uy={deep:!0,created(e,{value:t,modifiers:{number:r}},s){const i=Ql(t);Gi(e,"change",()=>{const n=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?Ph(Dl(a)):Dl(a));e._assign(e.multiple?i?new Set(n):n:n[0])}),e._assign=Yn(s)},mounted(e,{value:t}){E_(e,t)},beforeUpdate(e,t,r){e._assign=Yn(r)},updated(e,{value:t}){E_(e,t)}};function E_(e,t){const r=e.multiple;if(!(r&&!_e(t)&&!Ql(t))){for(let s=0,i=e.options.length;s<i;s++){const n=e.options[s],a=Dl(n);if(r)_e(t)?n.selected=$1(t,a)>-1:n.selected=t.has(a);else if(ha(Dl(n),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Dl(e){return"_value"in e?e._value:e.value}function c3(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const YA=["ctrl","shift","alt","meta"],XA={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>YA.some(r=>e[`${r}Key`]&&!t.includes(r))},qm=(e,t)=>(r,...s)=>{for(let i=0;i<t.length;i++){const n=XA[t[i]];if(n&&n(r,t))return}return e(r,...s)},p3={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Su(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:s}){!t!=!r&&(s?t?(s.beforeEnter(e),Su(e,!0),s.enter(e)):s.leave(e,()=>{Su(e,!1)}):Su(e,t))},beforeUnmount(e,{value:t}){Su(e,t)}};function Su(e,t){e.style.display=t?e._vod:"none"}const eR=wr({patchProp:HA},RA);let T_;function tR(){return T_||(T_=hA(eR))}const rR=(...e)=>{const t=tR().createApp(...e),{mount:r}=t;return t.mount=s=>{const i=sR(s);if(!i)return;const n=t._component;!Ce(n)&&!n.render&&!n.template&&(n.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function sR(e){return Bt(e)?document.querySelector(e):e}const iR="modulepreload",nR=function(e,t){return new URL(e,t).href},j_={},Re=function(t,r,s){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=nR(i,s),i in j_)return;j_[i]=!0;const n=i.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":iR,n||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),n)return new Promise((p,d)=>{u.addEventListener("load",p),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};var oR=Object.defineProperty,aR=Object.defineProperties,lR=Object.getOwnPropertyDescriptors,Uh=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,A_=(e,t,r)=>t in e?oR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))d3.call(t,r)&&A_(e,r,t[r]);if(Uh)for(var r of Uh(t))h3.call(t,r)&&A_(e,r,t[r]);return e},ve=(e,t)=>aR(e,lR(t)),uR=(e,t)=>{var r={};for(var s in e)d3.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&Uh)for(var s of Uh(e))t.indexOf(s)<0&&h3.call(e,s)&&(r[s]=e[s]);return r};function o(e,t,r,s){var i,n=arguments.length,a=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,s);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(n<3?i(a):n>3?i(t,r,a):i(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}function cR(e){return e&&e.release&&typeof e.release=="function"}function pR(e){return e&&e.acquire&&typeof e.acquire=="function"}class Xi{constructor(t,r,s,i=1,n=0){if(this.ctor=t,this.acquireFunction=r,this.releaseFunction=s,this.allocationSize=i,this._pool=new Array(n),this._initialSize=n,this.ctor)for(let a=0;a<n;a++)this._pool[a]=new this.ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Xi.test.disabled)r=new this.ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let i=0;i<s;i++)this._pool[i]=new this.ctor}r=this._pool.pop()}return this.acquireFunction?this.acquireFunction(r,...t):pR(r)&&r.acquire(...t),r}release(t){t&&!Xi.test.disabled&&(this.releaseFunction?this.releaseFunction(t):cR(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const s=this._pool[r];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Xi.test={disabled:!1};function dR(e){e.length=0}class As{constructor(t=50,r=50){this._pool=new Xi(Array,void 0,dR,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return qy.acquire()}static release(t){return qy.release(t)}static prune(){qy.prune()}}const qy=new As(100);var R_,C_;let Wi;var F_,k_;(R_=globalThis.dojoConfig)!=null&&R_.has||(C_=globalThis.esriConfig)!=null&&C_.has?Wi=A(A({},(F_=globalThis.dojoConfig)==null?void 0:F_.has),(k_=globalThis.esriConfig)==null?void 0:k_.has):Wi={};function k(e){return typeof Wi[e]=="function"?Wi[e]=Wi[e](globalThis):Wi[e]}k.add=(e,t,r,s)=>((s||Wi[e]===void 0)&&(Wi[e]=t),r&&k(e)),k.cache=Wi,k.add("esri-deprecation-warnings",!0),(()=>{var e;k.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(k.add("host-browser",t),k.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),k.add("dom",t),k("host-browser")){const r=navigator,s=r.userAgent,i=r.appVersion,n=parseFloat(i);if(k.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),k.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),k.add("khtml",i.includes("Konqueror")?n:void 0),k.add("edge",parseFloat(s.split("Edge/")[1])||void 0),k.add("opr",parseFloat(s.split("OPR/")[1])||void 0),k.add("webkit",!k("wp")&&!k("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),k.add("chrome",!k("edge")&&!k("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),k.add("android",!k("wp")&&parseFloat(s.split("Android ")[1])||void 0),k.add("safari",!i.includes("Safari")||k("wp")||k("chrome")||k("android")||k("edge")||k("opr")?void 0:parseFloat(i.split("Version/")[1])),k.add("mac",i.includes("Macintosh")),!k("wp")&&s.match(/(iPhone|iPod|iPad)/)){const a=RegExp.$1.replace(/P/,"p"),u=s.match(/OS ([\d_]+)/)?RegExp.$1:"1",p=parseFloat(u.replace(/_/,".").replace(/_/g,""));k.add(a,p),k.add("ios",p)}k.add("trident",parseFloat(i.split("Trident/")[1])||void 0),k("webkit")||(!s.includes("Gecko")||k("wp")||k("khtml")||k("trident")||k("edge")||k.add("mozilla",n),k("mozilla")&&k.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&k.add("esri-mobile",t),r&&k.add("esri-iPhone",r),k.add("esri-geolocation",!!navigator.geolocation)}k.add("esri-canvas-svg-support",!k("trident")),k.add("esri-wasm","WebAssembly"in globalThis),k.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),k.add("esri-atomics","Atomics"in globalThis),k.add("esri-workers","Worker"in globalThis),k.add("web-feat:cache","caches"in globalThis),k.add("esri-workers-arraybuffer-transfer",!k("safari")||Number(k("safari"))>=12),k.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),k.add("featurelayer-simplify-payload-size-factors",[1,1,4]),k.add("featurelayer-snapshot-enabled",!0),k.add("featurelayer-snapshot-point-min-threshold",8e4),k.add("featurelayer-snapshot-point-max-threshold",4e5),k.add("featurelayer-snapshot-point-coverage",.1),k.add("featurelayer-advanced-symbols",!1),k.add("featurelayer-pbf",!0),k.add("featurelayer-pbf-statistics",!1),k.add("feature-layers-workers",!0),k.add("feature-polyline-generalization-factor",1),k.add("mapview-transitions-duration",200),k.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),k.add("mapserver-pbf-enabled",!1),k("host-webworker")||k("host-browser")&&(k.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),k.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{k.add("esri-image-decode",!0,!0,!0)}).catch(()=>{k.add("esri-image-decode",!1,!0,!0)})}return!1}),k.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const P_=new Set;function hR(e,t,r=!1){r&&P_.has(t)||(r&&P_.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function Ba(e,t,r={}){if(k("esri-deprecation-warnings")){const{moduleName:s}=r;Pf(e,`Function: ${(s?s+"::":"")+t+"()"}`,r)}}function Kc(e,t,r={}){if(k("esri-deprecation-warnings")){const{moduleName:s}=r;Pf(e,`Property: ${(s?s+"::":"")+t}`,r)}}function Pf(e,t,r={}){if(k("esri-deprecation-warnings")){const{replacement:s,version:i,see:n,warnOnce:a}=r;let u=t;s&&(u+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),i&&(u+=`
	\u2699\uFE0F Version: ${i}`),n&&(u+=`
	\u{1F517} See ${n} for more details.`),hR(e,u,a)}}const fR=null;function R(e){return e!=null}function ae(e){return e==null}function yR(e){return e===void 0}function qh(e,t){return R(e)?t(e):fR}function mR(e){return e}function f3(e,t){if(ae(e))throw new Error(t);return e}function U1(e,t){return R(e)?e:typeof t=="function"?t():t}function gR(e,t){return R(e)?e:t}function Bh(e){return R(e)&&e.destroy(),null}function vR(e){return R(e)&&e.dispose(),null}function Sp(e){return R(e)&&e.remove(),null}function bR(e){return R(e)&&e.release(),null}function wR(e){return null}function _R(e,t){const r=new Array;for(const s of e)r.push(fl(s,null,t));return r}function SR(e,t){for(const r of e)qh(r,t)}function fl(e,t,r){return R(e)?r(e):t}function xR(e){return e.filter(t=>R(t))}function y3(e,...t){let r=e;for(let s=0;s<t.length&&r;++s)r=r[t[s]];return r}function $R(e){return e}class os{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*os._m:t}getInt(){return this._seed=(os._a*this._seed+os._c)%os._m,this._seed}getFloat(){return this.getInt()/(os._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const s=r-t;return t+this.getInt()/os._m*s}}os._m=2147483647,os._a=48271,os._c=0;function q1(e,t,r){if(ae(e)&&ae(t))return!0;if(ae(e)||ae(t)||e.length!==t.length)return!1;if(r){for(let s=0;s<e.length;s++)if(!r(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function IR(e){return e&&typeof e.length=="number"}const MR=!!Array.prototype.fill;function OR(e,t){if(MR)return new Array(e).fill(t);const r=new Array(e);for(let s=0;s<e;s++)r[s]=t;return r}function ER(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let s=e;s<t;s++)r[s-e]=s;return r}class B1{constructor(){this.last=0}}const m3=new B1;function G1(e,t,r,s){s=s||m3;const i=Math.max(0,s.last-10);for(let a=i;a<r;++a)if(e[a]===t)return s.last=a,a;const n=Math.min(i,r);for(let a=0;a<n;++a)if(e[a]===t)return s.last=a,a;return-1}function g3(e,t,r,s){const i=r==null?e.length:r,n=G1(e,t,i,s);if(n!==-1)return e[n]=e[i-1],r==null&&e.pop(),t}const ds=new Set;function TR(e,t,r=e.length,s=t.length,i,n){if(s===0||r===0)return r;ds.clear();for(let u=0;u<s;++u)ds.add(t[u]);i=i||m3;const a=Math.max(0,i.last-10);for(let u=a;u<r;++u)if(ds.has(e[u])&&(n&&n.push(e[u]),ds.delete(e[u]),e[u]=e[r-1],--r,--u,ds.size===0||r===0))return ds.clear(),r;for(let u=0;u<a;++u)if(ds.has(e[u])&&(n&&n.push(e[u]),ds.delete(e[u]),e[u]=e[r-1],--r,--u,ds.size===0||r===0))return ds.clear(),r;return ds.clear(),r}new os;function v3(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function jR(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function b3(e,t,r){if(e.slice)return e.slice(t,r);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),r===void 0?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const s=Math.max(0,r-t),i=new e.constructor(s);for(let n=0;n<s;n++)i[n]=e[t+n];return i}function AR(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function RR(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function w3(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function CR(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function FR(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function _3(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function kR(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function S3(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function PR(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function NR(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function J1(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&J1(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function j(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=M3(e);if(R(t))return t;if(x3(e))return e.clone();if($3(e))return e.map(j);if(I3(e))return e.clone();const r={};for(const s of Object.getOwnPropertyNames(e))r[s]=j(e[s]);return r}function Bm(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=M3(e);if(R(t))return t;if($3(e)){let r=!0;const s=e.map(i=>{const n=Bm(i);return i!=null&&n==null&&(r=!1),n});return r?s:null}if(x3(e))return e.clone();if(!I3(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const i=e[s],n=Bm(i);if(i!=null&&n==null)return null;r[s]=n}return r}return null}function x3(e){return typeof e.clone=="function"}function $3(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function I3(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function M3(e){if(RR(e)||w3(e)||CR(e)||FR(e)||_3(e)||kR(e)||S3(e)||PR(e)||NR(e))return b3(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((r,s)=>{t.set(s,j(r))}),t}if(e instanceof Set){const t=new Set;return e.forEach(r=>{t.add(j(r))}),t}return null}function Nf(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function O3(e,t,r=!1){return T3(e,t,r)}function xp(e,t){if(t!=null)return t[e]||E3(e.split("."),!1,t)}function Ar(e,t,r){const s=e.split("."),i=s.pop(),n=E3(s,!0,r);n&&i&&(n[i]=t)}function E3(e,t,r){let s=r;for(const i of e){if(s==null)return;if(!(i in s)){if(!t)return;s[i]={}}s=s[i]}return s}function T3(e,t,r){return t?Object.keys(t).reduce(function(s,i){let n=s[i],a=t[i];return n===a?s:n===void 0?(s[i]=j(a),s):(Array.isArray(a)||Array.isArray(s)?(n=n?Array.isArray(n)?s[i]=n.concat():s[i]=[n]:s[i]=[],a&&(Array.isArray(a)||(a=[a]),r?a.forEach(u=>{n.indexOf(u)===-1&&n.push(u)}):s[i]=a.concat())):a&&typeof a=="object"?s[i]=T3(n,a,r):s.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(s[i]=a),s)},e||{}):e}var N_;const Qe={apiKey:void 0,applicationUrl:(N_=globalThis.location)==null?void 0:N_.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(O3(Qe,globalThis.esriConfig,!0),delete Qe.has),!Qe.assetsPath){const e="4.23.7";Qe.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Qe.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Qe,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Qe.request.corsEnabledServers=[],Qe.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const LR=/\{([^\}]+)\}/g;function L_(e){return e==null?"":e}function $p(e,t){return e.replace(LR,typeof t=="object"?(r,s)=>L_(xp(s,t)):(r,s)=>L_(t(s)))}function j3(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.indexOf(r)!==-1?r:`\\${r}`)}function Lf(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function DR(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const D_={info:0,warn:1,error:2,none:3};class te{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,te._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=te.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const r=te._loggers;return te._loggers=t,r},set throttlingDisabled(t){te._throttlingDisabled=t}}}static getLogger(t){let r=te._loggers[t];return r||(r=new te({module:t})),r}_log(t,r,...s){if(!!this._matchLevel(t)){if(r!=="always"&&!te._throttlingDisabled){const i=this._argsToKey(s),n=this._loggedMessages[t].get(i);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=te._tickCounter)return;this._loggedMessages[t].set(i,te._tickCounter),te._scheduleTickCounterIncrement()}for(const i of Qe.log.interceptors)if(i(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,r){let s=this;for(;R(s);){const i=s[t];if(R(i))return i;s=s.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...s){console[t](`[${r}]`,...s)}_matchLevel(t){const r=Qe.log.level?Qe.log.level:"warn";return D_[this._parentWithMember("level",r)]<=D_[t]}_argsToKey(...t){const r=(s,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]";return Lf(JSON.stringify(t,r))}static _scheduleTickCounterIncrement(){te._tickCounterScheduled||(te._tickCounterScheduled=!0,Promise.resolve().then(()=>{te._tickCounter++,te._tickCounterScheduled=!1}))}}te._loggers={},te._tickCounter=0,te._tickCounterScheduled=!1,te._throttlingDisabled=!1;function Df(e){return Ip(()=>e.forEach(t=>R(t)&&t.remove()))}function Ip(e){return{remove:()=>{e&&(e(),e=void 0)}}}function ar(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function VR(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Ud(e,t,r){return r?Gh(e,t,{policy:r,path:""}):Gh(e,t,null)}function Gh(e,t,r){return t?Object.keys(t).reduce(function(s,i){let n=null,a="merge";if(r&&(n=r.path?`${r.path}.${i}`:i,a=r.policy(n)),a==="replace")return s[i]=t[i],s;if(s[i]===void 0)return s[i]=j(t[i]),s;let u=s[i],p=t[i];if(u===p)return s;if(Array.isArray(p)||Array.isArray(s))u=u?Array.isArray(u)?s[i]=u.concat():s[i]=[u]:s[i]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(d=>{u.indexOf(d)===-1&&u.push(d)}));else if(p&&typeof p=="object")if(r){const d=r.path;r.path=n,s[i]=Gh(u,p,r),r.path=d}else s[i]=Gh(u,p,null);else s.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(s[i]=p);return s},e||{}):e}function A3(e){return Array.isArray(e)?e:e.split(".")}function V_(e){return e.indexOf(",")>-1?e.split(",").map(t=>t.trim()):[e.trim()]}function zR(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...V_(r));return t}return V_(e)}function R3(e,t,r,s){const i=zR(t);if(i.length!==1){const n=i.map(a=>s(e,a,r));return Df(n)}return s(e,i[0],r)}function C3(e){let t=!1;return()=>{t||(t=!0,e())}}function F3(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(r,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.getItemAt(i)}const s=ar(t);return VR(s,r)?s.get(r):t[r]}function k3(e,t,r){if(e==null)return e;const s=F3(t[r],e);return!s&&r<t.length-1?void 0:r===t.length-1?s:k3(s,t,r+1)}function Mp(e,t,r=0){return typeof t=="string"&&t.indexOf(".")===-1?F3(t,e):k3(e,A3(t),r)}function Jh(e,t){return Mp(e,t)}function z_(e,t){return Mp(t,e)!==void 0}var di;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(di||(di={}));class U_{constructor(t){this.autoDestroy=!1,this.properties=t}}function Op(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const s=Object.create(t.properties),i=t.autoDestroy;for(const n in s)s[n]=j(s[n]);t=new U_(s),t.autoDestroy=i,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new U_({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function UR(e){return Op(e).properties}function Ep(e,t){const r=UR(e);let s=r[t];return s||(s=r[t]={}),s}function qR(e,t){return Ud(e,t,GR)}const BR=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function GR(e){return BR.test(e)?"replace":"merge"}var Fe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(Fe||(Fe={}));const Gm=Fe.USER+1;function Ki(e){switch(e){case"defaults":return Fe.DEFAULTS;case"service":return Fe.SERVICE;case"portal-item":return Fe.PORTAL_ITEM;case"web-scene":return Fe.WEB_SCENE;case"web-map":return Fe.WEB_MAP;case"user":return Fe.USER}}function Qc(e){switch(e){case Fe.DEFAULTS:return"defaults";case Fe.SERVICE:return"service";case Fe.PORTAL_ITEM:return"portal-item";case Fe.WEB_SCENE:return"web-scene";case Fe.WEB_MAP:return"web-map";case Fe.USER:return"user"}return void 0}function JR(e){return Qc(e)}var et;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(et||(et={}));let Hh,Nu=[];const HR=te.getLogger("esri.core.Accessor");function Oe(e){Hh!==void 0&&Hh.onObservableAccessed(e)}let qd=!1,Bd=!1;function en(e,t,r){if(qd)return H1(e,t,r);P3(e);const s=t.call(r);return N3(),s}function WR(e,t){return en(void 0,e,t)}function H1(e,t,r){const s=qd;qd=!0,P3(e);let i=null;try{i=t.call(r)}catch(n){Bd&&HR.error(n)}return N3(),qd=s,i}function P3(e){Hh=e,Nu.push(e)}function N3(){const e=Nu.pop();Hh=Nu.length>0?Nu[Nu.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function L3(e,t){if(t.flags&et.DepTrackingInitialized)return;const r=Bd;Bd=!1,t.flags&et.AutoTracked?H1(t,t.metadata.get,e):D3(e,t),Bd=r}const KR=[];function D3(e,t){t.flags&et.ExplicitlyTracking||(t.flags|=et.ExplicitlyTracking,H1(t,()=>{const r=t.metadata.dependsOn||KR;for(const s of r)if(typeof s=="string"&&s.indexOf(".")===-1)q_(e,s,!1);else{const i=A3(s);for(let n=0,a=e;n<i.length&&a!=null&&typeof a=="object";++n)a=q_(a,i[n],n!==i.length-1)}}),t.flags&=~et.ExplicitlyTracking)}function q_(e,t,r){const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const a=parseInt(s,10);if(!isNaN(a))return Array.isArray(e)?e[a]:e.getItemAt(a)}const i=ar(e),n=i==null?void 0:i.properties.get(s);return n&&(Oe(n),L3(e,n)),r?e[s]:void 0}class V3{constructor(t,r){this._observers=t,this._observer=r}remove(){v3(this._observers,this._observer)}}class B_{constructor(t,r,s){this.properties=t,this.propertyName=r,this.metadata=s,this._observers=null,this._accessed=null,this._handles=null,this.flags=et.Dirty|(s.nonNullable?et.NonNullable:0)|(s.hasOwnProperty("value")?et.HasDefaultValue:0)|(s.get===void 0?et.DepTrackingInitialized:0)|(s.dependsOn===void 0?et.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Oe(this);const t=this.properties.store,r=this.propertyName,s=this.flags,i=t.get(r);if(s&et.Computing||~s&et.Dirty&&t.has(r))return i;this.flags|=et.Computing;const n=this.properties.host;let a;s&et.AutoTracked?a=en(this,this.metadata.get,n):(D3(n,this),a=this.metadata.get.call(n)),t.set(r,a,Fe.COMPUTED);const u=t.get(r);return u===i?this.flags&=~et.Dirty:WR(this.commit,this),this.flags&=~et.Computing,u}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=et.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let s=0;s<t.length;++s)r.push(t[s].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new V3(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&et.Overriden&&(this.flags|=et.Dirty);const t=this._observers;if(t!==null)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=~et.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}class W1{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new W1;return this._values.forEach((s,i)=>{t&&t.has(i)||r.set(i,j(s))}),r}get(t){return this._values.get(t)}originOf(){return Fe.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function nd(e,t,r){return e!==void 0}function G_(e,t,r,s){return e!==void 0&&(!(r==null&&e.flags&et.NonNullable)||(s.lifecycle,di.INITIALIZING,!1))}function QR(e){return e&&typeof e.destroy=="function"}te.getLogger("esri.core.accessorSupport.Properties");class ZR{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=di.INITIALIZING,this.store=new W1,this._origin=Fe.USER;const r=this.host.constructor.__accessorMetadata__,s=r.properties;for(const i in s){const n=new B_(this,i,s[i]);this.properties.set(i,n)}this.metadatas=s,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=di.CONSTRUCTING}constructed(){this.lifecycle=di.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,r]of this.properties){const s=this.internalGet(t);s&&QR(s)&&(s.destroy(),~r.flags&et.NonNullable&&this._internalSet(r,null)),r.destroy()}else for(const[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==di.INITIALIZING}get(t){const r=this.properties.get(t);if(r.metadata.get)return r.getComputed();Oe(r);const s=this.store;return s.has(t)?s.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const s=this.properties.get(t);if(s!==void 0&&s.flags&et.HasDefaultValue)return"defaults"}return Qc(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const r=this.properties.get(t);if(nd(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const s=this.properties.get(t);nd(s)&&this._internalSet(s,r)}getDependsInfo(t,r,s){const i=this.properties.get(r);if(!nd(i))return"";const n=new Set,a=en({onObservableAccessed:p=>n.add(p),onTrackingEnd:()=>{}},()=>{var p;return(p=i.metadata.get)==null?void 0:p.call(t)});let u=`${s}${t.declaredClass.split(".").pop()}.${r}: ${a}
`;if(n.size===0)return u;s+="  ";for(const p of n){if(!(p instanceof B_))continue;const d=p.properties.host,h=p.propertyName,f=ar(d);u+=f?f.getDependsInfo(d,h,s):`${s}${h}: undefined
`}return u}setAtOrigin(t,r,s){const i=this.properties.get(t);if(nd(i))return this._setAtOrigin(i,r,s)}isOverridden(t){const r=this.properties.get(t);return r!==void 0&&!!(r.flags&et.Overriden)}clearOverride(t){const r=this.properties.get(t);r!==void 0&&r.flags&et.Overriden&&(r.flags&=~et.Overriden,r.notifyChange())}override(t,r){const s=this.properties.get(t);if(!G_(s,t,r,this))return;const i=s.metadata.cast;if(i){const n=this._cast(i,r),{valid:a,value:u}=n;if(By.release(n),!a)return;r=u}s.flags|=et.Overriden,this._internalSet(s,r)}set(t,r){const s=this.properties.get(t);if(!G_(s,t,r,this))return;const i=s.metadata.cast;if(i){const a=this._cast(i,r),{valid:u,value:p}=a;if(By.release(a),!u)return;r=p}const n=s.metadata.set;n?n.call(this.host,r):this._internalSet(s,r)}setDefaultOrigin(t){this._origin=Ki(t)}getDefaultOrigin(){return Qc(this._origin)}notifyChange(t){const r=this.properties.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.properties.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.properties.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const s=this.lifecycle!==di.INITIALIZING?this._origin:Fe.DEFAULTS;this._setAtOrigin(t,r,s)}_setAtOrigin(t,r,s){const i=this.store,n=t.propertyName;i.has(n,s)&&Nf(r,i.get(n))&&~t.flags&et.Overriden&&s===i.originOf(n)||(t.invalidate(),i.set(n,r,s),t.commit(),L3(this.host,t))}_cast(t,r){const s=By.acquire();return s.valid=!0,s.value=r,t&&(s.value=t.call(this.host,r,s)),s}}class YR{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const By=new Xi(YR);function XR(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(r,s){if(s==="")return"$";const i=xp(s,t),n=i==null?"":i;if(n===void 0)throw new Error(`could not find key "${s}" in template`);return n.toString()})}class Vf{constructor(t,r,s){this.name=t,this.details=s,this.message=void 0,this instanceof Vf&&(this.message=r&&XR(r,s)||"")}toString(){return"["+this.name+"]: "+this.message}}class F extends Vf{constructor(t,r,s){if(super(t,r,s),!(this instanceof F))return new F(t,r,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return j(r)}catch{return"[object]"}}))}}catch(t){throw te.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new F(t.name,t.message,t.details)}}F.prototype.type="error";function Wh(e,t,r){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))Wh(e,s,t[s]);else{if(t.indexOf(".")!==-1){const i=t.split("."),n=i.splice(i.length-1,1)[0];return void Wh(Jh(e,i),n,r)}const s=e.__accessor__;s!=null&&eC(t,s),e[t]=r}}function eC(e,t){if(k("esri-unknown-property-errors")&&!tC(e,t))throw new F("set:unknown-property",rC(e,t))}function tC(e,t){return t.metadatas[e]!=null}function rC(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}te.getLogger("esri.core.accessorSupport.set");class sC extends Xi{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=wR(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const od=[];function Zc(e){od.push(e),od.length===1&&queueMicrotask(()=>{const t=od.slice();od.length=0;for(const r of t)r()})}const iC=29;class K1{constructor(t,r=iC){this.name=t,this._counter=0,this._items=new Array(r)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,r)=>t-r)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,r)=>t+r,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var Jm;(function(e){const t=(n,a,u,p)=>{let d=a,h=a;const f=u>>>1,y=n[d-1];for(;h<=f;){h=d<<1,h<u&&p(n[h-1],n[h])<0&&++h;const m=n[h-1];if(p(m,y)<=0)break;n[d-1]=m,d=h}n[d-1]=y},r=(n,a)=>n<a?-1:n>a?1:0;function s(n,a,u,p){a===void 0&&(a=0),u===void 0&&(u=n.length),p===void 0&&(p=r);for(let h=u>>>1;h>a;h--)t(n,h,u,p);const d=a+1;for(let h=u-1;h>a;h--){const f=n[a];n[a]=n[h],n[h]=f,t(n,d,h,p)}}function*i(n,a,u,p){a===void 0&&(a=0),u===void 0&&(u=n.length),p===void 0&&(p=r);for(let h=u>>>1;h>a;h--)t(n,h,u,p),yield;const d=a+1;for(let h=u-1;h>a;h--){const f=n[a];n[a]=n[h],n[h]=f,t(n,d,h,p),yield}}e.sort=s,e.iterableSort=i})(Jm||(Jm={}));const J_=Jm,nC=1.5,oC=1.1;class Yc{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new B1,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>H_(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let s=0;s<this._length;s++){const i=this.data[s];t(i)&&r.push(i)}return r}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let s=0;s<r;s++)this.data[this._length++]=t[s]}fill(t,r){for(let s=0;s<r;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,H_(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=G1(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){const r=g3(this.data,t,this.length,this._hint);return r!==void 0&&(this.length=this.length-1),this._shrink(),r}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,s){this.length=TR(this.data,t,this.length,r,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){t>=this.length||r>=this.length||t===r||([this.data[t],this.data[r]]=[this.data[r],this.data[t]])}sort(t){J_.sort(this.data,0,this.length,t)}iterableSort(t){return J_.iterableSort(this.data,0,this.length,t)}some(t,r){for(let s=0;s<this.length;++s)if(t.call(r,this.data[s],s,this.data))return!0;return!1}filterInPlace(t,r){let s=0;for(let i=0;i<this._length;++i){const n=this.data[i];t.call(r,n,i,this.data)&&(this.data[i]=this.data[s],this.data[s]=n,s++)}if(this._deallocator)for(let i=s;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=s,this._shrink(),this}forAll(t,r){const s=this.length,i=this.data;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){for(let s=0;s<this.length;++s)t.call(r,this.data[s],s,this.data)}map(t,r){const s=new Array(this.length);for(let i=0;i<this.length;++i)s[i]=t.call(r,this.data[i],i,this.data);return s}reduce(t,r){let s=r;for(let i=0;i<this.length;++i)s=t(s,this.data[i],i,this.data);return s}has(t){const r=this.length,s=this.data;for(let i=0;i<r;++i)if(s[i]===t)return!0;return!1}}function H_(e){e.data.length>nC*e.length&&(e.data.length=Math.floor(e.length*oC))}function aC(e){return{setTimeout:(t,r)=>{const s=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(s)}}}}const lC=aC(globalThis);function zf(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Tp(e,t,r){if(!zf(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const s=t.slice();for(const i of s)e.addEventListener(i,r);return{remove(){for(const i of s)e.removeEventListener(i,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function z3(e,t,r){if(!zf(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const s=Tp(e,t,i=>{s.remove(),r.call(e,i)});return{remove(){s.remove()}}}const uC={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Gy({key:e}){return uC[e]||e}function cC(e){return Promise.all(e)}function U3(e){return new Promise((t,r)=>{try{e(t,r)}catch(s){Promise.resolve().then(()=>r(s))}})}function Xt(e="Aborted"){return new F("AbortError",e)}function Vs(e,t="Aborted"){if(Xn(e))throw Xt(t)}function Uf(e){return R(e)?"aborted"in e?e:e.signal:e}function Xn(e){const t=Uf(e);return R(t)&&t.aborted}function eu(e){if(zs(e))throw e}function Hm(e){if(!zs(e))throw e}function tn(e,t){const r=Uf(e);if(!ae(r)){if(!r.aborted)return z3(r,"abort",()=>t());t()}}function qf(e,t){const r=Uf(e);if(!ae(r))return Vs(r),z3(r,"abort",()=>t(Xt()))}function q3(e,t){const r=Uf(t);return ae(r)?e:new Promise((s,i)=>{let n=tn(t,()=>i(Xt()));const a=()=>n=Sp(n);e.then(a,a),e.then(s,i)})}function zs(e){return e&&e.name==="AbortError"}function B3(e){return e.catch(t=>{if(!zs(t))throw t})}function ma(){let e=null;const t=new Promise((r,s)=>{e={promise:void 0,resolve:r,reject:s}});return e.promise=t,e}function fi(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e);return fi(r.map(s=>e[s])).then(s=>{const i={};return r.forEach((n,a)=>i[n]=s[a]),i})}const t=e;return U3(r=>{const s=[];let i=t.length;i===0&&r(s),t.forEach(n=>{const a={promise:n||Promise.resolve(n)};s.push(a),a.promise.then(u=>{a.value=u}).catch(u=>{a.error=u}).then(()=>{--i,i===0&&r(s)})})})}function pC(e){return fi(e).then(t=>t.filter(r=>!!r.value).map(r=>r.value))}function dC(e){return Promise.reject(e)}function G3(e){return Promise.resolve(e)}function Q1(e,t,r){const s=new AbortController;return tn(r,()=>s.abort()),new Promise((i,n)=>{let a=setTimeout(()=>{a=0,i(t)},e);tn(s,()=>{a&&(clearTimeout(a),n(Xt()))})})}function tu(e){return e&&typeof e.then=="function"}function Wm(e){return tu(e)?e:Promise.resolve(e)}function Z1(e,t=-1){let r,s,i,n,a=null;const u=(...p)=>{if(r){s=p,n&&n.reject(Xt()),n=ma();const y=n.promise;if(a){const m=a;a=null,m.abort()}return y}if(i=n||ma(),n=null,t>0){const y=new AbortController;r=Wm(e(...p,y.signal));const m=r;Q1(t).then(()=>{r===m&&(n?y.abort():a=y)})}else r=1,r=Wm(e(...p));const d=()=>{const y=s;s=i=r=a=null,y!=null&&u(...y)},h=r,f=i;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return u}function J3(){let e,t;const r=new Promise((i,n)=>{e=i,t=n}),s=i=>{e(i)};return s.resolve=i=>e(i),s.reject=i=>t(i),s.timeout=(i,n)=>lC.setTimeout(()=>s.reject(n),i),s.promise=r,s}function hC(e,t){let r,s=new AbortController;const i=e(s.signal);let n={promise:i,finished:!1,abort:()=>{s&&(s.abort(),s=null)}};const a=()=>{n&&(n.finished=!0,n=null),R(r)&&(r.remove(),r=null),s=null};return i.then(a,a),r=tn(t,()=>{R(n)&&n.abort()}),n}function fC(e){return Promise.resolve().then(()=>{Vs(e)})}function yC(e){return e}class mC{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let W_=0;const xu={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Km=["prepare","preRender","render","postRender","update","finish"],Qm=[],Xc=new Yc,Zm={frameTasks:Xc,willDispatch:!1,clearFrameTasks:gC,dispatch:W3,executeFrameTasks:vC};function Bf(e){const t=new mC(e);return Qm.push(t),Zm.willDispatch||(Zm.willDispatch=!0,Zc(W3)),t}function gC(e=!1){Xc.forAll(t=>{t.removed=!0}),e&&H3()}function vC(e){const t=e-W_;W_=e;const r=1e3/60,s=Math.max(0,t-r);for(let i=0;i<Km.length;i++){const n=performance.now(),a=Km[i];Xc.forAll(u=>{var p;u.paused||u.removed||(i===0&&u.ticks++,u.phases[a]&&(xu.time=e,xu.deltaTime=u.ticks===0?0:t,xu.elapsedFrameTime=performance.now()-e,xu.frameDuration=r-s,(p=u.phases[a])==null||p.call(u,xu)))}),wC[i].record(performance.now()-n)}H3(),_C.record(performance.now()-e)}const ad=new Yc;function H3(){Xc.forAll(e=>{e.removed&&ad.push(e)}),Xc.removeUnorderedMany(ad.data,ad.length),ad.clear()}function W3(){for(;Qm.length;){const e=Qm.shift();e.isActive&&e.callback()}Zm.willDispatch=!1}function bC(e=1,t){const r=J3(),s=()=>{Xn(t)?r.reject(Xt()):e===0?r():(--e,Zc(()=>s()))};return s(),r.promise}const wC=Km.map(e=>new K1(e)),_C=new K1("total");let SC=0;function $l(){return++SC}class Gf{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed;for(let s=0;s<r.length;++s)t.push(r[s].observe(this));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}let Il=!1;const Kh=[];function K3(e,t){let r=new Gf(n),s=null,i=!1;function n(){if(!r||i)return;if(Il)return void Y3(n);const u=s;r.clear(),Il=!0,i=!0,s=en(r,e),i=!1,Il=!1,t(s,u),X3()}function a(){r&&(r.destroy(),r=null,s=null)}return i=!0,s=en(r,e),i=!1,{remove:a}}function Q3(e,t){let r=new Gf(i),s=null;function i(){t(s,a)}function n(){r&&(r.destroy(),r=null),s=null}function a(){return r?(r.clear(),s=en(r,e),s):null}return a(),{remove:n}}function Z3(e){let t=new Gf(s),r=!1;function s(){t&&!r&&(Il?Y3(s):(t.clear(),Il=!0,r=!0,en(t,e),r=!1,Il=!1,X3()))}function i(){t&&(t.destroy(),t=null)}return r=!0,en(t,e),r=!1,{remove:i}}function Y3(e){Kh.includes(e)||Kh.unshift(e)}function X3(){for(;Kh.length;)Kh.pop()()}var Ic;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Ic||(Ic={}));class ep{constructor(){this.uid=$l(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,s,i,n){return this.pool.acquire(Ic.Untracked,t,r,s,i,n,Nf)}static acquireTracked(t,r,s,i){return this.pool.acquire(Ic.Tracked,t,r,s,null,null,i)}notify(t,r){this.type===Ic.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,s,i,n,a,u){this.uid=$l(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=s,this.getValue=i,this.target=n,this.path=a,this.equals=u}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=$l(),this.removed=!0}}ep.pool=new sC(ep);const Gd=new As,Kn=new Set;let Qh;function Zh(e){Kn.delete(e),Kn.add(e),Qh||(Qh=Bf(IC))}function xC(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function $C(e){for(const t of Kn.values())t.target===e&&(t.removed=!0)}function IC(){let e=10;for(;Qh&&e--;){Qh=null;const t=MC(),r=Gd.acquire();for(const s of t){const i=s.uid;xC(s),i===s.uid&&s.removed&&r.push(s)}for(const s of Kn)s.removed&&(r.push(s),Kn.delete(s));for(const s of r)ep.pool.release(s);Gd.release(r),Gd.release(t),OC.forEach(s=>s())}}function MC(){const e=Gd.acquire();e.length=Kn.size;let t=0;for(const r of Kn)e[t]=r,++t;return Kn.clear(),e}const OC=new Set;function EC(e,t,r){let s=R3(e,t,r,(i,n,a)=>{let u,p,d=Q3(()=>Mp(i,n),(h,f)=>{i.__accessor__.destroyed||u&&u.uid!==p?s.remove():(u||(u=ep.acquireUntracked(h,a,f,i,n),p=u.uid),Zh(u))});return{remove:C3(()=>{d.remove(),u&&(u.uid!==p||u.removed||(u.removed=!0,Zh(u)),u=null),s=d=null})}});return s}function TC(e,t,r){const s=R3(e,t,r,(i,n,a)=>{let u=!1;return K3(()=>Mp(i,n),(p,d)=>{i.__accessor__.destroyed?s.remove():u||(u=!0,Nf(d,p)||a.call(i,p,d,n,i),u=!1)})});return s}function jC(e,t,r,s=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:s?TC(e,t,r):EC(e,t,r)}function AC(e,t,r){let s,i,n=Q3(e,(a,u)=>{s&&s.uid!==i?n.remove():(s||(s=ep.acquireTracked(a,t,u,r),i=s.uid),Zh(s))});return{remove:C3(()=>{n.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,Zh(s)),s=null),n=null})}}function RC(e,t,r){let s=!1;return K3(e,(i,n)=>{s||(s=!0,r(n,i)||t(i,n),s=!1)})}function CC(e,t,r=!1,s=Nf){return r?RC(e,t,s):AC(e,t,s)}function eI(e,t,r){const s=e.get(t);if(s!==void 0)return s;const i=r();return e.set(t,i),i}const Ml=te.getLogger("esri.core.Accessor");function FC(e){return e==null?e:new Date(e)}function kC(e){return e==null?e:!!e}function jp(e){return e==null?e:e.toString()}function Ap(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function Jf(e){return e==null?e:Math.round(parseFloat(e))}function tI(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Yh(e,t){return t!=null&&e&&!(t instanceof e)}function rI(e){return e&&"isCollection"in e}function K_(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function PC(e,t){if(!t||!t.constructor||!rI(t.constructor))return Ym(e,t)?t:new e(t);const r=K_(e.prototype.itemType),s=K_(t.constructor.prototype.itemType);return r?s?r===s?t:r.prototype.isPrototypeOf(s.prototype)?new e(t):(Ym(e,t),t):new e(t):t}function Ym(e,t){return!!tI(t)&&(Ml.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Wf(e)+"'"),!0)}function Hf(e,t){return t==null?t:rI(e)?PC(e,t):Yh(e,t)?Ym(e,t)?t:new e(t):t}function Wf(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const NC=new WeakMap;function LC(e){switch(e){case Number:return Ap;case At:return Jf;case Boolean:return kC;case String:return jp;case Date:return FC;default:return eI(NC,e,()=>Hf.bind(null,e))}}function rt(e,t){const r=LC(e);return arguments.length===1?r:r(t)}function tp(e,t,r){return arguments.length===1?tp.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,r)):[e(t,r)])}function DC(e,t){return arguments.length===1?tp(rt.bind(null,e)):tp(rt.bind(null,e),t)}function sI(e,t,r){return t!==0&&Array.isArray(r)?r.map(s=>sI(e,t-1,s)):e(r)}function Xh(e,t,r){if(arguments.length===2)return Xh.bind(null,e,t);if(!r)return r;let s=t,i=r=sI(e,t,r);for(;s>0&&Array.isArray(i);)s--,i=i[0];if(i!==void 0)for(let n=0;n<s;n++)r=[r];return r}function VC(e,t,r){return arguments.length===2?Xh(rt.bind(null,e),t):Xh(rt.bind(null,e),t,r)}function iI(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Xm(e,t){if(arguments.length===2)return Xm(e).call(null,t);const r=new Set,s=e.filter(u=>typeof u!="function"),i=e.filter(u=>typeof u=="function");for(const u of e)typeof u!="string"&&typeof u!="number"||r.add(u);let n=null,a=null;return(u,p)=>{if(u==null)return u;const d=typeof u,h=d==="string"||d==="number";return h&&(r.has(u)||i.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&i.some(f=>!Yh(u,f))?u:(h&&s.length?(n||(n=s.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Ml.error("Accessor#set",`'${u}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof u=="object"&&i.length?(a||(a=i.map(f=>Wf(f)).join(", ")),Ml.error("Accessor#set",`'${u}' is not a valid value for this property, value must be one of ${a}`)):Ml.error("Accessor#set",`'${u}' is not a valid value for this property`),p&&(p.valid=!1),null)}}function yi(e,t){if(arguments.length===2)return yi(e).call(null,t);const r={},s=[],i=[];for(const p in e.typeMap){const d=e.typeMap[p];r[p]=rt(d),s.push(Wf(d)),i.push(p)}const n=()=>`'${s.join("', '")}'`,a=()=>`'${i.join("', '")}'`,u=typeof e.key=="string"?p=>p[e.key]:e.key;return p=>{if(e.base&&!Yh(e.base,p)||p==null)return p;const d=u(p)||e.defaultKeyValue,h=r[d];if(!h)return Ml.error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!Yh(e.typeMap[d],p))return p;if(typeof e.key=="string"&&!tI(p)){const f={};for(const y in p)y!==e.key&&(f[y]=p[y]);return h(f)}return h(p)}}class At{}const zC={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function UC(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function nI(e){switch(e.type){case"native":return rt(e.value);case"array":return tp(nI(e.value));case"one-of":return qC(e);default:return null}}function qC(e){let t=null;return(r,s)=>tg(r,e)?r:(t==null&&(t=eg(e)),Ml.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function eg(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case At:return"integer";case Date:return"date";default:return Wf(e.value)}case"array":return`array of ${eg(e.value)}`;case"one-of":{const t=e.values.map(r=>eg(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function tg(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case At:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!tg(r,t.value));case"one-of":return t.values.some(r=>tg(e,r))}}function c(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,r),i=Ep(t,r);s&&(s.get||s.set?(i.get=s.get||i.get,i.set=s.set||i.set):"value"in s&&("value"in e&&te.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=s.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const n=e.aliasOf;if(n){const p=typeof n=="string"?n:n.source,d=typeof n=="string"?null:n.overridable===!0;let h;i.dependsOn=[p],i.get=function(){let f=Jh(this,p);if(typeof f=="function"){h||(h=p.split(".").slice(0,-1).join("."));const y=Jh(this,h);y&&(f=f.bind(y))}return f},i.readOnly||(i.set=d?function(f){f!==void 0?this._override(r,f):this._clearOverride(r)}:function(f){Wh(this,p,f)})}const a=e.type,u=e.types;i.cast||(a?i.cast=BC(a):u&&(Array.isArray(u)?i.cast=tp(yi(u[0])):i.cast=yi(u))),e.range&&(i.cast=oI(i.cast,e.range)),qR(i,e)}}function Y1(e,t,r){const s=Ep(e,r);s.json||(s.json={});let i=s.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function BC(e){let t=0,r=e;if(UC(e))return nI(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const s=r;if(iI(s))return t===0?Xm(s):Xh(Xm(s),t);if(t===1)return DC(s);if(t>1)return VC(s,t);const i=e;return i.from?i.from:rt(i)}function oI(e,t){return r=>{let s=+e(r);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}function GC(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const s in r)if(t[s]){const i=t[s];r[s].forEach(n=>{t[n]=i}),delete t[s]}}}class Rr extends Vf{constructor(t,r,s){if(super(t,r,s),!(this instanceof Rr))return new Rr(t,r,s)}}Rr.prototype.type="warning";function aI(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const rg=te.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Q_(e,t,r){var s,i;e&&(!r&&!t.read||(s=t.read)!=null&&s.reader||((i=t.read)==null?void 0:i.enabled)===!1||WC(e)&&Ar("read.reader",Ia(e),t))}function Ia(e){var t;const r=(t=e.ndimArray)!=null?t:0;if(r>1)return HC(e);if(r===1)return Z_(e);if("type"in e&&uI(e.type)){var s,i;const n=(s=e.type.prototype)==null||(i=s.itemType)==null?void 0:i.Type,a=Z_(typeof n=="function"?{type:n}:{types:n});return(u,p,d)=>{const h=a(u,p,d);return h&&new e.type(h)}}return X1(e)}function X1(e){return"type"in e?JC(e.type):KC(e.types)}function JC(e){return e.prototype.read?(t,r,s)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void rg.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const n=new e;return n.read(t,s),n}:e.fromJSON}function lI(e,t,r,s){return s!==0&&Array.isArray(t)?t.map(i=>lI(e,i,r,s-1)):e(t,void 0,r)}function HC(e){var t;const r=X1(e),s=lI.bind(null,r),i=(t=e.ndimArray)!=null?t:0;return(n,a,u)=>{if(n==null)return n;n=s(n,u,i);let p=i,d=n;for(;p>0&&Array.isArray(d);)p--,d=d[0];if(d!==void 0)for(let h=0;h<p;h++)n=[n];return n}}function Z_(e){const t=X1(e);return(r,s,i)=>{if(r==null)return r;if(Array.isArray(r)){const a=[];for(const u of r){const p=t(u,void 0,i);p!==void 0&&a.push(p)}return a}const n=t(r,void 0,i);return n!==void 0?[n]:void 0}}function uI(e){if(!aI(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?eb(t.Type):cI(t.Type))}function WC(e){return"types"in e?cI(e.types):eb(e.type)}function eb(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||uI(e))}function cI(e){for(const t in e.typeMap)if(!eb(e.typeMap[t]))return!1;return!0}function KC(e){var t;let r=null;const s=(t=e.errorContext)!=null?t:"type";return(i,n,a)=>{if(i==null)return i;const u=typeof i;if(u!=="object")return void rg.error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);r||(r=QC(e));const p=e.key;if(typeof p!="string")return;const d=i[p],h=d?r[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${d||"unknown"}' is not supported`;return a&&a.messages&&i&&a.messages.push(new Rr(`${s}:unsupported`,y,{definition:i,context:a})),void rg.error(y)}const f=new h;return f.read(i,a),f}}function QC(e){const t={};for(const i in e.typeMap){var r,s;const n=e.typeMap[i],a=Op(n.prototype);if(typeof e.key=="function")continue;const u=a.properties[e.key];if(!u)continue;(r=u.json)!=null&&r.type&&Array.isArray(u.json.type)&&u.json.type.length===1&&typeof u.json.type[0]=="string"&&(t[u.json.type[0]]=n);const p=(s=u.json)==null?void 0:s.write;if(!p||!p.writer){t[i]=n;continue}const d=p.target,h=typeof d=="string"?d:e.key,f={};p.writer(i,f,h),f[h]&&(t[f[h]]=n)}return t}function ZC(e){if(e.json||(e.json={}),X_(e.json),eS(e.json),Y_(e.json),e.json.origins)for(const t in e.json.origins)X_(e.json.origins[t]),eS(e.json.origins[t]),Y_(e.json.origins[t]);return!0}function Y_(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function X_(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function eS(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const YC=te.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function tS(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const s=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(s===1||"type"in e&&aI(e.type))?t.write.writer=t6:s>1?t.write.writer=r6(s):t.types?Array.isArray(t.types)?t.write.writer=e6(t.types[0]):t.write.writer=XC(t.types):t.write.writer=rp}function XC(e){return(t,r,s,i)=>t?pI(t,e,i)?rp(t,r,s,i):void 0:rp(t,r,s,i)}function pI(e,t,r){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r!=null&&r.messages){var s,i;const n=(s=t.errorContext)!=null?s:"type",a=`Values of type '${(i=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?i:"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new F(`${n}:unsupported`,a,{definition:e,context:r})),YC.error(a)}return!1}function e6(e){return(t,r,s,i)=>!t||!Array.isArray(t)?rp(t,r,s,i):rp(t.filter(n=>pI(n,e,i)),r,s,i)}function rp(e,t,r,s){Ar(r,ef(e,s),t)}function ef(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?dI(e):e}function dI(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function t6(e,t,r,s){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(n=>ef(n,s)),typeof i.toArray=="function"&&(i=i.toArray())):i=[ef(e,s)],Ar(r,i,t)}function hI(e,t,r){return r!==0&&Array.isArray(e)?e.map(s=>hI(s,t,r-1)):ef(e,t)}function r6(e){return function(t,r,s,i){let n;if(t===null)n=null;else{n=hI(t,i,e);let a=e,u=n;for(;a>0&&Array.isArray(u);)a--,u=u[0];if(u!==void 0)for(let p=0;p<a;p++)n=[n]}Ar(s,n,r)}}function sg(e,t){return tb(e,"read",t)}function fI(e,t){return tb(e,"write",t)}function tb(e,t,r){let s=e&&e.json;if(e&&e.json&&e.json.origins&&r){const i=e.json.origins[r.origin];i&&(t==="any"||t in i)&&(s=i)}return s}function s6(e){const t=i6(e);if(e.json.origins)for(const r in e.json.origins){const s=e.json.origins[r],i=s.types?n6(s):t;Q_(i,s,!1),s.types&&!s.write&&e.json.write&&e.json.write.enabled&&(s.write=A({},e.json.write)),tS(i,s)}Q_(t,e.json,!0),tS(t,e.json)}function i6(e){return e.json.types?ig(e.json):e.type?yI(e):ig(e)}function n6(e){return e.type?yI(e):ig(e)}function yI(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!iI(r);)r=r[0],t++;return{type:r,ndimArray:t}}function ig(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function o6(e){ZC(e)&&(GC(e),s6(e))}const Jy=new Set,Hy=new Set;function b(e){return t=>{t.prototype.declaredClass=e,l6(t);const r=[],s=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!Jy.has(i.initialize)&&(Jy.add(i.initialize),r.push(i.initialize)),i.hasOwnProperty("destroy")&&!Hy.has(i.destroy)&&(Hy.add(i.destroy),s.push(i.destroy)),i=Object.getPrototypeOf(i);Jy.clear(),Hy.clear();class n extends t{constructor(...u){if(super(...u),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let p=r.length-1;p>=0;p--)r[p].call(this)}}),s.length){let p=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!p){p=!0;for(let d=0;d<s.length;d++)s[d].call(this)}}})}this.postscript(...u)}}}return n.__accessorMetadata__=Op(t.prototype),n.prototype.declaredClass=e,n}}function a6(e,t){return t.get==null?function(){const r=this.__accessor__.properties.get(e);if(r===void 0)return;Oe(r);const s=this.__accessor__.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const r=this.__accessor__.properties.get(e);if(r!==void 0)return r.getComputed()}}function l6(e){const t=e.prototype,r=Op(t).properties,s={};for(const i of Object.getOwnPropertyNames(r)){const n=r[i];o6(n),s[i]={enumerable:!0,configurable:!0,get:a6(i,n),set(a){const u=this.__accessor__;if(u!==void 0){if(!Object.isFrozen(this)){if(u.initialized&&n.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${i}' of ${this.declaredClass}`);if(u.lifecycle===di.CONSTRUCTED&&n.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${i}' of ${this.declaredClass}`);u.set(i,a)}}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(e.prototype,s)}function u6(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class ht{constructor(...t){if(this.constructor===ht)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new ZR(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class a extends n{constructor(...p){super(...p),this.inherited=null,i&&i.apply(this,p)}}Op(a.prototype);for(const u in t){const p=t[u];a.prototype[u]=typeof p=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...y){if(n.prototype[u])return n.prototype[u].apply(this,y)};try{f=p.apply(this,d)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[u]}for(const u in r){const p=u6(r[u]);c(p)(a.prototype,u)}return b(s)(a)}postscript(t){const r=this.__accessor__,s=r.ctorArgs||t;r.initialize(),s&&(this.set(s),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||($C(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===di.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Jh(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return Ba(te.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Wh(this,t,r),this}watch(t,r,s){return jC(this,t,r,s)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}class Ol{constructor(){this._emitter=new Ol.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(i=null){this.target=i,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(i,n){const a=this._listenersMap&&this._listenersMap.get(i);if(!a)return!1;const u=this.target||this;return[...a].forEach(p=>{p.call(u,n)}),a.length>0}on(i,n){if(Array.isArray(i)){const u=i.map(p=>this.on(p,n));return Df(u)}if(i.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const a=this._listenersMap.get(i)||[];return a.push(n),this._listenersMap.set(i,a),{remove:()=>{const u=this._listenersMap&&this._listenersMap.get(i)||[],p=u.indexOf(n);p>=0&&u.splice(p,1)}}}once(i,n){const a=this.on(i,u=>{a.remove(),n.call(null,u)});return a}hasEventListener(i){const n=this._listenersMap&&this._listenersMap.get(i);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let i=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,a){return this._emitter.emit(n,a)}on(n,a){return this._emitter.on(n,a)}once(n,a){return this._emitter.once(n,a)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return i=o([b("esri.core.Evented")],i),i};let r=class extends ht{constructor(){super(...arguments),this._emitter=new Ol.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,i){return this._emitter.emit(s,i)}on(s,i){return this._emitter.on(s,i)}once(s,i){return this._emitter.once(s,i)}hasEventListener(s){return this._emitter.hasEventListener(s)}};r=o([b("esri.core.Evented")],r),e.EventedAccessor=r})(Ol||(Ol={}));const Rp=Ol;var He;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(He||(He={}));function rb(e){return(t,r)=>{t[r]=e}}class c6{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new V3(this._observers,t)}notify(){const t=this._observers.slice();for(let r=0;r<t.length;++r){const s=t[r];s.onInvalidated(),s.onCommitted()}}}var Bi;class p6{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Yr=new Xi(p6,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),d6=()=>{};function Wy(e){return e?e instanceof Qo?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Ky(e){if(e&&e.length)return e[0]}function h6(e,t,r,s){const i=Math.min(e.length-r,t.length-s);let n=0;for(;n<i&&e[r+n]===t[s+n];)n++;return n}function mI(e,t,r,s){t&&t.forEach((i,n,a)=>{e.push(i),mI(e,r.call(s,i,n,a),r,s)})}const hn=new Set,fn=new Set,yn=new Set,Qy=new Map;let f6=0,Qo=Bi=class extends Rp.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new c6,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:f6++})}static isCollection(e){return e!=null&&e instanceof Bi}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Bi?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Oe(this._observable),this._items}set items(e){this._emitBeforeChanges(He.ADD)||(this._splice(0,this.length,Wy(e)),this._emitAfterChanges(He.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,s={removed:!1,callback:t};return r.push(s),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=d6,s.removed=!0,r.splice(r.indexOf(s),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Oe(this._observable),this._emitBeforeChanges(He.ADD))return this;const r=this.getNextIndex(t!=null?t:null);return this._splice(r,0,[e]),this._emitAfterChanges(He.ADD),this}addMany(e,t=this._items.length){if(Oe(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(He.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Wy(e)),this._emitAfterChanges(He.ADD),this}at(e){if(Oe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Oe(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(He.REMOVE),e}clone(){return Oe(this._observable),this._createNewInstance({items:this._items.map(j)})}concat(...e){Oe(this._observable);const t=e.map(Wy);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Oe(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const r=this._splice(0,this.length),s=r.length;for(let i=0;i<s;i++)e.call(t,r[i],i,r);this._emitAfterChanges(He.REMOVE)}every(e,t){return Oe(this._observable),this._items.every(e,t)}filter(e,t){let r;return Oe(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Oe(this._observable),this._items.find(e,t)}findIndex(e,t){return Oe(this._observable),this._items.findIndex(e,t)}flatten(e,t){Oe(this._observable);const r=[];return mI(r,this,e,t),new Bi(r)}forEach(e,t){return Oe(this._observable),this._items.forEach(e,t)}getItemAt(e){return Oe(this._observable),this._items[e]}getNextIndex(e){Oe(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Oe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Oe(this._observable),this._items.indexOf(e,t)}join(e=","){return Oe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Oe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Oe(this._observable);const r=this._items.map(e,t);return new Bi({items:r})}reorder(e,t=this.length-1){Oe(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(He.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(He.MOVE)}return e}}pop(){if(Oe(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const e=Ky(this._splice(this.length-1,1));return this._emitAfterChanges(He.REMOVE),e}push(...e){return Oe(this._observable),this._emitBeforeChanges(He.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(He.ADD)),this.length}reduce(e,t){Oe(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Oe(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Oe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Oe(this._observable),e<0||e>=this.length||this._emitBeforeChanges(He.REMOVE))return;const t=Ky(this._splice(e,1));return this._emitAfterChanges(He.REMOVE),t}removeMany(e){if(Oe(this._observable),!e||!e.length||this._emitBeforeChanges(He.REMOVE))return[];const t=e instanceof Bi?e.toArray():e,r=this._items,s=[],i=t.length;for(let n=0;n<i;n++){const a=t[n],u=r.indexOf(a);if(u>-1){const p=1+h6(t,r,n+1,u+1),d=this._splice(u,p);d&&d.length>0&&s.push.apply(s,d),n+=p-1}}return this._emitAfterChanges(He.REMOVE),s}reverse(){if(Oe(this._observable),this._emitBeforeChanges(He.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(He.MOVE),this}shift(){if(Oe(this._observable),!this.length||this._emitBeforeChanges(He.REMOVE))return;const e=Ky(this._splice(0,1));return this._emitAfterChanges(He.REMOVE),e}slice(e=0,t=this.length){return Oe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Oe(this._observable),this._items.some(e,t)}sort(e){if(Oe(this._observable),!this.length||this._emitBeforeChanges(He.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(He.MOVE),this}splice(e,t,...r){Oe(this._observable);const s=(t?He.REMOVE:0)|(r.length?He.ADD:0);if(this._emitBeforeChanges(s))return[];const i=this._splice(e,t,r)||[];return this._emitAfterChanges(s),i}toArray(){return Oe(this._observable),this._items.slice()}toJSON(){return Oe(this._observable),this.toArray()}toLocaleString(){return Oe(this._observable),this._items.toLocaleString()}toString(){return Oe(this._observable),this._items.toString()}unshift(...e){return Oe(this._observable),!e.length||this._emitBeforeChanges(He.ADD)||(this._splice(0,0,e),this._emitAfterChanges(He.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const s=this._items,i=this.itemType;let n,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Bf(()=>this._dispatchChange())),t){if(a=s.splice(e,t),this.hasEventListener("before-remove")){const u=Yr.acquire();u.target=this,u.cancellable=!0;for(let p=0,d=a.length;p<d;p++)n=a[p],u.reset(n),this.emit("before-remove",u),u.defaultPrevented&&(a.splice(p,1),s.splice(e,0,n),e+=1,p-=1,d-=1);Yr.release(u)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const u=Yr.acquire();u.target=this,u.cancellable=!1;const p=a.length;for(let d=0;d<p;d++)u.reset(a[d]),this.emit("after-remove",u);Yr.release(u)}}if(r&&r.length){if(i){const h=[];for(const f of r){const y=i.ensureType(f);y==null&&f!=null||h.push(y)}r=h}const u=this.hasEventListener("before-add"),p=this.hasEventListener("after-add"),d=e===this.length;if(u||p){const h=Yr.acquire();h.target=this,h.cancellable=!0;const f=Yr.acquire();f.target=this,f.cancellable=!1;for(const y of r)u?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(d?s.push(y):s.splice(e++,0,y),this._set("length",s.length),p&&(f.reset(y),this.emit("after-add",f)))):(d?s.push(y):s.splice(e++,0,y),this._set("length",s.length),f.reset(y),this.emit("after-add",f));Yr.release(f),Yr.release(h)}else{if(d)for(const h of r)s.push(h);else s.splice(e,0,...r);this._set("length",s.length)}}return(r&&r.length||a&&a.length)&&this._notifyChangeEvent(r,a),a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Yr.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Yr.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Yr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Yr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;hn.clear(),fn.clear(),yn.clear();for(const{added:p,removed:d}of r){if(p)if(yn.size===0&&fn.size===0)for(const h of p)hn.add(h);else for(const h of p)fn.has(h)?(yn.add(h),fn.delete(h)):yn.has(h)||hn.add(h);if(d)if(yn.size===0&&hn.size===0)for(const h of d)fn.add(h);else for(const h of d)hn.has(h)?hn.delete(h):(yn.delete(h),fn.add(h))}const s=As.acquire();hn.forEach(p=>{s.push(p)});const i=As.acquire();fn.forEach(p=>{i.push(p)});const n=this._items,a=t.items,u=As.acquire();if(yn.forEach(p=>{a.indexOf(p)!==n.indexOf(p)&&u.push(p)}),t.listeners&&(s.length||i.length||u.length)){const p={target:this,added:s,removed:i,moved:u},d=t.listeners.length;for(let h=0;h<d;h++){const f=t.listeners[h];f.removed||f.callback.call(this,p)}}As.release(s),As.release(i),As.release(u)}hn.clear(),fn.clear(),yn.clear()}};Qo.ofType=e=>{if(!e)return Bi;if(Qy.has(e))return Qy.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const i=e.typeMap[s].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends Bi{};return o([rb({Type:e,ensureType:typeof e=="function"?rt(e):yi(e)})],r.prototype,"itemType",void 0),r=o([b(`esri.core.Collection<${t}>`)],r),Qy.set(e,r),r},o([c()],Qo.prototype,"length",void 0),o([c()],Qo.prototype,"items",null),Qo=Bi=o([b("esri.core.Collection")],Qo);const ut=Qo;class sb{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new sb;return this._values.forEach((s,i)=>{t&&t.has(i)||r.set(i,j(s.value),s.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const s=this._values.get(t);return r==null||(s==null?void 0:s.origin)===r?s==null?void 0:s.value:void 0}originOf(t){var r,s;return(r=(s=this._values.get(t))==null?void 0:s.origin)!=null?r:Fe.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(s=>{var i;return((i=this._values.get(s))==null?void 0:i.origin)===t})}set(t,r,s){if((s=this._normalizeOrigin(s))===Fe.DEFAULTS){const i=this._values.get(t);if(i&&i.origin!=null&&i.origin>s)return}this._values.set(t,new y6(r,s))}delete(t,r){var s;(r=this._normalizeOrigin(r))!=null&&((s=this._values.get(t))==null?void 0:s.origin)!==r||this._values.delete(t)}has(t,r){var s;return(r=this._normalizeOrigin(r))!=null?((s=this._values.get(t))==null?void 0:s.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},s)=>t(r,s))}_normalizeOrigin(t){if(t!=null)return t===Fe.DEFAULTS?t:Fe.USER}}class y6{constructor(t,r){this.value=t,this.origin=r}}function gI(e,t,r){t.keys().forEach(i=>{r.set(i,t.get(i),Fe.DEFAULTS)});const s=e.metadatas;Object.keys(s).forEach(i=>{e.internalGet(i)&&r.set(i,e.internalGet(i),Fe.DEFAULTS)})}function m6(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.indexOf(".")>-1&&s.indexOf(t)===0&&z_(s,r))return!0}else for(const i of s)if(i===t||i.indexOf(".")>-1&&i.indexOf(t)===0&&z_(i,r))return!0;return!1}function g6(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function v6(e,t,r,s,i){let n=sg(t[r],i);g6(n)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))n=sg(t[a],i),m6(n,r,s)&&(e[a]=!0)}function b6(e,t,r,s){const i=r.metadatas,n=tb(i[t],"any",s),a=n&&n.default;if(a===void 0)return;const u=typeof a=="function"?a.call(e,t,s):a;u!==void 0&&r.set(t,u)}const vI={origin:"service"};function bI(e,t,r=vI){if(!t||typeof t!="object")return;const s=ar(e),i=s.metadatas,n={};for(const a of Object.getOwnPropertyNames(t))v6(n,i,a,t,r);s.setDefaultOrigin(r.origin);for(const a of Object.getOwnPropertyNames(n)){const u=sg(i[a],r).read,p=u&&u.source;let d;d=p&&typeof p=="string"?Mp(t,p):t[a],u&&u.reader&&(d=u.reader.call(e,d,t,r)),d!==void 0&&s.set(a,d)}if(!r||!r.ignoreDefaults){s.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(i))n[a]||b6(e,a,s,r)}s.setDefaultOrigin("user")}function w6(e,t,r,s=vI){var i;const n=ve(A({},s),{messages:[]});r(n),(i=n.messages)==null||i.forEach(a=>{a.type!=="warning"||e.loaded?s&&s.messages&&s.messages.push(a):e.loadWarnings.push(a)})}const _6=te.getLogger("esri.core.accessorSupport.write");function S6(e,t,r,s,i){var n,a;const u={};return(n=t.write)==null||(a=n.writer)==null||a.call(e,s,u,r,i),u}function wI(e,t,r,s,i,n){if(!s||!s.write)return!1;const a=e.get(r);if(!i&&s.write.overridePolicy){const u=s.write.overridePolicy.call(e,a,r,n);u!==void 0&&(i=u)}if(i||(i=s.write),!i||i.enabled===!1)return!1;if((a===null&&!i.allowNull&&!i.writerEnsuresNonNull||a===void 0)&&i.isRequired){const u=new F("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return u&&n&&n.messages?n.messages.push(u):u&&!n&&_6.error(u.name,u.message),!1}return!(a===void 0||a===null&&!i.allowNull&&!i.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(r)===Fe.DEFAULTS)&&x6(e,r,n,s,a)||!i.ignoreOrigin&&n&&n.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Ki(n.origin))}function x6(e,t,r,s,i){const n=s.default;if(n===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(i);if(typeof n=="function"){if(Array.isArray(i)){const a=n.call(e,t,r);return q1(a,i)}return!1}return n===i}function _I(e,t,r,s){const i=ar(e),n=i.metadatas,a=fI(n[t],s);return!!a&&wI(e,i,t,a,r,s)}function SI(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Ud(t,e.toJSON());const s=ar(e),i=s.metadatas;for(const u in i){const p=fI(i[u],r);if(!wI(e,s,u,p,void 0,r))continue;const d=e.get(u),h=S6(e,p,p.write&&typeof p.write.target=="string"?p.write.target:u,d,r);var n,a;Object.keys(h).length>0&&(t=Ud(t,h),r!=null&&(n=r.resources)!=null&&(a=n.pendingOperations)!=null&&a.length&&Promise.all(r.resources.pendingOperations).then(()=>Ud(t,h)),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:u,oldOrigin:JR(s.store.originOf(u)),newOrigin:r.origin}))}return t}const Kf=e=>{let t=class extends e{constructor(...r){super(...r);const s=ar(this),i=s.store,n=new sb;s.store=n,gI(s,i,n)}read(r,s){bI(this,r,s)}write(r={},s){return SI(this,r,s)}toJSON(r){return this.write({},r)}static fromJSON(r,s){return $6.call(this,r,s)}};return t=o([b("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function $6(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let D=class extends Kf(ht){};D=o([b("esri.core.JSONSupport")],D);const I6=Object.prototype.toString;function M6(e){const t="__accessorMetadata__"in e?rt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return O6.apply(this,r)}}function O6(e,t,r,s){Ep(e,t).cast=s}function E6(e){return function(t,r){Ep(t,e).cast=t[r]}}function _t(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&I6.call(e[0])==="[object Function]"?M6(e[0]):e.length===1&&typeof e[0]=="string"?E6(e[0]):void 0}function Y(e,t,r){let s,i;return t===void 0||Array.isArray(t)?(i=e,r=t,s=[void 0]):(i=t,s=Array.isArray(e)?e:[e]),(n,a)=>{const u=n.constructor.prototype;s.forEach(p=>{const d=Y1(n,p,i);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=u[a],r&&(d.read.source=(d.read.source||[]).concat(r))})}}function re(e,t,r){let s,i;return t===void 0?(i=e,s=[void 0]):typeof t!="string"?(i=e,s=[void 0],r=t):(i=t,s=Array.isArray(e)?e:[e]),(n,a)=>{const u=n.constructor.prototype;for(const p of s){const d=Y1(n,p,i);d.write&&typeof d.write=="object"||(d.write={}),r&&(d.write.target=r),d.write.writer=u[a]}}}var Vl;function T6(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,s="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>s)return Vl.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return Vl.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Vl||(Vl={}));var ga;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(ga||(ga={}));let l;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(l=2e3;l<=2045;l++)g[l]=0;for(l=2056;l<=2065;l++)g[l]=0;for(l=2067;l<=2135;l++)g[l]=0;for(l=2137;l<=2154;l++)g[l]=0;for(l=2161;l<=2170;l++)g[l]=0;for(l=2172;l<=2193;l++)g[l]=0;for(l=2195;l<=2198;l++)g[l]=0;for(l=2200;l<=2203;l++)g[l]=0;for(l=2205;l<=2217;l++)g[l]=0;for(l=2222;l<=2224;l++)g[l]=1;for(l=2225;l<=2250;l++)g[l]=2;for(l=2251;l<=2253;l++)g[l]=1;for(l=2257;l<=2264;l++)g[l]=2;for(l=2274;l<=2279;l++)g[l]=2;for(l=2280;l<=2282;l++)g[l]=1;for(l=2283;l<=2289;l++)g[l]=2;for(l=2290;l<=2292;l++)g[l]=0;for(l=2308;l<=2313;l++)g[l]=0;for(l=2315;l<=2491;l++)g[l]=0;for(l=2494;l<=2866;l++)g[l]=0;for(l=2867;l<=2869;l++)g[l]=1;for(l=2870;l<=2888;l++)g[l]=2;for(l=2891;l<=2895;l++)g[l]=2;for(l=2896;l<=2898;l++)g[l]=1;for(l=2902;l<=2908;l++)g[l]=2;for(l=2915;l<=2920;l++)g[l]=2;for(l=2921;l<=2923;l++)g[l]=1;for(l=2924;l<=2930;l++)g[l]=2;for(l=2931;l<=2962;l++)g[l]=0;for(l=2964;l<=2968;l++)g[l]=2;for(l=2969;l<=2973;l++)g[l]=0;for(l=2975;l<=2991;l++)g[l]=0;for(l=2995;l<=3051;l++)g[l]=0;for(l=3054;l<=3079;l++)g[l]=0;for(l=3081;l<=3088;l++)g[l]=0;for(l=3092;l<=3101;l++)g[l]=0;for(l=3106;l<=3138;l++)g[l]=0;for(l=3146;l<=3151;l++)g[l]=0;for(l=3153;l<=3166;l++)g[l]=0;for(l=3168;l<=3172;l++)g[l]=0;for(l=3174;l<=3203;l++)g[l]=0;for(l=3294;l<=3358;l++)g[l]=0;for(l=3367;l<=3403;l++)g[l]=0;for(l=3408;l<=3416;l++)g[l]=0;for(l=3417;l<=3438;l++)g[l]=2;for(l=3441;l<=3446;l++)g[l]=2;for(l=3447;l<=3450;l++)g[l]=0;for(l=3451;l<=3459;l++)g[l]=2;for(l=3460;l<=3478;l++)g[l]=0;for(l=3554;l<=3559;l++)g[l]=0;for(l=3560;l<=3570;l++)g[l]=2;for(l=3571;l<=3581;l++)g[l]=0;for(l=3594;l<=3597;l++)g[l]=0;for(l=3601;l<=3604;l++)g[l]=0;for(l=3637;l<=3639;l++)g[l]=0;for(l=3665;l<=3667;l++)g[l]=0;for(l=3693;l<=3695;l++)g[l]=0;for(l=3701;l<=3727;l++)g[l]=0;for(l=3728;l<=3739;l++)g[l]=2;for(l=3740;l<=3751;l++)g[l]=0;for(l=3753;l<=3760;l++)g[l]=2;for(l=3761;l<=3773;l++)g[l]=0;for(l=3775;l<=3777;l++)g[l]=0;for(l=3779;l<=3781;l++)g[l]=0;for(l=3783;l<=3785;l++)g[l]=0;for(l=3788;l<=3791;l++)g[l]=0;for(l=3797;l<=3802;l++)g[l]=0;for(l=3814;l<=3816;l++)g[l]=0;for(l=3825;l<=3829;l++)g[l]=0;for(l=3832;l<=3841;l++)g[l]=0;for(l=3844;l<=3852;l++)g[l]=0;for(l=3873;l<=3885;l++)g[l]=0;for(l=3890;l<=3893;l++)g[l]=0;for(l=3907;l<=3912;l++)g[l]=0;for(l=3942;l<=3950;l++)g[l]=0;for(l=3968;l<=3970;l++)g[l]=0;for(l=3973;l<=3976;l++)g[l]=0;for(l=3986;l<=3989;l++)g[l]=0;for(l=3994;l<=3997;l++)g[l]=0;for(l=4048;l<=4051;l++)g[l]=0;for(l=4056;l<=4063;l++)g[l]=0;for(l=4093;l<=4096;l++)g[l]=0;for(l=4390;l<=4398;l++)g[l]=0;for(l=4399;l<=4413;l++)g[l]=2;for(l=4418;l<=4433;l++)g[l]=2;for(l=4455;l<=4457;l++)g[l]=2;for(l=4484;l<=4489;l++)g[l]=0;for(l=4491;l<=4554;l++)g[l]=0;for(l=4568;l<=4589;l++)g[l]=0;for(l=4652;l<=4656;l++)g[l]=0;for(l=4766;l<=4800;l++)g[l]=0;for(l=5014;l<=5016;l++)g[l]=0;for(l=5069;l<=5072;l++)g[l]=0;for(l=5105;l<=5130;l++)g[l]=0;for(l=5173;l<=5188;l++)g[l]=0;for(l=5253;l<=5259;l++)g[l]=0;for(l=5269;l<=5275;l++)g[l]=0;for(l=5292;l<=5311;l++)g[l]=0;for(l=5329;l<=5331;l++)g[l]=0;for(l=5343;l<=5349;l++)g[l]=0;for(l=5355;l<=5357;l++)g[l]=0;for(l=5387;l<=5389;l++)g[l]=0;for(l=5459;l<=5463;l++)g[l]=0;for(l=5479;l<=5482;l++)g[l]=0;for(l=5518;l<=5520;l++)g[l]=0;for(l=5530;l<=5539;l++)g[l]=0;for(l=5550;l<=5552;l++)g[l]=0;for(l=5562;l<=5583;l++)g[l]=0;for(l=5623;l<=5625;l++)g[l]=2;for(l=5631;l<=5639;l++)g[l]=0;for(l=5649;l<=5653;l++)g[l]=0;for(l=5663;l<=5680;l++)g[l]=0;for(l=5682;l<=5685;l++)g[l]=0;for(l=5875;l<=5877;l++)g[l]=0;for(l=5896;l<=5899;l++)g[l]=0;for(l=5921;l<=5940;l++)g[l]=0;for(l=6050;l<=6125;l++)g[l]=0;for(l=6244;l<=6275;l++)g[l]=0;for(l=6328;l<=6348;l++)g[l]=0;for(l=6350;l<=6356;l++)g[l]=0;for(l=6366;l<=6372;l++)g[l]=0;for(l=6381;l<=6387;l++)g[l]=0;for(l=6393;l<=6404;l++)g[l]=0;for(l=6480;l<=6483;l++)g[l]=0;for(l=6511;l<=6514;l++)g[l]=0;for(l=6579;l<=6581;l++)g[l]=0;for(l=6619;l<=6624;l++)g[l]=0;for(l=6625;l<=6627;l++)g[l]=2;for(l=6628;l<=6632;l++)g[l]=0;for(l=6634;l<=6637;l++)g[l]=0;for(l=6669;l<=6692;l++)g[l]=0;for(l=6707;l<=6709;l++)g[l]=0;for(l=6720;l<=6723;l++)g[l]=0;for(l=6732;l<=6738;l++)g[l]=0;for(l=6931;l<=6933;l++)g[l]=0;for(l=6956;l<=6959;l++)g[l]=0;for(l=7005;l<=7007;l++)g[l]=0;for(l=7057;l<=7070;l++)g[l]=2;for(l=7074;l<=7082;l++)g[l]=0;for(l=7109;l<=7118;l++)g[l]=0;for(l=7119;l<=7127;l++)g[l]=1;for(l=7374;l<=7376;l++)g[l]=0;for(l=7528;l<=7586;l++)g[l]=0;for(l=7587;l<=7645;l++)g[l]=2;for(l=7692;l<=7696;l++)g[l]=0;for(l=7755;l<=7787;l++)g[l]=0;for(l=7791;l<=7795;l++)g[l]=0;for(l=7799;l<=7801;l++)g[l]=0;for(l=7803;l<=7805;l++)g[l]=0;for(l=7825;l<=7831;l++)g[l]=0;for(l=7845;l<=7859;l++)g[l]=0;for(l=8013;l<=8032;l++)g[l]=0;for(l=8065;l<=8068;l++)g[l]=1;for(l=8518;l<=8529;l++)g[l]=2;for(l=8533;l<=8536;l++)g[l]=2;for(l=8538;l<=8540;l++)g[l]=2;for(l=8677;l<=8679;l++)g[l]=0;for(l=8836;l<=8840;l++)g[l]=0;for(l=8857;l<=8859;l++)g[l]=0;for(l=8908;l<=8910;l++)g[l]=0;for(l=9154;l<=9159;l++)g[l]=0;for(l=9205;l<=9218;l++)g[l]=0;for(l=9271;l<=9273;l++)g[l]=0;for(l=9295;l<=9297;l++)g[l]=0;for(l=9356;l<=9360;l++)g[l]=0;for(l=9404;l<=9407;l++)g[l]=0;for(l=9476;l<=9482;l++)g[l]=0;for(l=9487;l<=9494;l++)g[l]=0;for(l=9697;l<=9699;l++)g[l]=0;for(l=20002;l<=20032;l++)g[l]=0;for(l=20062;l<=20092;l++)g[l]=0;for(l=20135;l<=20138;l++)g[l]=0;for(l=20248;l<=20258;l++)g[l]=0;for(l=20348;l<=20358;l++)g[l]=0;for(l=20436;l<=20440;l++)g[l]=0;for(l=20822;l<=20824;l++)g[l]=0;for(l=20904;l<=20932;l++)g[l]=0;for(l=20934;l<=20936;l++)g[l]=0;for(l=21004;l<=21032;l++)g[l]=0;for(l=21035;l<=21037;l++)g[l]=0;for(l=21095;l<=21097;l++)g[l]=0;for(l=21148;l<=21150;l++)g[l]=0;for(l=21207;l<=21264;l++)g[l]=0;for(l=21307;l<=21364;l++)g[l]=0;for(l=21413;l<=21423;l++)g[l]=0;for(l=21453;l<=21463;l++)g[l]=0;for(l=21473;l<=21483;l++)g[l]=0;for(l=21780;l<=21782;l++)g[l]=0;for(l=21891;l<=21894;l++)g[l]=0;for(l=21896;l<=21899;l++)g[l]=0;for(l=22171;l<=22177;l++)g[l]=0;for(l=22181;l<=22187;l++)g[l]=0;for(l=22191;l<=22197;l++)g[l]=0;for(l=22234;l<=22236;l++)g[l]=0;for(l=22521;l<=22525;l++)g[l]=0;for(l=22991;l<=22994;l++)g[l]=0;for(l=23028;l<=23038;l++)g[l]=0;for(l=23830;l<=23853;l++)g[l]=0;for(l=23866;l<=23872;l++)g[l]=0;for(l=23877;l<=23884;l++)g[l]=0;for(l=23886;l<=23894;l++)g[l]=0;for(l=23946;l<=23948;l++)g[l]=0;for(l=24311;l<=24313;l++)g[l]=0;for(l=24342;l<=24347;l++)g[l]=0;for(l=24370;l<=24374;l++)g[l]=10;for(l=24375;l<=24381;l++)g[l]=0;for(l=24718;l<=24721;l++)g[l]=0;for(l=24817;l<=24821;l++)g[l]=0;for(l=24877;l<=24882;l++)g[l]=0;for(l=24891;l<=24893;l++)g[l]=0;for(l=25391;l<=25395;l++)g[l]=0;for(l=25828;l<=25838;l++)g[l]=0;for(l=26191;l<=26195;l++)g[l]=0;for(l=26391;l<=26393;l++)g[l]=0;for(l=26701;l<=26722;l++)g[l]=0;for(l=26729;l<=26799;l++)g[l]=2;for(l=26801;l<=26803;l++)g[l]=2;for(l=26811;l<=26813;l++)g[l]=2;for(l=26847;l<=26870;l++)g[l]=2;for(l=26891;l<=26899;l++)g[l]=0;for(l=26901;l<=26923;l++)g[l]=0;for(l=26929;l<=26946;l++)g[l]=0;for(l=26948;l<=26998;l++)g[l]=0;for(l=27037;l<=27040;l++)g[l]=0;for(l=27205;l<=27232;l++)g[l]=0;for(l=27258;l<=27260;l++)g[l]=0;for(l=27391;l<=27398;l++)g[l]=0;for(l=27561;l<=27564;l++)g[l]=0;for(l=27571;l<=27574;l++)g[l]=0;for(l=27581;l<=27584;l++)g[l]=0;for(l=27591;l<=27594;l++)g[l]=0;for(l=28191;l<=28193;l++)g[l]=0;for(l=28348;l<=28358;l++)g[l]=0;for(l=28402;l<=28432;l++)g[l]=0;for(l=28462;l<=28492;l++)g[l]=0;for(l=29118;l<=29122;l++)g[l]=0;for(l=29168;l<=29172;l++)g[l]=0;for(l=29177;l<=29185;l++)g[l]=0;for(l=29187;l<=29195;l++)g[l]=0;for(l=29900;l<=29903;l++)g[l]=0;for(l=30161;l<=30179;l++)g[l]=0;for(l=30491;l<=30494;l++)g[l]=0;for(l=30729;l<=30732;l++)g[l]=0;for(l=31251;l<=31259;l++)g[l]=0;for(l=31265;l<=31268;l++)g[l]=0;for(l=31275;l<=31279;l++)g[l]=0;for(l=31281;l<=31297;l++)g[l]=0;for(l=31461;l<=31469;l++)g[l]=0;for(l=31491;l<=31495;l++)g[l]=0;for(l=31917;l<=31922;l++)g[l]=0;for(l=31965;l<=32e3;l++)g[l]=0;for(l=32001;l<=32003;l++)g[l]=2;for(l=32005;l<=32031;l++)g[l]=2;for(l=32033;l<=32060;l++)g[l]=2;for(l=32064;l<=32067;l++)g[l]=2;for(l=32074;l<=32077;l++)g[l]=2;for(l=32081;l<=32086;l++)g[l]=0;for(l=32107;l<=32130;l++)g[l]=0;for(l=32133;l<=32158;l++)g[l]=0;for(l=32164;l<=32167;l++)g[l]=2;for(l=32180;l<=32199;l++)g[l]=0;for(l=32201;l<=32260;l++)g[l]=0;for(l=32301;l<=32360;l++)g[l]=0;for(l=32601;l<=32662;l++)g[l]=0;for(l=32664;l<=32667;l++)g[l]=2;for(l=32701;l<=32761;l++)g[l]=0;for(l=53001;l<=53004;l++)g[l]=0;for(l=53008;l<=53019;l++)g[l]=0;for(l=53021;l<=53032;l++)g[l]=0;for(l=53034;l<=53037;l++)g[l]=0;for(l=53042;l<=53046;l++)g[l]=0;for(l=53074;l<=53080;l++)g[l]=0;for(l=54001;l<=54004;l++)g[l]=0;for(l=54008;l<=54019;l++)g[l]=0;for(l=54021;l<=54032;l++)g[l]=0;for(l=54034;l<=54037;l++)g[l]=0;for(l=54042;l<=54046;l++)g[l]=0;for(l=54048;l<=54053;l++)g[l]=0;for(l=54074;l<=54080;l++)g[l]=0;for(l=54098;l<=54101;l++)g[l]=0;for(l=102001;l<=102040;l++)g[l]=0;for(l=102042;l<=102063;l++)g[l]=0;for(l=102065;l<=102067;l++)g[l]=0;for(l=102070;l<=102117;l++)g[l]=0;for(l=102122;l<=102216;l++)g[l]=0;for(l=102221;l<=102377;l++)g[l]=0;for(l=102382;l<=102388;l++)g[l]=0;for(l=102389;l<=102398;l++)g[l]=2;for(l=102399;l<=102444;l++)g[l]=0;for(l=102445;l<=102447;l++)g[l]=2;for(l=102448;l<=102458;l++)g[l]=0;for(l=102459;l<=102468;l++)g[l]=2;for(l=102469;l<=102499;l++)g[l]=0;for(l=102500;l<=102519;l++)g[l]=1;for(l=102520;l<=102524;l++)g[l]=0;for(l=102525;l<=102529;l++)g[l]=2;for(l=102530;l<=102588;l++)g[l]=0;for(l=102590;l<=102598;l++)g[l]=0;for(l=102601;l<=102603;l++)g[l]=0;for(l=102605;l<=102628;l++)g[l]=0;for(l=102629;l<=102646;l++)g[l]=2;for(l=102648;l<=102700;l++)g[l]=2;for(l=102701;l<=102703;l++)g[l]=0;for(l=102707;l<=102730;l++)g[l]=2;for(l=102733;l<=102758;l++)g[l]=2;for(l=102767;l<=102900;l++)g[l]=0;for(l=102901;l<=102933;l++)g[l]=2;for(l=102934;l<=102950;l++)g[l]=13;for(l=102951;l<=102960;l++)g[l]=0;for(l=102965;l<=102969;l++)g[l]=0;for(l=102971;l<=102973;l++)g[l]=0;for(l=102975;l<=102989;l++)g[l]=0;for(l=102990;l<=102992;l++)g[l]=1;for(l=102997;l<=103002;l++)g[l]=0;for(l=103003;l<=103008;l++)g[l]=2;for(l=103009;l<=103011;l++)g[l]=0;for(l=103012;l<=103014;l++)g[l]=2;for(l=103019;l<=103021;l++)g[l]=0;for(l=103022;l<=103024;l++)g[l]=2;for(l=103029;l<=103031;l++)g[l]=0;for(l=103032;l<=103034;l++)g[l]=2;for(l=103065;l<=103068;l++)g[l]=0;for(l=103074;l<=103076;l++)g[l]=0;for(l=103077;l<=103079;l++)g[l]=1;for(l=103080;l<=103082;l++)g[l]=0;for(l=103083;l<=103085;l++)g[l]=2;for(l=103090;l<=103093;l++)g[l]=0;for(l=103097;l<=103099;l++)g[l]=0;for(l=103100;l<=103102;l++)g[l]=2;for(l=103107;l<=103109;l++)g[l]=0;for(l=103110;l<=103112;l++)g[l]=2;for(l=103113;l<=103116;l++)g[l]=0;for(l=103117;l<=103120;l++)g[l]=2;for(l=103153;l<=103157;l++)g[l]=0;for(l=103158;l<=103162;l++)g[l]=2;for(l=103163;l<=103165;l++)g[l]=0;for(l=103166;l<=103168;l++)g[l]=1;for(l=103169;l<=103171;l++)g[l]=2;for(l=103186;l<=103188;l++)g[l]=0;for(l=103189;l<=103191;l++)g[l]=2;for(l=103192;l<=103195;l++)g[l]=0;for(l=103196;l<=103199;l++)g[l]=2;for(l=103200;l<=103224;l++)g[l]=0;for(l=103225;l<=103227;l++)g[l]=1;for(l=103232;l<=103237;l++)g[l]=0;for(l=103238;l<=103243;l++)g[l]=2;for(l=103244;l<=103246;l++)g[l]=0;for(l=103247;l<=103249;l++)g[l]=2;for(l=103254;l<=103256;l++)g[l]=0;for(l=103257;l<=103259;l++)g[l]=2;for(l=103264;l<=103266;l++)g[l]=0;for(l=103267;l<=103269;l++)g[l]=2;for(l=103300;l<=103375;l++)g[l]=0;for(l=103381;l<=103383;l++)g[l]=0;for(l=103384;l<=103386;l++)g[l]=1;for(l=103387;l<=103389;l++)g[l]=0;for(l=103390;l<=103392;l++)g[l]=2;for(l=103397;l<=103399;l++)g[l]=0;for(l=103400;l<=103471;l++)g[l]=2;for(l=103476;l<=103478;l++)g[l]=0;for(l=103479;l<=103481;l++)g[l]=2;for(l=103486;l<=103488;l++)g[l]=0;for(l=103489;l<=103491;l++)g[l]=2;for(l=103492;l<=103495;l++)g[l]=0;for(l=103496;l<=103499;l++)g[l]=2;for(l=103528;l<=103543;l++)g[l]=0;for(l=103544;l<=103548;l++)g[l]=2;for(l=103549;l<=103551;l++)g[l]=0;for(l=103552;l<=103554;l++)g[l]=1;for(l=103555;l<=103557;l++)g[l]=2;for(l=103558;l<=103560;l++)g[l]=0;for(l=103571;l<=103573;l++)g[l]=0;for(l=103574;l<=103576;l++)g[l]=2;for(l=103577;l<=103580;l++)g[l]=0;for(l=103581;l<=103583;l++)g[l]=2;for(l=103595;l<=103694;l++)g[l]=0;for(l=103696;l<=103699;l++)g[l]=0;for(l=103700;l<=103793;l++)g[l]=2;for(l=103794;l<=103872;l++)g[l]=0;for(l=103900;l<=103971;l++)g[l]=2;const j6={102113:!0,102100:!0,3857:!0,3785:!0},A6={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},rS='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',ld=[-20037508342788905e-9,20037508342788905e-9],ud=[-20037508342787e-6,20037508342787e-6],xI={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ld,origin:ud,dx:1e-5},102100:{wkTemplate:rS,valid:ld,origin:ud,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ld,origin:ud,dx:1e-5},3857:{wkTemplate:rS,valid:ld,origin:ud,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ru(e,t){return!ae(e)&&!ae(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||va(e)&&va(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function Mc(e){return vi(e)&&e.wkid?xI[e.wkid]:null}function $I(e){return!!vi(e)&&(e.wkid?g[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function R6(e){return!(Qf(e)||Zf(e))}function sp(e){return vi(e)&&e.wkid===4326}function C6(e){return vi(e)&&e.wkid===ga.CGCS2000}function va(e){return vi(e)&&e.wkid!=null&&j6[e.wkid]===!0}function F6(e){return vi(e)&&e.wkid===32662}function ib(e){return e===ga.GCSMARS2000||e===ga.GCSMARS2000_SPHERE}function Qf(e){return vi(e)&&e.wkid!=null&&ib(e.wkid)}function nb(e){return e===ga.GCSMOON2000}function Zf(e){return vi(e)&&e.wkid!=null&&nb(e.wkid)}function k6(e){return vi(e)&&e.wkid!=null&&A6[e.wkid]===!0}function vi(e){return R(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const II={wkid:4326,wkt:$p(xI[4326].wkTemplate,{Central_Meridian:"0.0"})},P6={wkid:102100,latestWkid:3857},N6={wkid:32662};var Ks;let Ye=Ks=class extends D{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Ks.WebMercator;if(e.wkid===4326)return Ks.WGS84}const t=new Ks;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return sp(this)}get isWebMercator(){return va(this)}get isGeographic(){return $I(this)}get isWrappable(){return k6(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Ks.WGS84)return Ks.WGS84;if(this===Ks.WebMercator)return Ks.WebMercator;const e=new Ks;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=j(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||s?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):r?i.id===t&&i.referenceServiceName===r:i.id===t}return ru(this,e)}toJSON(e){return this.write(void 0,e)}};Ye.GCS_NAD_1927=null,Ye.WGS84=null,Ye.WebMercator=null,Ye.PlateCarree=null,o([c({readOnly:!0})],Ye.prototype,"isWGS84",null),o([c({readOnly:!0})],Ye.prototype,"isWebMercator",null),o([c({readOnly:!0})],Ye.prototype,"isGeographic",null),o([c({readOnly:!0})],Ye.prototype,"isWrappable",null),o([c({type:At,json:{write:!0}})],Ye.prototype,"latestWkid",void 0),o([c({type:At,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Ye.prototype,"wkid",void 0),o([c({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Ye.prototype,"wkt",void 0),o([re("wkt"),re("web-scene","wkt")],Ye.prototype,"writeWkt",null),o([c({type:At,json:{write:!0}})],Ye.prototype,"vcsWkid",void 0),o([c({type:At,json:{write:!0}})],Ye.prototype,"latestVcsWkid",void 0),o([c()],Ye.prototype,"imageCoordinateSystem",void 0),Ye=Ks=o([b("esri.geometry.SpatialReference")],Ye),Ye.prototype.toJSON.isDefaultToJSON=!0,Ye.GCS_NAD_1927=new Ye({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ye.WGS84=new Ye(II),Ye.WebMercator=new Ye(P6),Ye.PlateCarree=new Ye(N6),Object.freeze&&(Object.freeze(Ye.GCS_NAD_1927),Object.freeze(Ye.WGS84),Object.freeze(Ye.WebMercator));const ke=Ye;let Qs=class extends D{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ke.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof ke)return e;if(e!=null){const r=new ke;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};o([c()],Qs.prototype,"type",void 0),o([c({readOnly:!0})],Qs.prototype,"cache",null),o([c({readOnly:!0})],Qs.prototype,"extent",null),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qs.prototype,"hasM",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qs.prototype,"hasZ",void 0),o([c({type:ke,json:{write:!0}})],Qs.prototype,"spatialReference",void 0),o([Y("spatialReference")],Qs.prototype,"readSpatialReference",null),Qs=o([b("esri.geometry.Geometry")],Qs);const io=Qs;function L6(e,t,r,s){var i;return e.x=e.x+t,e.y=e.y+r,s!=null&&(e.z=((i=e.z)!=null?i:0)+s),e}function D6(e,t){const r=e.x-t.x,s=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+s*s+i*i)}class ob{constructor(t,r,s,i){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=s;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Jr=new ob(6378137,1/298.257223563,3e5,.006694379990137799),Cp=new ob(3396190,1/169.8944472236118,23e4),Fp=new ob(1737400,0,0),V6=57.29577951308232,z6=.017453292519943;function sS(e){return e*V6}function iS(e){return e*z6}function U6(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Jr.radius))}function ng(e){return e.wkid!=null||e.wkt!=null}const Zy=[0,0];function tf(e,t,r,s,i){const n=e,a=i;if(a.spatialReference=r,"x"in n&&"x"in a)[a.x,a.y]=t(n.x,n.y,Zy,s);else if("xmin"in n&&"xmin"in a)[a.xmin,a.ymin]=t(n.xmin,n.ymin,Zy,s),[a.xmax,a.ymax]=t(n.xmax,n.ymax,Zy,s);else if("paths"in n&&"paths"in a||"rings"in n&&"rings"in a){const u="paths"in n?n.paths:n.rings,p=[];let d;for(let h=0;h<u.length;h++){const f=u[h];d=[],p.push(d);for(let y=0;y<f.length;y++)d.push(t(f[y][0],f[y][1],[0,0],s)),f[y].length>2&&d[y].push(f[y][2]),f[y].length>3&&d[y].push(f[y][3])}"paths"in a?a.paths=p:a.rings=p}else if("points"in n&&"points"in a){const u=n.points,p=[];for(let d=0;d<u.length;d++)p[d]=t(u[d][0],u[d][1],[0,0],s),u[d].length>2&&p[d].push(u[d][2]),u[d].length>3&&p[d].push(u[d][3]);a.points=p}return i}function Oc(e,t){const r=e&&(ng(e)?e:e.spatialReference),s=t&&(ng(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!s)&&(!!ru(s,r)||va(s)&&sp(r)||va(r)&&sp(s))}function ab(e,t){if(ae(e))return null;const r=e.spatialReference,s=t&&(ng(t)?t:t.spatialReference);return Oc(r,s)?ru(r,s)?j(e):va(s)?tf(e,ra,ke.WebMercator,!1,j(e)):sp(s)?tf(e,El,ke.WGS84,!1,j(e)):null:null}function ra(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=iS(t);return r[0]=iS(e)*Jr.radius,r[1]=Jr.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),r}function El(e,t,r=[0,0],s=!1){const i=sS(e/Jr.radius);return r[0]=s?i:i-360*Math.floor((i+180)/360),r[1]=sS(Math.PI/2-2*Math.atan(Math.exp(-t/Jr.radius))),r}function Ec(e,t=!1,r=j(e)){return tf(e,ra,ke.WebMercator,t,r)}function Lu(e,t=!1,r=j(e)){return tf(e,El,ke.WGS84,t,r)}var Jd;const $u=[0,0];function nS(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const cd=te.getLogger("esri.geometry.Point");let fr=Jd=class extends io{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,s,i){let n;if(Array.isArray(e))n=e,i=t,e=n[0],t=n[1],r=n[2],s=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,s=n.m,(i=n.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new ke(i)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)cd.warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)cd.warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&i&&i.isWebMercator){const u=ra(n.longitude,n.latitude,$u);e=u[0],t=u[1]}}}else nS(r)?(i=r,r=null):nS(s)&&(i=s,s=null);const a={x:e,y:t};return a.x==null&&a.y!=null?cd.warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&cd.warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(a.spatialReference=i),r!=null&&(a.z=r),s!=null&&(a.m=s),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return El(t,r,$u)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",ra(r,e,$u)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return El(e,t,$u)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",ra(e,t,$u)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Jd;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Jd.copy(e,this),this}equals(e){if(ae(e))return!1;const{x:t,y:r,z:s,m:i,spatialReference:n}=this,{z:a,m:u}=e;let{x:p,y:d,spatialReference:h}=e;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[p,d]=ra(p,d),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[p,d]=El(p,d),h=n}return t===p&&r===d&&s===a&&i===u&&n.wkid===h.wkid}offset(e,t,r){return L6(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=Mc(this.spatialReference);if(!e)return this;let t=this.x;const[r,s]=e.valid,i=2*s;let n;return t>s?(n=Math.ceil(Math.abs(t-s)/i),t-=n*i):t<r&&(n=Math.ceil(Math.abs(t-r)/i),t+=n*i),this._set("x",t),this}distance(e){return D6(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};o([c({readOnly:!0})],fr.prototype,"cache",null),o([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasM",null),o([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fr.prototype,"hasZ",null),o([c({type:Number})],fr.prototype,"latitude",null),o([c({type:Number})],fr.prototype,"longitude",null),o([c({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),_t(e=>isNaN(e)?e:Ap(e))],fr.prototype,"x",void 0),o([re("x")],fr.prototype,"writeX",null),o([Y("x")],fr.prototype,"readX",null),o([c({type:Number,json:{write:!0}})],fr.prototype,"y",void 0),o([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fr.prototype,"z",void 0),o([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],fr.prototype,"m",void 0),fr=Jd=o([b("esri.geometry.Point")],fr),fr.prototype.toJSON.isDefaultToJSON=!0;const nt=fr,Yy=[0,0];function lb(e,t){return!!R(t)&&gr(e,t.x,t.y,t.z)}function q6(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!zl(e,r))return!1;return!0}function B6(e,t){const{xmin:r,ymin:s,zmin:i,xmax:n,ymax:a,zmax:u}=t;return e.hasZ&&t.hasZ?gr(e,r,s,i)&&gr(e,r,a,i)&&gr(e,n,a,i)&&gr(e,n,s,i)&&gr(e,r,s,u)&&gr(e,r,a,u)&&gr(e,n,a,u)&&gr(e,n,s,u):gr(e,r,s)&&gr(e,r,a)&&gr(e,n,a)&&gr(e,n,s)}function zl(e,t){return gr(e,t[0],t[1])}function G6(e,t){return gr(e,t[0],t[1],t[2])}function gr(e,t,r,s){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function J6(e,t){return Yy[1]=t.y,Yy[0]=t.x,MI(e,Yy)}function MI(e,t){return H6(e.rings,t)}function H6(e,t){if(!e)return!1;if(W6(e))return oS(!1,e,t);let r=!1;for(let s=0,i=e.length;s<i;s++)r=oS(r,e[s],t);return r}function W6(e){return!Array.isArray(e[0][0])}function oS(e,t,r){const[s,i]=r;let n=e,a=0;for(let u=0,p=t.length;u<p;u++){a++,a===p&&(a=0);const[d,h]=t[u],[f,y]=t[a];(h<i&&y>=i||y<i&&h>=i)&&d+(i-h)/(y-h)*(f-d)<s&&(n=!n)}return n}function K6(e,t){return lb(e,t)}function OI(e,t){const r=e.hasZ&&t.hasZ;let s,i,n;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function Q6(e,t){const{points:r,hasZ:s}=t,i=s?G6:zl;for(const n of r)if(i(e,n))return!0;return!1}const ba=[0,0],wa=[0,0],_a=[0,0],Sa=[0,0],Z6=[ba,wa,_a,Sa],EI=[[_a,ba],[ba,wa],[wa,Sa],[Sa,_a]];function Y6(e,t){ba[0]=e.xmin,ba[1]=e.ymax,wa[0]=e.xmax,wa[1]=e.ymax,_a[0]=e.xmin,_a[1]=e.ymin,Sa[0]=e.xmax,Sa[1]=e.ymin;for(const r of Z6)if(MI(t,r))return!0;for(const r of t.rings){if(!r.length)continue;let s=r[0];if(zl(e,s))return!0;for(let i=1;i<r.length;i++){const n=r[i];if(zl(e,n)||TI(s,n,EI))return!0;s=n}}return!1}function X6(e,t){ba[0]=e.xmin,ba[1]=e.ymax,wa[0]=e.xmax,wa[1]=e.ymax,_a[0]=e.xmin,_a[1]=e.ymin,Sa[0]=e.xmax,Sa[1]=e.ymin;const r=t.paths;for(const s of r){if(!r.length)continue;let i=s[0];if(zl(e,i))return!0;for(let n=1;n<s.length;n++){const a=s[n];if(zl(e,a)||TI(i,a,EI))return!0;i=a}}return!1}const zt=[0,0];function e8(e){for(let t=0;t<e.length;t++){const r=e[t];for(let i=0;i<r.length-1;i++){const n=r[i],a=r[i+1];for(let u=t+1;u<e.length;u++)for(let p=0;p<e[u].length-1;p++){const d=e[u][p],h=e[u][p+1];if(rf(n,a,d,h,zt)&&!(zt[0]===n[0]&&zt[1]===n[1]||zt[0]===d[0]&&zt[1]===d[1]||zt[0]===a[0]&&zt[1]===a[1]||zt[0]===h[0]&&zt[1]===h[1]))return!0}}const s=r.length;if(!(s<=4))for(let i=0;i<s-3;i++){let n=s-1;i===0&&(n=s-2);const a=r[i],u=r[i+1];for(let p=i+2;p<n;p++){const d=r[p],h=r[p+1];if(rf(a,u,d,h,zt)&&!(zt[0]===a[0]&&zt[1]===a[1]||zt[0]===d[0]&&zt[1]===d[1]||zt[0]===u[0]&&zt[1]===u[1]||zt[0]===h[0]&&zt[1]===h[1]))return!0}}}return!1}function TI(e,t,r){for(let s=0;s<r.length;s++)if(rf(e,t,r[s][0],r[s][1]))return!0;return!1}function rf(e,t,r,s,i){const[n,a]=e,[u,p]=t,[d,h]=r,[f,y]=s,m=f-d,v=n-d,S=u-n,_=y-h,M=a-h,P=p-a,N=_*S-m*P;if(N===0)return!1;const z=(m*M-_*v)/N,V=(S*M-P*v)/N;return z>=0&&z<=1&&V>=0&&V<=1&&(i&&(i[0]=n+z*(u-n),i[1]=a+z*(p-a)),!0)}function jI(e){switch(e){case"esriGeometryEnvelope":case"extent":return OI;case"esriGeometryMultipoint":case"multipoint":return Q6;case"esriGeometryPoint":case"point":return K6;case"esriGeometryPolygon":case"polygon":return Y6;case"esriGeometryPolyline":case"polyline":return X6}}var Xr;function t8(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function mn(e,t,r){return t==null?r:r==null?t:e(t,r)}let kt=Xr=class extends io{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,s,i){return t8(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ke.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:s,spatialReference:i==null?ke.WGS84:i}}static fromBounds(e,t){return new Xr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Xr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new nt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Xr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Oc(t,r)&&(e=t.isWebMercator?Ec(e):Lu(e,!0)),e.type==="point"?lb(this,e):e.type==="extent"&&B6(this,e)}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Oc(t,r)&&(e=t.isWebMercator?Ec(e):Lu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,s=this.height*t;if(this.xmin+=r,this.ymin+=s,this.xmax-=r,this.ymax-=s,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(ae(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Oc(t,r)&&(e=t.isWebMercator?Ec(e):Lu(e,!0)),jI(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=mn(Math.min,this.zmin,e.zmin),this.zmax=mn(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=mn(Math.min,this.mmin,e.mmin),this.mmax=mn(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ae(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=mn(Math.max,this.zmin,e.zmin),this.zmax=mn(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=mn(Math.max,this.mmin,e.mmin),this.mmax=mn(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Mc(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const s=t.isWebMercator?Lu(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new ke($p(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[r,s]=e.valid,i=this.xmin,n=this.xmax;return i>=r&&i<=s&&n>=r&&n<=s||(t=this.center),t}_normalize(e,t,r){const s=this.spatialReference;if(!s)return this;if(!(r=r||Mc(s)))return this;const i=this._getParts(r).map(u=>u.extent);if(i.length<2)return i[0]||this;if(i.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return i;let n=!0,a=!0;return i.forEach(u=>{u.hasZ||(n=!1),u.hasM||(a=!1)}),{rings:i.map(u=>{const p=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(n){const d=(u.zmax-u.zmin)/2;for(let h=0;h<p.length;h++)p[h].push(d)}if(a){const d=(u.mmax-u.mmin)/2;for(let h=0;h<p.length;h++)p[h].push(d)}return p}),hasZ:n,hasM:a,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:n,spatialReference:a}=this,u=this.width,p=this.xmin,d=this.xmax;let h;e=e||Mc(a);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,v=h.frameId;h=this._normalizeX(this.xmax,e);const S=h.x,_=h.frameId,M=m===S&&u>0;if(u>2*y){const P=new Xr(p<d?m:S,i,y,n,a),N=new Xr(f,i,p<d?S:m,n,a),z=new Xr(0,i,y,n,a),V=new Xr(f,i,0,n,a),H=[],be=[];P.contains(z)&&H.push(v),P.contains(V)&&be.push(v),N.contains(z)&&H.push(_),N.contains(V)&&be.push(_);for(let le=v+1;le<_;le++)H.push(le),be.push(le);t.push({extent:P,frameIds:[v]},{extent:N,frameIds:[_]},{extent:z,frameIds:H},{extent:V,frameIds:be})}else m>S||M?t.push({extent:new Xr(m,i,y,n,a),frameIds:[v]},{extent:new Xr(f,i,S,n,a),frameIds:[_]}):t.push({extent:new Xr(m,i,S,n,a),frameIds:[v]});this.cache._parts=t}const r=this.hasZ,s=this.hasM;if(r||s){const i={};r&&(i.zmin=this.zmin,i.zmax=this.zmax),s&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(i)}return t}_normalizeX(e,t){const[r,s]=t.valid,i=2*s;let n,a=0;return e>s?(n=Math.ceil(Math.abs(e-s)/i),e-=n*i,a=n):e<r&&(n=Math.ceil(Math.abs(e-r)/i),e+=n*i,a=-n),{x:e,frameId:a}}};o([c({readOnly:!0})],kt.prototype,"cache",null),o([c({readOnly:!0})],kt.prototype,"center",null),o([c({readOnly:!0})],kt.prototype,"extent",null),o([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],kt.prototype,"hasM",null),o([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],kt.prototype,"hasZ",null),o([c({readOnly:!0})],kt.prototype,"height",null),o([c({readOnly:!0})],kt.prototype,"width",null),o([c({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],kt.prototype,"xmin",void 0),o([c({type:Number,json:{write:!0}})],kt.prototype,"ymin",void 0),o([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],kt.prototype,"mmin",void 0),o([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],kt.prototype,"zmin",void 0),o([c({type:Number,json:{write:!0}})],kt.prototype,"xmax",void 0),o([c({type:Number,json:{write:!0}})],kt.prototype,"ymax",void 0),o([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],kt.prototype,"mmax",void 0),o([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],kt.prototype,"zmax",void 0),kt=Xr=o([b("esri.geometry.Extent")],kt),kt.prototype.toJSON.isDefaultToJSON=!0;const Mt=kt;function Ul(e,t,r=!1){let{hasM:s,hasZ:i}=e;Array.isArray(t)?t.length!==4||s||i?t.length===3&&r&&!s?(i=!0,s=!1):t.length===3&&s&&i&&(s=!1,i=!1):(s=!0,i=!0):(i=!i&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=s}var og;function aS(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function r8(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let vn=og=class extends io{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):r8(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const s=r.points&&r.points[0];return s&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=s.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=s.length>3:r.hasM===void 0&&(r.hasM=s.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Mt,r=this.hasZ,s=this.hasM,i=r?3:2,n=e[0],a=aS(Math.min),u=aS(Math.max);let p,d,h,f,[y,m]=n,[v,S]=n;for(let _=0,M=e.length;_<M;_++){const P=e[_],[N,z]=P;if(y=a(y,N),m=a(m,z),v=u(v,N),S=u(S,z),r&&P.length>2){const V=P[2];p=a(p,V),h=u(h,V)}if(s&&P.length>i){const V=P[i];d=a(d,V),f=u(f,V)}}return t.xmin=y,t.ymin=m,t.xmax=v,t.ymax=S,t.spatialReference=this.spatialReference,r?(t.zmin=p,t.zmax=h):(t.zmin=null,t.zmax=null),s?(t.mmin=d,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=j(this.points)}addPoint(e){return Ul(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:j(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new og(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(r.z=t[2],s=3),this.hasM&&(r.m=t[s]),new nt(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new nt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Ul(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};o([c({readOnly:!0})],vn.prototype,"cache",null),o([c()],vn.prototype,"extent",null),o([c({type:[[Number]],json:{write:{isRequired:!0}}})],vn.prototype,"points",void 0),o([re("points")],vn.prototype,"writePoints",null),vn=og=o([b("esri.geometry.Multipoint")],vn),vn.prototype.toJSON.isDefaultToJSON=!0;const Yf=vn;function s8(e,t){const r=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(r*r+s*s+i*i)}return Math.sqrt(r*r+s*s)}function i8(e,t,r){const s=e[0]+r*(t[0]-e[0]),i=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[s,i,e[2]+r*(t[2]-e[2])]:[s,i]}function n8(e,t){return i8(e,t,.5)}function AI(e,t,r){const s=e.length;let i=0,n=0,a=0;for(let u=0;u<s;u++){const p=e[u],d=e[(u+1)%s];let h=2;i+=p[0]*d[1]-d[0]*p[1],p.length>2&&d.length>2&&r&&(n+=p[0]*d[2]-d[0]*p[2],h=3),p.length>h&&d.length>h&&t&&(a+=p[0]*d[h]-d[0]*p[h])}return i<=0&&n<=0&&a<=0}function o8(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function RI(e){return e?a8(e.rings,e.hasZ):null}function a8(e,t){if(!e||!e.length)return null;const r=[],s=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,a=e.length;n<a;n++){const u=l8(e[n],t,i);u&&s.push(u)}if(s.sort((n,a)=>{let u=n[2]-a[2];return u===0&&t&&(u=n[4]-a[4]),u}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],t&&(r[2]=s[0][3]),(r[0]<i[0]||r[0]>i[1]||r[1]<i[2]||r[1]>i[3]||t&&(r[2]<i[4]||r[2]>i[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?u8(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function l8(e,t,r){let s=0,i=0,n=0,a=0,u=0;const p=e.length?e[0][0]:0,d=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],v=e[(y+1)%e.length],[S,_,M]=m,P=S-p,N=_-d,z=t?M-h:void 0,[V,H,be]=v,le=V-p,he=H-d,ue=t?be-h:void 0,we=P*he-le*N;if(a+=we,s+=(P+le)*we,i+=(N+he)*we,t&&m.length>2&&v.length>2){const Ee=P*ue-le*z;n+=(z+ue)*Ee,u+=Ee}S<r[0]&&(r[0]=S),S>r[1]&&(r[1]=S),_<r[2]&&(r[2]=_),_>r[3]&&(r[3]=_),t&&(M<r[4]&&(r[4]=M),M>r[5]&&(r[5]=M))}if(a>0&&(a*=-1),u>0&&(u*=-1),!a)return null;a*=.5,u*=.5;const f=[s/(6*a)+p,i/(6*a)+d,a];return t&&(r[4]===r[5]||u===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=n/(6*u)+h,f[4]=u)),f}function u8(e,t){const r=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let i=0,n=0,a=0,u=0;for(let p=0,d=e.length;p<d-1;p++){const h=e[p],f=e[p+1];if(h&&f){r[0]=h[0],r[1]=h[1],s[0]=f[0],s[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],s[2]=f[2]);const y=s8(r,s);if(y){i+=y;const m=n8(h,f);n+=y*m[0],a+=y*m[1],t&&m.length>2&&(u+=y*m[2])}}}return i>0?t?[n/i,a/i,u/i]:[n/i,a/i]:e.length?e[0]:null}function CI(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function FI(e){return e.points!==void 0}function kI(e){return e.x!==void 0&&e.y!==void 0}function PI(e){return e.paths!==void 0}function NI(e){return e.rings!==void 0}function LI(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}const Un=LI(Math.min),qn=LI(Math.max);function c8(e,t){return PI(t)?ql(e,t.paths,!1,!1):NI(t)?ql(e,t.rings,!1,!1):FI(t)?ub(e,t.points,!1,!1,!1,!1):CI(t)?DI(e,t):(kI(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function p8(e,t){return PI(t)?ql(e,t.paths,!0,!1):NI(t)?ql(e,t.rings,!0,!1):FI(t)?ub(e,t.points,!0,!1,!0,!1):CI(t)?DI(e,t,!0,!1,!0,!1):(kI(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function ql(e,t,r,s){const i=r?3:2;if(!t.length||!t[0].length)return null;let n,a,u,p,[d,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const v=t[m];for(let S=0;S<v.length;S++){const _=v[S],[M,P]=_;if(d=Un(d,M),h=Un(h,P),f=qn(f,M),y=qn(y,P),r&&_.length>2){const N=_[2];n=Un(n,N),a=qn(a,N)}if(s&&_.length>i){const N=_[i];u=Un(n,N),p=qn(a,N)}}}return r?s?(e[0]=d,e[1]=h,e[2]=n,e[3]=u,e[4]=f,e[5]=y,e[6]=a,e[7]=p,e.length=8,e):(e[0]=d,e[1]=h,e[2]=n,e[3]=f,e[4]=y,e[5]=a,e.length=6,e):s?(e[0]=d,e[1]=h,e[2]=u,e[3]=f,e[4]=y,e[5]=p,e.length=6,e):(e[0]=d,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function DI(e,t,r,s,i,n){const a=t.xmin,u=t.xmax,p=t.ymin,d=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return i?(h=h||0,f=f||0,n?(y=y||0,m=m||0,e[0]=a,e[1]=p,e[2]=h,e[3]=y,e[4]=u,e[5]=d,e[6]=f,e[7]=m,e):(e[0]=a,e[1]=p,e[2]=h,e[3]=u,e[4]=d,e[5]=f,e)):n?(y=y||0,m=m||0,e[0]=a,e[1]=p,e[2]=y,e[3]=u,e[4]=d,e[5]=m,e):(e[0]=a,e[1]=p,e[2]=u,e[3]=d,e)}function ub(e,t,r,s,i,n){const a=r?3:2,u=s&&n,p=r&&i;if(!t.length||!t[0].length)return null;let d,h,f,y,[m,v]=t[0],[S,_]=t[0];for(let M=0;M<t.length;M++){const P=t[M],[N,z]=P;if(m=Un(m,N),v=Un(v,z),S=qn(S,N),_=qn(_,z),p&&P.length>2){const V=P[2];d=Un(d,V),h=qn(h,V)}if(u&&P.length>a){const V=P[a];f=Un(d,V),y=qn(h,V)}}return i?(d=d||0,h=h||0,n?(f=f||0,y=y||0,e[0]=m,e[1]=v,e[2]=d,e[3]=f,e[4]=S,e[5]=_,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=v,e[2]=d,e[3]=S,e[4]=_,e[5]=h,e)):n?(f=f||0,y=y||0,e[0]=m,e[1]=v,e[2]=f,e[3]=S,e[4]=_,e[5]=y,e):(e[0]=m,e[1]=v,e[2]=S,e[3]=_,e)}function d8(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function h8(e){return e.points!==void 0}function f8(e){return e.x!==void 0&&e.y!==void 0}function y8(e){return e.paths!==void 0}function m8(e){return e.rings!==void 0}const cb=[];function VI(e,t,r,s){return{xmin:e,ymin:t,xmax:r,ymax:s}}function zI(e,t,r,s,i,n){return{xmin:e,ymin:t,zmin:r,xmax:s,ymax:i,zmax:n}}function UI(e,t,r,s,i,n){return{xmin:e,ymin:t,mmin:r,xmax:s,ymax:i,mmax:n}}function qI(e,t,r,s,i,n,a,u){return{xmin:e,ymin:t,zmin:r,mmin:s,xmax:i,ymax:n,zmax:a,mmax:u}}function pb(e,t=!1,r=!1){return t?r?qI(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):zI(e[0],e[1],e[2],e[3],e[4],e[5]):r?UI(e[0],e[1],e[2],e[3],e[4],e[5]):VI(e[0],e[1],e[2],e[3])}function g8(e){return e?d8(e)?e:f8(e)?b8(e):m8(e)?db(e):y8(e)?BI(e):h8(e)?v8(e):null:null}function v8(e){const{hasZ:t,hasM:r,points:s}=e;return pb(ub(cb,s,t,r),t,r)}function b8(e){const{x:t,y:r,z:s,m:i}=e,n=i!=null;return s!=null?n?qI(t,r,s,i,t,r,s,i):zI(t,r,s,t,r,s):n?UI(t,r,i,t,r,i):VI(t,r,t,r)}function db(e){const{hasZ:t,hasM:r,rings:s}=e,i=ql(cb,s,t,r);return i?pb(i,t,r):null}function BI(e){const{hasZ:t,hasM:r,paths:s}=e,i=ql(cb,s,t,r);return i?pb(i,t,r):null}var Hd;function lS(e){return!Array.isArray(e[0])}let Zs=Hd=class extends io{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let s=!1,i=!1;for(const a of t)a.hasZ&&(s=!0),a.hasM&&(i=!0);const n={rings:t.map(function(a){const u=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s&&a.hasZ){const p=a.zmin+.5*(a.zmax-a.zmin);for(let d=0;d<u.length;d++)u[d].push(p)}if(i&&a.hasM){const p=a.mmin+.5*(a.mmax-a.mmin);for(let d=0;d<u.length;d++)u[d].push(p)}return u}),spatialReference:r};return s&&(n.hasZ=!0),i&&(n.hasM=!0),new Hd(n)}normalizeCtorArgs(e,t){let r,s,i=null,n=null;return e&&!Array.isArray(e)?(i=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,s=e.hasM):i=e,i=i||[],t=t||ke.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),n=i[0]&&i[0][0],n&&(r===void 0&&s===void 0?(r=n.length>2,s=n.length>3):r===void 0?r=s?n.length>3:n.length>2:s===void 0&&(s=r?n.length>3:n.length>2)),{rings:i,spatialReference:t,hasZ:r,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=RI(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new nt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=db(this);if(!t)return null;const r=new Mt(t);return r.spatialReference=e,r}get isSelfIntersecting(){return e8(this.rings)}writeRings(e,t){t.rings=j(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(lS(e)){const s=[];for(let i=0,n=e.length;i<n;i++)s[i]=e[i].toArray();t[r]=s}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Hd;return e.spatialReference=this.spatialReference,e.rings=j(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,r=e.spatialReference;if(R(t)!==R(r)||R(t)&&R(r)&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const s=([i,n,a,u],[p,d,h,f])=>i===p&&n===d&&(a==null&&h==null||a===h)&&(u==null&&f==null||u===f);for(let i=0;i<this.rings.length;i++){const n=this.rings[i],a=e.rings[i];if(!q1(n,a,s))return!1}return!0}contains(e){if(!e)return!1;const t=ab(e,this.spatialReference);return J6(this,R(t)?t:e)}isClockwise(e){let t;return t=lS(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,AI(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],s=this.hasZ,i=this.hasM;return s&&!i?new nt(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new nt(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new nt(r[0],r[1],r[2],r[3],this.spatialReference):new nt(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Ul(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new nt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,s=t.map(i=>new nt(i,r));return this.notifyChange("rings"),s}setPoint(e,t,r){return this._validateInputs(e,t)?(Ul(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(r&&(t<0||t>s.length)||!r&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};o([c({readOnly:!0})],Zs.prototype,"cache",null),o([c({readOnly:!0})],Zs.prototype,"centroid",null),o([c({readOnly:!0})],Zs.prototype,"extent",null),o([c({readOnly:!0})],Zs.prototype,"isSelfIntersecting",null),o([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],Zs.prototype,"rings",void 0),o([re("rings")],Zs.prototype,"writeRings",null),Zs=Hd=o([b("esri.geometry.Polygon")],Zs),Zs.prototype.toJSON.isDefaultToJSON=!0;const Ma=Zs;var ag;function w8(e){return!Array.isArray(e[0])}let bn=ag=class extends io{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,s,i=null,n=null;return e&&!Array.isArray(e)?(i=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,s=e.hasM):i=e,i=i||[],t=t||ke.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),n=i[0]&&i[0][0],n&&(r===void 0&&s===void 0?(r=n.length>2,s=!1):r===void 0?r=!s&&n.length>3:s===void 0&&(s=!r&&n.length>3)),{paths:i,spatialReference:t,hasZ:r,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=BI(this);if(!t)return null;const r=new Mt(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=j(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(w8(e)){const s=[];for(let i=0,n=e.length;i<n;i++)s[i]=e[i].toArray();t[r]=s}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new ag;return e.spatialReference=this.spatialReference,e.paths=j(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],s=this.hasZ,i=this.hasM;return s&&!i?new nt(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new nt(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new nt(r[0],r[1],r[2],r[3],this.spatialReference):new nt(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Ul(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,s=t.map(i=>new nt(i,r));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new nt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Ul(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(r&&(t<0||t>s.length)||!r&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};o([c({readOnly:!0})],bn.prototype,"cache",null),o([c({readOnly:!0})],bn.prototype,"extent",null),o([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],bn.prototype,"paths",void 0),o([re("paths")],bn.prototype,"writePaths",null),bn=ag=o([b("esri.geometry.Polyline")],bn),bn.prototype.toJSON.isDefaultToJSON=!0;const su=bn;class xe{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,i,n)=>{const a=this.toJSON(s);a!==void 0&&Ar(n,a,i)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const r=this.apiToJSON[t];return this.options.useNumericKeys?+r:r}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const r={};for(const s in t)r[t[s]]=s;return r}_getKeysSorted(t){const r=[];for(const s in t)r.push(s);return r.sort(),r}}function Gt(){return function(e,t){return new xe(e,A({ignoreUnknown:!0},t))}}const GI=Gt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),lg=Gt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function hb(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function fb(e){return e.points!==void 0}function yb(e){return e.x!==void 0&&e.y!==void 0}function mb(e){return e.paths!==void 0}function Tl(e){return e.rings!==void 0}function Hr(e){return ae(e)?null:e instanceof io?e:yb(e)?nt.fromJSON(e):mb(e)?su.fromJSON(e):Tl(e)?Ma.fromJSON(e):fb(e)?Yf.fromJSON(e):hb(e)?Mt.fromJSON(e):null}function eo(e){return e?yb(e)?"esriGeometryPoint":mb(e)?"esriGeometryPolyline":Tl(e)?"esriGeometryPolygon":hb(e)?"esriGeometryEnvelope":fb(e)?"esriGeometryMultipoint":null:null}const _8={esriGeometryPoint:nt,esriGeometryPolyline:su,esriGeometryPolygon:Ma,esriGeometryEnvelope:Mt,esriGeometryMultipoint:Yf};function JI(e){return e&&_8[e]||null}const Oa={base:io,key:"type",typeMap:{extent:Mt,multipoint:Yf,point:nt,polyline:su,polygon:Ma}};yi(Oa);let Xy;function to(){return Xy||(Xy=(async()=>{const e=await Re(()=>import("./arcadeUtils.98fa9512.js"),["arcadeUtils.98fa9512.js","number.6911e6a0.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js"],import.meta.url).then(function(t){return t.aA});return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Xy}const S8=(e,t,r)=>iu.create(e,t,r,null,["$feature"]),x8=(e,t,r)=>iu.create(e,t,r,null,["$feature","$view"]),$8=(e,t,r,s)=>iu.create(e,t,r,s,["$feature","$view"]);class iu{constructor(t,r,s,i,n,a,u,p){this.script=t,this.evaluate=n;const d=Array.isArray(u)?u:u.fields;this.fields=d,this._syntaxTree=i,this._arcade=r,this._arcadeDictionary=s,this._arcadeFeature=a,this._spatialReference=p,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,s,i,n,a){const{arcade:u,Feature:p,Dictionary:d}=await to(),h=ke.fromJSON(r),f=u.parseScript(t,a),y=n.reduce((V,H)=>ve(A({},V),{[H]:null}),{});let m=null;R(i)&&(m=new d(i),m.immutable=!0,y.$config=null);const v=u.scriptUsesGeometryEngine(f)&&u.enableGeometrySupport(),S=u.scriptUsesFeatureSet(f)&&u.enableFeatureSetSupport(),_=u.scriptIsAsync(f)&&u.enableAsyncSupport(),M={vars:y,spatialReference:h,useAsync:!!_},P=new d;P.immutable=!1,P.setField("scale",0);const N=u.compileScript(f,M),z=V=>("$view"in V&&V.$view&&(P.setField("scale",V.$view.scale),V.$view=P),m&&(V.$config=m),N({vars:V,spatialReference:h}));return await Promise.all([v,S,_]),new iu(t,u,d,f,z,new p,s,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const I8=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],M8=["field","normalizationField"];function ug(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(uS(I8,r,t),"visualVariables"in r&&r.visualVariables)for(const s of r.visualVariables)uS(M8,s,t)}}function uS(e,t,r){if(e)for(const s of e){const i=xp(s,t),n=i&&typeof i!="function"&&r.get(i);n&&Ar(s,n.name,t)}}function gb(e,t){if(e!=null&&t!=null&&t.fields.length)if("startField"in e){const r=t.get(e.startField),s=t.get(e.endField);e.startField=r&&r.name||null,e.endField=s&&s.name||null}else{const r=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=s&&s.name||null}}const em=new Set;function O8(e,t){return e&&t?(em.clear(),vb(em,e,t),Array.from(em).sort()):[]}function vb(e,t,r){var s;if(r)if(t!=null&&(s=t.fields)!=null&&s.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)Ls(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)e.add(i)}}function Ls(e,t,r){if(typeof r=="string")if(t){const s=t.get(r);s&&e.add(s.name)}else e.add(r)}async function on(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await to(),n=i.extractFieldNames(r,t==null||(s=t.fields)==null?void 0:s.map(a=>a.name));for(const a of n)Ls(e,t,a)}async function E8(e,t,r){if(r&&r!=="1=1"){const s=(await Re(()=>import("./WhereClause.5c1a26b0.js"),[],import.meta.url)).WhereClause.create(r,t);if(!s.isStandardized)throw new F("fieldUtils:collectFilterFields","Where clause is not standardized");vb(e,t,s.fieldNames)}}function T8({displayField:e,fields:t}){return e||(t&&t.length?tm(t,"name-or-title")||tm(t,"unique-identifier")||tm(t,"type-or-category")||j8(t):null)}function j8(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}function tm(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function A8(e,t){const{labelingInfo:r,fieldsIndex:s}=t;r&&r.length&&await Promise.all(r.map(i=>R8(e,s,i)))}async function R8(e,t,r){if(!r)return;const s=r.getLabelExpression(),i=r.where;if(s.type==="arcade")await on(e,t,s.expression);else{const n=s.expression.match(/{[^}]*}/g);n&&n.forEach(a=>{Ls(e,t,a.slice(1,-1))})}await E8(e,t,i)}function HI(e){const t=e.defaultValue;return t!==void 0&&QI(e,t)?t:e.nullable?null:void 0}function WI(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function C8(e){return e===null||WI(e)}const bb="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function F8(e){return e===null||bb(e)}function KI(e){return e!=null&&typeof e=="string"}function k8(e){return e===null||KI(e)}function P8(){return!0}function QI(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?F8:bb;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?C8:WI;break;case"string":case"esriFieldTypeString":r=e.nullable?k8:KI;break;default:r=P8}return arguments.length===1?r:r(t)}const N8=["integer","small-integer","single","double"],L8=new Set([...N8,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function wb(e){return e!=null&&L8.has(e.type)}function D8(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var sf,nf;function V8(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function z8(e,t){return e.nullable&&t===null?null:wb(e)&&!U8(e.type,Number(t))?sf.OUT_OF_RANGE:QI(e,t)?e.domain?T6(e.domain,t):null:nf.INVALID_TYPE}function U8(e,t){const r=typeof e=="string"?ZI(e):e;return!!r&&(r.isInteger?bb(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}function ZI(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return q8;case"esriFieldTypeInteger":case"integer":return B8;case"esriFieldTypeSingle":case"single":return G8;case"esriFieldTypeDouble":case"double":return J8}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(sf||(sf={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(nf||(nf={}));const q8={min:-32768,max:32767,isInteger:!0},B8={min:-2147483648,max:2147483647,isInteger:!0},G8={min:-34e37,max:12e37,isInteger:!1},J8={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function H8(e,t,r){switch(e){case Vl.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Vl.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case nf.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case sf.OUT_OF_RANGE:{const{min:s,max:i}=ZI(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${i}`}}}let Wd=class extends D{constructor(e){super(e),this.type=null}};o([c({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],Wd.prototype,"type",void 0),Wd=o([b("esri.popup.content.Content")],Wd);const Ea=Wd;var cg;let _o=cg=class extends Ea{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new cg({description:this.description,displayType:this.displayType,title:this.title})}};o([c({type:String,json:{write:!0}})],_o.prototype,"description",void 0),o([c({type:["auto","preview","list"],json:{write:!0}})],_o.prototype,"displayType",void 0),o([c({type:String,json:{write:!0}})],_o.prototype,"title",void 0),o([c({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],_o.prototype,"type",void 0),_o=cg=o([b("esri.popup.content.AttachmentsContent")],_o);const ip=_o;var pg;let So=pg=class extends Ea{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new pg({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?j(this.outFields):null})}};o([c()],So.prototype,"creator",void 0),o([c()],So.prototype,"destroyer",void 0),o([c()],So.prototype,"outFields",void 0),o([c({type:["custom"],readOnly:!0})],So.prototype,"type",void 0),So=pg=o([b("esri.popup.content.CustomContent")],So);const W8=So;var dg;let Ga=dg=class extends D{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new dg({title:this.title,expression:this.expression})}};o([c({type:String,json:{write:!0}})],Ga.prototype,"title",void 0),o([c({type:String,json:{write:!0}})],Ga.prototype,"expression",void 0),o([c({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Ga.prototype,"returnType",void 0),Ga=dg=o([b("esri.popup.ElementExpressionInfo")],Ga);const K8=Ga;var hg;let Du=hg=class extends Ea{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new hg({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};o([c({type:K8,json:{write:!0}})],Du.prototype,"expressionInfo",void 0),o([c({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Du.prototype,"type",void 0),Du=hg=o([b("esri.popup.content.ExpressionContent")],Du);const _b=Du;function de(e,t={}){var r;const s=e instanceof xe?e:new xe(e,t),i={type:(r=t==null?void 0:t.ignoreUnknown)==null||r?s.apiValues:String,json:{type:s.jsonValues,read:(t==null||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(i.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(i.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(i.json.name=t.name),c(i)}const np=Gt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});np.toJSON.bind(np);np.fromJSON.bind(np);var cS,pS,dS;let Q8,Tc;const hS=(cS=(pS=globalThis.esriConfig)==null?void 0:pS.locale)!=null?cS:(dS=globalThis.dojoConfig)==null?void 0:dS.locale;function YI(){var e,t;return(e=hS!=null?hS:(t=globalThis.navigator)==null?void 0:t.language)!=null?e:"en"}function Ds(){return Tc===void 0&&(Tc=YI()),Tc}const jc=[];function XI(e){return jc.push(e),{remove(){jc.splice(jc.indexOf(e),1)}}}const fg=[];function Sb(e){return fg.push(e),{remove(){jc.splice(fg.indexOf(e),1)}}}function Z8(){var e;const t=(e=Q8)!=null?e:YI();Tc!==t&&(Tc=t,[...fg].forEach(r=>{r.call(null,t)}),[...jc].forEach(r=>{r.call(null,t)}))}globalThis.addEventListener==null||globalThis.addEventListener("languagechange",Z8);const Js={year:"numeric",month:"numeric",day:"numeric"},Iu={year:"numeric",month:"long",day:"numeric"},Mu={year:"numeric",month:"short",day:"numeric"},Ou={year:"numeric",month:"long",weekday:"long",day:"numeric"},es={hour:"numeric",minute:"numeric"},hs=ve(A({},es),{second:"numeric"}),xb={"short-date":Js,"short-date-short-time":A(A({},Js),es),"short-date-short-time-24":ve(A(A({},Js),es),{hour12:!1}),"short-date-long-time":A(A({},Js),hs),"short-date-long-time-24":ve(A(A({},Js),hs),{hour12:!1}),"short-date-le":Js,"short-date-le-short-time":A(A({},Js),es),"short-date-le-short-time-24":ve(A(A({},Js),es),{hour12:!1}),"short-date-le-long-time":A(A({},Js),hs),"short-date-le-long-time-24":ve(A(A({},Js),hs),{hour12:!1}),"long-month-day-year":Iu,"long-month-day-year-short-time":A(A({},Iu),es),"long-month-day-year-short-time-24":ve(A(A({},Iu),es),{hour12:!1}),"long-month-day-year-long-time":A(A({},Iu),hs),"long-month-day-year-long-time-24":ve(A(A({},Iu),hs),{hour12:!1}),"day-short-month-year":Mu,"day-short-month-year-short-time":A(A({},Mu),es),"day-short-month-year-short-time-24":ve(A(A({},Mu),es),{hour12:!1}),"day-short-month-year-long-time":A(A({},Mu),hs),"day-short-month-year-long-time-24":ve(A(A({},Mu),hs),{hour12:!1}),"long-date":Ou,"long-date-short-time":A(A({},Ou),es),"long-date-short-time-24":ve(A(A({},Ou),es),{hour12:!1}),"long-date-long-time":A(A({},Ou),hs),"long-date-long-time-24":ve(A(A({},Ou),hs),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":es,"long-time":hs},op=Gt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});op.apiValues;op.toJSON.bind(op);op.fromJSON.bind(op);const Y8={ar:"ar-u-nu-latn-ca-gregory"};let Kd=new WeakMap,eM=xb["short-date-short-time"];function X8(e){const t=e||eM;if(!Kd.has(t)){const r=Ds(),s=Y8[Ds()]||r;Kd.set(t,new Intl.DateTimeFormat(s,t))}return Kd.get(t)}function tM(e){return xb[e]||null}function xa(e,t){return X8(t).format(e)}Sb(()=>{Kd=new WeakMap,eM=xb["short-date-short-time"]});const eF={ar:"ar-u-nu-latn"};let Qd=new WeakMap,rM={};function tF(e){const t=e||rM;if(!Qd.has(t)){const r=Ds(),s=eF[Ds()]||r;Qd.set(t,new Intl.NumberFormat(s,e))}return Qd.get(t)}function rF(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Bl(e,t){return tF(t).format(e)}Sb(()=>{Qd=new WeakMap,rM={}});var yg;let xo=yg=class extends D{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new yg({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?xa(e,A(A({},tM(this.dateFormat)),this.dateTimeFormatOptions)):Bl(e,rF(this))}};o([de(np)],xo.prototype,"dateFormat",void 0),o([c({type:Object,json:{read:!1}})],xo.prototype,"dateTimeFormatOptions",void 0),o([c({type:Boolean,json:{write:!0}})],xo.prototype,"digitSeparator",void 0),o([c({type:At,json:{write:!0}})],xo.prototype,"places",void 0),xo=yg=o([b("esri.popup.support.FieldInfoFormat")],xo);const Zd=xo;var mg;let ys=mg=class extends D{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new mg({fieldName:this.fieldName,format:this.format?j(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};o([c({type:String,json:{write:!0}})],ys.prototype,"fieldName",void 0),o([c({type:Zd,json:{write:!0}})],ys.prototype,"format",void 0),o([c({type:Boolean,json:{write:!0,default:!1}})],ys.prototype,"isEditable",void 0),o([c({type:String,json:{write:!0}})],ys.prototype,"label",void 0),o([de(new xe({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],ys.prototype,"stringFieldOption",void 0),o([c({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],ys.prototype,"statisticType",void 0),o([c({type:String,json:{write:!0}})],ys.prototype,"tooltip",void 0),o([c({type:Boolean,json:{write:!0}})],ys.prototype,"visible",void 0),ys=mg=o([b("esri.popup.FieldInfo")],ys);const $b=ys;var gg;let Oi=gg=class extends Ea{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new gg(j({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};o([c({type:Object,json:{write:!0}})],Oi.prototype,"attributes",void 0),o([c({type:String,json:{write:!0}})],Oi.prototype,"description",void 0),o([c({type:[$b]})],Oi.prototype,"fieldInfos",void 0),o([re("fieldInfos")],Oi.prototype,"writeFieldInfos",null),o([c({type:String,json:{write:!0}})],Oi.prototype,"title",void 0),o([c({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Oi.prototype,"type",void 0),Oi=gg=o([b("esri.popup.content.FieldsContent")],Oi);const ap=Oi;let $o=class extends D{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};o([c({type:String,json:{write:!0}})],$o.prototype,"altText",void 0),o([c({type:String,json:{write:!0}})],$o.prototype,"caption",void 0),o([c({type:String,json:{write:!0}})],$o.prototype,"title",void 0),o([c({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],$o.prototype,"type",void 0),$o=o([b("esri.popup.content.mixins.MediaInfo")],$o);const Ib=$o;var vg;let Vu=vg=class extends ht{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new vg({tooltip:this.tooltip,value:this.value})}};o([c()],Vu.prototype,"tooltip",void 0),o([c()],Vu.prototype,"value",void 0),Vu=vg=o([b("esri.popup.content.support.ChartMediaInfoValueSeries")],Vu);const sF=Vu;var bg;let Io=bg=class extends D{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new bg({fields:j(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};o([c({type:[String],json:{write:!0}})],Io.prototype,"fields",void 0),o([c({type:String,json:{write:!0}})],Io.prototype,"normalizeField",void 0),o([c({type:[sF],json:{read:!1}})],Io.prototype,"series",void 0),o([c({type:String,json:{write:!0}})],Io.prototype,"tooltipField",void 0),Io=bg=o([b("esri.popup.content.support.ChartMediaInfoValue")],Io);const iF=Io;let zu=class extends Ib{constructor(e){super(e),this.type=null,this.value=null}};o([c({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],zu.prototype,"type",void 0),o([c({type:iF,json:{write:!0}})],zu.prototype,"value",void 0),zu=o([b("esri.popup.content.mixins.ChartMediaInfo")],zu);const Xf=zu,ey=Gt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var wg;let Yd=wg=class extends Xf{constructor(e){super(e),this.type="bar-chart"}clone(){return new wg({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};o([c({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:ey.write}})],Yd.prototype,"type",void 0),Yd=wg=o([b("esri.popup.content.BarChartMediaInfo")],Yd);const sM=Yd;var _g;let Xd=_g=class extends Xf{constructor(e){super(e),this.type="column-chart"}clone(){return new _g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};o([c({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:ey.write}})],Xd.prototype,"type",void 0),Xd=_g=o([b("esri.popup.content.ColumnChartMediaInfo")],Xd);const iM=Xd;var Sg;let Uu=Sg=class extends D{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Sg({linkURL:this.linkURL,sourceURL:this.sourceURL})}};o([c({type:String,json:{write:!0}})],Uu.prototype,"linkURL",void 0),o([c({type:String,json:{write:!0}})],Uu.prototype,"sourceURL",void 0),Uu=Sg=o([b("esri.popup.content.support.ImageMediaInfoValue")],Uu);const nF=Uu;var xg;let Ja=xg=class extends Ib{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new xg({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};o([c({type:Number,json:{write:!0}})],Ja.prototype,"refreshInterval",void 0),o([c({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Ja.prototype,"type",void 0),o([c({type:nF,json:{write:!0}})],Ja.prototype,"value",void 0),Ja=xg=o([b("esri.popup.content.ImageMediaInfo")],Ja);const nM=Ja;var $g;let eh=$g=class extends Xf{constructor(e){super(e),this.type="line-chart"}clone(){return new $g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};o([c({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:ey.write}})],eh.prototype,"type",void 0),eh=$g=o([b("esri.popup.content.LineChartMediaInfo")],eh);const oM=eh;var Ig;let th=Ig=class extends Xf{constructor(e){super(e),this.type="pie-chart"}clone(){return new Ig({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};o([c({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:ey.write}})],th.prototype,"type",void 0),th=Ig=o([b("esri.popup.content.PieChartMediaInfo")],th);const aM=th,lM={base:Ib,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":sM,"column-chart":iM,"line-chart":oM,"pie-chart":aM,image:nM}};var Mg;let ms=Mg=class extends Ea{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?nM.fromJSON(t):t.type==="barchart"?sM.fromJSON(t):t.type==="columnchart"?iM.fromJSON(t):t.type==="linechart"?oM.fromJSON(t):t.type==="piechart"?aM.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new Mg(j({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};o([c()],ms.prototype,"activeMediaInfoIndex",void 0),o([c({type:Object,json:{write:!0}})],ms.prototype,"attributes",void 0),o([c({type:String,json:{write:!0}})],ms.prototype,"description",void 0),o([c({types:[lM]})],ms.prototype,"mediaInfos",void 0),o([Y("mediaInfos")],ms.prototype,"readMediaInfos",null),o([re("mediaInfos")],ms.prototype,"writeMediaInfos",null),o([c({type:String,json:{write:!0}})],ms.prototype,"title",void 0),o([c({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ms.prototype,"type",void 0),ms=Mg=o([b("esri.popup.content.MediaContent")],ms);const of=ms;var Og;let qu=Og=class extends Ea{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Og({text:this.text})}};o([c({type:String,json:{write:!0}})],qu.prototype,"text",void 0),o([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],qu.prototype,"type",void 0),qu=Og=o([b("esri.popup.content.TextContent")],qu);const af=qu,oF={base:null,key:"type",typeMap:{attachment:ip,media:of,text:af,expression:_b,field:ap}};var Eg;let Mo=Eg=class extends D{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Eg({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};o([c({type:String,json:{write:!0}})],Mo.prototype,"name",void 0),o([c({type:String,json:{write:!0}})],Mo.prototype,"title",void 0),o([c({type:String,json:{write:!0}})],Mo.prototype,"expression",void 0),o([c({type:["string","number"],json:{write:!0}})],Mo.prototype,"returnType",void 0),Mo=Eg=o([b("esri.popup.ExpressionInfo")],Mo);const uM=Mo;var Tg;let Bu=Tg=class extends D{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Tg({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};o([c({type:Boolean,json:{write:!0}})],Bu.prototype,"returnTopmostRaster",void 0),o([c({type:Boolean,json:{write:!0}})],Bu.prototype,"showNoDataRecords",void 0),Bu=Tg=o([b("esri.popup.LayerOptions")],Bu);const aF=Bu;var jg;let Gu=jg=class extends D{constructor(e){super(e),this.field=null,this.order=null}clone(){return new jg({field:this.field,order:this.order})}};o([c({type:String,json:{write:!0}})],Gu.prototype,"field",void 0),o([c({type:["asc","desc"],json:{write:!0}})],Gu.prototype,"order",void 0),Gu=jg=o([b("esri.popup.support.RelatedRecordsInfoFieldOrder")],Gu);const cM=Gu;var Ag;let Ju=Ag=class extends D{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Ag({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?j(this.orderByFields):null})}};o([c({type:Boolean,json:{write:!0}})],Ju.prototype,"showRelatedRecords",void 0),o([c({type:[cM],json:{write:!0}})],Ju.prototype,"orderByFields",void 0),Ju=Ag=o([b("esri.popup.RelatedRecordsInfo")],Ju);const lF=Ju;let uF=0;const kp=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+uF++})}};return t=o([b("esri.core.Identifiable")],t),t};let fS=class extends kp(class{}){};fS=o([b("esri.core.Identifiable")],fS);var Rg;let gs=Rg=class extends kp(ht){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Rg({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};o([c()],gs.prototype,"active",void 0),o([c()],gs.prototype,"className",void 0),o([c()],gs.prototype,"disabled",void 0),o([c()],gs.prototype,"id",void 0),o([c()],gs.prototype,"indicator",void 0),o([c()],gs.prototype,"title",void 0),o([c()],gs.prototype,"type",void 0),o([c()],gs.prototype,"visible",void 0),gs=Rg=o([b("esri.support.actions.ActionBase")],gs);const Mb=gs;var Cg;let rh=Cg=class extends Mb{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Cg({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};o([c()],rh.prototype,"image",void 0),rh=Cg=o([b("esri.support.Action.ActionButton")],rh);const cF=rh;var Fg;let Hu=Fg=class extends Mb{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Fg({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};o([c()],Hu.prototype,"image",void 0),o([c()],Hu.prototype,"value",void 0),Hu=Fg=o([b("esri.support.Action.ActionToggle")],Hu);const pF=Hu;var kg;const dF=ut.ofType({key:"type",defaultKeyValue:"button",base:Mb,typeMap:{button:cF,toggle:pF}}),hF={base:Ea,key:"type",typeMap:{media:of,custom:W8,text:af,attachments:ip,fields:ap,expression:_b}},pM="esri.PopupTemplate",fF=te.getLogger(pM),yF=["attachments","fields","media","text","expression"];let Rt=kg=class extends D{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>yi(hF,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||tu(e)?e:(fF.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(i=>yF.indexOf(i.type)!==-1).map(i=>i&&i.toJSON(s)),t.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(t):i.type==="media"?this._writeMediaContent(i,t):i.type==="text"&&this._writeTextContent(i,t)})):t.description=e}writeFieldInfos(e,t,r,s){const{content:i}=this,n=Array.isArray(i)?i:null;if(e){const a=n?n.filter(p=>p.type==="fields"):[],u=a.length&&a.every(p=>{var d;return(d=p.fieldInfos)==null?void 0:d.length});t.fieldInfos=e.filter(Boolean).map(p=>{const d=p.toJSON(s);return u&&(d.visible=!1),d})}if(n)for(const a of n)a.type==="fields"&&this._writeFieldsContent(a,t)}writeLayerOptions(e,t,r,s){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?j(e.toArray()):[];return new kg({actions:t,content:Array.isArray(this.content)?j(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?j(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?j(this.fieldInfos):null,layerOptions:this.layerOptions?j(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?j(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?j(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),vb(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=j(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(s=>{const i=t.fieldInfos.find(n=>n.fieldName.toLowerCase()===s.fieldName.toLowerCase());i?i.visible=!0:t.fieldInfos.push(s)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=j(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const s={description:!1,mediaInfos:!1};return r.map(i=>i.type==="media"?(i.mediaInfos||!t||s.mediaInfos||(i.mediaInfos=t,s.mediaInfos=!0),of.fromJSON(i)):i.type==="text"?(i.text||!e||s.description||(i.text=e,s.description=!0),af.fromJSON(i)):i.type==="attachments"?ip.fromJSON(i):i.type==="fields"?ap.fromJSON(i):i.type==="expression"?_b.fromJSON(i):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const s=[];return e?s.push(new af({text:e})):s.push(new ap),Array.isArray(t)&&t.length&&s.push(of.fromJSON({mediaInfos:t})),r&&s.push(ip.fromJSON({displayType:"auto"})),s.length?s:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,i)=>[...s,...this._getMediaInfoFields(i)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:r,value:s}=e,i=s||{},{fields:n=[],normalizeField:a,tooltipField:u,sourceURL:p,linkURL:d}=i,h=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(p),...this._extractFieldNames(d),...n];return a&&h.push(a),u&&h.push(u),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(s=>on(e,t,s.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>t.indexOf("relationships/")===-1&&t.indexOf("expression/")===-1):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:s}=e,i=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(i)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,r=e.match(t);if(!r)return[];const s=/\{(\w+):.+\}/,i=r.filter(n=>!(n.indexOf("{relationships/")===0||n.indexOf("{expression/")===0)).map(n=>n.replace(s,"{$1}"));return i?i.map(n=>n.slice(1,-1)):[]}};o([c({type:dF})],Rt.prototype,"actions",void 0),o([c()],Rt.prototype,"content",void 0),o([_t("content")],Rt.prototype,"castContent",null),o([Y("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Rt.prototype,"readContent",null),o([re("content",{popupElements:{type:ut.ofType(oF)},showAttachments:{type:Boolean},mediaInfos:{type:ut.ofType(lM)},description:{type:String}})],Rt.prototype,"writeContent",null),o([c({type:[uM],json:{write:!0}})],Rt.prototype,"expressionInfos",void 0),o([c({type:[$b]})],Rt.prototype,"fieldInfos",void 0),o([re("fieldInfos")],Rt.prototype,"writeFieldInfos",null),o([c({type:aF})],Rt.prototype,"layerOptions",void 0),o([re("layerOptions")],Rt.prototype,"writeLayerOptions",null),o([c({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Rt.prototype,"lastEditInfoEnabled",void 0),o([c()],Rt.prototype,"outFields",void 0),o([c()],Rt.prototype,"overwriteActions",void 0),o([c()],Rt.prototype,"returnGeometry",void 0),o([c({json:{type:String}})],Rt.prototype,"title",void 0),o([re("title")],Rt.prototype,"writeTitle",null),o([c({type:lF,json:{write:!0}})],Rt.prototype,"relatedRecordsInfo",void 0),Rt=kg=o([b(pM)],Rt);const Ta=Rt,lf={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function dM(e){return lf[e]||lf[e.toLowerCase()]}function Ob(e){var t;return(t=lf[e])!=null?t:lf[e.toLowerCase()]}function mF(e){return[...Ob(e)]}function rm(e,t,r){r<0&&++r,r>1&&--r;const s=6*r;return s<1?e+(t-e)*s:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function hM(e,t,r,s=1){const i=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,a=2*r-n;return[Math.round(255*rm(a,n,i+1/3)),Math.round(255*rm(a,n,i)),Math.round(255*rm(a,n,i-1/3)),s]}function gF(e){const t=e.length>5,r=t?8:4,s=(1<<r)-1,i=t?1:17,n=t?e.length===9:e.length===5;let a=Number("0x"+e.substr(1));if(isNaN(a))return null;const u=[0,0,0,1];let p;return n&&(p=a&s,a>>=r,u[3]=i*p/255),p=a&s,a>>=r,u[2]=i*p,p=a&s,a>>=r,u[1]=i*p,p=a&s,a>>=r,u[0]=i*p,u}function ja(){return[0,0,0]}function fM(e){return[e[0],e[1],e[2]]}function Aa(e,t,r){return[e,t,r]}function yM(e){const t=ja(),r=Math.min(3,e.length);for(let s=0;s<r;++s)t[s]=e[s];return t}function mM(e,t){return new Float64Array(e,t,3)}function gM(){return ja()}function vM(){return Aa(1,1,1)}function bM(){return Aa(1,0,0)}function wM(){return Aa(0,1,0)}function _M(){return Aa(0,0,1)}const SM=gM(),xM=vM(),vF=bM(),bF=wM(),wF=_M();Object.freeze({__proto__:null,create:ja,clone:fM,fromValues:Aa,fromArray:yM,createView:mM,zeros:gM,ones:vM,unitX:bM,unitY:wM,unitZ:_M,ZEROS:SM,ONES:xM,UNIT_X:vF,UNIT_Y:bF,UNIT_Z:wF});const We=1e-6,Bn=Math.random,_F=Math.PI/180,SF=180/Math.PI;function xF(e){return e*_F}function $F(e){return e*SF}function IF(e,t){return Math.abs(e-t)<=We*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze({__proto__:null,EPSILON:We,RANDOM:Bn,toRadian:xF,toDegree:$F,equals:IF});function ty(e){const t=e[0],r=e[1],s=e[2];return Math.sqrt(t*t+r*r+s*s)}function uf(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Eb(e,t,r,s){return e[0]=t,e[1]=r,e[2]=s,e}function $M(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Tb(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function IM(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function jb(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function MF(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function OF(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function EF(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function TF(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function jF(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function MM(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function AF(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e}function Ab(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+s*s+i*i)}function Rb(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2];return r*r+s*s+i*i}function Cb(e){const t=e[0],r=e[1],s=e[2];return t*t+r*r+s*s}function RF(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function CF(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function cf(e,t){const r=t[0],s=t[1],i=t[2];let n=r*r+s*s+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function Fb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function OM(e,t,r){const s=t[0],i=t[1],n=t[2],a=r[0],u=r[1],p=r[2];return e[0]=i*p-n*u,e[1]=n*a-s*p,e[2]=s*u-i*a,e}function EM(e,t,r,s){const i=t[0],n=t[1],a=t[2];return e[0]=i+s*(r[0]-i),e[1]=n+s*(r[1]-n),e[2]=a+s*(r[2]-a),e}function FF(e,t,r,s,i,n){const a=n*n,u=a*(2*n-3)+1,p=a*(n-2)+n,d=a*(n-1),h=a*(3-2*n);return e[0]=t[0]*u+r[0]*p+s[0]*d+i[0]*h,e[1]=t[1]*u+r[1]*p+s[1]*d+i[1]*h,e[2]=t[2]*u+r[2]*p+s[2]*d+i[2]*h,e}function kF(e,t,r,s,i,n){const a=1-n,u=a*a,p=n*n,d=u*a,h=3*n*u,f=3*p*a,y=p*n;return e[0]=t[0]*d+r[0]*h+s[0]*f+i[0]*y,e[1]=t[1]*d+r[1]*h+s[1]*f+i[1]*y,e[2]=t[2]*d+r[2]*h+s[2]*f+i[2]*y,e}function PF(e,t){t=t||1;const r=2*Bn()*Math.PI,s=2*Bn()-1,i=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=s*t,e}function TM(e,t,r){const s=t[0],i=t[1],n=t[2];return e[0]=r[0]*s+r[4]*i+r[8]*n+r[12],e[1]=r[1]*s+r[5]*i+r[9]*n+r[13],e[2]=r[2]*s+r[6]*i+r[10]*n+r[14],e}function jM(e,t,r){const s=t[0],i=t[1],n=t[2];return e[0]=s*r[0]+i*r[3]+n*r[6],e[1]=s*r[1]+i*r[4]+n*r[7],e[2]=s*r[2]+i*r[5]+n*r[8],e}function AM(e,t,r){const s=r[0],i=r[1],n=r[2],a=r[3],u=t[0],p=t[1],d=t[2];let h=i*d-n*p,f=n*u-s*d,y=s*p-i*u,m=i*y-n*f,v=n*h-s*y,S=s*f-i*h;const _=2*a;return h*=_,f*=_,y*=_,m*=2,v*=2,S*=2,e[0]=u+h+m,e[1]=p+f+v,e[2]=d+y+S,e}function NF(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[0],n[1]=i[1]*Math.cos(s)-i[2]*Math.sin(s),n[2]=i[1]*Math.sin(s)+i[2]*Math.cos(s),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function LF(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[2]*Math.sin(s)+i[0]*Math.cos(s),n[1]=i[1],n[2]=i[2]*Math.cos(s)-i[0]*Math.sin(s),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function DF(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[0]*Math.cos(s)-i[1]*Math.sin(s),n[1]=i[0]*Math.sin(s)+i[1]*Math.cos(s),n[2]=i[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function VF(e,t){uf(pd,e),uf(dd,t),cf(pd,pd),cf(dd,dd);const r=Fb(pd,dd);return r>1?0:r<-1?Math.PI:Math.acos(r)}const pd=ja(),dd=ja();function zF(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function RM(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function UF(e,t){if(e===t)return!0;const r=e[0],s=e[1],i=e[2],n=t[0],a=t[1],u=t[2];return Math.abs(r-n)<=We*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(s-a)<=We*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(i-u)<=We*Math.max(1,Math.abs(i),Math.abs(u))}function CM(e,t,r){const s=r[0]-t[0],i=r[1]-t[1],n=r[2]-t[2];let a=s*s+i*i+n*n;return a>0?(a=1/Math.sqrt(a),e[0]=s*a,e[1]=i*a,e[2]=n*a,e):(e[0]=0,e[1]=0,e[2]=0,e)}const qF=Tb,BF=IM,GF=jb,JF=Ab,HF=Rb,FM=ty,WF=Cb;Object.freeze({__proto__:null,length:ty,copy:uf,set:Eb,add:$M,subtract:Tb,multiply:IM,divide:jb,ceil:MF,floor:OF,min:EF,max:TF,round:jF,scale:MM,scaleAndAdd:AF,distance:Ab,squaredDistance:Rb,squaredLength:Cb,negate:RF,inverse:CF,normalize:cf,dot:Fb,cross:OM,lerp:EM,hermite:FF,bezier:kF,random:PF,transformMat4:TM,transformMat3:jM,transformQuat:AM,rotateX:NF,rotateY:LF,rotateZ:DF,angle:VF,str:zF,exactEquals:RM,equals:UF,direction:CM,sub:qF,mul:BF,div:GF,dist:JF,sqrDist:HF,len:FM,sqrLen:WF});function kM(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function PM(e,t,r,s,i){return e[0]=t,e[1]=r,e[2]=s,e[3]=i,e}function NM(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function LM(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function DM(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function VM(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function KF(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function QF(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function ZF(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function YF(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function XF(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function zM(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function ek(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e}function UM(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+s*s+i*i+n*n)}function qM(e,t){const r=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2],n=t[3]-e[3];return r*r+s*s+i*i+n*n}function kb(e){const t=e[0],r=e[1],s=e[2],i=e[3];return Math.sqrt(t*t+r*r+s*s+i*i)}function Pb(e){const t=e[0],r=e[1],s=e[2],i=e[3];return t*t+r*r+s*s+i*i}function tk(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function rk(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function BM(e,t){const r=t[0],s=t[1],i=t[2],n=t[3];let a=r*r+s*s+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=s*a,e[2]=i*a,e[3]=n*a),e}function GM(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function JM(e,t,r,s){const i=t[0],n=t[1],a=t[2],u=t[3];return e[0]=i+s*(r[0]-i),e[1]=n+s*(r[1]-n),e[2]=a+s*(r[2]-a),e[3]=u+s*(r[3]-u),e}function sk(e,t){let r,s,i,n,a,u;t=t||1;do r=2*Bn()-1,s=2*Bn()-1,a=r*r+s*s;while(a>=1);do i=2*Bn()-1,n=2*Bn()-1,u=i*i+n*n;while(u>=1);const p=Math.sqrt((1-a)/u);return e[0]=t*r,e[1]=t*s,e[2]=t*i*p,e[3]=t*n*p,e}function ik(e,t,r){const s=t[0],i=t[1],n=t[2],a=t[3];return e[0]=r[0]*s+r[4]*i+r[8]*n+r[12]*a,e[1]=r[1]*s+r[5]*i+r[9]*n+r[13]*a,e[2]=r[2]*s+r[6]*i+r[10]*n+r[14]*a,e[3]=r[3]*s+r[7]*i+r[11]*n+r[15]*a,e}function nk(e,t,r){const s=t[0],i=t[1],n=t[2],a=r[0],u=r[1],p=r[2],d=r[3],h=d*s+u*n-p*i,f=d*i+p*s-a*n,y=d*n+a*i-u*s,m=-a*s-u*i-p*n;return e[0]=h*d+m*-a+f*-p-y*-u,e[1]=f*d+m*-u+y*-a-h*-p,e[2]=y*d+m*-p+h*-u-f*-a,e[3]=t[3],e}function ok(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function HM(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function WM(e,t){const r=e[0],s=e[1],i=e[2],n=e[3],a=t[0],u=t[1],p=t[2],d=t[3];return Math.abs(r-a)<=We*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-u)<=We*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-p)<=We*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(n-d)<=We*Math.max(1,Math.abs(n),Math.abs(d))}const ak=LM,lk=DM,uk=VM,ck=UM,pk=qM,dk=kb,hk=Pb;Object.freeze({__proto__:null,copy:kM,set:PM,add:NM,subtract:LM,multiply:DM,divide:VM,ceil:KF,floor:QF,min:ZF,max:YF,round:XF,scale:zM,scaleAndAdd:ek,distance:UM,squaredDistance:qM,length:kb,squaredLength:Pb,negate:tk,inverse:rk,normalize:BM,dot:GM,lerp:JM,random:sk,transformMat4:ik,transformQuat:nk,str:ok,exactEquals:HM,equals:WM,sub:ak,mul:lk,div:uk,dist:ck,sqrDist:pk,len:dk,sqrLen:hk});const yS=new Float32Array(1);function fk(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Pp(e,t,r){return Math.min(Math.max(e,t),r)}function yk(e){return(e&e-1)==0}function mk(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function gk(e,t,r){return e+(t-e)*r}function vk(e){return e*Math.PI/180}function bk(e){return 180*e/Math.PI}function wk(e){return Math.acos(Pp(e,-1,1))}function KM(e){return Math.asin(Pp(e,-1,1))}function _k(e){return QM(Math.max(-mS,Math.min(e,mS)))}function QM(e){return yS[0]=e,yS[0]}function Sk(e,t){const r=ty(e),s=KM(e[2]/r),i=Math.atan2(e[1]/r,e[0]/r);return Eb(t,r,s,i),t}const mS=QM(34028234663852886e22);function hd(e){return Pp(Jf(e),0,255)}function fd(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class jt{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,s,i=new jt){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(t,r){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const i=s[2].split(/\s*,\s*/),n=s[1];if(n==="rgb"&&i.length===3||n==="rgba"&&i.length===4){const a=i[0];if(a.charAt(a.length-1)==="%"){const u=i.map(p=>2.56*parseFloat(p));return i.length===4&&(u[3]=parseFloat(i[3])),jt.fromArray(u,r)}return jt.fromArray(i.map(u=>parseFloat(u)),r)}if(n==="hsl"&&i.length===3||n==="hsla"&&i.length===4)return jt.fromArray(hM(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),r)}return null}static fromHex(t,r=new jt){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const s=t.length===4?4:8,i=(1<<s)-1;let n=Number("0x"+t.substr(1));return isNaN(n)?null:(["b","g","r"].forEach(a=>{const u=n&i;n>>=s,r[a]=s===4?17*u:u}),r.a=1,r)}static fromArray(t,r=new jt){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const s=dM(t)?Ob(t):null;return s&&jt.fromArray(s,r)||jt.fromRgb(t,r)||jt.fromHex(t,r)}static fromJSON(t){return t&&new jt([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return R(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return R(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t=="string")jt.fromString(t,this);else if(Array.isArray(t))jt.fromArray(t,this);else{var r,s,i,n;this._set((r=t.r)!=null?r:0,(s=t.g)!=null?s:0,(i=t.b)!=null?i:0,(n=t.a)!=null?n:1),t instanceof jt||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=jt.AlphaMode.ALWAYS){const r=hd(this.r),s=hd(this.g),i=hd(this.b);return t===jt.AlphaMode.ALWAYS||this.a!==1?[r,s,i,hd(255*this.a)]:[r,s,i]}clone(){return new jt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return R(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(fd(this.r,0,255)),this.g=Math.round(fd(this.g,0,255)),this.b=Math.round(fd(this.b,0,255)),this.a=fd(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i}}jt.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(jt||(jt={}));const De=jt,gS=new xe({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let xk=0,Ha=class extends D{constructor(e){super(e),this.id="sym"+xk++,this.type=null,this.color=new De([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};o([c({type:gS.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:gS.write}}})],Ha.prototype,"type",void 0),o([c({type:De,json:{write:{allowNull:!0}}})],Ha.prototype,"color",void 0),o([Y("color")],Ha.prototype,"readColor",null),Ha=o([b("esri.symbols.Symbol")],Ha);const Sr=Ha;var Pg;let wn=Pg=class extends Sr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(i=>{const n=i.valueExpressionInfo;return on(e,t,n.expression)});await Promise.all(s)}}}clone(){return new Pg({data:j(this.data)})}hash(){return Lf(JSON.stringify(this.data)).toString()}};o([c({json:{write:!1}})],wn.prototype,"color",void 0),o([c({json:{write:!0}})],wn.prototype,"data",void 0),o([Y("data",["symbol"])],wn.prototype,"readData",null),o([re("data",{})],wn.prototype,"writeData",null),o([de({CIMSymbolReference:"cim"},{readOnly:!0})],wn.prototype,"type",void 0),wn=Pg=o([b("esri.symbols.CIMSymbol")],wn);const Np=wn;let Wa=class extends D{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};o([c({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Wa.prototype,"enabled",void 0),o([re("enabled")],Wa.prototype,"writeEnabled",null),o([c({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Wa.prototype,"type",void 0),Wa=o([b("esri.symbols.Symbol3DLayer")],Wa);const bi=Wa,$k=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Ik="screenUtils.toPt: input not recognized!",ZM=96;function Mk(e){return e?e/72*ZM:0}function rn(e){return e?72*e/ZM:0}function Be(e){if(typeof e=="string"){const t=e.match($k);if(t){const r=Number(t[1]),s=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",n=s==="px"?rn(r):r;return i?-n:n}return console.warn(Ik),null}return e}function Ok(e=0,t=0){return{x:e,y:t}}function YM(e){const t=Jf(100*(1-e));return Math.max(0,Math.min(t,100))}function lp(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function Ek(e,t){const r=t.transparency!=null?lp(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new De([s[0]||0,s[1]||0,s[2]||0,r]):null}function Tk(e,t){t.color=e.toJSON().slice(0,3);const r=YM(e.a);r!==0&&(t.transparency=r)}const no={type:De,json:{type:[At],default:null,read:{source:["color","transparency"],reader:Ek},write:{target:{color:{type:[At]},transparency:{type:At}},writer:Tk}}},mi={type:Number,cast:Be,json:{write:!0}};let Oo=class extends D{constructor(e){super(e),this.color=new De([0,0,0,1]),this.extensionLength=0,this.size=rn(1)}clone(){}cloneProperties(){return{color:j(this.color),size:this.size,extensionLength:this.extensionLength}}};o([c({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Oo.prototype,"type",void 0),o([c(no)],Oo.prototype,"color",void 0),o([c(ve(A({},mi),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],Oo.prototype,"extensionLength",void 0),o([c(mi)],Oo.prototype,"size",void 0),Oo=o([b("esri.symbols.edges.Edges3D")],Oo);const Nb=Oo;var Ng;let sh=Ng=class extends Nb{constructor(e){super(e),this.type="sketch"}clone(){return new Ng(this.cloneProperties())}};o([de({sketch:"sketch"},{readOnly:!0})],sh.prototype,"type",void 0),sh=Ng=o([b("esri.symbols.edges.SketchEdges3D")],sh);const jk=sh;var Lg;let ih=Lg=class extends Nb{constructor(e){super(e),this.type="solid"}clone(){return new Lg(this.cloneProperties())}};o([de({solid:"solid"},{readOnly:!0})],ih.prototype,"type",void 0),ih=Lg=o([b("esri.symbols.support.SolidEdges3D")],ih);const Ak=ih,Lb={types:{key:"type",base:Nb,typeMap:{solid:Ak,sketch:jk}},json:{write:!0}};var Dg;let us=Dg=class extends D{constructor(e){super(e),this.color=null}clone(){const e={color:R(this.color)?this.color.clone():null};return new Dg(e)}};o([c(no)],us.prototype,"color",void 0),us=Dg=o([b("esri.symbols.support.Symbol3DMaterial")],us);var Vg;let _n=Vg=class extends bi{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Vg({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:R(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};o([de({Extrude:"extrude"},{readOnly:!0})],_n.prototype,"type",void 0),o([c({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_n.prototype,"size",void 0),o([c({type:us,json:{write:!0}})],_n.prototype,"material",void 0),o([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_n.prototype,"castShadows",void 0),o([c(Lb)],_n.prototype,"edges",void 0),_n=Vg=o([b("esri.symbols.ExtrudeSymbol3DLayer")],_n);const Db=_n;let Wu=class extends Sr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};o([de({esriSLS:"simple-line"},{readOnly:!0})],Wu.prototype,"type",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],Wu.prototype,"width",void 0),Wu=o([b("esri.symbols.LineSymbol")],Wu);const Rk=Wu,Ck=["begin","end","begin-end"],XM=["arrow","circle","square","diamond","cross","x"];var zg;let Ys=zg=class extends D{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,s){(s==null?void 0:s.origin)==="web-map"?t[r]="arrow":t[r]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,s){(s==null?void 0:s.origin)==="web-map"||(t[r]=e)}clone(){return new zg({color:j(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};o([c({type:["begin","end","begin-end"],json:{write:!0}})],Ys.prototype,"placement",void 0),o([de({"line-marker":"line-marker"},{readOnly:!0}),c({json:{origins:{"web-map":{write:!1}}}})],Ys.prototype,"type",void 0),o([c({type:XM})],Ys.prototype,"style",void 0),o([re("style")],Ys.prototype,"writeStyle",null),o([c({type:De,value:null,json:{write:{allowNull:!0}}})],Ys.prototype,"color",null),o([Y("color")],Ys.prototype,"readColor",null),o([re("color")],Ys.prototype,"writeColor",null),Ys=zg=o([b("esri.symbols.LineSymbolMarker")],Ys);const Fk=Ys;var Ug;const sm=new xe({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ei=Ug=class extends Rk{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,s,i,n){if(e&&typeof e!="string")return e;const a={};return e!=null&&(a.style=e),t!=null&&(a.color=t),r!=null&&(a.width=Be(r)),s!=null&&(a.cap=s),i!=null&&(a.join=i),n!=null&&(a.miterLimit=Be(n)),a}clone(){var e;return new Ug({color:j(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};o([de({esriSLS:"simple-line"},{readOnly:!0})],Ei.prototype,"type",void 0),o([c({type:sm.apiValues,json:{read:sm.read,write:sm.write}})],Ei.prototype,"style",void 0),o([c({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Ei.prototype,"cap",void 0),o([c({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Ei.prototype,"join",void 0),o([c({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Fk}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ei.prototype,"marker",void 0),o([c({type:Number,json:{read:!1,write:!1}})],Ei.prototype,"miterLimit",void 0),Ei=Ug=o([b("esri.symbols.SimpleLineSymbol")],Ei);const Wr=Ei;let Ku=class extends Sr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};o([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wr}},json:{default:null,write:!0}})],Ku.prototype,"outline",void 0),o([c({type:["simple-fill","picture-fill"],readOnly:!0})],Ku.prototype,"type",void 0),Ku=o([b("esri.symbols.FillSymbol")],Ku);const eO=Ku;let nh=class extends D{constructor(e){super(e)}clone(){}};o([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],nh.prototype,"type",void 0),nh=o([b("esri.symbols.patterns.LinePattern3D")],nh);const tO=nh,kk=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var qg;const Pk=Gt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Qu=qg=class extends tO{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new qg(e)}};o([c({type:["style"]})],Qu.prototype,"type",void 0),o([de(Pk),c({type:kk})],Qu.prototype,"style",void 0),Qu=qg=o([b("esri.symbols.patterns.LineStylePattern3D")],Qu);const Vb=Qu;let oh=class extends D{constructor(e){super(e)}clone(){}};o([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],oh.prototype,"type",void 0),oh=o([b("esri.symbols.patterns.Pattern3D")],oh);const rO=oh,Nk=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Bg;let Zu=Bg=class extends rO{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Bg(e)}};o([c({type:["style"]})],Zu.prototype,"type",void 0),o([c({type:Nk,json:{read:!0,write:!0}})],Zu.prototype,"style",void 0),Zu=Bg=o([b("esri.symbols.patterns.StylePattern3D")],Zu);const sO=Zu,Lk={types:{key:"type",base:rO,typeMap:{style:sO}},json:{write:!0}},iO={types:{key:"type",base:tO,typeMap:{style:Vb}},json:{write:!0}},Ac=new De("white");new De("black");const Dk=new De([255,255,255,0]);function Vk(e){return e.r===0&&e.g===0&&e.b===0}var Gg;let Rc=Gg=class extends us{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:R(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new Gg(e)}};o([de({multiply:"multiply",replace:"replace",tint:"tint"})],Rc.prototype,"colorMixMode",void 0),Rc=Gg=o([b("esri.symbols.support.Symbol3DFillMaterial")],Rc);function ry(e=Yk){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function zb(e,t,r,s,i,n,a=ry()){return a[0]=e,a[1]=t,a[2]=r,a[3]=s,a[4]=i,a[5]=n,a}function zk(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Uk(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function qk(e){return e[0]>=e[3]?0:e[3]-e[0]}function Bk(e){return e[1]>=e[4]?0:e[4]-e[1]}function Gk(e){return e[2]>=e[5]?0:e[5]-e[2]}function Jk(e,t=[0,0,0]){return t[0]=qk(e),t[1]=Bk(e),t[2]=Gk(e),t}function Hk(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Wk(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function nO(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Kk(e){return e?nO(e,Jg):ry(Jg)}function Qk(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function vS(e){return e.length===6}function Zk(e,t,r){if(ae(e)||ae(t))return e===t;if(!vS(e)||!vS(t))return!1;if(r){for(let s=0;s<e.length;s++)if(!r(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const Jg=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Yk=[0,0,0,0,0,0];ry();function Xk(e,{isPrimitive:t,width:r,depth:s,height:i}){const n=t?10:1;if(r==null&&i==null&&s==null)return[n*e[0],n*e[1],n*e[2]];const a=Aa(r,s,i);let u;for(let p=0;p<3;p++){const d=a[p];if(d!=null){u=d/e[p];break}}for(let p=0;p<3;p++)a[p]==null&&(a[p]=e[p]*u);return a}const eP=zb(-.5,-.5,-.5,.5,.5,.5),tP=zb(-.5,-.5,0,.5,.5,1),rP=zb(-.5,-.5,0,.5,.5,.5);function sP(e){switch(e){case"sphere":case"cube":case"diamond":return eP;case"cylinder":case"cone":case"inverted-cone":return tP;case"tetrahedron":return rP;default:return}}const Ub=["butt","square","round"],iP=[...Ub,"none"],oO=["miter","bevel","round"];var Hg;let Eo=Hg=class extends D{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=rn(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:R(this.color)?this.color.clone():null,size:this.size,pattern:R(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new Hg(e)}};o([c(no)],Eo.prototype,"color",void 0),o([c(mi)],Eo.prototype,"size",void 0),o([c(iO)],Eo.prototype,"pattern",void 0),o([c({type:Ub,json:{default:"butt",write:{overridePolicy(){return{enabled:R(this.pattern)}}}}})],Eo.prototype,"patternCap",void 0),Eo=Hg=o([b("esri.symbols.support.Symbol3DOutline")],Eo);var ah;let Ti=ah=class extends bi{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:R(this.edges)?this.edges.clone():null,enabled:this.enabled,material:R(this.material)?this.material.clone():null,pattern:R(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:R(this.outline)?this.outline.clone():null};return new ah(e)}static fromSimpleFillSymbol(e){var t,r,s,i,n,a;const u=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new Vb({style:e.outline.style}):null,p={size:(t=(r=e.outline)==null?void 0:r.width)!=null?t:0,color:((s=(i=e.outline)==null?void 0:i.color)!=null?s:Ac).clone(),pattern:u};return u&&(n=e.outline)!=null&&n.cap&&(p.patternCap=e.outline.cap),new ah({material:new Rc({color:((a=e.color)!=null?a:Dk).clone()}),pattern:e.style&&e.style!=="solid"?new sO({style:e.style}):null,outline:p})}};o([de({Fill:"fill"},{readOnly:!0})],Ti.prototype,"type",void 0),o([c({type:Rc,json:{write:!0}})],Ti.prototype,"material",void 0),o([c(Lk)],Ti.prototype,"pattern",void 0),o([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ti.prototype,"castShadows",void 0),o([c({type:Eo,json:{write:!0}})],Ti.prototype,"outline",void 0),o([c(Lb)],Ti.prototype,"edges",void 0),Ti=ah=o([b("esri.symbols.FillSymbol3DLayer")],Ti);const Lp=Ti,nP=["none","underline","line-through"],oP=["normal","italic","oblique"],aP=["normal","lighter","bold","bolder"],aO={type:Number,cast:e=>{const t=Ap(e);return t===0?1:Pp(t,.1,4)},nonNullable:!0},lP=["left","right","center","justify"],uP=["left","right","center"],cP=["baseline","top","middle","bottom"],pP={type:lP,nonNullable:!0},dP={type:uP,nonNullable:!0},lO={type:cP,nonNullable:!0};var Wg;let ji=Wg=class extends D{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Be(e)}clone(){return new Wg({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};o([c({type:nP,json:{default:"none",write:!0}})],ji.prototype,"decoration",void 0),o([c({type:String,json:{write:!0}})],ji.prototype,"family",void 0),o([c({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],ji.prototype,"size",void 0),o([_t("size")],ji.prototype,"castSize",null),o([c({type:oP,json:{default:"normal",write:!0}})],ji.prototype,"style",void 0),o([c({type:aP,json:{default:"normal",write:!0}})],ji.prototype,"weight",void 0),ji=Wg=o([b("esri.symbols.Font")],ji);const sy=ji,hP=te.getLogger("esri.core.urlUtils"),nu=Qe.request,bS="esri/config: esriConfig.request.proxyUrl is not set.",uO=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,cO=/^\s*http:/i,fP=/^\s*https:/i,yP=/^\s*file:/i,mP=/:\d+$/,gP=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,vP=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),bP=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class ca{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(vP);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(bP),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const yd={},wP=new ca(Qe.applicationUrl);let or=wP;const _P=xP();let qb=_P;const pO=()=>or,SP=()=>qb;function xP(){const e=or.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${or.scheme}://${or.host}${or.port!=null?`:${or.port}`:""}`}${t}`}function Cr(e){const t={path:null,query:null},r=new ca(e),s=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,s),t.query=Bb(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function Bb(e){const t=e.split("&"),r={};for(const s of t){if(!s)continue;const i=s.indexOf("=");let n,a;i<0?(n=decodeURIComponent(s),a=""):(n=decodeURIComponent(s.slice(0,i)),a=decodeURIComponent(s.slice(i+1)));let u=r[n];typeof u=="string"&&(u=r[n]=[u]),Array.isArray(u)?u.push(a):r[n]=a}return r}function wS(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function Gl(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const s=e[r];if(s==null)return"";const i=encodeURIComponent(r)+"=",n=t&&t[r];return n?i+encodeURIComponent(n(s)):Array.isArray(s)?s.map(a=>wS(a)?i+encodeURIComponent(JSON.stringify(a)):i+encodeURIComponent(a)).join("&"):wS(s)?i+encodeURIComponent(JSON.stringify(s)):i+encodeURIComponent(s)}).filter(r=>r).join("&"):""}function $P(e=!1){let t,r=nu.proxyUrl;if(typeof e=="string"){t=mO(e);const s=Dp(e);s&&(r=s.proxyUrl)}else t=!!e;if(!r)throw hP.warn(bS),new F("urlutils:proxy-not-set",bS);return t&&Kg()&&(r=ny(r)),Cr(r)}function IP(e){const t=Dp(e);let r,s;if(t){const i=Gb(t.proxyUrl);r=i.path,s=i.query?Bb(i.query):null}if(r){const i=Cr(e);e=r+"?"+i.path;const n=Gl(A(A({},s),i.query));n&&(e=`${e}?${n}`)}return e}const Eu={path:"",query:""};function Gb(e){const t=e.indexOf("?");return t!==-1?(Eu.path=e.slice(0,t),Eu.query=e.slice(t+1)):(Eu.path=e,Eu.query=null),Eu}function dO(e){return e=(e=pf(e=DP(e=Gb(e).path),!0)).toLowerCase()}function MP(e){const t={proxyUrl:e.proxyUrl,urlPrefix:dO(e.urlPrefix)},r=nu.proxyRules,s=t.urlPrefix;let i=r.length;for(let n=0;n<r.length;n++){const a=r[n].urlPrefix;if(s.indexOf(a)===0){if(s.length===a.length)return-1;i=n;break}a.indexOf(s)===0&&(i=n+1)}return r.splice(i,0,t),i}function Dp(e){const t=nu.proxyRules,r=dO(e);for(let s=0;s<t.length;s++)if(r.indexOf(t[s].urlPrefix)===0)return t[s]}function hO(e,t){return e=_S(e),t=_S(t),pf(e)===pf(t)}function _S(e){const t=(e=cs(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function fO(e){const t=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s),r=nu.interceptors;if(r){for(const s of r)if(Array.isArray(s.urls)){if(s.urls.some(t))return s}else if(t(s.urls))return s}return null}function up(e,t,r=!1){const s=Zg(e),i=Zg(t);return!(!r&&s.scheme!==i.scheme)&&s.host!=null&&i.host!=null&&s.host.toLowerCase()===i.host.toLowerCase()&&s.port===i.port}function Jb(e){if(typeof e=="string"){if(!jr(e))return!0;e=Zg(e)}if(up(e,or))return!0;const t=nu.trustedServers||[];for(let r=0;r<t.length;r++){const s=OP(t[r]);for(let i=0;i<s.length;i++)if(up(e,s[i]))return!0}return!1}function OP(e){return yd[e]||(Wb(e)||an(e)?yd[e]=[new ca(ls(e))]:yd[e]=[new ca(`http://${e}`),new ca(`https://${e}`)]),yd[e]}function ls(e,t=qb,r){return an(e)?r&&r.preserveProtocolRelative?e:or.scheme==="http"&&or.authority===Ra(e).slice(2)?`http:${e}`:`https:${e}`:Wb(e)?e:$a(e[0]==="/"?NP(t):t,e)}function iy(e,t=qb,r){if(!jr(e))return e;const s=cs(e),i=s.toLowerCase(),n=cs(t).toLowerCase().replace(/\/+$/,""),a=r?cs(r).toLowerCase().replace(/\/+$/,""):null;if(a&&n.indexOf(a)!==0)return e;const u=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let p=u(i,"/",i.indexOf("//")+2),d=-1;for(;i.slice(0,p+1)===n.slice(0,p)+"/"&&(d=p+1,p!==i.length);)p=u(i,"/",p+1);if(d===-1||a&&d<a.length)return e;e=s.slice(d);const h=n.slice(d-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function cs(e){return e=UP(e=zP(e=VP(e=ls(e=e.trim()))))}function $a(...e){const t=e.filter(R);if(!t||!t.length)return;const r=[];if(jr(t[0])){const i=t[0],n=i.indexOf("//");n!==-1&&(r.push(i.slice(0,n+1)),kP(t[0])&&(r[0]+="/"),t[0]=i.slice(n+2))}else t[0][0]==="/"&&r.push("");const s=t.reduce((i,n)=>n?i.concat(n.split("/")):i,[]);for(let i=0;i<s.length;i++){const n=s[i];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&i===s.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function Ra(e,t=!1){if(Vp(e)||oo(e))return null;let r=e.indexOf("://");if(r===-1&&an(e))r=2;else{if(r===-1)return null;r+=3}const s=e.indexOf("/",r);return s!==-1&&(e=e.slice(0,s)),t&&(e=pf(e,!0)),e}function jr(e){return an(e)||Wb(e)}function Vp(e){return e!=null&&e.slice(0,5)==="blob:"}function oo(e){return e.slice(0,5)==="data:"}function EP(e){const t=Hb(e);if(!t||!t.isBase64)return null;const r=atob(t.data),s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s.buffer}function TP(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const jP=/^data:(.*?)(;base64)?,(.*)$/;function Hb(e){const t=e.match(jP);if(!t)return null;const[,r,s,i]=t;return{mediaType:r,isBase64:!!s,data:i}}function yO(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function AP(e,t){RP(e,t)||CP(e,t)}function RP(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const s=URL.createObjectURL(e);return r.download=t,r.href=s,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),!0}function CP(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function an(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function Wb(e){return uO.test(e)}function mO(e){return fP.test(e)||or.scheme==="https"&&an(e)}function FP(e){return cO.test(e)||or.scheme==="http"&&an(e)}function kP(e){return yP.test(e)}function ny(e){return an(e)?`https:${e}`:e.replace(cO,"https:")}function PP(){return or.scheme==="http"}function Kg(){return or.scheme==="https"}function pf(e,t=!1){return an(e)?e.slice(2):(e=e.replace(uO,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function NP(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function gO(e){let t=0;if(jr(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function LP(e,t){if(!e)return"";const r=Cr(e).path.replace(/\/+$/,""),s=r.substring(r.lastIndexOf("/")+1);if(t==null||!t.length)return s;const i=new RegExp(`.(${t.join("|")})$`,"ig");return s.replace(i,"")}function DP(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function Kb(e){return e.replace(/\/+$/,"")}function VP(e){if(/^https?:\/\//i.test(e)){const t=Gb(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function zP(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function UP(e){const t=nu.httpsDomains;if(!FP(e))return e;const r=e.indexOf("/",7);let s;if(s=r===-1?e:e.slice(0,r),s=s.toLowerCase().slice(7),mP.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return PP()&&s===or.authority&&!gP.test(e)||(Kg()&&s===or.authority||t&&t.some(i=>s===i||s.endsWith(`.${i}`))||Kg()&&!Dp(e))&&(e=ny(e)),e}function Qg(e,t,r){if(!(t&&r&&e&&jr(e)))return e;const s=e.indexOf("//"),i=e.indexOf("/",s+2),n=e.indexOf(":",s+2),a=Math.min(i<0?e.length:i,n<0?e.length:n);return e.slice(s+2,a).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${r}${e.slice(a)}`}function Zg(e){return typeof e=="string"?new ca(ls(e)):(e.scheme||(e.scheme=or.scheme),e)}function vO(e,t){const r=Cr(e),s=Object.keys(r.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),r.path}function bO(e,t,r){const s=Cr(e),i=s.query||{};return i[t]=String(r),`${s.path}?${Gl(i)}`}function Yg(e,t){const r=Cr(e),s=r.query||{};for(const n in t)s[n]=t[n];const i=Gl(s);return i?`${r.path}?${i}`:r.path}function qP(e){if(ae(e))return null;const t=e.match(BP);return t?t[1]:null}const BP=/.*?\.([^\/]*)$/;function Ca(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=ls(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=iy(e,t.portalItem.itemUrl);JP.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return Xg(e,t&&t.portal)}function ou(e,t,r=Jl.YES){if(!e)return e;!jr(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=ls(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const n=Xg(i,t.portal);s=iy(Xg(s,t.portal),n,n),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=HP(s,t&&t.portal),jr(s)&&(s=cs(s)),t!=null&&t.resources&&t!=null&&t.portalItem&&!jr(s)&&!oo(s)&&r===Jl.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function oy(e,t,r){return Ca(e,r)}function ro(e,t,r,s){const i=ou(e,s);i!==void 0&&(t[r]=i)}const GP=/\/items\/([^\/]+)\/resources\//,JP=/^\.\/resources\//;function wO(e){const t=R(e)?e.match(GP):null;return R(t)?t[1]:null}function HP(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Qg(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Xg(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,s=pO();return up(s,`${s.scheme}://${r}`)?Qg(e,t.portalHostname,r):Qg(e,r,t.portalHostname)}var Jl;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Jl||(Jl={}));const WP=Object.freeze({__proto__:null,fromJSON:Ca,toJSON:ou,read:oy,write:ro,itemIdFromResourceUrl:wO,get MarkKeep(){return Jl}});var e0;const KP=Gt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let To=e0=class extends D{constructor(e){super(e)}readHref(e,t,r){return e?Ca(e,r):t.dataURI}writeHref(e,t,r,s){e&&(oo(e)?t.dataURI=e:(t.href=ou(e,s),jr(t.href)&&(t.href=cs(t.href))))}clone(){return new e0({href:this.href,primitive:this.primitive})}};o([c({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],To.prototype,"href",void 0),o([Y("href")],To.prototype,"readHref",null),o([re("href",{href:{type:String},dataURI:{type:String}})],To.prototype,"writeHref",null),o([de(KP)],To.prototype,"primitive",void 0),To=e0=o([b("esri.symbols.support.IconSymbol3DLayerResource")],To);var t0;let yl=t0=class extends ht{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new t0({x:this.x,y:this.y})}};o([c({type:Number})],yl.prototype,"x",void 0),o([c({type:Number})],yl.prototype,"y",void 0),yl=t0=o([b("esri.symbols.support.Symbol3DAnchorPosition2D")],yl);var r0;let Yu=r0=class extends D{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=rn(1)}clone(){const e={color:R(this.color)?this.color.clone():null,size:this.size};return new r0(e)}};o([c(no)],Yu.prototype,"color",void 0),o([c(mi)],Yu.prototype,"size",void 0),Yu=r0=o([b("esri.symbols.support.Symbol3DIconOutline")],Yu);var Ka;const QP=te.getLogger("esri.symbols.IconSymbol3DLayer");let Xs=Ka=class extends bi{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new Ka({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:R(this.material)?this.material.clone():null,outline:R(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ac,r=SS(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ac).clone()}:null;return new Ka({size:e.size,resource:{primitive:YP(e.style)},material:{color:t},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Vk(e.color)?Ac:e.color,r=SS(e);return new Ka({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Ka({resource:{href:yO({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function SS(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,s=xS(e.xoffset),i=xS(e.yoffset);return(s||i)&&t&&r?{x:-s/t,y:i/r}:null}function xS(e){return isFinite(e)?e:0}o([c({type:us,json:{write:!0}})],Xs.prototype,"material",void 0),o([c({type:To,json:{write:!0}})],Xs.prototype,"resource",void 0),o([de({Icon:"icon"},{readOnly:!0})],Xs.prototype,"type",void 0),o([c(mi)],Xs.prototype,"size",void 0),o([de({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),c({json:{default:"center"}})],Xs.prototype,"anchor",void 0),o([c({type:yl,json:{type:[Number],read:{reader:e=>new yl({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Xs.prototype,"anchorPosition",void 0),o([c({type:Yu,json:{write:!0}})],Xs.prototype,"outline",void 0),Xs=Ka=o([b("esri.symbols.IconSymbol3DLayer")],Xs);const ZP={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function YP(e){return ZP[e]||(QP.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Gn=Xs;function _O(e,t,r=ut){return t||(t=new r),t===e||(t.removeAll(),XP(e)?t.addMany(e):e&&t.add(e)),t}function SO(e){return e}function XP(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const xO="20220404",$O="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b",Qb="4.23",e9={async request(e,t){var r;const{default:s}=await Promise.resolve().then(function(){return EO}),i=e.options,n=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&(r=fO(e.url))!=null&&r.after?n:"array-buffer";const a=await s(e.url,i),u={data:a.data,ssl:a.ssl};switch(a.requestOptions.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=new TextEncoder().encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=new TextEncoder().encode(u.data).buffer}return{result:u,transferList:[u.data]}}};let wt;function t9(e){wt=e}function r9(e){const t=wt&&wt.findCredential(e);return t&&t.token?bO(e,"token",t.token):e}k("host-webworker")||(k("edge")||k("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const s9=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function Zb(e){const t=Ra(e,!0);return t&&t.endsWith(".arcgis.com")&&!s9.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function IO(e,t,r=!1,s){return new Promise((i,n)=>{if(Xn(s))return void n($S());let a=()=>{d(),n(new Error(`Unable to load ${t}`))},u=()=>{const h=e;d(),i(h)},p=()=>{if(!e)return;const h=e;d(),h.src="",n($S())};const d=()=>{k("esri-image-decode")||(e.removeEventListener("error",a),e.removeEventListener("load",u)),a=null,u=null,e=null,R(s)&&s.removeEventListener("abort",p),p=null,r&&URL.revokeObjectURL(t)};R(s)&&s.addEventListener("abort",p),k("esri-image-decode")?e.decode().then(u,a):(e.addEventListener("error",a),e.addEventListener("load",u))})}function $S(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function mt(e,t){var r;const s=oo(e),i=Vp(e);i||s||(e=cs(e));const n={url:e,requestOptions:A({},t)};let a=fO(e);if(a){const h=await p9(a,n);if(h!=null)return{data:h,getHeader:Yb,requestOptions:n.requestOptions,url:n.url};a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(k("host-webworker")||k("host-node"))throw ks("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(s)throw ks("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw ks("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(s||i)throw ks("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await l9(),df)return df.execute(e,t);const u=new AbortController;tn(t,()=>u.abort());const p={controller:u,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:Ui.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},d=await h9(p);return(r=a)==null||r.after==null||r.after(d),d}let df;const Ui=Qe.request,MO="FormData"in globalThis,i9=[499,498,403,401],n9=["COM_0056","COM_0057","SB_0008"],o9=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Yb=()=>null,s0=Symbol();function a9(e){const t=Ra(e);t&&!mt._corsServers.includes(t)&&mt._corsServers.push(t)}function IS(e){const t=Ra(e);return!t||t.endsWith(".arcgis.com")||mt._corsServers.includes(t)||Jb(t)}function ks(e,t,r,s){let i="Error";const n={url:r.url,requestOptions:r.requestOptions,getHeader:Yb,ssl:!1};if(t instanceof F)return t.details?(t.details=j(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const a=s&&(d=>s.headers.get(d)),u=s&&s.status,p=t.message;p&&(i=p),a&&(n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=s0 in t?t[s0]:t}return zs(t)?Xt():new F(e,i,n)}async function l9(){k("host-webworker")?df||(df=await Re(()=>import("./request.51edaa45.js"),[],import.meta.url)):mt._abortableFetch||(mt._abortableFetch=globalThis.fetch.bind(globalThis))}async function i0(){wt||await Re(()=>import("./IdentityManager.54bdba7f.js"),[],import.meta.url)}async function u9(e){const t=e.params.url,r=e.params.requestOptions,s=e.controller.signal,i=r.body;let n=null,a=null,u=null;if(MO&&"HTMLFormElement"in globalThis&&(i instanceof FormData?n=i:i instanceof HTMLFormElement&&(a=i,n=new FormData(a))),typeof i=="string"&&(u=i),e.fetchOptions={cache:r.cacheBust&&!mt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",redirect:"follow",signal:s},(n||u)&&(e.fetchOptions.body=n||u),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||n&&n.get&&n.get("token")||a&&a.elements.token),!e.hasToken&&Qe.apiKey&&Zb(t)&&(r.query||(r.query={}),r.query.token=Qe.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!OO(t)&&!Xn(s)){let p;r.authMode==="immediate"?(await i0(),p=await wt.getCredential(t,{signal:s}),e.credential=p):r.authMode==="no-prompt"?(await i0(),p=await wt.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=p):wt&&(p=wt.findCredential(t)),p&&(e.credentialToken=p.token,e.useSSL=!!p.ssl)}}function OO(e){return o9.some(t=>t.test(e))}async function c9(e){let t=e.params.url;const r=e.params.requestOptions,s=e.fetchOptions,i=Vp(t)||oo(t),n=r.responseType||"json",a=i?0:r.timeout!=null?r.timeout:Ui.timeout;let u=!1;if(!i){e.useSSL&&(t=ny(t)),r.cacheBust&&s.cache==="default"&&(t=bO(t,"request.preventCache",Date.now()));let y=A({},r.query);e.credentialToken&&(y.token=e.credentialToken);let m=Gl(y);k("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const v=t.length+1+m.length;let S;u=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||v>Ui.maxUrlLength;const _=r.useProxy||!!Dp(t);if(_){const M=$P(t);S=M.path,!u&&S.length+1+v>Ui.maxUrlLength&&(u=!0),M.query&&(y=A(A({},M.query),y))}if(s.method==="HEAD"&&(u||_)){if(u)throw v>Ui.maxUrlLength?ks("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ks("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(_)throw ks("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(u?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=Yg(t,y):(s.body=Gl(y),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Yg(t,y),_&&(e.useProxy=!0,t=`${S}?${t}`),y.token&&MO&&s.body instanceof FormData){const M=s.body;M.set?M.set("token",y.token):M.append("token",y.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!up(t,pO())){if(Jb(t))e.withCredentials=!0;else if(wt){const M=wt.findServerInfo(t);M&&M.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include")}let p,d,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},a));try{if(r.responseType==="native-request-init")d=s,d.url=t;else if(r.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||u||d9(r.headers)||!i&&!e.useProxy&&Ui.proxyUrl&&!IS(t)){if(p=await mt._abortableFetch(t,s),e.useProxy||a9(t),r.responseType==="native")d=p;else if(s.method!=="HEAD")if(p.ok){switch(n){case"array-buffer":d=await p.arrayBuffer();break;case"blob":case"image":d=await p.blob();break;default:d=await p.text()}if(h&&(clearTimeout(h),h=0),n==="json"||n==="xml"||n==="document")if(d)switch(n){case"json":d=JSON.parse(d);break;case"xml":d=MS(d,"application/xml");break;case"document":d=MS(d,"text/html")}else d=null;if(d){if(n==="array-buffer"||n==="blob"){const y=p.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&d[n==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(d).json();m.error&&(d=m)}catch{}}n==="image"&&d instanceof Blob&&(d=await OS(URL.createObjectURL(d),e,!0))}}else d=await p.text()}else d=await OS(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):Xt("Request canceled");if(!(!p&&y instanceof TypeError&&Ui.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||IS(t))throw y;e.redoRequest=!0,MP({proxyUrl:Ui.proxyUrl,urlPrefix:Ra(t)})}finally{h&&clearTimeout(h)}return[p,d]}async function p9(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=A(A({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=A(A({},t.requestOptions.query),e.query)),e.before){let r,s;try{s=await e.before(t)}catch(i){r=ks("request:interceptor",i,t)}if((s instanceof Error||s instanceof F)&&(r=ks("request:interceptor",s,t)),r)throw e.error&&e.error(r),r;return s}}function d9(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function MS(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function h9(e){var t,r;let s,i;await u9(e);try{do[s,i]=await c9(e);while(!await f9(e,s,i))}catch(u){const p=ks("request:server",u,e.params,s);throw p.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(p),p}const n=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)&&!e.hasToken&&!e.credentialToken&&(t=i)!=null&&(r=t.user)!=null&&r.username&&!Jb(n)){const u=Ra(n,!0);u&&Ui.trustedServers.push(u)}const a=e.credential;if(a&&wt){const u=wt.findServerInfo(a.server);let p=u&&u.owningSystemUrl;if(p){p=p.replace(/\/?$/,"/sharing");const d=wt.findCredential(p,a.userId);d&&wt._getIdenticalSvcIdx(p,d)===-1&&d.resources.unshift(p)}}return{data:i,getHeader:s?u=>s.headers.get(u):Yb,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function f9(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let i,n,a,u;if(!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[s0]=r,i;r!=null&&r.error&&(i=r.error),i&&(n=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,u=i.messageCode,u=u&&u.toUpperCase());const p=s.authMode;if(n===403&&(a===4||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&i.message.toLowerCase().indexOf("permission")===-1)){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(p!=="no-prompt"||n===498)&&i9.indexOf(n)!==-1&&!OO(e.params.url)&&(n!==403||n9.indexOf(u)===-1&&(a==null||a===2&&e.credentialToken))){await i0();try{const d=await wt.getCredential(e.params.url,{error:ks("request:server",i,e.params),prompt:p!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=d,e.credentialToken=d.token,e.useSSL=e.useSSL||d.ssl,!1}catch(d){if(p==="no-prompt")return e.credential=null,e.credentialToken=null,!1;i=d}}if(i)throw i;return!0}function OS(e,t,r=!1){const s=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.src=e,IO(i,e,r,s)}mt._abortableFetch=null,mt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var EO=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),Dn;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Dn||(Dn={}));class y9{constructor(t){this.instance=t,this._resolver=ma(),this._status=Dn.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Dn.RESOLVED,this._cleanUp()},()=>{this._status=Dn.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Dn.RESOLVED}isRejected(){return this._status===Dn.REJECTED}isFulfilled(){return this._status!==Dn.PENDING}abort(){this._resolver.reject(Xt())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=ma(),r=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(r);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve(this.instance)},i=>{this.isFulfilled()||this._allPromise!==s||zs(i)||this._resolver.reject(i)}),t.resolve()}}const ay=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new y9(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,s){return new Promise((i,n)=>{this._promiseProps.when(i,n)}).then(r,s)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=o([b("esri.core.Promise")],t),t};let n0=class extends ay(ht){};n0=o([b("esri.core.Promise")],n0);const m9="not-loaded",g9="loading",v9="failed",ES="loaded",TO=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const i=this.load.bind(this);this.load=n=>{const a=new Promise((u,p)=>{const d=qf(n,p);this.destroyed&&p(new F("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(u,p).finally(()=>{d&&d.remove()})});if(this.loadStatus===m9){this._set("loadStatus",g9);const u=this._loadController=new AbortController;i({signal:u.signal}),tn(u.signal,()=>{this._promiseProps.abort()})}return s(),a}})),this.when(()=>{this._set("loadStatus",ES),this._loadController=null},s=>{this._set("loadStatus",v9),this._set("loadError",s),this._loadController=null})}get loaded(){return this.loadStatus===ES}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new F("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort()),this}};return o([c({readOnly:!0})],t.prototype,"loaded",null),o([c({readOnly:!0})],t.prototype,"loadError",void 0),o([c({clonable:!1})],t.prototype,"loadStatus",void 0),o([c({type:[Rr],readOnly:!0})],t.prototype,"loadWarnings",null),t=o([b("esri.core.Loadable")],t),t};let Xu=class extends TO(n0){};Xu=o([b("esri.core.Loadable")],Xu),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=TO,e.isLoadable=t}(Xu||(Xu={}));const zp=Xu;var o0;const b9=new xe({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ts=o0=class extends ht{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new o0({categories:this.categories?j(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,s;if(this.categories&&(r=this.categories.map(a=>Array.isArray(a)?JSON.stringify(a):a)),this.extent){const a=ab(this.extent,ke.WGS84);R(a)&&(s=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const n={categories:r,bbox:s,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(a=>b9.toJSON(a.trim())).join(","),n.sortOrder=this.sortOrder),{query:A(A({},t),n)}}};o([c()],ts.prototype,"categories",void 0),o([c()],ts.prototype,"disableExtraQuery",void 0),o([c({type:Mt})],ts.prototype,"extent",void 0),o([c()],ts.prototype,"filter",void 0),o([c()],ts.prototype,"num",void 0),o([c()],ts.prototype,"query",void 0),o([c()],ts.prototype,"sortField",void 0),o([c()],ts.prototype,"sortOrder",null),o([c()],ts.prototype,"start",void 0),ts=o0=o([b("esri.portal.PortalQueryParams")],ts);const Ji=ts;let jo=class extends ht{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};o([c()],jo.prototype,"nextQueryParams",void 0),o([c()],jo.prototype,"queryParams",void 0),o([c()],jo.prototype,"results",void 0),o([c()],jo.prototype,"total",void 0),jo=o([b("esri.portal.PortalQueryResult")],jo);const w9=jo;let Ai=class extends D{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new F("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};o([c({type:Date})],Ai.prototype,"created",void 0),o([c()],Ai.prototype,"id",void 0),o([c()],Ai.prototype,"portal",void 0),o([c()],Ai.prototype,"title",void 0),o([c({readOnly:!0})],Ai.prototype,"url",null),o([c()],Ai.prototype,"username",void 0),Ai=o([b("esri.portal.PortalFolder")],Ai);const _9=Ai;let Pt=class extends D{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new F("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=rt(Ji,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new Ji,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Ji,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const i=new Ji;return i.disableExtraQuery=!0,i.num=1,i.query=s,this.portal.queryGroups(i,t)}throw new F("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],i=new Ji;return i.num=1,i.query=`typekeywords:"${e}"`,s.queryItems(i,t)}throw new F("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const i=s&&s.categorySchema;return i&&i.length?i:[]}):[])}};o([c()],Pt.prototype,"access",void 0),o([c({type:Date})],Pt.prototype,"created",void 0),o([c()],Pt.prototype,"description",void 0),o([c()],Pt.prototype,"id",void 0),o([c()],Pt.prototype,"isInvitationOnly",void 0),o([c({type:Date})],Pt.prototype,"modified",void 0),o([c()],Pt.prototype,"owner",void 0),o([c()],Pt.prototype,"portal",void 0),o([c()],Pt.prototype,"snippet",void 0),o([c()],Pt.prototype,"sortField",void 0),o([c()],Pt.prototype,"sortOrder",void 0),o([c()],Pt.prototype,"tags",void 0),o([c()],Pt.prototype,"thumbnail",void 0),o([c({readOnly:!0})],Pt.prototype,"thumbnailUrl",null),o([c()],Pt.prototype,"title",void 0),o([c({readOnly:!0})],Pt.prototype,"url",null),Pt=o([b("esri.portal.PortalGroup")],Pt);const a0=Pt;var S9=Object.freeze(Object.defineProperty({__proto__:null,default:a0},Symbol.toStringTag,{value:"Module"})),l0;let pt=l0=class extends D{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,s=e&&e.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),r!=null&&(typeof r=="string"?i.query.text=r:typeof r=="object"&&(i.query.text=JSON.stringify(r))));let n=this.userContentUrl;return s&&(n+="/"+(typeof s=="string"?s:s.id)),this.portal._request(n+"/addItem",i).then(a=>(t.id=a.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(s=>s.id);if(r.length){const s={method:"post",query:{items:r.join(",")}};return this.portal._request(t,s).then(()=>{e.forEach(i=>{i.id=null,i.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let r;return r=t&&t.folders?t.folders.map(s=>{const i=_9.fromJSON(s);return i.portal=this.portal,i}):[],r})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const s=a0.fromJSON(r);return s.portal=this.portal,s}):[],t})}fetchItems(e){e||(e={});let t,r=this.userContentUrl;return e.folder&&(r+="/"+e.folder.id),Promise.resolve().then(function(){return zT}).then(({default:s})=>{t=s;const i={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(r,{query:i})}).then(s=>{let i;return s&&s.items?(i=s.items.map(n=>{const a=t.fromJSON(n);return a.portal=this.portal,a}),Promise.all(i.map(n=>n.load())).catch(n=>n).then(()=>({items:i,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new a0({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new F("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new F("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new l0;return t.sourceJSON=e,t.read(e),t}};o([c()],pt.prototype,"access",void 0),o([c({type:Date})],pt.prototype,"created",void 0),o([c()],pt.prototype,"culture",void 0),o([c()],pt.prototype,"description",void 0),o([c()],pt.prototype,"email",void 0),o([c()],pt.prototype,"favGroupId",void 0),o([c()],pt.prototype,"fullName",void 0),o([c({type:Date})],pt.prototype,"modified",void 0),o([c()],pt.prototype,"orgId",void 0),o([c()],pt.prototype,"portal",void 0),o([c()],pt.prototype,"preferredView",void 0),o([c()],pt.prototype,"privileges",void 0),o([c()],pt.prototype,"region",void 0),o([c()],pt.prototype,"role",void 0),o([c()],pt.prototype,"roleId",void 0),o([c()],pt.prototype,"sourceJSON",void 0),o([c()],pt.prototype,"thumbnail",void 0),o([c({readOnly:!0})],pt.prototype,"thumbnailUrl",null),o([c()],pt.prototype,"units",void 0),o([c({readOnly:!0})],pt.prototype,"userContentUrl",null),o([c({readOnly:!0})],pt.prototype,"url",null),o([c()],pt.prototype,"username",void 0),o([c()],pt.prototype,"userType",void 0),pt=l0=o([b("esri.portal.PortalUser")],pt);const Xb=pt;var x9=Object.freeze(Object.defineProperty({__proto__:null,default:Xb},Symbol.toStringTag,{value:"Module"})),Pr;let im;const TS={PortalGroup:()=>Promise.resolve().then(function(){return S9}),PortalItem:()=>Promise.resolve().then(function(){return zT}),PortalUser:()=>Promise.resolve().then(function(){return x9})};let K=Pr=class extends Kf(zp){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Qe.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Qe.request.trustedServers.indexOf(t)===-1&&Qe.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return Kc(te.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=Xb.fromJSON(e),t.portal=this),t}load(e){const t=Re(()=>import("./Basemap.c9cd8ed2.js"),["Basemap.c9cd8ed2.js","loadAll.ff6f429d.js","writeUtils.8e3ad524.js"],import.meta.url).then(({default:r})=>{Vs(e),im=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(r=>{if(wt){const s=wt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Pr.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=s.on("credential-create",()=>{s.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){Ba(te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new(await Re(()=>import("./ClosestFacilityTask.4269b5a9.js"),["ClosestFacilityTask.4269b5a9.js","NAMessage.eb0b6d6e.js","GPMessage.84d76362.js","normalizeUtils.371a33a9.js","DirectionsFeatureSet.7d6a637f.js"],import.meta.url)).default(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Re(()=>import("./ElevationLayer.af1f63f0.js"),["ElevationLayer.af1f63f0.js","ArcGISCachedService.127f5ee0.js","TilemapCache.4c2d7aff.js","TileInfo.99c42331.js","aaBoundingRect.8ea971a8.js","byteSizeEstimations.651aa0cf.js"],import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async createGeometryService(){Ba(te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new(await Re(()=>import("./GeometryService.0089020e.js"),[],import.meta.url)).default({url:e})}async createPrintTask(){Ba(te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new(await Re(()=>import("./PrintTask.f17cac48.js"),["PrintTask.f17cac48.js","normalizeUtils.371a33a9.js","GPMessage.84d76362.js","floorFilterUtils.f4814e00.js"],import.meta.url)).default(e)}async createRouteTask(){Ba(te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new(await Re(()=>import("./RouteTask.2aaa5701.js"),["RouteTask.2aaa5701.js","route.6c3869a0.js","NAMessage.eb0b6d6e.js","GPMessage.84d76362.js","normalizeUtils.371a33a9.js","DirectionsFeatureSet.7d6a637f.js"],import.meta.url)).default(e)}async createServiceAreaTask(){Ba(te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new(await Re(()=>import("./ServiceAreaTask.954497cf.js"),["ServiceAreaTask.954497cf.js","NAMessage.eb0b6d6e.js","GPMessage.84d76362.js","normalizeUtils.371a33a9.js"],import.meta.url)).default(e)}fetchBasemaps(e,t){const r=new Ji;return r.query=e||(Qe.apiKey&&Zb(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(s=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',s.total){const i=s.results[0];return r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc",i.queryItems(r,t)}return null}).then(s=>{let i;return i=s&&s.total?s.results.filter(n=>n.type==="Web Map").map(n=>new im({portalItem:n})):[],i})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Xn(e)?Promise.reject(Xt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Ji;if(r.num=100,r.sortField="title",t&&t.length){const s=[];for(const i of t)s.push(`(title:"${i.title}" AND owner:${i.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then(i=>i.results)}return Xn(e)?Promise.reject(Xt()):Promise.resolve([])}fetchRegions(e){var t;const r=((t=this.user)==null?void 0:t.culture)||this.culture||Ds();return this._request(this.restUrl+"/portals/regions",ve(A({},e),{query:{culture:r}}))}fetchSettings(e){var t;const r=((t=this.user)==null?void 0:t.culture)||this.culture||Ds();return this._request(this.restUrl+"/portals/self/settings",ve(A({},e),{query:{culture:r}}))}static getDefault(){return Pr._default&&!Pr._default.destroyed||(Pr._default=new Pr),Pr._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new F("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Pr({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new F("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new F("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const s=this.restUrl+"/portals/self",i=A({authMode:e,query:{culture:Ds().toLowerCase()}},r);return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this._request(s,i)}_queryPortal(e,t,r,s){const i=rt(Ji,t),n=a=>this._request(this.restUrl+e,A(A({},i.toRequestOptions(this)),s)).then(u=>{const p=i.clone();return p.start=u.nextStart,new w9({nextQueryParams:p,queryParams:i,total:u.total,results:Pr._resultsToTypedArray(a,{portal:this},u,s)})}).then(u=>Promise.all(u.results.map(p=>typeof p.when=="function"?p.when():u)).then(()=>u,p=>(eu(p),u)));return r&&TS[r]?TS[r]().then(({default:a})=>(Vs(s),n(a))):n()}_signIn(){if(this.authMode===Pr.AUTH_MODE_ANONYMOUS)return Promise.reject(new F("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return wt?wt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then(s=>{const i=Pr._resultsToTypedArray(r,{portal:this},s);return Promise.all(i.map(n=>typeof n.when=="function"?n.when():s)).then(()=>i,()=>i)})}_readBasemap(e){if(e){const t=im.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r=A({f:"json"},t.query),{authMode:s=this.authMode===Pr.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:i=null,cacheBust:n=!1,method:a="auto",responseType:u="json",signal:p}=t,d={authMode:s,body:i,cacheBust:n,method:a,query:r,responseType:u,timeout:0,signal:p};return mt(this._normalizeSSL(e),d).then(h=>h.data)}static _resultsToTypedArray(e,t,r,s){let i;if(r){const n=R(s)?s.signal:null;i=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(i=i.map(a=>{const u=Object.assign(e?e.fromJSON(a):a,t);return typeof u.load=="function"&&u.load(n),u}))}else i=[];return i}};K.AUTH_MODE_ANONYMOUS="anonymous",K.AUTH_MODE_AUTO="auto",K.AUTH_MODE_IMMEDIATE="immediate",o([c()],K.prototype,"access",void 0),o([c()],K.prototype,"allSSL",void 0),o([c()],K.prototype,"authMode",void 0),o([c()],K.prototype,"authorizedCrossOriginDomains",void 0),o([Y("authorizedCrossOriginDomains")],K.prototype,"readAuthorizedCrossOriginDomains",null),o([c()],K.prototype,"basemapGalleryGroupQuery",void 0),o([c()],K.prototype,"bingKey",void 0),o([c()],K.prototype,"canListApps",void 0),o([c()],K.prototype,"canListData",void 0),o([c()],K.prototype,"canListPreProvisionedItems",void 0),o([c()],K.prototype,"canProvisionDirectPurchase",void 0),o([c()],K.prototype,"canSearchPublic",void 0),o([c()],K.prototype,"canShareBingPublic",void 0),o([c()],K.prototype,"canSharePublic",void 0),o([c()],K.prototype,"canSignInArcGIS",void 0),o([c()],K.prototype,"canSignInIDP",void 0),o([c()],K.prototype,"colorSetsGroupQuery",void 0),o([c()],K.prototype,"commentsEnabled",void 0),o([c({type:Date})],K.prototype,"created",void 0),o([c()],K.prototype,"credential",void 0),o([c()],K.prototype,"culture",void 0),o([c()],K.prototype,"currentVersion",void 0),o([c()],K.prototype,"customBaseUrl",void 0),o([c()],K.prototype,"defaultBasemap",void 0),o([Y("defaultBasemap")],K.prototype,"readDefaultBasemap",null),o([c()],K.prototype,"defaultDevBasemap",void 0),o([Y("defaultDevBasemap")],K.prototype,"readDefaultDevBasemap",null),o([c({type:Mt})],K.prototype,"defaultExtent",void 0),o([c()],K.prototype,"defaultVectorBasemap",void 0),o([Y("defaultVectorBasemap")],K.prototype,"readDefaultVectorBasemap",null),o([c()],K.prototype,"description",void 0),o([c()],K.prototype,"devBasemapGalleryGroupQuery",void 0),o([c()],K.prototype,"eueiEnabled",void 0),o([c({readOnly:!0})],K.prototype,"extraQuery",null),o([c()],K.prototype,"featuredGroups",void 0),o([c()],K.prototype,"featuredItemsGroupQuery",void 0),o([c()],K.prototype,"galleryTemplatesGroupQuery",void 0),o([c()],K.prototype,"livingAtlasGroupQuery",void 0),o([c()],K.prototype,"hasCategorySchema",void 0),o([c()],K.prototype,"helpBase",void 0),o([c()],K.prototype,"helperServices",void 0),o([c()],K.prototype,"helpMap",void 0),o([c()],K.prototype,"homePageFeaturedContent",void 0),o([c()],K.prototype,"homePageFeaturedContentCount",void 0),o([c()],K.prototype,"httpPort",void 0),o([c()],K.prototype,"httpsPort",void 0),o([c()],K.prototype,"id",void 0),o([c()],K.prototype,"ipCntryCode",void 0),o([c({readOnly:!0})],K.prototype,"isOrganization",null),o([c()],K.prototype,"isPortal",void 0),o([c()],K.prototype,"isReadOnly",void 0),o([c()],K.prototype,"layerTemplatesGroupQuery",void 0),o([c()],K.prototype,"maxTokenExpirationMinutes",void 0),o([c({type:Date})],K.prototype,"modified",void 0),o([c()],K.prototype,"name",void 0),o([c()],K.prototype,"portalHostname",void 0),o([c()],K.prototype,"portalMode",void 0),o([c()],K.prototype,"portalProperties",void 0),o([c()],K.prototype,"region",void 0),o([c({readOnly:!0})],K.prototype,"restUrl",null),o([c()],K.prototype,"rotatorPanels",void 0),o([c()],K.prototype,"showHomePageDescription",void 0),o([c()],K.prototype,"sourceJSON",void 0),o([c()],K.prototype,"staticImagesUrl",void 0),o([c({readOnly:!0,json:{read:!1}})],K.prototype,"stylesGroupQuery",null),o([c({json:{name:"2DStylesGroupQuery"}})],K.prototype,"stylesGroupQuery2d",void 0),o([c({json:{name:"stylesGroupQuery"}})],K.prototype,"stylesGroupQuery3d",void 0),o([c()],K.prototype,"supportsHostedServices",void 0),o([c()],K.prototype,"symbolSetsGroupQuery",void 0),o([c()],K.prototype,"templatesGroupQuery",void 0),o([c()],K.prototype,"thumbnail",void 0),o([c({readOnly:!0})],K.prototype,"thumbnailUrl",null),o([c()],K.prototype,"units",void 0),o([c()],K.prototype,"url",void 0),o([c()],K.prototype,"urlKey",void 0),o([Y("urlKey")],K.prototype,"readUrlKey",null),o([c()],K.prototype,"user",void 0),o([Y("user")],K.prototype,"readUser",null),o([c()],K.prototype,"useStandardizedQuery",void 0),o([c()],K.prototype,"useVectorBasemaps",void 0),o([c()],K.prototype,"vectorBasemapGalleryGroupQuery",void 0),K=Pr=o([b("esri.portal.Portal")],K);const _r=K;te.getLogger("esri.core.Clonable");const ln=e=>{let t=class extends e{clone(){const r=f3(ar(this),"unable to clone instance of non-accessor class"),s=r.metadatas,i=r.store,n={},a=new Map;for(const d in s){const h=s[d],f=i==null?void 0:i.originOf(d),y=h.clonable;if(h.readOnly||y===!1||f!==Fe.USER&&f!==Fe.DEFAULTS&&f!==Fe.WEB_MAP&&f!==Fe.WEB_SCENE)continue;const m=this[d];let v=null;v=typeof y=="function"?y(m):y==="reference"?m:Bm(m),m!=null&&v==null||(f===Fe.DEFAULTS?a.set(d,v):n[d]=v)}const u=new(Object.getPrototypeOf(this)).constructor(n);if(a.size){var p;const d=(p=ar(u))==null?void 0:p.store;if(d)for(const[h,f]of a)d.set(h,f,Fe.DEFAULTS)}return u}};return t=o([b("esri.core.Clonable")],t),t};let jS=class extends ln(ht){};jS=o([b("esri.core.Clonable")],jS);let Ao=class extends ln(D){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return R(e)&&e.placement===this.placement&&e.style===this.style&&(ae(this.color)&&ae(e.color)||R(this.color)&&R(e.color)&&this.color.toJSON()===e.color.toJSON())}};o([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ao.prototype,"type",void 0),o([c({type:Ck,json:{default:"begin-end",write:!0}})],Ao.prototype,"placement",void 0),o([c({type:XM,json:{default:"arrow",write:!0}})],Ao.prototype,"style",void 0),o([c({type:De,json:{type:[At],default:null,write:!0}})],Ao.prototype,"color",void 0),Ao=o([b("esri.symbols.LineStyleMarker3D")],Ao);const u0=Ao;var lh;let ei=lh=class extends bi{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=rn(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:R(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:R(this.pattern)?this.pattern.clone():null,marker:R(this.marker)?this.marker.clone():null};return new lh(e)}static fromSimpleLineSymbol(e){var t,r,s;const i={enabled:!0,size:(t=e.width)!=null?t:rn(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new Vb({style:e.style}):null,material:new us({color:(e.color||Ac).clone()}),marker:e.marker?new u0({placement:e.marker.placement,style:e.marker.style,color:(r=(s=e.marker.color)==null?void 0:s.clone())!=null?r:null}):null};return new lh(i)}};o([c({type:us,json:{write:!0}})],ei.prototype,"material",void 0),o([de({Line:"line"},{readOnly:!0})],ei.prototype,"type",void 0),o([c({type:oO,json:{write:!0,default:"miter"}})],ei.prototype,"join",void 0),o([c({type:Ub,json:{write:!0,default:"butt"}})],ei.prototype,"cap",void 0),o([c(mi)],ei.prototype,"size",void 0),o([c(iO)],ei.prototype,"pattern",void 0),o([c({types:{key:"type",base:u0,typeMap:{style:u0}},json:{write:!0}})],ei.prototype,"marker",void 0),ei=lh=o([b("esri.symbols.LineSymbol3DLayer")],ei);const au=ei;var c0;const $9=Gt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ec=c0=class extends D{clone(){return new c0({href:this.href,primitive:this.primitive})}};o([c({type:String,json:{read:oy,write:ro}})],ec.prototype,"href",void 0),o([de($9)],ec.prototype,"primitive",void 0),ec=c0=o([b("esri.symbols.support.ObjectSymbol3DLayerResource")],ec);var p0;let Zo=p0=class extends ht{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new p0({x:this.x,y:this.y,z:this.z})}};o([c({type:Number})],Zo.prototype,"x",void 0),o([c({type:Number})],Zo.prototype,"y",void 0),o([c({type:Number})],Zo.prototype,"z",void 0),Zo=p0=o([b("esri.symbols.support.Symbol3DAnchorPosition3D")],Zo);var d0;let tr=d0=class extends bi{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new d0({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:R(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};o([c({type:us,json:{write:!0}})],tr.prototype,"material",void 0),o([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],tr.prototype,"castShadows",void 0),o([c({type:ec,json:{write:!0}})],tr.prototype,"resource",void 0),o([de({Object:"object"},{readOnly:!0})],tr.prototype,"type",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"width",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"height",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"depth",void 0),o([de({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),c({json:{default:"origin"}})],tr.prototype,"anchor",void 0),o([c({type:Zo,json:{type:[Number],read:{reader:e=>new Zo({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],tr.prototype,"anchorPosition",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"heading",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"tilt",void 0),o([c({type:Number,json:{write:!0}})],tr.prototype,"roll",void 0),o([c({readOnly:!0})],tr.prototype,"isPrimitive",null),tr=d0=o([b("esri.symbols.ObjectSymbol3DLayer")],tr);const ly=tr;var h0;let yr=h0=class extends bi{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new h0({enabled:this.enabled,material:R(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};o([c({type:us,json:{write:!0}})],yr.prototype,"material",void 0),o([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yr.prototype,"castShadows",void 0),o([de({Path:"path"},{readOnly:!0})],yr.prototype,"type",void 0),o([c({type:["circle","quad"],json:{write:!0,default:"circle"}})],yr.prototype,"profile",void 0),o([c({type:oO,json:{write:!0,default:"miter"}})],yr.prototype,"join",void 0),o([c({type:iP,json:{write:!0,default:"butt"}})],yr.prototype,"cap",void 0),o([c({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],yr.prototype,"width",void 0),o([Y("width",["width","size","height"])],yr.prototype,"readWidth",null),o([c({type:Number,json:{write:!0}})],yr.prototype,"height",void 0),o([Y("height",["height","size","width"])],yr.prototype,"readHeight",null),o([c({type:["center","bottom","top"],json:{write:!0,default:"center"}})],yr.prototype,"anchor",void 0),o([c({type:["heading","all"],json:{write:!0,default:"all"}})],yr.prototype,"profileRotation",void 0),yr=h0=o([b("esri.symbols.PathSymbol3DLayer")],yr);const ew=yr;var f0;let ml=f0=class extends D{constructor(){super(...arguments),this.color=new De([0,0,0,1]),this.size=0}clone(){const e={color:j(this.color),size:this.size};return new f0(e)}};o([c(no)],ml.prototype,"color",void 0),o([c(mi)],ml.prototype,"size",void 0),ml=f0=o([b("esri.symbols.support.Symbol3DHalo")],ml);let Cc=class extends ln(D){constructor(e){super(e),this.color=null}};o([c(no)],Cc.prototype,"color",void 0),Cc=o([b("esri.symbols.support.Symbol3DTextBackground")],Cc);var uh;let $r=uh=class extends bi{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){R(e)&&R(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,s){const i=ve(A({},s),{textSymbol3D:!0});t.font=e.write({},i),delete t.font.size}get size(){return R(this._userSize)?this._userSize:R(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,R(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new uh({enabled:this.enabled,font:this.font&&j(this.font),halo:this.halo&&j(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:R(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:j(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new uh({font:R(e.font)?e.font.clone():new sy,halo:I9(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new us({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Cc({color:e.backgroundColor.clone()}):null})}};function I9(e,t){return e&&t>0?new ml({color:j(e),size:t}):null}o([c({type:sy,json:{write:!0}})],$r.prototype,"font",null),o([re("font")],$r.prototype,"writeFont",null),o([c({type:ml,json:{write:!0}})],$r.prototype,"halo",void 0),o([c(ve(A({},dP),{json:{default:"center",write:!0}}))],$r.prototype,"horizontalAlignment",void 0),o([c(ve(A({},aO),{json:{default:1,write:!0}}))],$r.prototype,"lineHeight",void 0),o([c({type:us,json:{write:!0}})],$r.prototype,"material",void 0),o([c({type:Cc,json:{write:!0}})],$r.prototype,"background",void 0),o([c(mi)],$r.prototype,"size",null),o([c({type:String,json:{write:!0}})],$r.prototype,"text",void 0),o([de({Text:"text"},{readOnly:!0})],$r.prototype,"type",void 0),o([c(ve(A({},lO),{json:{default:"baseline",write:!0}}))],$r.prototype,"verticalAlignment",void 0),$r=uh=o([b("esri.symbols.TextSymbol3DLayer")],$r);const lu=$r;var y0;let Sn=y0=class extends bi{constructor(e){super(e),this.color=m0.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new y0({color:j(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};o([c({type:De,nonNullable:!0,json:{type:[At],write:(e,t,r)=>t[r]=e.toArray(De.AlphaMode.UNLESS_OPAQUE),default:()=>m0.clone(),defaultEquals:e=>e.toCss(!0)===m0.toCss(!0)}})],Sn.prototype,"color",void 0),o([de({Water:"water"},{readOnly:!0})],Sn.prototype,"type",void 0),o([c({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Sn.prototype,"waterbodySize",void 0),o([c({type:Number,json:{write:!0,default:null}})],Sn.prototype,"waveDirection",void 0),o([c({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Sn.prototype,"waveStrength",void 0),Sn=y0=o([b("esri.symbols.WaterSymbol3DLayer")],Sn);const m0=new De([0,119,190]),tw=Sn;var g0;let Ro=g0=class extends ht{constructor(){super(...arguments),this.portal=null}clone(){return new g0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};o([c({type:String})],Ro.prototype,"name",void 0),o([c({type:String})],Ro.prototype,"styleUrl",void 0),o([c({type:String})],Ro.prototype,"styleName",void 0),o([c({type:_r})],Ro.prototype,"portal",void 0),Ro=g0=o([b("esri.symbols.support.StyleOrigin")],Ro);const hf=Ro;var v0;let jl=v0=class extends ht{clone(){return new v0({url:this.url})}};o([c({type:String})],jl.prototype,"url",void 0),jl=v0=o([b("esri.symbols.support.Thumbnail")],jl);const jO={icon:Gn,object:ly,line:au,path:ew,fill:Lp,extrude:Db,text:lu,water:tw},M9=ut.ofType({base:bi,key:"type",typeMap:jO,errorContext:"symbol-layer"}),O9=te.getLogger("esri.symbols.Symbol3D");let ti=class extends Sr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||ut;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.initialized&&O9.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){_O(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const s=Ca(e.styleUrl,r);return new hf({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new hf({portal:r&&r.portal||_r.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Rr("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,s){if(e.styleUrl&&e.name){let i=ou(e.styleUrl,s);jr(i)&&(i=cs(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!hO(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new Rr("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof bi||e&&jO[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};o([c({json:{read:!1,write:!1}})],ti.prototype,"color",null),o([c({type:M9,nonNullable:!0,json:{write:!0}}),_t(SO)],ti.prototype,"symbolLayers",null),o([c({type:hf})],ti.prototype,"styleOrigin",void 0),o([Y("styleOrigin")],ti.prototype,"readStyleOrigin",null),o([re("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],ti.prototype,"writeStyleOrigin",null),o([c({type:jl,json:{read:!1}})],ti.prototype,"thumbnail",void 0),o([c({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],ti.prototype,"type",void 0),ti=o([b("esri.symbols.Symbol3D")],ti);const uu=ti;let tc=class extends D{constructor(e){super(e),this.visible=!0}clone(){}};o([c({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],tc.prototype,"type",void 0),o([c({readOnly:!0})],tc.prototype,"visible",void 0),tc=o([b("esri.symbols.callouts.Callout3D")],tc);const AO=tc;var b0;let Fc=b0=class extends D{constructor(){super(...arguments),this.color=new De("white")}clone(){return new b0({color:j(this.color)})}};o([c(no)],Fc.prototype,"color",void 0),Fc=b0=o([b("esri.symbols.callouts.LineCallout3DBorder")],Fc);const RO=Fc;Object.freeze({__proto__:null,get LineCallout3DBorder(){return Fc},default:RO});var w0;let xn=w0=class extends AO{constructor(e){super(e),this.type="line",this.color=new De([0,0,0,1]),this.size=rn(1),this.border=null}get visible(){return this.size>0&&R(this.color)&&this.color.a>0}clone(){return new w0({color:j(this.color),size:this.size,border:j(this.border)})}};o([de({line:"line"},{readOnly:!0})],xn.prototype,"type",void 0),o([c(no)],xn.prototype,"color",void 0),o([c(mi)],xn.prototype,"size",void 0),o([c({type:RO,json:{write:!0}})],xn.prototype,"border",void 0),o([c({readOnly:!0})],xn.prototype,"visible",null),xn=w0=o([b("esri.symbols.callouts.LineCallout3D")],xn);const E9=xn;function rw(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function CO(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!rw(e)}const FO={types:{key:"type",base:AO,typeMap:{line:E9}},json:{write:!0}};var _0;let Yo=_0=class extends D{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new _0({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};o([c(mi)],Yo.prototype,"screenLength",void 0),o([c({type:Number,json:{write:!0,default:0}})],Yo.prototype,"minWorldLength",void 0),o([c({type:Number,json:{write:!0}})],Yo.prototype,"maxWorldLength",void 0),Yo=_0=o([b("esri.symbols.support.Symbol3DVerticalOffset")],Yo);var ch;const kO=ut.ofType({base:null,key:"type",typeMap:{text:lu}});let $n=ch=class extends uu{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new kO,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return CO(this)}hasVisibleVerticalOffset(){return rw(this)}clone(){return new ch({styleOrigin:j(this.styleOrigin),symbolLayers:j(this.symbolLayers),thumbnail:j(this.thumbnail),callout:j(this.callout),verticalOffset:j(this.verticalOffset)})}static fromTextSymbol(e){return new ch({symbolLayers:[lu.fromTextSymbol(e)]})}};o([c({type:Yo,json:{write:!0}})],$n.prototype,"verticalOffset",void 0),o([c(FO)],$n.prototype,"callout",void 0),o([c({json:{read:!1,write:!1}})],$n.prototype,"styleOrigin",void 0),o([c({type:kO})],$n.prototype,"symbolLayers",void 0),o([de({LabelSymbol3D:"label-3d"},{readOnly:!0})],$n.prototype,"type",void 0),$n=ch=o([b("esri.symbols.LabelSymbol3D")],$n);const uy=$n;var ph;const PO=ut.ofType({base:null,key:"type",typeMap:{line:au,path:ew}}),T9=ut.ofType({base:null,key:"type",typeMap:{line:au,path:ew}});let rc=ph=class extends uu{constructor(e){super(e),this.symbolLayers=new PO,this.type="line-3d"}clone(){return new ph({styleOrigin:j(this.styleOrigin),symbolLayers:j(this.symbolLayers),thumbnail:j(this.thumbnail)})}static fromSimpleLineSymbol(e){return new ph({symbolLayers:[au.fromSimpleLineSymbol(e)]})}};o([c({type:PO,json:{type:T9}})],rc.prototype,"symbolLayers",void 0),o([de({LineSymbol3D:"line-3d"},{readOnly:!0})],rc.prototype,"type",void 0),rc=ph=o([b("esri.symbols.LineSymbol3D")],rc);const cy=rc;let In=class extends Sr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};o([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],In.prototype,"angle",void 0),o([c({type:["simple-marker","picture-marker"],readOnly:!0})],In.prototype,"type",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],In.prototype,"xoffset",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],In.prototype,"yoffset",void 0),o([c({type:Number,cast:e=>e==="auto"?e:Be(e),json:{write:!0}})],In.prototype,"size",void 0),In=o([b("esri.symbols.MarkerSymbol")],In);const NO=In;var S0;const LO=ut.ofType({base:null,key:"type",typeMap:{fill:Lp}});let sc=S0=class extends uu{constructor(e){super(e),this.symbolLayers=new LO,this.type="mesh-3d"}clone(){return new S0({styleOrigin:j(this.styleOrigin),symbolLayers:j(this.symbolLayers),thumbnail:j(this.thumbnail)})}};o([c({type:LO})],sc.prototype,"symbolLayers",void 0),o([de({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],sc.prototype,"type",void 0),sc=S0=o([b("esri.symbols.MeshSymbol3D")],sc);const sw=sc;function j9(e,t,r){return t.imageData?yO({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):DO(t.url,r)}function DO(e,t){return R9(t)&&!jr(e)&&t.layer.parsedUrl?$a(t.layer.parsedUrl.path,"images",e):Ca(e,t)}function A9(e,t,r,s){if(oo(e)){const i=Hb(e);t.contentType=i.mediaType,t.imageData=i.data,r&&r.imageData===t.imageData&&r.url&&ro(r.url,t,"url",s)}else ro(e,t,"url",s)}const VO={json:{read:{source:["imageData","url"],reader:j9},write:{writer(e,t,r,s){A9(e,t,this.source,s)}}}},zO={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=DO(t.url,r)),s}}}};function R9(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var x0;let rs=x0=class extends eO{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),r!=null&&(i.width=Be(r)),s!=null&&(i.height=Be(s)),i}clone(){const e=new x0({color:j(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",j(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};o([de({esriPFS:"picture-fill"},{readOnly:!0})],rs.prototype,"type",void 0),o([c(VO)],rs.prototype,"url",void 0),o([c({type:Number,json:{write:!0}})],rs.prototype,"xscale",void 0),o([c({type:Number,json:{write:!0}})],rs.prototype,"yscale",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],rs.prototype,"width",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],rs.prototype,"height",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],rs.prototype,"xoffset",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],rs.prototype,"yoffset",void 0),o([c(zO)],rs.prototype,"source",void 0),rs=x0=o([b("esri.symbols.PictureFillSymbol")],rs);const UO=rs;var $0;let vs=$0=class extends NO{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=Be(t)),r!=null&&(s.height=Be(r)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new $0({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",j(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};o([c({json:{write:!1}})],vs.prototype,"color",void 0),o([de({esriPMS:"picture-marker"},{readOnly:!0})],vs.prototype,"type",void 0),o([c(VO)],vs.prototype,"url",void 0),o([c(zO)],vs.prototype,"source",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],vs.prototype,"height",void 0),o([Y("height",["height","size"])],vs.prototype,"readHeight",null),o([c({type:Number,cast:Be,json:{write:!0}})],vs.prototype,"width",void 0),o([c({json:{write:!1}})],vs.prototype,"size",void 0),vs=$0=o([b("esri.symbols.PictureMarkerSymbol")],vs);const cu=vs;var Mn;const qO=ut.ofType({base:null,key:"type",typeMap:{icon:Gn,object:ly,text:lu}});let Co=Mn=class extends uu{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new qO,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return CO(this)}hasVisibleVerticalOffset(){return rw(this)}clone(){return new Mn({verticalOffset:j(this.verticalOffset),callout:j(this.callout),styleOrigin:j(this.styleOrigin),symbolLayers:j(this.symbolLayers),thumbnail:j(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Mn({symbolLayers:[Gn.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Mn({symbolLayers:[Gn.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,r;return((t=e.data)==null||(r=t.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Mn({symbolLayers:[Gn.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Mn({symbolLayers:[Gn.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Mn({symbolLayers:[lu.fromTextSymbol(e)]})}};o([c({type:Yo,json:{write:!0}})],Co.prototype,"verticalOffset",void 0),o([c(FO)],Co.prototype,"callout",void 0),o([c({type:qO,json:{origins:{"web-scene":{write:!0}}}})],Co.prototype,"symbolLayers",void 0),o([de({PointSymbol3D:"point-3d"},{readOnly:!0})],Co.prototype,"type",void 0),Co=Mn=o([b("esri.symbols.PointSymbol3D")],Co);const sa=Co;var ic;const BO=ut.ofType({base:null,key:"type",typeMap:{extrude:Db,fill:Lp,icon:Gn,line:au,object:ly,text:lu,water:tw}}),C9=ut.ofType({base:null,key:"type",typeMap:{extrude:Db,fill:Lp,icon:Gn,line:au,object:ly,water:tw}});let Qa=ic=class extends uu{constructor(e){super(e),this.symbolLayers=new BO,this.type="polygon-3d"}writeSymbolLayers(e,t,r,s){const i=e.filter(n=>n.type!=="text");if(s&&s.messages&&i.length<e.length){const n=e.find(a=>a.type==="text");s.messages.push(new F("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:n}))}t[r]=i.map(n=>n.write({},s)).toArray()}clone(){return new ic({styleOrigin:j(this.styleOrigin),symbolLayers:j(this.symbolLayers),thumbnail:j(this.thumbnail)})}static fromJSON(e){const t=new ic;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const r=t.symbolLayers.getItemAt(0),s=t.symbolLayers.getItemAt(1);!s.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:s.size,color:R(s.material)?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new ic({symbolLayers:[Lp.fromSimpleFillSymbol(e)]})}};o([c({type:BO,json:{type:C9}})],Qa.prototype,"symbolLayers",void 0),o([re("web-scene","symbolLayers")],Qa.prototype,"writeSymbolLayers",null),o([de({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Qa.prototype,"type",void 0),Qa=ic=o([b("esri.symbols.PolygonSymbol3D")],Qa);const Up=Qa;var I0;const nm=new xe({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Fo=I0=class extends eO{constructor(...e){super(...e),this.color=new De([0,0,0,.25]),this.outline=new Wr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),r&&(s.color=r),s}clone(){return new I0({color:j(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};o([c()],Fo.prototype,"color",void 0),o([c()],Fo.prototype,"outline",void 0),o([de({esriSFS:"simple-fill"},{readOnly:!0})],Fo.prototype,"type",void 0),o([c({type:nm.apiValues,json:{read:nm.read,write:nm.write}})],Fo.prototype,"style",void 0),Fo=I0=o([b("esri.symbols.SimpleFillSymbol")],Fo);const ao=Fo;var M0;const om=new xe({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ri=M0=class extends NO{constructor(...e){super(...e),this.color=new De([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Wr}normalizeCtorArgs(e,t,r,s){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=Be(t)),r&&(i.outline=r),s&&(i.color=s),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new M0({angle:this.angle,color:j(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};o([c()],ri.prototype,"color",void 0),o([re("color")],ri.prototype,"writeColor",null),o([de({esriSMS:"simple-marker"},{readOnly:!0})],ri.prototype,"type",void 0),o([c()],ri.prototype,"size",void 0),o([c({type:om.apiValues,json:{read:om.read,write:om.write}})],ri.prototype,"style",void 0),o([c({type:String,json:{write:!0}})],ri.prototype,"path",null),o([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wr}},json:{default:null,write:!0}})],ri.prototype,"outline",void 0),ri=M0=o([b("esri.symbols.SimpleMarkerSymbol")],ri);const Fa=ri;var O0;let ft=O0=class extends Sr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new sy,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),r&&(s.color=r),s}writeLineWidth(e,t,r,s){s&&typeof s!="string"?s.origin:t[r]=e}castLineWidth(e){return Be(e)}writeLineHeight(e,t,r,s){s&&typeof s!="string"?s.origin:t[r]=e}clone(){return new O0({angle:this.angle,backgroundColor:j(this.backgroundColor),borderLineColor:j(this.borderLineColor),borderLineSize:this.borderLineSize,color:j(this.color),font:this.font&&this.font.clone(),haloColor:j(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};o([c({type:De,json:{write:!0}})],ft.prototype,"backgroundColor",void 0),o([c({type:De,json:{write:!0}})],ft.prototype,"borderLineColor",void 0),o([c({type:Number,json:{write:!0}})],ft.prototype,"borderLineSize",void 0),o([c({type:sy,json:{write:!0}})],ft.prototype,"font",void 0),o([c(ve(A({},pP),{json:{write:!0}}))],ft.prototype,"horizontalAlignment",void 0),o([c({type:Boolean,json:{write:!0}})],ft.prototype,"kerning",void 0),o([c({type:De,json:{write:!0}})],ft.prototype,"haloColor",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],ft.prototype,"haloSize",void 0),o([c({type:Boolean,json:{write:!0}})],ft.prototype,"rightToLeft",void 0),o([c({type:Boolean,json:{write:!0}})],ft.prototype,"rotated",void 0),o([c({type:String,json:{write:!0}})],ft.prototype,"text",void 0),o([de({esriTS:"text"},{readOnly:!0})],ft.prototype,"type",void 0),o([c(ve(A({},lO),{json:{write:!0}}))],ft.prototype,"verticalAlignment",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],ft.prototype,"xoffset",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],ft.prototype,"yoffset",void 0),o([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ft.prototype,"angle",void 0),o([c({type:Number,json:{write:!0}})],ft.prototype,"width",void 0),o([c({type:Number})],ft.prototype,"lineWidth",void 0),o([re("lineWidth")],ft.prototype,"writeLineWidth",null),o([_t("lineWidth")],ft.prototype,"castLineWidth",null),o([c(aO)],ft.prototype,"lineHeight",void 0),o([re("lineHeight")],ft.prototype,"writeLineHeight",null),ft=O0=o([b("esri.symbols.TextSymbol")],ft);const lo=ft;var E0;const F9=te.getLogger("esri.symbols.WebStyleSymbol");let si=E0=class extends Sr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new E0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=await k9();Vs(t);const s=r.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return s.catch(i=>{F9.error("#fetchSymbol()","Failed to create symbol from style",i)}),s}};function k9(){return Re(()=>import("./webStyleSymbolUtils.f8214f1f.js"),["webStyleSymbolUtils.f8214f1f.js","devEnvironmentUtils.31af846a.js"],import.meta.url)}o([c({json:{write:!1}})],si.prototype,"color",void 0),o([c({type:String,json:{write:!0}})],si.prototype,"styleName",void 0),o([c({type:_r,json:{write:!1}})],si.prototype,"portal",void 0),o([c({type:String,json:{read:oy,write:ro}})],si.prototype,"styleUrl",void 0),o([c({type:jl,json:{read:!1}})],si.prototype,"thumbnail",void 0),o([c({type:String,json:{write:!0}})],si.prototype,"name",void 0),o([de({styleSymbolReference:"web-style"},{readOnly:!0})],si.prototype,"type",void 0),si=E0=o([b("esri.symbols.WebStyleSymbol")],si);const ka=si;function P9(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function T0(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Qn={base:Sr,key:"type",typeMap:{"simple-fill":ao,"picture-fill":UO,"picture-marker":cu,"simple-line":Wr,"simple-marker":Fa,text:lo,"label-3d":uy,"line-3d":cy,"mesh-3d":sw,"point-3d":sa,"polygon-3d":Up,"web-style":ka,cim:Np},errorContext:"symbol"},N9={base:Sr,key:"type",typeMap:{"picture-marker":cu,"simple-marker":Fa,text:lo,"web-style":ka,cim:Np},errorContext:"symbol"},L9=Ia({types:Qn}),iw={base:Sr,key:"type",typeMap:{"simple-fill":ao,"picture-fill":UO,"picture-marker":cu,"simple-line":Wr,"simple-marker":Fa,text:lo,"line-3d":cy,"mesh-3d":sw,"point-3d":sa,"polygon-3d":Up,"web-style":ka,cim:Np},errorContext:"symbol"},D9={base:Sr,key:"type",typeMap:{text:lo,"label-3d":uy},errorContext:"symbol"},AS={base:Sr,key:"type",typeMap:{"line-3d":cy,"mesh-3d":sw,"point-3d":sa,"polygon-3d":Up,"web-style":ka,cim:Np},errorContext:"symbol"},V9={base:Sr,key:"type",typeMap:{"label-3d":uy},errorContext:"symbol"},GO=yi(Qn);var j0;let nc=j0=class extends D{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new j0({minValue:this.minValue,maxValue:this.maxValue})}};o([c({type:Number,json:{write:!0}})],nc.prototype,"minValue",void 0),o([c({type:Number,json:{write:!0}})],nc.prototype,"maxValue",void 0),nc=j0=o([b("esri.renderer.support.AuthoringInfoClassBreakInfo")],nc);const z9=nc;var A0;let ko=A0=class extends D{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new A0({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:j(this.classBreakInfos)})}};o([c({type:String,json:{write:!0}})],ko.prototype,"field",void 0),o([c({type:String,json:{write:!0}})],ko.prototype,"normalizationField",void 0),o([c({type:String,json:{write:!0}})],ko.prototype,"label",void 0),o([c({type:[z9],json:{write:!0}})],ko.prototype,"classBreakInfos",void 0),ko=A0=o([b("esri.renderers.support.AuthoringInfoFieldInfo")],ko);const RS=ko;var R0;const md=new xe({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),gd=new xe({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),CS={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},FS=["high-to-low","above-and-below","centered-on","extremes"],kS=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],PS=["seconds","minutes","hours","days","months","years"];let Ir=R0=class extends D{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new R0({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};o([c({types:CS,json:{write:!0}})],Ir.prototype,"endTime",void 0),o([_t("endTime")],Ir.prototype,"castEndTime",null),o([c({type:String,json:{write:!0}})],Ir.prototype,"field",void 0),o([c({type:Number,json:{write:!0}})],Ir.prototype,"maxSliderValue",void 0),o([c({type:Number,json:{write:!0}})],Ir.prototype,"minSliderValue",void 0),o([c({types:CS,json:{write:!0}})],Ir.prototype,"startTime",void 0),o([_t("startTime")],Ir.prototype,"castStartTime",null),o([c({type:md.apiValues,value:null,json:{type:md.jsonValues,read:md.read,write:md.write}})],Ir.prototype,"style",null),o([c({type:kS,value:null,json:{type:kS,origins:{"web-scene":{type:FS,write:{writer:(e,t)=>{FS.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],Ir.prototype,"theme",null),o([c({type:gd.apiValues,json:{type:gd.jsonValues,read:gd.read,write:gd.write}})],Ir.prototype,"type",void 0),o([c({type:PS,json:{type:PS,write:!0}})],Ir.prototype,"units",void 0),Ir=R0=o([b("esri.renderers.support.AuthoringInfoVisualVariable")],Ir);const U9=Ir;let dh=class extends D{constructor(e){super(e),this.type=null}};o([c({readOnly:!0,json:{read:!1,write:!0}})],dh.prototype,"type",void 0),dh=o([b("esri.rest.support.ColorRamp")],dh);const nw=dh;var C0;let Po=C0=class extends nw{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new C0({fromColor:j(this.fromColor),toColor:j(this.toColor),algorithm:this.algorithm})}};o([de({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Po.prototype,"algorithm",void 0),o([c({type:De,json:{type:[At],write:!0}})],Po.prototype,"fromColor",void 0),o([c({type:De,json:{type:[At],write:!0}})],Po.prototype,"toColor",void 0),o([c({type:["algorithmic"]})],Po.prototype,"type",void 0),Po=C0=o([b("esri.rest.support.AlgorithmicColorRamp")],Po);const ow=Po;var F0;let oc=F0=class extends nw{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new F0({colorRamps:j(this.colorRamps)})}};o([c({type:[ow],json:{write:!0}})],oc.prototype,"colorRamps",void 0),o([c({type:["multipart"]})],oc.prototype,"type",void 0),oc=F0=o([b("esri.rest.support.MultipartColorRamp")],oc);const aw=oc,JO={key:"type",base:nw,typeMap:{algorithmic:ow,multipart:aw}};function HO(e){return e&&e.type?e.type==="algorithmic"?ow.fromJSON(e):e.type==="multipart"?aw.fromJSON(e):null:null}var k0;const vo=new xe({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),vd=new xe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),NS=new xe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),LS=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],q9=["high-to-low","above-and-below","above","below","90-10"],B9=["flow-line","wave-front"],G9=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Et=k0=class extends D{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return HO(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new k0({classificationMethod:this.classificationMethod,colorRamp:j(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:j(this.field1),field2:j(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};o([c({type:vo.apiValues,value:null,json:{type:vo.jsonValues,read:vo.read,write:vo.write,origins:{"web-document":{default:"manual",type:vo.jsonValues,read:vo.read,write:vo.write}}}})],Et.prototype,"classificationMethod",null),o([c({types:JO,json:{write:!0}})],Et.prototype,"colorRamp",void 0),o([Y("colorRamp")],Et.prototype,"readColorRamp",null),o([c({type:[String],value:null,json:{write:!0}})],Et.prototype,"fields",null),o([c({type:RS,value:null,json:{write:!0}})],Et.prototype,"field1",null),o([c({type:RS,value:null,json:{write:!0}})],Et.prototype,"field2",null),o([c({type:B9,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Et.prototype,"flowTheme",null),o([c({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Et.prototype,"focus",null),o([c({type:Number,value:null,json:{type:At,write:!0}})],Et.prototype,"numClasses",null),o([c({type:LS,json:{type:LS,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Et.prototype,"lengthUnit",void 0),o([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Et.prototype,"maxSliderValue",void 0),o([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Et.prototype,"minSliderValue",void 0),o([c({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Et.prototype,"statistics",null),o([c({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Et.prototype,"standardDeviationInterval",null),o([c({type:vd.apiValues,value:null,json:{type:vd.jsonValues,read:vd.read,write:vd.write,origins:{"web-scene":{type:NS.jsonValues,write:{writer:NS.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Et.prototype,"type",null),o([c({type:[U9],json:{write:!0}})],Et.prototype,"visualVariables",void 0),o([c({type:G9,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Et.prototype,"univariateSymbolStyle",null),o([c({type:q9,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Et.prototype,"univariateTheme",null),Et=k0=o([b("esri.renderers.support.AuthoringInfo")],Et);const WO=Et,am=new xe({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let ac=class extends D{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};o([c({type:WO,json:{write:!0}})],ac.prototype,"authoringInfo",void 0),o([c({type:am.apiValues,readOnly:!0,json:{type:am.jsonValues,read:!1,write:{writer:am.write,ignoreOrigin:!0}}})],ac.prototype,"type",void 0),ac=o([b("esri.renderers.Renderer")],ac);const uo=ac;var P0;let hh=P0=class extends D{constructor(){super(...arguments),this.title=null}clone(){return new P0({title:this.title})}};o([c({type:String,json:{write:!0}})],hh.prototype,"title",void 0),hh=P0=o([b("esri.renderers.support.LegendOptions")],hh);const py=hh;var N0;let fh=N0=class extends py{constructor(){super(...arguments),this.showLegend=null}clone(){return new N0({title:this.title,showLegend:this.showLegend})}};o([c({type:Boolean,json:{write:!0}})],fh.prototype,"showLegend",void 0),fh=N0=o([b("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],fh);const KO=fh,J9=te.getLogger("esri.renderers.visualVariables.VisualVariable"),lm=new xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let bs=class extends D{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(J9.error(".field: field must be a string value"),null):jp(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};o([c()],bs.prototype,"index",void 0),o([c({type:lm.apiValues,readOnly:!0,json:{read:lm.read,write:lm.write}})],bs.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],bs.prototype,"field",void 0),o([_t("field")],bs.prototype,"castField",null),o([c({type:String,json:{write:!0}})],bs.prototype,"valueExpression",void 0),o([c({type:String,json:{write:!0}})],bs.prototype,"valueExpressionTitle",void 0),o([c({readOnly:!0})],bs.prototype,"arcadeRequired",null),o([c({type:KO,json:{write:!0}})],bs.prototype,"legendOptions",void 0),bs=o([b("esri.renderers.visualVariables.VisualVariable")],bs);const qp=bs;var L0;let No=L0=class extends D{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e==null?0:e}clone(){return new L0({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};o([c({type:De,json:{type:[At],write:!0}})],No.prototype,"color",void 0),o([c({type:String,json:{write:!0}})],No.prototype,"label",void 0),o([c({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],No.prototype,"value",void 0),o([re("value")],No.prototype,"writeValue",null),No=L0=o([b("esri.renderers.visualVariables.support.ColorStop")],No);const QO=No;var D0;let Lo=D0=class extends qp{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new D0({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};o([c({readOnly:!0})],Lo.prototype,"cache",null),o([c({type:["color"],json:{type:["colorInfo"]}})],Lo.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Lo.prototype,"normalizationField",void 0),o([c({type:[QO],json:{write:!0}})],Lo.prototype,"stops",null),Lo=D0=o([b("esri.renderers.visualVariables.ColorVariable")],Lo);const ZO=Lo;var V0;let On=V0=class extends D{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return lp(t.transparency)}writeOpacity(e,t,r){t[r]=YM(e)}clone(){return new V0({label:this.label,opacity:this.opacity,value:this.value})}};o([c({type:String,json:{write:!0}})],On.prototype,"label",void 0),o([c({type:Number,json:{type:At,write:{target:"transparency"}}})],On.prototype,"opacity",void 0),o([Y("opacity",["transparency"])],On.prototype,"readOpacity",null),o([re("opacity")],On.prototype,"writeOpacity",null),o([c({type:Number,json:{write:!0}})],On.prototype,"value",void 0),On=V0=o([b("esri.renderers.visualVariables.support.OpacityStop")],On);const H9=On;var z0;let Do=z0=class extends qp{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new z0({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};o([c({readOnly:!0})],Do.prototype,"cache",null),o([c({type:["opacity"],json:{type:["transparencyInfo"]}})],Do.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Do.prototype,"normalizationField",void 0),o([c({type:[H9],json:{write:!0}})],Do.prototype,"stops",null),Do=z0=o([b("esri.renderers.visualVariables.OpacityVariable")],Do);const YO=Do;var U0;let Ri=U0=class extends qp{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,s){if(s&&s.messages){const i=`visualVariables[${this.index}]`;s.messages.push(new F("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpressionTitle",context:s}))}}clone(){return new U0({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};o([c({readOnly:!0})],Ri.prototype,"cache",null),o([c({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ri.prototype,"axis",void 0),o([c({type:["rotation"],json:{type:["rotationInfo"]}})],Ri.prototype,"type",void 0),o([c({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ri.prototype,"rotationType",void 0),o([c({type:String,json:{write:!0}})],Ri.prototype,"valueExpressionTitle",void 0),o([re("web-scene","valueExpressionTitle")],Ri.prototype,"writeValueExpressionTitleWebScene",null),Ri=U0=o([b("esri.renderers.visualVariables.RotationVariable")],Ri);const lw=Ri;var q0;let Za=q0=class extends D{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new q0({label:this.label,size:this.size,value:this.value})}};o([c({type:String,json:{write:!0}})],Za.prototype,"label",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],Za.prototype,"size",void 0),o([c({type:Number,json:{write:!0}})],Za.prototype,"value",void 0),Za=q0=o([b("esri.renderers.visualVariables.support.SizeStop")],Za);const W9=Za;var B0;let yh=B0=class extends KO{constructor(){super(...arguments),this.customValues=null}clone(){return new B0({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};o([c({type:[Number],json:{write:!0}})],yh.prototype,"customValues",void 0),yh=B0=o([b("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],yh);const K9=yh;var Qi,Lt;function ia(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function cp(e){return e!=null&&!isNaN(e)&&isFinite(e)}function XO(e){return e.valueExpression?Qi.Expression:e.field&&typeof e.field=="string"?Qi.Field:Qi.Unknown}function Q9(e,t){const r=t||XO(e),s=e.valueUnit||"unknown";return r===Qi.Unknown?Lt.Constant:e.stops?Lt.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Lt.ClampedLinear:s==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Lt.Proportional:Lt.Additive:Lt.Identity:Lt.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Qi||(Qi={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Lt||(Lt={}));function Z9(e){if(!e)return null;const t={};for(const r in e){const s=Hr(e[r]);s&&(t[r]=s)}return Object.keys(t).length!==0?t:null}function Y9(e){if(!R(e))return null;const t={};for(const r in e){const s=e[r];s&&(t[r]=s.toJSON())}return Object.keys(t).length!==0?t:null}let Mr=class extends ln(D){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:$l(),configurable:!0})}normalizeCtorArgs(e,t,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&R(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Y9(this.aggregateGeometries),geometry:R(this.geometry)?this.geometry.toJSON():null,symbol:R(this.symbol)?this.symbol.toJSON():null,attributes:A({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){R(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:r};e==="attributes"&&(i.attributeName=s),this.layer.graphicChanged(i)}};o([c({value:null,json:{read:Z9}})],Mr.prototype,"aggregateGeometries",null),o([c({value:null})],Mr.prototype,"attributes",null),o([c({value:null,types:Oa,json:{read:Hr}})],Mr.prototype,"geometry",null),o([c({type:Boolean})],Mr.prototype,"isAggregate",void 0),o([c({clonable:"reference"})],Mr.prototype,"layer",void 0),o([c({type:Ta})],Mr.prototype,"popupTemplate",void 0),o([c({clonable:"reference"})],Mr.prototype,"sourceLayer",void 0),o([c({value:null,types:Qn})],Mr.prototype,"symbol",null),o([c({type:Boolean,value:!0})],Mr.prototype,"visible",null),Mr=o([b("esri.Graphic")],Mr),function(e){e.generateUID=$l}(Mr||(Mr={}));const sn=Mr;function X9(e){}function uw(e){return new ke({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const eE=uw(Jr),ff=uw(Cp),yf=uw(Fp),eN=new ke({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Jr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function tN(e){return e&&(Qf(e)||e===ff)?ff:e&&(Zf(e)||e===yf)?yf:eE}function rN(e){return e&&(Qf(e)||e===ff)?Cp:e&&(Zf(e)||e===yf)?Fp:Jr}function sN(e){return ib(e)?Cp:nb(e)?Fp:Jr}const tE=39.37,iN=Jr.radius*Math.PI/200,rE=/UNIT\[([^\]]+)\]\]$/i,pa=g,sE=/UNIT\[([^\]]+)\]/i,nN=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),oN=Gt()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Hs=e=>e*e,gn=e=>e*e*e,pp={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Hs(.001)},"square-centimeters":{inBaseUnits:Hs(.01)},"square-decimeters":{inBaseUnits:Hs(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Hs(1e3)},"square-inches":{inBaseUnits:Hs(.0254)},"square-feet":{inBaseUnits:Hs(.3048)},"square-yards":{inBaseUnits:Hs(.9144)},"square-miles":{inBaseUnits:Hs(1609.344)},"square-us-feet":{inBaseUnits:Hs(1200/3937)},acres:{inBaseUnits:.0015625*Hs(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*gn(.001)},"cubic-centimeters":{inBaseUnits:1e3*gn(.01)},"cubic-decimeters":{inBaseUnits:1e3*gn(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*gn(1e3)},"cubic-inches":{inBaseUnits:1e3*gn(.0254)},"cubic-feet":{inBaseUnits:1e3*gn(.3048)},"cubic-yards":{inBaseUnits:1e3*gn(.9144)},"cubic-miles":{inBaseUnits:1e3*gn(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},aN=function(){const e={};for(const t in pp)for(const r in pp[t].units)e[r]=t;return e}();function lN(e,t,r){return e*pp[r].units[t].inBaseUnits}function uN(e,t,r){return e/pp[r].units[t].inBaseUnits}function G0(e){const t=aN[e];if(t)return t;throw new Error("unknown type")}function DS(e,t=null){return t=t||G0(e),pp[t].baseUnit===e}function Vr(e,t,r){if(t===r)return e;const s=G0(t);if(s!==G0(r))throw new Error("incompatible units");const i=DS(t,s)?e:lN(e,t,s);return DS(r,s)?i:uN(i,r,s)}function cN(e,t,r){return Vr(e,t,"meters")/(r*Math.PI/180)}function iE(e){return oN.fromJSON(e.toLowerCase())||null}function dp(e){if(e&&typeof e=="object"&&!R6(e))return 1;const t=pu(e);return t>1e5?1:t}function pN(e){return pu(e)>=(e instanceof ke?rN(e).metersPerDegree:1e5)?"meters":aE(e)}function pu(e,t=Jr.metersPerDegree){return nE(e,!0)||t}function nE(e,t=!1){let r,s,i=null;if(e!=null&&(typeof e=="object"?(r=e.wkid,s=e.wkt):typeof e=="number"?r=e:typeof e=="string"&&(s=e)),r){if(ib(r))return Cp.metersPerDegree;if(nb(r))return Fp.metersPerDegree;i=pa.values[pa[r]],!i&&t&&nN.has(r)&&(i=iN)}else s&&(uE(s)?i=VS(rE.exec(s),i):lE(s)&&(i=VS(sE.exec(s),i)));return i}function VS(e,t){return e&&e[1]?oE(e[1]):t}function oE(e){return parseFloat(e.split(",")[1])}function aE(e){let t,r,s=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,r=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(r=e)),t)s=pa.units[pa[t]];else if(r){const i=uE(r)?rE:lE(r)?sE:null;if(i){const n=i.exec(r);n&&n[1]&&(s=hN(n[1]))}}return R(s)?iE(s):null}function lE(e){return/^GEOCCS/i.test(e)}function uE(e){return/^PROJCS/i.test(e)}const dN=1e-7;function hN(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||pa.units.indexOf(r)===-1){const s=oE(e);r=null;const i=pa.values;for(let n=0;n<i.length;++n)if(Math.abs(s-i[n])<dN){r=pa.units[n];break}}return r}const cE={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},pE={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},fN=Gt()(cE),yN=Gt()(pE);Gt()(A(A({},cE),pE));const dE={inches:Vr(1,"meters","inches"),feet:Vr(1,"meters","feet"),"us-feet":Vr(1,"meters","us-feet"),yards:Vr(1,"meters","yards"),miles:Vr(1,"meters","miles"),"nautical-miles":Vr(1,"meters","nautical-miles"),millimeters:Vr(1,"meters","millimeters"),centimeters:Vr(1,"meters","centimeters"),decimeters:Vr(1,"meters","decimeters"),meters:Vr(1,"meters","meters"),kilometers:Vr(1,"meters","kilometers"),"decimal-degrees":1/cN(1,"meters",Jr.radius)},so=te.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),zS=new sn,mh=Math.PI,mN=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function gN(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(v=>v.type==="color"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void so.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i=typeof t=="number",n=i?null:t,a=n&&n.attributes;let u=i?t:null;const p=s.field,{ipData:d,hasExpression:h}=s.cache;let f=s.cache.compiledFunc;if(!p&&!h){const v=s.stops;return v&&v[0]&&v[0].color}if(typeof u!="number")if(h){if(!R(r)||!R(r.arcade))return void so.error("Use of arcade expressions requires an arcade context");const v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},S=r.arcade.arcadeUtils,_=S.getViewInfo(v),M=S.createExecContext(n,_);if(!f){const P=S.createSyntaxTree(s.valueExpression);f=S.createFunction(P),s.cache.compiledFunc=f}u=S.executeFunction(f,M)}else a&&(u=a[p]);const y=s.normalizationField,m=a?parseFloat(a[y]):void 0;if(u!=null&&(!y||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(u/=m);const v=pw(u,d);if(v){const S=v[0],_=v[1],M=S===_?s.stops[S].color:De.blendColors(s.stops[S].color,s.stops[_].color,v[2],R(r)?r.color:void 0);return new De(M)}}}function vN(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(v=>v.type==="opacity"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void so.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i=typeof t=="number",n=i?null:t,a=n&&n.attributes;let u=i?t:null;const p=s.field,{ipData:d,hasExpression:h}=s.cache;let f=s.cache.compiledFunc;if(!p&&!h){const v=s.stops;return v&&v[0]&&v[0].opacity}if(typeof u!="number")if(h){if(ae(r)||ae(r.arcade))return void so.error("Use of arcade expressions requires an arcade context");const v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},S=r.arcade.arcadeUtils,_=S.getViewInfo(v),M=S.createExecContext(n,_);if(!f){const P=S.createSyntaxTree(s.valueExpression);f=S.createFunction(P),s.cache.compiledFunc=f}u=S.executeFunction(f,M)}else a&&(u=a[p]);const y=s.normalizationField,m=a?parseFloat(a[y]):void 0;if(u!=null&&(!y||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(u/=m);const v=pw(u,d);if(v){const S=v[0],_=v[1];if(S===_)return s.stops[S].opacity;{const M=s.stops[S].opacity;return M+(s.stops[_].opacity-M)*v[2]}}}}function bN(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void so.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=s.axis||"heading",n=i==="heading"&&s.rotationType==="arithmetic"?90:0,a=i==="heading"&&s.rotationType==="arithmetic"?-1:1,u=typeof t=="number"?null:t,p=u&&u.attributes,d=s.field,{hasExpression:h}=s.cache;let f=s.cache.compiledFunc,y=0;if(!d&&!h)return y;if(h){if(ae(r)||ae(r.arcade))return void so.error("Use of arcade expressions requires an arcade context");const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,S=v.getViewInfo(m),_=v.createExecContext(u,S);if(!f){const M=v.createSyntaxTree(s.valueExpression);f=v.createFunction(M),s.cache.compiledFunc=f}y=v.executeFunction(f,_)}else p&&(y=p[d]||0);return y=typeof y!="number"||isNaN(y)?null:n+a*y,y}function wN(e,t,r){const s=typeof t=="number",i=s?null:t,n=i&&i.attributes;let a=s?t:null;const{isScaleDriven:u}=e.cache;let p=e.cache.compiledFunc;if(u){const h=R(r)?r.scale:void 0,f=R(r)?r.view:void 0;a=h==null||f==="3d"?_N(e):h}else if(!s)switch(e.inputValueType){case Qi.Expression:{if(ae(r)||ae(r.arcade))return void so.error("Use of arcade expressions requires an arcade context");const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(i,y);if(!p){const v=f.createSyntaxTree(e.valueExpression);p=f.createFunction(v),e.cache.compiledFunc=p}a=f.executeFunction(p,m);break}case Qi.Field:n&&(a=n[e.field]);break;case Qi.Unknown:a=null}if(!cp(a))return null;if(s||!e.normalizationField)return a;const d=n?parseFloat(n[e.normalizationField]):null;return cp(d)&&d!==0?a/d:null}function _N(e){let t=null,r=null;const s=e.stops;return s?(t=s[0].value,r=s[s.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function cw(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void so.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=EN(wN(s,t,r),s,t,r,s.cache.ipData);return i==null||isNaN(i)?0:i}function Br(e,t,r){return e==null?null:ia(e)?cw(e,t,r):cp(e)?e:null}function hE(e,t,r){return cp(r)&&e>r?r:cp(t)&&e<t?t:e}function SN(e,t,r,s){return e+(Br(t.minSize,r,s)||t.minDataValue)}function xN(e,t,r){const s=e.stops;let i=s&&s.length&&s[0].size;return i==null&&(i=e.minSize),Br(i,t,r)}function $N(e,t,r,s){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=Br(t.minSize,r,s),a=Br(t.maxSize,r,s),u=R(s)?s.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return a;if(t.scaleBy==="area"&&u){const p=u==="circle",d=p?mh*(n/2)**2:n*n,h=d+i*((p?mh*(a/2)**2:a*a)-d);return p?2*Math.sqrt(h/mh):Math.sqrt(h)}return n+i*(a-n)}function IN(e,t,r,s){const i=R(s)?s.shape:void 0,n=e/t.minDataValue,a=Br(t.minSize,r,s),u=Br(t.maxSize,r,s);let p=null;return p=i==="circle"?2*Math.sqrt(n*(a/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(n*a**2):n*a,hE(p,a,u)}function MN(e,t,r,s,i){const[n,a,u]=pw(e,i);if(n===a)return Br(t.stops[n].size,r,s);{const p=Br(t.stops[n].size,r,s);return p+(Br(t.stops[a].size,r,s)-p)*u}}function ON(e,t,r,s){const i=(R(s)&&s.resolution?s.resolution:1)*dE[t.valueUnit],n=Br(t.minSize,r,s),a=Br(t.maxSize,r,s),{valueRepresentation:u}=t;let p=null;return p=u==="area"?2*Math.sqrt(e/mh)/i:u==="radius"||u==="distance"?2*e/i:e/i,hE(p,n,a)}function EN(e,t,r,s,i){switch(t.transformationType){case Lt.Additive:return SN(e,t,r,s);case Lt.Constant:return xN(t,r,s);case Lt.ClampedLinear:return $N(e,t,r,s);case Lt.Proportional:return IN(e,t,r,s);case Lt.Stops:return MN(e,t,r,s,i);case Lt.RealWorldSize:return ON(e,t,r,s);case Lt.Identity:return e;case Lt.Unknown:return null}}function TN(e,t,r){const{isScaleDriven:s}=e.cache;if(!(s&&r==="3d"||t))return null;const i={scale:t,view:r};let n=Br(e.minSize,zS,i),a=Br(e.maxSize,zS,i);if(n!=null||a!=null){if(n>a){const u=a;a=n,n=u}return{minSize:n,maxSize:a}}}function pw(e,t){if(!t)return;let r=0,s=t.length-1;return t.some((i,n)=>e<i?(s=n,!0):(r=n,!1)),[r,s,(e-t[r])/(t[s]-t[r])]}function jN(e,t,r){const s=["proportional","proportional","proportional"];for(const i of e){const n=i.useSymbolValue?"symbol-value":cw(i,t,r);switch(i.axis){case"width":s[0]=n;break;case"depth":s[1]=n;break;case"height":s[2]=n;break;case"width-and-depth":s[0]=n,s[1]=n;break;case"all":case void 0:case null:s[0]=n,s[1]=n,s[2]=n;break;default:i.axis}}return s}var J0;const qa=te.getLogger("esri.renderers.visualVariables.SizeVariable"),bd=new xe({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),H0=new xe({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function US(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Be(e):e.type==="size"?ia(e)?e:(delete(e=A({},e)).type,new qe(e)):void 0}function qS(e,t,r){if(typeof e!="object")return e;const s=new qe;return s.read(e,r),s}let qe=J0=class extends qp{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:mN.test(this.valueExpression)}}set expression(e){qa.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){ia(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ia(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return XO(this)}set maxDataValue(e){e&&this.stops&&(qa.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(qa.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return US(e)}readMaxSize(e,t,r){return qS(e,t,r)}set minDataValue(e){e&&this.stops&&(qa.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(qa.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return US(e)}readMinSize(e,t,r){return qS(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(qa.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Q9(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,s){if(e==="$view.scale"){if(s&&s.messages){const i=this.index,n=typeof i=="string"?i:`visualVariables[${i}]`;s.messages.push(new F("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:s}))}}else t[r]=e}readValueUnit(e){return e?H0.read(e):null}clone(){return new J0({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ia(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ia(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Lt.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Lt.Stops){const e=this.stops,t=e.map(s=>s.size).reverse(),r=e.length;for(let s=0;s<r;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};o([c({readOnly:!0})],qe.prototype,"cache",null),o([c({type:bd.apiValues,json:{type:bd.jsonValues,origins:{"web-map":{read:!1}},read:bd.read,write:bd.write}})],qe.prototype,"axis",void 0),o([c({type:String,value:null,json:{read:!1}})],qe.prototype,"expression",null),o([c()],qe.prototype,"index",null),o([c({type:String,readOnly:!0})],qe.prototype,"inputValueType",null),o([c({type:K9,json:{write:!0}})],qe.prototype,"legendOptions",void 0),o([c({type:Number,value:null,json:{write:!0}})],qe.prototype,"maxDataValue",null),o([c({type:Number,value:null,json:{write:!0}})],qe.prototype,"maxSize",null),o([_t("maxSize")],qe.prototype,"castMaxSize",null),o([Y("maxSize")],qe.prototype,"readMaxSize",null),o([c({type:Number,value:null,json:{write:!0}})],qe.prototype,"minDataValue",null),o([c({type:Number,value:null,json:{write:!0}})],qe.prototype,"minSize",null),o([_t("minSize")],qe.prototype,"castMinSize",null),o([Y("minSize")],qe.prototype,"readMinSize",null),o([c({type:String,json:{write:!0}})],qe.prototype,"normalizationField",void 0),o([c({readOnly:!0})],qe.prototype,"arcadeRequired",null),o([c({type:String})],qe.prototype,"scaleBy",void 0),o([c({type:[W9],value:null,json:{write:!0}})],qe.prototype,"stops",null),o([c({type:["outline"],json:{write:!0}})],qe.prototype,"target",void 0),o([c({type:String,readOnly:!0})],qe.prototype,"transformationType",null),o([c({type:["size"],json:{type:["sizeInfo"]}})],qe.prototype,"type",void 0),o([c({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],qe.prototype,"useSymbolValue",void 0),o([c({type:String,json:{write:!0}})],qe.prototype,"valueExpression",void 0),o([Y("valueExpression",["valueExpression","expression"])],qe.prototype,"readValueExpression",null),o([re("web-scene","valueExpression")],qe.prototype,"writeValueExpressionWebScene",null),o([c({type:["radius","diameter","area","width","distance"],json:{write:!0}})],qe.prototype,"valueRepresentation",void 0),o([c({type:H0.apiValues,json:{write:H0.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],qe.prototype,"valueUnit",void 0),o([Y("valueUnit")],qe.prototype,"readValueUnit",null),qe=J0=o([b("esri.renderers.visualVariables.SizeVariable")],qe);const dw=qe,AN=te.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),RN={color:ZO,size:dw,opacity:YO,rotation:lw},CN=new xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),FN=/^\[([^\]]+)\]$/i;let gh=class extends ht{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let s=null;return s=t.target===r.target?0:t.target?1:-1,s});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:s,rotationType:i}=t,n=s&&s.match(FN),a=n&&n[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:a})),e)return e.map(u=>{const p=CN.read(u.type),d=RN[p];d||(AN.warn(`Unknown variable type: ${p}`),r&&r.messages&&r.messages.push(new Rr("visual-variable:unsupported",`visualVariable of type '${p}' is not supported`,{definition:u,context:r})));const h=new d;return h.read(u,r),h})}writeVariables(e,t){const r=[];for(const s of e){const i=s.toJSON(t);i&&r.push(i)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};o([c()],gh.prototype,"visualVariables",null),gh=o([b("esri.renderers.visualVariables.VisualVariableFactory")],gh);const kN=gh,PN={base:qp,key:"type",typeMap:{opacity:YO,color:ZO,rotation:lw,size:dw}},du=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new kN}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,s,i){return this._vvFactory.readVariables(r,s,i)}writeVisualVariables(r,s,i,n){s[i]=this._vvFactory.writeVariables(r,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,s){return r?this.getVisualVariablesForType(r,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(r,s){const i=this.visualVariables;return i?i.filter(n=>n.type===r&&(typeof s=="string"?n.target===s:s!==!1||!n.target)):[]}async collectVVRequiredFields(r,s){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const n of i)n&&(n.field&&Ls(r,s,n.field),n.normalizationField&&Ls(r,s,n.normalizationField),n.valueExpression&&await on(r,s,n.valueExpression))}};return o([c({types:[PN],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),o([Y("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),o([re("visualVariables")],t.prototype,"writeVisualVariables",null),t=o([b("esri.renderers.mixins.VisualVariablesMixin")],t),t},Tu={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function NN(e,t=Tu){if(!e)return{symbol:null};const{retainId:r=Tu.retainId,ignoreDrivers:s=Tu.ignoreDrivers,hasLabelingContext:i=Tu.hasLabelingContext,retainCIM:n=Tu.retainCIM}=t;let a;if(T0(e)||e instanceof ka)a=e.clone();else if(e.type==="cim"){var u,p;const d=(u=e.data)==null||(p=u.symbol)==null?void 0:p.type;if(d!=="CIMPointSymbol")return{error:new F("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:e})};a=n?e.clone():sa.fromCIMSymbol(e)}else if(e instanceof Wr)a=cy.fromSimpleLineSymbol(e);else if(e instanceof Fa)a=sa.fromSimpleMarkerSymbol(e);else if(e instanceof cu)a=sa.fromPictureMarkerSymbol(e);else if(e instanceof ao)a=Up.fromSimpleFillSymbol(e);else{if(!(e instanceof lo))return{error:new F("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=i?uy.fromTextSymbol(e):sa.fromTextSymbol(e)}if(r&&a.type!=="cim"&&(a.id=e.id),s&&T0(a))for(let d=0;d<a.symbolLayers.length;++d)a.symbolLayers.getItemAt(d)._ignoreDrivers=!0;return{symbol:a}}function mf(e,t,r,s){const i=fE(e,{},{context:s,isLabelSymbol:!1});R(i)&&(t[r]=i)}function BS(e,t,r,s){const i=fE(e,{},{context:s,isLabelSymbol:!0});R(i)&&(t[r]=i)}function fE(e,t,r){if(ae(e))return null;const{context:s,isLabelSymbol:i}=r;if(s&&s.origin==="web-scene"&&!(e instanceof uu)&&!(e instanceof ka)){const n=NN(e,{retainCIM:!0,hasLabelingContext:i});return R(n.symbol)?n.symbol.write(t,s):(s.messages&&s.messages.push(new F("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:n.error})),null)}return s&&s.origin==="web-map"&&e.type==="web-style"?(s.messages&&s.messages.push(new F("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:s})),null):e.write(t,s)}function LN(e,t){return L9(e,null,t)}const Bp={types:iw,json:{write:{writer:mf},origins:{"web-scene":{types:AS,write:{writer:mf},read:{reader:Ia({types:AS})}}}}},yE={types:{base:Sr,key:"type",typeMap:{"simple-fill":Qn.typeMap["simple-fill"],"picture-fill":Qn.typeMap["picture-fill"],"polygon-3d":Qn.typeMap["polygon-3d"]}},json:{write:{writer:mf},origins:{"web-scene":{type:Up,write:{writer:mf}}}}};var W0;let En=W0=class extends D{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new W0({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};o([c({type:String,json:{write:!0}})],En.prototype,"description",void 0),o([c({type:String,json:{write:!0}})],En.prototype,"label",void 0),o([c({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],En.prototype,"minValue",void 0),o([c({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],En.prototype,"maxValue",void 0),o([c(Bp)],En.prototype,"symbol",void 0),En=W0=o([b("esri.renderers.support.ClassBreakInfo")],En);const hp=En;var K0;const wd=te.getLogger("esri.renderers.ClassBreaksRenderer"),mE="log",vh="percent-of-total",bh="field",_d=new xe({esriNormalizeByLog:mE,esriNormalizeByPercentOfTotal:vh,esriNormalizeByField:bh}),DN=rt(hp);let Ct=K0=class extends du(uo){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let s=t.minValue;return e.map(i=>{const n=new hp;return n.read(i,r),n.minValue==null&&(n.minValue=s),n.maxValue==null&&(n.maxValue=n.minValue),s=n.maxValue,n})}writeClassBreakInfos(e,t,r,s){const i=e.map(n=>n.write({},s));this._areClassBreaksConsecutive()&&i.forEach(n=>delete n.classMinValue),t[r]=i}castField(e){return e==null?e:typeof e=="function"?(wd.error(".field: field must be a string value"),null):jp(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&bh||r&&vh||null,t&&r&&wd.warn("warning: both normalizationField and normalizationTotal are set!")):e!==bh&&e!==vh||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let s=null;s=typeof e=="number"?new hp({minValue:e,maxValue:t,symbol:GO(r)}):DN(j(e)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let s=0;s<r;s++){const i=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ae(t)||ae(t.arcade))&&wd.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(ae(t)||ae(t.arcade))&&(r=ve(A({},r),{arcade:await to()}));const s=this.getBreakIndex(e,r);return s!==-1?this.classBreakInfos[s]:null}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void wd.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(ae(t)||ae(t.arcade))){const i=await to(),{arcadeUtils:n}=i;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r=ve(A({},r),{arcade:i})}const s=this.getBreakIndex(e,r);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((s,i)=>s+i.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new K0({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:j(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:j(this.visualVariables),legendOptions:j(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),on(e,t,this.valueExpression)];Ls(e,t,this.field),Ls(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:s,spatialReference:i,arcade:n}=U1(t,{});let a=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const u=n.arcadeUtils;if(!a){const d=u.createSyntaxTree(this.valueExpression);a=u.createFunction(d),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=this.valueExpression;const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:s,spatialReference:i})));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,s=this.normalizationType;let i=parseFloat(r[t]);if(s){const n=this.normalizationTotal,a=parseFloat(r[this.normalizationField]);if(s===mE)i=Math.log(i)*Math.LOG10E;else if(s!==vh||isNaN(n)){if(s===bh&&!isNaN(a)){if(isNaN(i)||isNaN(a))return-1;i/=a}}else i=i/n*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]<=e&&(t?e<=s[1]:e<s[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};o([c(yE)],Ct.prototype,"backgroundFillSymbol",void 0),o([c({type:[hp]})],Ct.prototype,"classBreakInfos",void 0),o([Y("classBreakInfos")],Ct.prototype,"readClassBreakInfos",null),o([re("classBreakInfos")],Ct.prototype,"writeClassBreakInfos",null),o([c({type:String,json:{write:!0}})],Ct.prototype,"defaultLabel",void 0),o([c(Bp)],Ct.prototype,"defaultSymbol",void 0),o([c({type:String,json:{write:!0}})],Ct.prototype,"field",void 0),o([_t("field")],Ct.prototype,"castField",null),o([c({type:Boolean})],Ct.prototype,"isMaxInclusive",void 0),o([c({type:py,json:{write:!0}})],Ct.prototype,"legendOptions",void 0),o([c({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ct.prototype,"minValue",null),o([c({type:String,json:{write:!0}})],Ct.prototype,"normalizationField",void 0),o([c({type:Number,cast:e=>Ap(e),json:{write:!0}})],Ct.prototype,"normalizationTotal",void 0),o([c({type:_d.apiValues,value:null,json:{type:_d.jsonValues,read:_d.read,write:_d.write}})],Ct.prototype,"normalizationType",null),o([de({classBreaks:"class-breaks"})],Ct.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Ct.prototype,"valueExpression",void 0),o([c({type:String,json:{write:!0}})],Ct.prototype,"valueExpressionTitle",void 0),Ct=K0=o([b("esri.renderers.ClassBreaksRenderer")],Ct);const hw=Ct,um=-3;var Vn;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Vn||(Vn={}));class VN{constructor(t,r,s){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,s,i=0){this._storage.put(this._namespace+t,r,s,i)}get(t){const r=this._storage.get(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,s){this._storage.updateSize(this._namespace+t,r,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class gE{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Yc,this._users=new Yc}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,s,i){const n=this._db.get(t);if(n&&(this._size-=n.size,this._db.delete(t),n.entry!==r&&this._notifyRemove(t,n.entry,Vn.ALL)),s>this._maxSize)return void this._notifyRemove(t,r,Vn.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const a=1+Math.max(i,um)-um;this._db.set(t,{entry:r,size:s,lifetime:a,lives:a}),this._size+=s,this._checkSizeLimit()}updateSize(t,r,s){const i=this._db.get(t);if(i&&i.entry===r){for(this._size-=i.size;s>this._maxSize;){const n=this._notifyRemove(t,r,Vn.SOME);if(!(R(n)&&n>0))return void this._db.delete(t);s=n}i.size=s,this._size+=s,this._checkSizeLimit()}}pop(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},s=new Array;this._db.forEach((a,u)=>{const p=a.lifetime;s[p]=(s[p]||0)+a.size,this._users.forAll(d=>{const h=d.namespace;if(u.startsWith(h)){const f=r[h]||0;r[h]=f+a.size}})});const i={};this._users.forAll(a=>{const u=a.namespace;if(!isNaN(a.hitRate)&&a.hitRate>0){const p=r[u]||0;r[u]=p,i[u]=Math.round(100*a.hitRate)+"%"}else i[u]="0%"});const n=Object.keys(r);n.sort((a,u)=>r[u]-r[a]),n.forEach(a=>t[a]=Math.round(r[a]/2**20)+"MB / "+i[a]);for(let a=s.length-1;a>=0;--a){const u=s[a];u&&(t["Priority "+(a+um-1)]=Math.round(u/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,s)=>{s.startsWith(t)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,Vn.ALL))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,Vn.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,s){let i;return this._removeFuncs.some(n=>{if(t.startsWith(n[0])){const a=n[1](r,s);return typeof a=="number"&&(i=a),!0}return!1}),i}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;const s=this._notifyRemove(t,r.entry,Vn.SOME);R(s)&&s>0&&(this._size+=s,r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}class vE{constructor(t,r){this._storage=new gE,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,s){this._storage.put(t,r,s,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const GS=te.getLogger("esri.renderers.support.DictionaryLoader"),zN={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class fw{constructor(t,r,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new vE(100),this.url=t,this.config=r,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{s=await this._dictionaryPromise}catch(m){if(zs(m))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const m of this._symbolFields){const v=this.fieldMap[m];if(v&&t.attributes[v]!=null){const S=""+t.attributes[v];i[m]=S}else i[m]=""}const n=s(i,r);if(!n||typeof n!="string")return null;const a=Lf(n).toString(),u=this._symbolCache.get(a);if(u)return u.catch(()=>{this._symbolCache.pop(a)}),u;const p=n.split(";"),d=[],h=[];for(const m of p)if(m)if(m.includes("po:")){const v=m.substr(3).split("|");if(v.length===3){const S=v[0],_=v[1];let M=v[2];if(_==="DashTemplate")M=M.split(" ").map(P=>Number(P));else if(_==="Color"){const P=new De(M).toRgba();M=[P[0],P[1],P[2],255*P[3]]}else M=Number(M);h.push({primitiveName:S,propertyName:_,value:M})}}else if(m.includes("|")){for(const v of m.split("|"))if(this._itemNames.has(v)){d.push(v);break}}else this._itemNames.has(m)&&d.push(m);const f=!R(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(d,h,f,r);return this._symbolCache.put(a,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void GS.error("no valid URL!");const r=R(t)?t.abortOptions:null,s=mt(this.url+"/resources/styles/dictionary-info.json",A({responseType:"json",query:{f:"json"}},r)),[{data:i}]=await Promise.all([s,to()]);if(!i)throw this._dictionaryPromise=null,new F("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=i.expression,a=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=a.symbol;const u={};if(this.config){const d=this.config;for(const h in d)u[h]=d[h]}if(a.configuration)for(const d of a.configuration)u.hasOwnProperty(d.name)||(u[d.name]=d.value);const p=[];if(R(t)&&t.fields&&this.fieldMap)for(const d of this._symbolFields){const h=this.fieldMap[d],f=t.fields.filter(y=>y.name===h);f.length>0&&p.push(ve(A({},f[0]),{name:d}))}return this._dictionaryPromise=$8(n,R(t)?t.spatialReference:null,p,u).then(d=>{const h={scale:0};return(f,y)=>{const m=d.repurposeFeature({geometry:null,attributes:f});return h.scale=R(y)?y.scale:void 0,d.evaluate({$feature:m,$view:h})}}).catch(d=>(GS.error("Creating dictinoary expression failed:",d),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,r,s,i){const n=new Array(t.length);for(let p=0;p<t.length;p++)n[p]=this._getSymbolPart(t[p],i);const a=await Promise.all(n),u=this.fieldMap;for(const p of a)bE(p,u);return new Np({data:this._combineSymbolParts(a,r,s)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(n=>n.data);const s=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=mt(s,A({responseType:"json",query:{f:"json"}},r));this._ongoingRequests.set(t,i);try{return(await i).data}catch(n){return this._ongoingRequests.delete(t),Promise.reject(n)}}_combineSymbolParts(t,r,s){if(!t||t.length===0)return null;const i=A({},t[0]);if(t.length>1){i.symbolLayers=[];for(const n of t){const a=n;i.symbolLayers.unshift(...a.symbolLayers)}}return s&&(i.callout=zN),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:r}}}function bE(e,t){if(!e)return;const r=e.symbolLayers;if(!r)return;let s=r.length;for(;s--;){const i=r[s];i&&i.enable!==!1&&i.type==="CIMVectorMarker"&&UN(i,t)}}function UN(e,t){const r=e.markerGraphics;if(r)for(const s of r){if(!s)continue;const i=s.symbol;if(i)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":bE(i,t);break;case"CIMTextSymbol":i.fieldMap=t}}}var qN=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:fw},Symbol.toStringTag,{value:"Module"})),Q0;let ws=Q0=class extends du(uo){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new fw(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,s){s!=null&&s.origin||super.writeVisualVariables(e,t,r,s)}clone(){return new Q0({config:j(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:j(this.fieldMap),url:j(this.url),visualVariables:j(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await on(e,t,this.scaleExpression);for(const r in this.fieldMap){const s=this.fieldMap[r];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};o([c({type:fw})],ws.prototype,"_loader",null),o([c({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ws.prototype,"config",void 0),o([c({type:Object,json:{write:!0}})],ws.prototype,"fieldMap",void 0),o([c({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ws.prototype,"scaleExpression",void 0),o([re("scaleExpression")],ws.prototype,"writeData",null),o([c({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],ws.prototype,"scaleExpressionTitle",void 0),o([c({type:String,json:{write:!0}})],ws.prototype,"url",void 0),o([re("visualVariables")],ws.prototype,"writeVisualVariables",null),ws=Q0=o([b("esri.renderers.DictionaryRenderer")],ws);const BN=ws;function Xe(e,t){const r=t?ve(A({},t),{source:e}):e;return c({aliasOf:r})}var Z0;const GN=te.getLogger("esri.renderers.support.AttributeColorInfo");let Ci=Z0=class extends D{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(GN.error(".field: field must be a string value"),null):jp(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Z0({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};o([c({type:De,json:{type:[Number],write:!0}})],Ci.prototype,"color",void 0),o([c({type:String,json:{write:!0}})],Ci.prototype,"field",void 0),o([_t("field")],Ci.prototype,"castField",null),o([c({type:String,json:{write:!0}})],Ci.prototype,"label",void 0),o([c({type:String,json:{write:!0}})],Ci.prototype,"valueExpression",void 0),o([c({type:String,json:{write:!0}})],Ci.prototype,"valueExpressionTitle",void 0),Ci=Z0=o([b("esri.renderers.support.AttributeColorInfo")],Ci);const JN=Ci;var Y0;let wh=Y0=class extends D{constructor(){super(...arguments),this.unit=null}clone(){return new Y0({unit:this.unit})}};o([c({type:String,json:{write:!0}})],wh.prototype,"unit",void 0),wh=Y0=o([b("esri.renderers.support.DotDensityLegendOptions")],wh);const HN=wh;var X0;let rr=X0=class extends du(uo){constructor(e){super(e),this.attributes=null,this.backgroundColor=new De([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Wr,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new ao({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new X0({attributes:j(this.attributes),backgroundColor:j(this.backgroundColor),dotBlendingEnabled:j(this.dotBlendingEnabled),dotShape:j(this.dotShape),dotSize:j(this.dotSize),dotValue:j(this.dotValue),legendOptions:j(this.legendOptions),outline:j(this.outline),referenceScale:j(this.referenceScale),visualVariables:j(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await on(e,t,r.valueExpression),r.field&&e.add(r.field)}};o([c({type:[JN],json:{write:!0}})],rr.prototype,"attributes",void 0),o([c({type:De,json:{write:!0}})],rr.prototype,"backgroundColor",void 0),o([c({type:Boolean}),Xe("dotBlendingEnabled")],rr.prototype,"blendDots",void 0),o([c({type:Boolean,json:{write:!0}})],rr.prototype,"dotBlendingEnabled",void 0),o([c({type:String,json:{write:!1}})],rr.prototype,"dotShape",void 0),o([c({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],rr.prototype,"dotSize",void 0),o([c({type:HN,json:{write:!0}})],rr.prototype,"legendOptions",void 0),o([c({type:Wr,json:{default:null,write:!0}})],rr.prototype,"outline",void 0),o([c({type:Number,json:{write:!0}})],rr.prototype,"dotValue",void 0),o([c({type:Number}),Xe("dotValue")],rr.prototype,"referenceDotValue",void 0),o([c({type:Number,json:{write:!0}})],rr.prototype,"referenceScale",void 0),o([c({type:Number,json:{write:!0}})],rr.prototype,"seed",void 0),o([de({dotDensity:"dot-density"})],rr.prototype,"type",void 0),rr=X0=o([b("esri.renderers.DotDensityRenderer")],rr);const WN=rr;var ev;let lc=ev=class extends D{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new ev({color:this.color,ratio:this.ratio})}};o([c({type:De,json:{write:!0}})],lc.prototype,"color",void 0),o([c({type:Number,json:{write:!0}})],lc.prototype,"ratio",void 0),lc=ev=o([b("esri.renderers.support.HeatmapColorStop")],lc);const _h=lc;var tv;let _s=tv=class extends uo{constructor(e){super(e),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new _h({ratio:0,color:new De("rgba(255, 140, 0, 0)")}),new _h({ratio:.75,color:new De("rgba(255, 140, 0, 1)")}),new _h({ratio:.9,color:new De("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const r=this.field;r&&typeof r=="string"&&Ls(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new tv({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:j(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};o([c({type:Number,json:{write:!0}})],_s.prototype,"blurRadius",void 0),o([c({type:Number})],_s.prototype,"referenceScale",void 0),o([c({type:[_h],json:{write:!0}})],_s.prototype,"colorStops",void 0),o([c({type:String,json:{write:!0}})],_s.prototype,"field",void 0),o([c({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})}}})],_s.prototype,"fieldOffset",void 0),o([c({type:Number,json:{write:!0}})],_s.prototype,"maxPixelIntensity",void 0),o([c({type:Number,json:{write:!0}})],_s.prototype,"minPixelIntensity",void 0),o([de({heatmap:"heatmap"})],_s.prototype,"type",void 0),_s=tv=o([b("esri.renderers.HeatmapRenderer")],_s);const KN=_s;var rv;let Vo=rv=class extends du(uo){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new rv({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:j(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};o([c({type:String,json:{write:!0}})],Vo.prototype,"description",void 0),o([c({type:String,json:{write:!0}})],Vo.prototype,"label",void 0),o([c(Bp)],Vo.prototype,"symbol",void 0),o([de({simple:"simple"})],Vo.prototype,"type",void 0),Vo=rv=o([b("esri.renderers.SimpleRenderer")],Vo);const dy=Vo,QN=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function sv(e){return e instanceof ht}function JS(e){return e instanceof ut?Object.keys(e.items):sv(e)?ar(e).keys():e?Object.keys(e):[]}function Sd(e,t){return e instanceof ut?e.items[t]:e[t]}function ZN(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function kc(e){return e?e.declaredClass:null}function wE(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const s=JS(e),i=JS(t);if(s.length===0&&i.length===0)return;if(!s.length||!i.length||ZN(e,t))return{type:"complete",oldValue:e,newValue:t};const n=i.filter(f=>s.indexOf(f)===-1),a=s.filter(f=>i.indexOf(f)===-1),u=s.filter(f=>i.indexOf(f)>-1&&Sd(e,f)!==Sd(t,f)).concat(n,a).sort(),p=kc(e);if(p&&QN.indexOf(p)>-1&&u.length)return{type:"complete",oldValue:e,newValue:t};let d;const h=sv(e)&&sv(t);for(const f of u){const y=Sd(e,f),m=Sd(t,f);let v;(h||typeof y!="function"&&typeof m!="function")&&y!==m&&(y==null&&m==null||(v=r&&r[f]&&typeof r[f]=="function"?r[f](y,m):typeof y=="object"&&typeof m=="object"&&kc(y)===kc(m)?wE(y,m):{type:"complete",oldValue:y,newValue:m},R(v)&&(R(d)?d.diff[f]=v:d={type:"partial",diff:{[f]:v}})))}return d}function _E(e,t){if(ae(e))return!1;const r=t.split(".");let s=e;for(const i of r){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const n=s.diff[i];if(!n)return!1;s=n}}return!0}function YN(e,t){for(const r of t)if(_E(e,r))return!0;return!1}function SE(e,t){if(!(typeof e=="function"||typeof t=="function"||ae(e)&&ae(t)))return ae(e)||ae(t)||typeof e=="object"&&typeof t=="object"&&kc(e)!==kc(t)?{type:"complete",oldValue:e,newValue:t}:wE(e,t)}var iv;let Tn=iv=class extends D{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new iv({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};o([c({type:String,json:{write:!0}})],Tn.prototype,"description",void 0),o([c({type:String,json:{write:!0}})],Tn.prototype,"label",void 0),o([c(Bp)],Tn.prototype,"symbol",void 0),o([c({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],Tn.prototype,"value",void 0),o([_t("value")],Tn.prototype,"castValue",null),Tn=iv=o([b("esri.renderers.support.UniqueValueInfo")],Tn);const fp=Tn,XN=()=>!!k("enable-feature:force-wosr"),cm={};async function eL(e,t){try{return{data:(await $E(e,t)).data,baseUrl:gO(e),styleUrl:e}}catch(r){return eu(r),null}}function tL(e,t,r){const s=t&&t.portal||_r.getDefault();let i;const n=`${s.url} - ${s.user&&s.user.username} - ${e}`;return cm[n]||(cm[n]=rL(e,s,r).then(a=>(i=a,a.fetchData())).then(a=>({data:a,baseUrl:i.itemUrl,styleName:e}))),cm[n]}function rL(e,t,r){return t.load(r).then(()=>{const s=new Ji({disableExtraQuery:!0,query:`owner:${HS} AND type:${WS} AND typekeywords:"${e}"`});return t.queryItems(s,r)}).then(({results:s})=>{let i=null;const n=e.toLowerCase();if(s&&Array.isArray(s)){for(const a of s)if(a.typeKeywords.some(u=>u.toLowerCase()===n)&&a.type===WS&&a.owner===HS){i=a;break}}if(!i)throw new F("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)})}function xE(e,t,r){return e.styleUrl?eL(e.styleUrl,r):e.styleName?tL(e.styleName,t,r):Promise.reject(new F("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function sL(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function iL(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!XN()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function $E(e,t){const r=A({responseType:"json",query:{f:"json"}},t);return mt(cs(e),r)}const HS="esri_en",WS="Style",nL="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var uc;const bo=te.getLogger("esri.renderers.UniqueValueRenderer"),oL=rt(fp);let vt=uc=class extends du(uo){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let s=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const a=t.find(u=>u.value===r[n].value);a?SE(a,r[n])?(i.changed.push({type:"complete",oldValue:a,newValue:r[n]}),s=!0):i.unchanged.push({oldValue:a,newValue:r[n]}):(i.added.push(r[n]),s=!0)}for(let n=0;n<t.length;n++)r.find(a=>a.value===t[n].value)||(i.removed.push(t[n]),s=!0);return s?i:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:jp(e)}writeField(e,t,r,s){typeof e=="string"?t[r]=e:s&&s.messages?s.messages.push(new F("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):bo.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||_r.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const s=Ca(t.styleUrl,r);return Object.freeze({styleUrl:s})}}writeStyleOrigin(e,t,r,s){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=ou(e.styleUrl,s))}set uniqueValueInfos(e){this.styleOrigin?bo.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void bo.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?oL(e):new fp({value:e,symbol:GO(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)bo.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(ae(t)||ae(t.arcade))&&(r=ve(A({},r),{arcade:await to()})),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void bo.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(ae(r)||ae(r.arcade))){const i=await to(),{arcadeUtils:n}=i;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r=ve(A({},r),{arcade:i})}const s=this._getUniqueValueInfo(e,r);return s&&s.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new uc({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:j(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:j(this.visualVariables),legendOptions:j(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:j(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=j(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(j(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),on(e,t,this.valueExpression)];Ls(e,t,this.field),Ls(e,t,this.field2),Ls(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return xE(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new ka({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const i=new fp({value:r.name,symbol:s});t.push(i),this._valueInfoMap[r.name]=i}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:s,spatialReference:i,arcade:n}=U1(t,{});let a=this._cache.compiledFunc;const u=n.arcadeUtils;if(!a){const d=u.createSyntaxTree(this.valueExpression);a=u.createFunction(d),this._cache.compiledFunc=a}const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:s,spatialReference:i})));return this._valueInfoMap[p+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let s;if(typeof t!="function"&&this.field2){const i=this.field2,n=this.field3,a=[];t&&a.push(r[t]),i&&a.push(r[i]),n&&a.push(r[n]),s=a.join(this.fieldDelimiter||"")}else typeof t=="function"?s=t(e):t&&(s=r[t]);return this._valueInfoMap[s+""]}static fromPortalStyle(e,t){const r=new uc(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||_r.getDefault());const s=r.populateFromStyle();return s.catch(i=>{bo.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),s}static fromStyleUrl(e,t){const r=new uc(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const s=r.populateFromStyle();return s.catch(i=>{bo.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),s}};o([c({readOnly:!0})],vt.prototype,"_cache",null),o([de({uniqueValue:"unique-value"})],vt.prototype,"type",void 0),o([c(yE)],vt.prototype,"backgroundFillSymbol",void 0),o([c({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],vt.prototype,"field",void 0),o([_t("field")],vt.prototype,"castField",null),o([re("field")],vt.prototype,"writeField",null),o([c({type:String,json:{write:!0}})],vt.prototype,"field2",void 0),o([c({type:String,json:{write:!0}})],vt.prototype,"field3",void 0),o([c({type:String,json:{write:!0}})],vt.prototype,"valueExpression",void 0),o([c({type:String,json:{write:!0}})],vt.prototype,"valueExpressionTitle",void 0),o([c({type:py,json:{write:!0}})],vt.prototype,"legendOptions",void 0),o([c({type:String,json:{write:!0}})],vt.prototype,"defaultLabel",void 0),o([c(O3(A({},Bp),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],vt.prototype,"defaultSymbol",null),o([c({type:String,json:{write:!0}})],vt.prototype,"fieldDelimiter",void 0),o([c({type:_r,readOnly:!0})],vt.prototype,"portal",void 0),o([Y("portal",["styleName"])],vt.prototype,"readPortal",null),o([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],vt.prototype,"styleOrigin",void 0),o([Y("styleOrigin",["styleName","styleUrl"])],vt.prototype,"readStyleOrigin",null),o([re("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],vt.prototype,"writeStyleOrigin",null),o([c({type:[fp],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],vt.prototype,"uniqueValueInfos",null),vt=uc=o([b("esri.renderers.UniqueValueRenderer")],vt);const hy=vt,yw={key:"type",base:uo,typeMap:{heatmap:KN,simple:dy,"unique-value":hy,"class-breaks":hw,"dot-density":WN,dictionary:BN},errorContext:"renderer"},IE={key:"type",base:uo,typeMap:{simple:dy,"unique-value":hy,"class-breaks":hw},errorContext:"renderer"},aL=Ia({types:yw});function ME(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new Rr("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):aL(e,t,r):null}let Sh=class extends ht{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!ut.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||ut.isCollection(e)?e.forEach(s=>this._isHandle(s)&&r.push(s)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||ut.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};o([c({readOnly:!0})],Sh.prototype,"size",null),Sh=o([b("esri.core.Handles")],Sh);const Pa=Sh;class mw{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Gm),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new mw,s=this._originStores[Fe.DEFAULTS];s&&s.forEach((i,n)=>{r.set(n,j(i),Fe.DEFAULTS)});for(let i=Fe.SERVICE;i<Gm;i++){const n=this._originStores[i];n&&n.forEach((a,u)=>{t&&t.has(u)||r.set(u,j(a),i)})}return r}get(t,r){const s=r===void 0?this._values:this._originStores[r];return s?s.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,s=Fe.USER){let i=this._originStores[s];if(i||(i=new Map,this._originStores[s]=i),i.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const n=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),n!==r}return!1}delete(t,r=Fe.USER){const s=this._originStores[r];if(!s)return;const i=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let n=r-1;n>=0;n--){const a=this._originStores[n];if(a&&a.has(t)){this._values.set(t,a.get(t)),this._propertyOriginMap.set(t,n);break}}}return i}has(t,r){const s=r===void 0?this._values:this._originStores[r];return!!s&&s.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const s=this._originStores[r],i=s&&s.get(t),n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),n!==i}originOf(t){return this._propertyOriginMap.get(t)||Fe.DEFAULTS}forEach(t){this._values.forEach(t)}}const OE=e=>{let t=class extends e{constructor(...r){super(...r);const s=ar(this),i=s.store,n=new mw;s.store=n,gI(s,i,n)}read(r,s){bI(this,r,s)}getAtOrigin(r,s){const i=pm(this),n=Ki(s);if(typeof r=="string")return i.get(r,n);const a={};return r.forEach(u=>{a[u]=i.get(u,n)}),a}originOf(r){return Qc(this.originIdOf(r))}originIdOf(r){return pm(this).originOf(r)}revert(r,s){const i=pm(this),n=Ki(s),a=ar(this);let u;u=typeof r=="string"?r==="*"?i.keys(n):[r]:r,u.forEach(p=>{a.invalidate(p),i.revert(p,n),a.commit(p)})}};return t=o([b("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function pm(e){return ar(e).store}let KS=class extends OE(ht){};KS=o([b("esri.core.ReadOnlyMultiOriginJSONSupport")],KS);const lL=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,s="user"){return dm(this).delete(r,Ki(s))}write(r={},s){return SI(this,r=r||{},s),r}setAtOrigin(r,s,i){ar(this).setAtOrigin(r,s,Ki(i))}removeOrigin(r){const s=dm(this),i=Ki(r),n=s.keys(i);for(const a of n)s.originOf(a)===i&&s.set(a,s.get(a,i),Fe.USER)}updateOrigin(r,s){const i=dm(this),n=Ki(s),a=this.get(r);for(let u=n+1;u<Gm;++u)i.delete(r,u);i.set(r,a,n)}toJSON(r){return this.write({},r)}};return t=o([b("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function dm(e){return ar(e).store}const gw=e=>{let t=class extends lL(OE(e)){constructor(...r){super(...r)}};return t=o([b("esri.core.MultiOriginJSONSupport")],t),t};let nv=class extends gw(ht){};nv=o([b("esri.core.MultiOriginJSONSupport")],nv);async function uL(e,t){const{WhereClause:r}=await Re(()=>import("./WhereClause.5c1a26b0.js"),[],import.meta.url);return r.create(e,t)}var ov;let zo=ov=class extends D{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new ov({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};o([c({type:String,json:{write:!0}})],zo.prototype,"expression",void 0),o([c({type:String,json:{write:!0}})],zo.prototype,"name",void 0),o([c({type:["boolean","date","number","string"],json:{write:!0}})],zo.prototype,"returnType",void 0),o([c({type:String,json:{write:!0}})],zo.prototype,"title",void 0),zo=ov=o([b("esri.form.ExpressionInfo")],zo);const cL=zo;let Uo=class extends D{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};o([c({type:String,json:{write:!0}})],Uo.prototype,"description",void 0),o([c({type:String,json:{write:!0}})],Uo.prototype,"label",void 0),o([c()],Uo.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Uo.prototype,"visibilityExpression",void 0),Uo=o([b("esri.form.elements.Element")],Uo);const Hl=Uo;var av;let xh=av=class extends D{constructor(e){super(e),this.type=null}clone(){return new av({type:this.type})}};o([c({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],xh.prototype,"type",void 0),xh=av=o([b("esri.form.elements.inputs.AttachmentInput")],xh);const pL=xh;var lv;let qo=lv=class extends Hl{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new lv({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};o([c({type:String,json:{write:!0}})],qo.prototype,"attachmentKeyword",void 0),o([c({type:Boolean,json:{write:!0}})],qo.prototype,"editable",void 0),o([c({type:pL,json:{read:{source:"inputType"},write:{target:"inputType"}}})],qo.prototype,"input",void 0),o([c({type:["attachment"],json:{read:!1,write:!0}})],qo.prototype,"type",void 0),qo=lv=o([b("esri.form.elements.AttachmentElement")],qo);const QS=qo;let $h=class extends D{constructor(e){super(e),this.type=null}};o([c()],$h.prototype,"type",void 0),$h=o([b("esri.form.elements.inputs.Input")],$h);const hu=$h;let cc=class extends hu{constructor(e){super(e),this.maxLength=null,this.minLength=0}};o([c({type:Number,json:{write:!0}})],cc.prototype,"maxLength",void 0),o([c({type:Number,json:{write:!0}})],cc.prototype,"minLength",void 0),cc=o([b("esri.form.elements.inputs.TextInput")],cc);const vw=cc;var uv;let Ih=uv=class extends vw{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new uv({maxLength:this.maxLength,minLength:this.minLength})}};o([c({type:["barcode-scanner"],json:{read:!1,write:!0}})],Ih.prototype,"type",void 0),Ih=uv=o([b("esri.form.elements.inputs.BarcodeScannerInput")],Ih);const dL=Ih;var cv;let Ya=cv=class extends hu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new cv({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};o([c({type:String,json:{write:!0}})],Ya.prototype,"noValueOptionLabel",void 0),o([c({type:Boolean,json:{write:!0}})],Ya.prototype,"showNoValueOption",void 0),o([c({type:["combo-box"],json:{read:!1,write:!0}})],Ya.prototype,"type",void 0),Ya=cv=o([b("esri.form.elements.inputs.ComboBoxInput")],Ya);const hL=Ya;var pv;function ZS(e){return e!=null?new Date(e):null}function YS(e){return e?e.getTime():null}let Ss=pv=class extends hu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return ZS(t.max)}writeMax(e,t){t.max=YS(e)}readMin(e,t){return ZS(t.min)}writeMin(e,t){t.min=YS(e)}clone(){return new pv({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};o([c({type:Boolean,json:{write:!0}})],Ss.prototype,"includeTime",void 0),o([c({type:Date,json:{type:Number,write:!0}})],Ss.prototype,"max",void 0),o([Y("max")],Ss.prototype,"readMax",null),o([re("max")],Ss.prototype,"writeMax",null),o([c({type:Date,json:{type:Number,write:!0}})],Ss.prototype,"min",void 0),o([Y("min")],Ss.prototype,"readMin",null),o([re("min")],Ss.prototype,"writeMin",null),o([c({type:["datetime-picker"],json:{read:!1,write:!0}})],Ss.prototype,"type",void 0),Ss=pv=o([b("esri.form.elements.inputs.DateTimePickerInput")],Ss);const fL=Ss;var dv;let Xa=dv=class extends hu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new dv({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};o([c({type:String,json:{write:!0}})],Xa.prototype,"noValueOptionLabel",void 0),o([c({type:Boolean,json:{write:!0}})],Xa.prototype,"showNoValueOption",void 0),o([c({type:["radio-buttons"],json:{read:!1,write:!0}})],Xa.prototype,"type",void 0),Xa=dv=o([b("esri.form.elements.inputs.RadioButtonsInput")],Xa);const yL=Xa;var hv;let el=hv=class extends hu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new hv({offValue:this.offValue,onValue:this.onValue})}};o([c({type:[String,Number],json:{write:!0}})],el.prototype,"offValue",void 0),o([c({type:[String,Number],json:{write:!0}})],el.prototype,"onValue",void 0),o([c({type:["switch"],json:{read:!1,write:!0}})],el.prototype,"type",void 0),el=hv=o([b("esri.form.elements.inputs.SwitchInput")],el);const mL=el;var fv;let Mh=fv=class extends vw{constructor(e){super(e),this.type="text-area"}clone(){return new fv({maxLength:this.maxLength,minLength:this.minLength})}};o([c({type:["text-area"],json:{read:!1,write:!0}})],Mh.prototype,"type",void 0),Mh=fv=o([b("esri.form.elements.inputs.TextAreaInput")],Mh);const gL=Mh;var yv;let Oh=yv=class extends vw{constructor(e){super(e),this.type="text-box"}clone(){return new yv({maxLength:this.maxLength,minLength:this.minLength})}};o([c({type:["text-box"],json:{read:!1,write:!0}})],Oh.prototype,"type",void 0),Oh=yv=o([b("esri.form.elements.inputs.TextBoxInput")],Oh);const vL=Oh,bL={base:hu,key:"type",typeMap:{"barcode-scanner":dL,"combo-box":hL,"datetime-picker":fL,"radio-buttons":yL,switch:mL,"text-area":gL,"text-box":vL}};var mv;let pc=mv=class extends D{constructor(e){super(e),this.name=null,this.code=null}clone(){return new mv({name:this.name,code:this.code})}};o([c({type:String,json:{write:!0}})],pc.prototype,"name",void 0),o([c({type:[String,Number],json:{write:!0}})],pc.prototype,"code",void 0),pc=mv=o([b("esri.layers.support.CodedValue")],pc);const wL=pc,_L=new xe({inherited:"inherited",codedValue:"coded-value",range:"range"});let dc=class extends D{constructor(e){super(e),this.name=null,this.type=null}};o([c({type:String,json:{write:!0}})],dc.prototype,"name",void 0),o([de(_L)],dc.prototype,"type",void 0),dc=o([b("esri.layers.support.Domain")],dc);const fy=dc;var gv;let hc=gv=class extends fy{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(s=>(String(s.code)===r&&(t=s.name),!!t))}return t}clone(){return new gv({codedValues:j(this.codedValues),name:this.name})}};o([c({type:[wL],json:{write:!0}})],hc.prototype,"codedValues",void 0),o([de({codedValue:"coded-value"})],hc.prototype,"type",void 0),hc=gv=o([b("esri.layers.support.CodedValueDomain")],hc);const EE=hc;var vv;let Eh=vv=class extends fy{constructor(e){super(e),this.type="inherited"}clone(){return new vv}};o([de({inherited:"inherited"})],Eh.prototype,"type",void 0),Eh=vv=o([b("esri.layers.support.InheritedDomain")],Eh);const TE=Eh;var bv;let tl=bv=class extends fy{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new bv({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};o([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],tl.prototype,"maxValue",void 0),o([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],tl.prototype,"minValue",void 0),o([de({range:"range"})],tl.prototype,"type",void 0),tl=bv=o([b("esri.layers.support.RangeDomain")],tl);const jE=tl,AE={key:"type",base:fy,typeMap:{range:jE,"coded-value":EE,inherited:TE}};function bw(e){if(!e||!e.type)return null;switch(e.type){case"range":return jE.fromJSON(e);case"codedValue":return EE.fromJSON(e);case"inherited":return TE.fromJSON(e)}return null}var wv;let ss=wv=class extends Hl{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new wv({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};o([c({types:AE,json:{read:{reader:bw},write:!0}})],ss.prototype,"domain",void 0),o([c({type:Boolean,json:{write:!0}})],ss.prototype,"editable",void 0),o([c({type:String,json:{write:!0}})],ss.prototype,"editableExpression",void 0),o([c({type:String,json:{write:!0}})],ss.prototype,"fieldName",void 0),o([c({type:String,json:{write:!0}})],ss.prototype,"hint",void 0),o([c({types:bL,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ss.prototype,"input",void 0),o([c({type:String,json:{write:!0}})],ss.prototype,"requiredExpression",void 0),o([c({type:String,json:{read:!1,write:!0}})],ss.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],ss.prototype,"valueExpression",void 0),ss=wv=o([b("esri.form.elements.FieldElement")],ss);const XS=ss;var _v;let Fi=_v=class extends Hl{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new _v({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:j(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};o([c({type:Number,json:{write:!0}})],Fi.prototype,"displayCount",void 0),o([c({type:["list"],json:{write:!0}})],Fi.prototype,"displayType",void 0),o([c({type:Boolean,json:{write:!0}})],Fi.prototype,"editable",void 0),o([c({type:[cM],json:{write:!0}})],Fi.prototype,"orderByFields",void 0),o([c({type:Number,json:{write:!0}})],Fi.prototype,"relationshipId",void 0),o([c({type:["relationship"],json:{read:!1,write:!0}})],Fi.prototype,"type",void 0),Fi=_v=o([b("esri.form.elements.RelationshipElement")],Fi);const ex=Fi;function RE(e){return{typesWithGroup:{base:Hl,key:"type",typeMap:{attachment:QS,field:XS,group:e,relationship:ex}},typesWithoutGroup:{base:Hl,key:"type",typeMap:{attachment:QS,field:XS,relationship:ex}}}}function CE(e,t,r=!0){if(!e)return null;const s=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>s[i.type]).map(i=>s[i.type].fromJSON(i))}function FE(e,t,r=!0){if(!e)return null;const s=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>s[i.type]).map(i=>i.toJSON())}function kE(e,t,r=!0){return e?e.map(s=>yi(r?t.typesWithGroup:t.typesWithoutGroup,s)):null}var Sv;let li=Sv=class extends Hl{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return kE(e,hm,!1)}readElements(e,t){return CE(t.formElements,hm,!1)}writeElements(e,t){t.formElements=FE(e,hm,!1)}clone(){return new Sv({description:this.description,elements:j(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};o([c({json:{write:!0}})],li.prototype,"elements",void 0),o([_t("elements")],li.prototype,"castElements",null),o([Y("elements",["formElements"])],li.prototype,"readElements",null),o([re("elements")],li.prototype,"writeElements",null),o([c({type:["collapsed","expanded"],json:{write:!0}})],li.prototype,"initialState",void 0),o([c({type:String,json:{read:!1,write:!0}})],li.prototype,"type",void 0),li=Sv=o([b("esri.form.elements.GroupElement")],li);const hm=RE(li),SL=li;var xv;const fm=RE(SL);let ii=xv=class extends D{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return kE(e,fm)}readElements(e,t){return CE(t.formElements,fm)}writeElements(e,t){t.formElements=FE(e,fm)}clone(){return new xv({description:this.description,expressionInfos:j(this.expressionInfos),elements:j(this.elements),title:this.title})}};o([c({type:String,json:{write:!0}})],ii.prototype,"description",void 0),o([c({json:{write:!0}})],ii.prototype,"elements",void 0),o([_t("elements")],ii.prototype,"castElements",null),o([Y("elements",["formElements"])],ii.prototype,"readElements",null),o([re("elements")],ii.prototype,"writeElements",null),o([c({type:[cL],json:{write:!0}})],ii.prototype,"expressionInfos",void 0),o([c({type:String,json:{write:!0}})],ii.prototype,"title",void 0),ii=xv=o([b("esri.form.FormTemplate")],ii);const xL=ii;var fc;const gf=Gt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),PE=gf.jsonValues.slice();g3(PE,"orthometric");const Pc=Gt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let xs=fc=class extends D{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return gf.write(e,t,r)}readHeightModel(e,t,r){return gf.read(e)||(r&&r.messages&&r.messages.push($L(e,{context:r})),null)}readHeightUnit(e,t,r){return Pc.read(e)||(r&&r.messages&&r.messages.push(tx(e,{context:r})),null)}readHeightUnitService(e,t,r){return iE(e)||Pc.read(e)||(r&&r.messages&&r.messages.push(tx(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new fc({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=pN(t);return new fc({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t=A({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new fc;return t.read(e,{origin:"web-scene"}),t}};function tx(e,t){return new Rr("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function $L(e,t){return new Rr("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}o([c({type:gf.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:PE,default:"ellipsoidal"}}}})],xs.prototype,"heightModel",void 0),o([re("web-scene","heightModel")],xs.prototype,"writeHeightModel",null),o([Y(["web-scene","service"],"heightModel")],xs.prototype,"readHeightModel",null),o([c({type:Pc.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Pc.jsonValues,write:Pc.write}}}})],xs.prototype,"heightUnit",void 0),o([Y("web-scene","heightUnit")],xs.prototype,"readHeightUnit",null),o([Y("service","heightUnit")],xs.prototype,"readHeightUnitService",null),o([c({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],xs.prototype,"vertCRS",void 0),o([Y("service","vertCRS",["vertCRS","ellipsoid","geoid"])],xs.prototype,"readVertCRS",null),xs=fc=o([b("esri.geometry.HeightModelInfo")],xs);const NE=xs;let IL=0;const rx=te.getLogger("esri.layers.Layer");let Nt=class extends Rp.EventedMixin(kp(zp)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Mt(-180,-90,180,90,ke.WGS84),this.id=Date.now().toString(16)+"-layer-"+IL++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ke.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e,r=await Re(()=>import("./arcgisLayers.525733ca.js"),["arcgisLayers.525733ca.js","lazyLayerLoader.d98b0711.js"],import.meta.url);try{return await r.fromUrl(t)}catch(s){throw rx.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",s),s}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},r=await Re(()=>import("./portalLayers.bfa804c7.js"),["portalLayers.bfa804c7.js","lazyLayerLoader.d98b0711.js","layersLoader.193828dd.js","jsonContext.a04ce04f.js"],import.meta.url);try{return await r.fromItem(t)}catch(s){const i=t&&t.portalItem,n=i&&i.id||"unset",a=i&&i.portal&&i.portal.url||Qe.portalUrl;throw rx.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+n+"')",s),s}}initialize(){this.when().catch(e=>{var t,r;zs(e)||te.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(r=this.id)!=null?r:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?Cr(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await mt(e,{query:{f:"json"},responseType:"json"})).data;throw new F("layer:no-attribution-data","Layer does not have attribution data")}};o([c({type:String})],Nt.prototype,"attributionDataUrl",void 0),o([c({type:Mt})],Nt.prototype,"fullExtent",void 0),o([c({readOnly:!0})],Nt.prototype,"hasAttributionData",null),o([c({type:String,clonable:!1})],Nt.prototype,"id",void 0),o([c({type:Boolean,nonNullable:!0})],Nt.prototype,"legendEnabled",void 0),o([c({type:["show","hide","hide-children"]})],Nt.prototype,"listMode",void 0),o([c({type:Number,range:{min:0,max:1},nonNullable:!0})],Nt.prototype,"opacity",void 0),o([c({clonable:!1})],Nt.prototype,"parent",void 0),o([c({readOnly:!0})],Nt.prototype,"parsedUrl",null),o([c({type:Boolean})],Nt.prototype,"popupEnabled",void 0),o([c({type:Boolean})],Nt.prototype,"attributionVisible",void 0),o([c({type:ke})],Nt.prototype,"spatialReference",void 0),o([c({type:String})],Nt.prototype,"title",void 0),o([c({type:String,readOnly:!0,json:{read:!1}})],Nt.prototype,"type",void 0),o([c()],Nt.prototype,"url",void 0),o([c({type:Boolean,nonNullable:!0})],Nt.prototype,"visible",void 0),Nt=o([b("esri.layers.Layer")],Nt);const LE=Nt;function Wl(e,t,r={}){return _w(e,t,r,DE)}function ww(e,t,r={}){return _w(e,t,r,VE)}function _w(e,t,r={},s){let i=null;const n=r.once?(a,u)=>{s(a)&&(Sp(i),t(a,u))}:(a,u)=>{s(a)&&t(a,u)};if(i=CC(e,n,r.sync,r.equals),r.initial){const a=e();n(a,a)}return i}function $v(e,t,r,s={}){let i=null,n=null,a=null;function u(){i&&n&&(n.remove(),s.onListenerRemove==null||s.onListenerRemove(i),i=null,n=null)}function p(h){s.once&&s.once&&Sp(a),r(h)}const d=Wl(e,(h,f)=>{u(),zf(h)&&(i=h,n=Tp(h,t,p),s.onListenerAdd==null||s.onListenerAdd(h))},{sync:s.sync,initial:!0});return a=Ip(()=>{d.remove(),u()}),a}function Iv(e,t){return ML(e,VE,t)}function ML(e,t,r){if(Xn(r))return Promise.reject(Xt());const s=e();if(t!=null&&t(s))return Promise.resolve(s);let i=null;function n(){i=Sp(i)}return new Promise((a,u)=>{i=Df([tn(r,()=>{n(),u(Xt())}),_w(e,p=>{n(),a(p)},{sync:!1,once:!0},t!=null?t:DE)])})}function DE(e){return!0}function VE(e){return!!e}const zE={sync:!0},UE={initial:!0},OL={sync:!0,initial:!0};let Nc=class extends ht{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new Pa,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r={}){return this._installWatch(e,t,r,Wl)}addWhen(e,t,r={}){return this._installWatch(e,t,r,ww)}addOnCollectionChange(e,t,{initial:r=!1}={}){const s=++this.handleId;return this.handles.add([$v(e,"after-changes",this._createSyncUpdatingCallback(),zE),$v(e,"change",t,{onListenerAdd:r?i=>t({added:i.toArray(),removed:[]}):void 0})],s),{remove:()=>this.handles.remove(s)}}addPromise(e){if(ae(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(xd)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,r={},s){const i=++this.handleId;r.sync||this._installSyncUpdatingWatch(e,i);const n=s(e,t,r);return this.handles.add(n,i),{remove:()=>this.handles.remove(i)}}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),s=Wl(e,r,{sync:!0,equals:()=>!1});return this.handles.add(s,t),s}_createSyncUpdatingCallback(){return()=>{this.handles.remove(xd),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Bf(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(xd))}),xd)}}};o([c({readOnly:!0})],Nc.prototype,"updating",void 0),Nc=o([b("esri.views.support.WatchUpdatingTracking")],Nc);const xd=-42;var sx;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(sx||(sx={}));const Sw=e=>{let t=class extends e{destroy(){var r,s;this.destroyed||((r=this._get("handles"))==null||r.destroy(),(s=this._get("updatingHandles"))==null||s.destroy())}get handles(){return this._get("handles")||new Pa}get updatingHandles(){return this._get("updatingHandles")||new Nc}};return o([c({readOnly:!0})],t.prototype,"handles",null),o([c({readOnly:!0})],t.prototype,"updatingHandles",null),t=o([b("esri.core.HandleOwner")],t),t};let Mv=class extends Sw(ht){};Mv=o([b("esri.core.HandleOwner")],Mv);var br;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(br||(br={}));let EL=0;function qE(){return EL++}function TL(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function vf(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function BE(e,t,r,s){if(t.type===br.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==br.INVOKE&&t.type!==br.RESPONSE)return void e.postMessage(t);let i;TL(r)?(i=ix(r.transferList),t.data=r.result):(i=ix(s),t.data=r),i?e.postMessage(t,i):e.postMessage(t)}function yp(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function ix(e){if(!e||!e.length)return null;if(k("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!jL(r));return t.length?t:null}function jL(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const AL={statsWorker:()=>Re(()=>import("./statsWorker.cdd3e5bb.js"),["statsWorker.cdd3e5bb.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js"],import.meta.url),geometryEngineWorker:()=>Re(()=>import("./geometryEngineWorker.9a0d3af4.js"),["geometryEngineWorker.9a0d3af4.js","geometryEngineJSON.5748d0ed.js","geometryEngineBase.82589031.js","json.67c3770f.js"],import.meta.url),CSVSourceWorker:()=>Re(()=>import("./CSVSourceWorker.fa35a49c.js"),["CSVSourceWorker.fa35a49c.js","number.6911e6a0.js","projection.b42b5b2c.js","json.67c3770f.js","OptimizedGeometry.2877750c.js","FeatureStore.5028afe9.js","aaBoundingRect.8ea971a8.js","featureConversionUtils.f055c068.js","OptimizedFeatureSet.2574e09f.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","clientSideDefaults.85acf5c3.js"],import.meta.url),EdgeProcessingWorker:()=>Re(()=>import("./EdgeProcessingWorker.c9ccca17.js"),["EdgeProcessingWorker.c9ccca17.js","deduplicate.d9d30804.js","BufferView.f0cba98e.js","vec2.10c52e02.js","enums.0a9daf41.js","VertexElementDescriptor.764350b6.js","InterleavedLayout.37369f24.js","types.b3fc872b.js","VertexAttribute.a3d318c6.js"],import.meta.url),ElevationSamplerWorker:()=>Re(()=>import("./ElevationSamplerWorker.5b902dd6.js"),["ElevationSamplerWorker.5b902dd6.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","georeference.393fbd62.js","quat.a2e183a4.js","vec33.7b4ca55b.js","projection.b42b5b2c.js","BufferView.f0cba98e.js","vec2.10c52e02.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>Re(()=>import("./FeatureServiceSnappingSourceWorker.64509c5c.js"),["FeatureServiceSnappingSourceWorker.64509c5c.js","FeatureStore.5028afe9.js","aaBoundingRect.8ea971a8.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","projection.b42b5b2c.js","json.67c3770f.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","TileInfo.99c42331.js","pbfQueryUtils.8b1bed95.js","pbf.242b1286.js","query.1108caef.js","byteSizeEstimations.651aa0cf.js"],import.meta.url),GeoJSONSourceWorker:()=>Re(()=>import("./GeoJSONSourceWorker.db25dae0.js"),["GeoJSONSourceWorker.db25dae0.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","FeatureStore.5028afe9.js","aaBoundingRect.8ea971a8.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","projection.b42b5b2c.js","json.67c3770f.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","geojson.f0fc29b6.js","clientSideDefaults.85acf5c3.js","sourceUtils.48cbf031.js"],import.meta.url),LercWorker:()=>Re(()=>import("./LercWorker.408b1417.js"),[],import.meta.url),MemorySourceWorker:()=>Re(()=>import("./MemorySourceWorker.1b25bd1e.js"),["MemorySourceWorker.1b25bd1e.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","objectIdUtils.c8b9462e.js","FeatureStore.5028afe9.js","aaBoundingRect.8ea971a8.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","projection.b42b5b2c.js","json.67c3770f.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","clientSideDefaults.85acf5c3.js","sourceUtils.48cbf031.js"],import.meta.url),PBFDecoderWorker:()=>Re(()=>import("./PBFDecoderWorker.bc96f82a.js"),["PBFDecoderWorker.bc96f82a.js","byteSizeEstimations.651aa0cf.js","aaBoundingRect.8ea971a8.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","pbfQueryUtils.8b1bed95.js","pbf.242b1286.js"],import.meta.url),Pipeline:()=>Re(()=>import("./Pipeline.174cbc50.js"),["Pipeline.174cbc50.js","TileInfo.99c42331.js","aaBoundingRect.8ea971a8.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","projection.b42b5b2c.js","json.67c3770f.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","quickselect.b4c2f48f.js","ogcFeatureUtils.c3dc9740.js","geojson.f0fc29b6.js","clientSideDefaults.85acf5c3.js","query.1108caef.js","pbfQueryUtils.8b1bed95.js","pbf.242b1286.js","enums2.96230668.js","enums.0a9daf41.js","Texture.287b35dd.js","context-util.a9a483f1.js","TileKey.797962a9.js"],import.meta.url).then(function(e){return e.P}),PointCloudWorker:()=>Re(()=>import("./PointCloudWorker.2fbe80a9.js"),["PointCloudWorker.2fbe80a9.js","quat.a2e183a4.js","vec3f32.900df0d5.js","projection.b42b5b2c.js","PointCloudUniqueValueRenderer.155c1af3.js","VertexAttribute.a3d318c6.js"],import.meta.url),RasterWorker:()=>Re(()=>import("./RasterWorker.1f3def10.js"),["RasterWorker.1f3def10.js","projection.b42b5b2c.js","dataUtils.66fd28ff.js","colorUtils.0050d1da.js","utils2.603057f0.js"],import.meta.url),SceneLayerWorker:()=>Re(()=>import("./SceneLayerWorker.cc736902.js"),["SceneLayerWorker.cc736902.js","vec4f64.b06c8783.js"],import.meta.url),WFSSourceWorker:()=>Re(()=>import("./WFSSourceWorker.44da3c51.js"),["WFSSourceWorker.44da3c51.js","featureConversionUtils.f055c068.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","FeatureStore.5028afe9.js","aaBoundingRect.8ea971a8.js","PooledRBush.9ed54ece.js","quickselect.b4c2f48f.js","QueryEngine.4ef027fc.js","normalizeUtils.371a33a9.js","ItemCache.42b41130.js","WhereClause.5c1a26b0.js","projection.b42b5b2c.js","json.67c3770f.js","QueryEngineCapabilities.9e441dc1.js","utils.2d1b9bc7.js","ClassBreaksDefinition.d63ecde7.js","geojson.f0fc29b6.js","sourceUtils.48cbf031.js","wfsUtils.131d615f.js","xmlUtils.5c7e57e0.js"],import.meta.url),WorkerTileHandler:()=>Re(()=>import("./WorkerTileHandler.b9699c69.js"),["WorkerTileHandler.b9699c69.js","StyleRepository.d16fd92b.js","enums2.96230668.js","enums.0a9daf41.js","VertexElementDescriptor.764350b6.js","colorUtils.0050d1da.js","Geometry.c655e876.js","TileClipper.2c322975.js","pbf.242b1286.js","earcut.330b1716.js"],import.meta.url)},{CLOSE:nx,ABORT:ox,INVOKE:ax,RESPONSE:ju,OPEN_PORT:lx,ON:RL}=br;class CL{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===br.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Tr{constructor(t,r){this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new CL(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const r=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const i=new Tr(r.port1,{channel:r,client:s});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=i),Tr.clients.set(i,s),r.port2}static loadWorker(t){const r=AL[t];return r?r():Promise.resolve(null)}close(){this._post({type:nx}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,s){const i=s&&s.signal,n=s&&s.transferList;if(!this._port)return Promise.reject(new F("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const a=qE();return new Promise((u,p)=>{const d=qf(i,()=>{var f;const y=this._outJobs.get(a);y&&(this._outJobs.delete(a),(f=y.abortHandle)==null||f.remove(),this._post({type:ox,jobId:a}),p(Xt()))}),h={resolve:u,reject:p,abortHandle:d,debugInfo:t};this._outJobs.set(a,h),this._post({type:ax,jobId:a,methodName:t,abortable:i!=null},r,n)})}on(t,r){const s=new MessageChannel;function i(n){r(n.data)}return this._port.postMessage({type:br.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",i),s.port1.start(),{remove(){s.port1.postMessage({type:br.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",i)}}}openPort(){const t=new MessageChannel;return this._post({type:lx,port:t.port2}),t.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{var r;(r=t.abortHandle)==null||r.remove(),t.reject(Xt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){R(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=yp(t);if(r)switch(r.type){case ju:this._onResponseMessage(r);break;case ax:this._invokeQueue.push(r);break;case ox:this._onAbortMessage(r);break;case nx:this._onCloseMessage();break;case lx:this._onOpenPortMessage(r);break;case RL:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,s=t.jobId,i=r.get(s);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),r.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Tr.clients.get(this)===t&&t.destroy(),Tr.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:s,data:i,abortable:n}=t,a=n?new AbortController:null,u=this._inJobs;let p,d=this._client,h=d[r];try{if(!h&&r&&r.indexOf(".")!==-1){const f=r.split(".");for(let y=0;y<f.length-1;y++)d=d[f[y]],h=d[f[y+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);p=h.call(d,i,{client:this,signal:a?a.signal:null})}catch(f){return void this._post({type:ju,jobId:s,error:vf(f)})}tu(p)?(u.set(s,{controller:a,promise:p}),p.then(f=>{u.has(s)&&(u.delete(s),this._post({type:ju,jobId:s},f))},f=>{u.has(s)&&(u.delete(s),zs(f)||this._post({type:ju,jobId:s,error:vf(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:ju,jobId:s},p)}_onOpenPortMessage(t){new Tr(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,s=this._client.on(t.eventType,n=>{r.postMessage(n)}),i=Tp(t.port,"message",n=>{yp(n).type===br.CLOSE&&(i.remove(),s.remove(),r.close())})}_onResponseMessage(t){var r;const{jobId:s,error:i,data:n}=t,a=this._outJobs;if(!a.has(s))return;const u=a.get(s);a.delete(s),(r=u.abortHandle)==null||r.remove(),i?u.reject(F.fromJSON(JSON.parse(i))):u.resolve(n)}_post(t,r,s){return BE(this._port,t,r,s)}}Tr.kernelInfo={revision:$O,version:Qb,buildDate:xO},Tr.clients=new Map;const FL=te.getLogger("esri.core.workers.Connection");class GE{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((s,i)=>{let n=!0;const a=u=>{Vs(r.signal),n&&(n=!1,u())};this._clients.length=t.length,this._clientPromises.length=t.length;for(let u=0;u<t.length;++u){const p=t[u];tu(p)?this._clientPromises[u]=p.then(d=>(this._clients[u]=new Tr(d,r),a(s),this._clients[u]),()=>(a(i),null)):(this._clients[u]=new Tr(p,r),this._clientPromises[u]=Promise.resolve(this._clients[u]),a(s))}})}broadcast(t,r,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const a=this._clientPromises[n];i[n]=a.then(u=>u.invoke(t,r,s))}return i}close(){for(const t of this._clientPromises)t.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let t;for(let r=0;r<this._clients.length;++r){const s=this._clients[r];if(s){if(!s.isBusy())return Promise.resolve(s)}else t=t||[],t.push(this._clientPromises[r])}return t?Promise.race(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(t,r,s){let i=null;return Array.isArray(s)?(FL.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:s}):i=s,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(n=>n.invoke(t,r,i))}on(t,r){return Promise.all(this._clientPromises).then(()=>Df(this._clients.map(s=>s.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let s=r.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(n=>{r[i]=n.openPort(),--s==0&&t(r)})})}get test(){return{numClients:this._clients.length}}}const kL=te.getLogger("esri.assets");function fu(e){if(!Qe.assetsPath)throw kL.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new F("assets:path-not-set","config.assetsPath is not set");return $a(Qe.assetsPath,e)}const JE=te.getLogger("esri.intl");function xw(e,t,r={}){const{format:s={}}=r;return $p(e,i=>PL(i,t,s))}function PL(e,t,r){let s,i;const n=e.indexOf(":");if(n===-1?s=e.trim():(s=e.slice(0,n).trim(),i=e.slice(n+1).trim()),!s)return"";const a=xp(s,t);if(a==null)return"";const u=r[i]||r[s];return u?NL(a,u):i?LL(a,i):$w(a)}function NL(e,t){switch(t.type){case"date":return xa(e,t.intlOptions);case"number":return Bl(e,t.intlOptions);default:return JE.warn("missing format descriptor for key {key}"),$w(e)}}function LL(e,t){switch(t.toLowerCase()){case"dateformat":return xa(e);case"numberformat":return Bl(e);default:return JE.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?xa(e):/^numberformat/i.test(t)?Bl(e):$w(e)}}function $w(e){switch(typeof e){case"string":return e;case"number":return Bl(e);case"boolean":return""+e;default:return e instanceof Date?xa(e):""}}const ux=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,DL={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function cx(e){var t;return(t=DL[e])!=null&&t}const yc=[],Al=new Map;function px(e){for(const t of Al.keys())HE(e.pattern,t)&&Al.delete(t)}function VL(e){return yc.includes(e)||(px(e),yc.unshift(e)),{remove(){const t=yc.indexOf(e);t>-1&&(yc.splice(t,1),px(e))}}}async function Iw(e){const t=Ds();Al.has(e)||Al.set(e,UL(e,t));const r=Al.get(e);return await qL.add(r),r}function zL(e){if(!ux.test(e))return null;const[,t,r]=ux.exec(e),s=t+(r?"-"+r.toUpperCase():"");return cx(s)?s:cx(t)?t:null}async function UL(e,t){const r=[];for(const s of yc)if(HE(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(i){r.push(i)}throw r.length?new F("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new F("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function HE(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}Sb(()=>{Al.clear()});const qL=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ma())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function BL(e,t,r,s){const i=t.exec(r);if(!i)throw new F("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=i[1]?`${i[1]}/`:"",a=i[2],u=zL(s),p=`${n}${a}.json`,d=u?`${n}${a}_${u}.json`:p;let h;try{h=await dx(e(d))}catch(f){if(d===p)throw new F("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await dx(e(p))}catch(y){throw new F("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:y})}}return h}async function dx(e){if(R(hx.fetchBundleAsset))return hx.fetchBundleAsset(e);const t=await mt(e,{responseType:"text"});return JSON.parse(t.data)}class GL{constructor({base:t="",pattern:r,location:s=new URL(window.location.href)}){let i;i=typeof s=="string"?n=>new URL(n,new URL(s,window.location.href)).href:s instanceof URL?n=>new URL(n,s).href:s,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=i,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return BL(this.getAssetUrl,this.matcher,t,r)}}function JL(e){return new GL(e)}const hx={};VL(JL({pattern:"esri/",location:fu}));const fx={};function HL(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}function WL(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:A({},e.has),map:A({},e.map),packages:e.packages&&e.packages.concat()||[],paths:A({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=fx.baseUrl),(t=fx.packages)==null||t.forEach(s=>{HL(r.packages,s)}),r}class KL{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...s)=>t[r](...s)})}}class Th{constructor(){this._dispatcher=new KL,this._workerPostMessage({type:br.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Zc(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,s){this._dispatcher.addEventListener(t,r,s)}removeEventListener(t,r,s){this._dispatcher.removeEventListener(t,r,s)}_workerPostMessage(t){Zc(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=yp(t);if(r&&r.type===br.OPEN){const{modulePath:s,jobId:i}=r;let n=await Tr.loadWorker(s);n||(n=await Re(()=>import(s),[],import.meta.url));const a=Tr.connect(n);this._workerPostMessage({type:br.OPENED,jobId:i,data:a})}}}const Ov=te.getLogger("esri.core.workers"),{HANDSHAKE:QL}=br,ZL='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let $d,Id;const yx="Failed to create Worker. Fallback to execute module in main thread";async function YL(){if(!k("esri-workers")||(k("mozilla"),0))return mx(new Th);if(!$d&&!Id)try{const t=ZL.replace('"{CONFIGURATION}"',`'${XL()}'`);$d=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Id=t||{}}let e;if($d)try{e=new Worker($d,{name:"esri-worker-"+e7++})}catch{Ov.warn(yx,Id),e=new Th}else Ov.warn(yx,Id),e=new Th;return mx(e)}async function mx(e){return new Promise(t=>{function r(i){const n=yp(i);n&&n.type===QL&&(e.removeEventListener("message",r),e.removeEventListener("error",s),t(e))}function s(i){i.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",s),Ov.warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new Th).addEventListener("message",r),e.addEventListener("error",s)}e.addEventListener("message",r),e.addEventListener("error",s)})}function XL(){let e;if(Qe.default!=null){const i=A({},Qe);delete i.default,e=JSON.parse(JSON.stringify(i))}else e=JSON.parse(JSON.stringify(Qe));e.assetsPath=ls(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Ds(),e.has={"esri-csp-restrictions":k("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":k("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":k("esri-2d-query-centroid-enabled"),"featurelayer-pbf":k("featurelayer-pbf"),"featurelayer-simplify-thresholds":k("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":k("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":k("featurelayer-simplify-mobile-factor"),"esri-atomics":k("esri-atomics"),"esri-shared-array-buffer":k("esri-shared-array-buffer"),"esri-tiles-debug":k("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":k("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ls(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ls(e.workers.workerPath):e.workers.workerPath=ls(fu("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Qe.workers.loaderConfig,r=WL({baseUrl:t==null?void 0:t.baseUrl,locale:Ds(),has:A({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:A({},t==null?void 0:t.map),paths:A({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),s={version:Qb,buildDate:xO,revision:$O};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:s})}let e7=0;const t7=te.getLogger("esri.core.workers"),{ABORT:gx,INVOKE:r7,OPEN:s7,OPENED:i7,RESPONSE:Au}=br;class Mw{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),t7.error(s)})}static async create(t){const r=await YL();return new Mw(r,t)}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:s}=r,i=qE();return new Promise((n,a)=>{const u={resolve:n,reject:a,abortHandle:qf(s,()=>{this._outJobs.delete(i),this._post({type:gx,jobId:i})})};this._outJobs.set(i,u),this._post({type:s7,jobId:i,modulePath:t})})}_onMessage(t){const r=yp(t);if(r)switch(r.type){case i7:this._onOpenedMessage(r);break;case Au:this._onResponseMessage(r);break;case gx:this._onAbortMessage(r);break;case r7:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,s=t.jobId,i=r.get(s);i&&(i.controller&&i.controller.abort(),r.delete(s))}_onInvokeMessage(t){const{methodName:r,jobId:s,data:i,abortable:n}=t,a=n?new AbortController:null,u=this._inJobs,p=e9[r];let d;try{if(typeof p!="function")throw new TypeError(`${r} is not a function`);d=p.call(null,i,{signal:a?a.signal:null})}catch(h){return void this._post({type:Au,jobId:s,error:vf(h)})}tu(d)?(u.set(s,{controller:a,promise:d}),d.then(h=>{u.has(s)&&(u.delete(s),this._post({type:Au,jobId:s},h))},h=>{u.has(s)&&(u.delete(s),h||(h={message:"Error encountered at method"+r}),zs(h)||this._post({type:Au,jobId:s,error:vf(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:Au,jobId:s},d)}_onOpenedMessage(t){var r;const{jobId:s,data:i}=t,n=this._outJobs.get(s);n&&(this._outJobs.delete(s),(r=n.abortHandle)==null||r.remove(),n.resolve(i))}_onResponseMessage(t){var r;const{jobId:s,error:i,data:n}=t,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),(r=a.abortHandle)==null||r.remove(),i?a.reject(F.fromJSON(JSON.parse(i))):a.resolve(n))}_post(t,r,s){return BE(this.worker,t,r,s)}}let na=k("esri-workers-debug")?1:k("host-browser")?navigator.hardwareConcurrency-1:0;na||(na=k("safari")&&k("mac")||k("trident")?7:2);let vx=0;const jh=[];async function Md(e,t){const r=new GE;return await r.open(e,t),r}async function WE(e,t={}){if(typeof e!="string")throw new F("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(k("host-webworker")&&!k("esri-workers")&&(r="local"),r==="local"){let s=await Tr.loadWorker(e);s||(s=await Re(()=>import(e),[],import.meta.url)),Vs(t.signal);const i=t.client||s;return Md([Tr.connect(s)],ve(A({},t),{client:i}))}if(await n7(),Vs(t.signal),r==="dedicated"){const s=vx++%na;return Md([await jh[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,na);if(s<na){const i=new Array(s);for(let n=0;n<s;++n){const a=vx++%na;i[n]=jh[a].open(e,t)}return Md(i,t)}}return Md(jh.map(s=>s.open(e,t)),t)}let Od=null;async function n7(){if(Od)return Od;new AbortController;const e=[];for(let t=0;t<na;t++){const r=Mw.create(t).then(s=>(jh[t]=s,s));e.push(r)}return Od=Promise.all(e),Od}function bx(e,t,r){if(e.hasM==null||e.hasZ)for(const s of t)for(const i of s)i.length>2&&(i[2]*=r)}function KE(e,t,r){if(!e&&!t||!r)return;const s=dp(r);wx(e,r,s),wx(t,r,s)}function wx(e,t,r){if(e)for(const s of e)o7(s.geometry,t,r)}function o7(e,t,r){if(ae(e)||!e.spatialReference||ru(e.spatialReference,t))return;const s=dp(e.spatialReference)/r;if(s!==1){if("x"in e)e.z!=null&&(e.z*=s);else if("rings"in e)bx(e,e.rings,s);else if("paths"in e)bx(e,e.paths,s);else if("points"in e&&(e.hasM==null||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=s)}}function QE(e,t,r){if(ae(t)||ae(r)||r.vcsWkid||ru(t,r))return null;const s=dp(t)/dp(r);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>a7(i,s);case"polyline":case"esriGeometryPolyline":return i=>u7(i,s);case"polygon":case"esriGeometryPolygon":return i=>l7(i,s);case"multipoint":case"esriGeometryMultipoint":return i=>c7(i,s);case"extent":case"esriGeometryExtent":return i=>p7(i,s);default:return null}}function a7(e,t){e&&e.z!=null&&(e.z*=t)}function l7(e,t){if(e)for(const r of e.rings)for(const s of r)s.length>2&&(s[2]*=t)}function u7(e,t){if(e)for(const r of e.paths)for(const s of r)s.length>2&&(s[2]*=t)}function c7(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function p7(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function Ev(e,t,r){if(!r||!r.features||!r.hasZ)return;const s=QE(r.geometryType,t,e.outSpatialReference);if(!ae(s))for(const i of r.features)s(i.geometry)}const ZE=new xe({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var Tv;const d7=new xe({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let mr=Tv=class extends D{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?d7.fromJSON(r.fieldValueType):null}clone(){return new Tv({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};o([c({type:String,json:{write:!0}})],mr.prototype,"alias",void 0),o([c({type:[String,Number],json:{write:{allowNull:!0}}})],mr.prototype,"defaultValue",void 0),o([c()],mr.prototype,"description",void 0),o([Y("description")],mr.prototype,"readDescription",null),o([c({types:AE,json:{read:{reader:bw},write:!0}})],mr.prototype,"domain",void 0),o([c({type:Boolean,json:{write:!0}})],mr.prototype,"editable",void 0),o([c({type:At,json:{write:!0}})],mr.prototype,"length",void 0),o([c({type:String,json:{write:!0}})],mr.prototype,"name",void 0),o([c({type:Boolean,json:{write:!0}})],mr.prototype,"nullable",void 0),o([de(ZE)],mr.prototype,"type",void 0),o([c()],mr.prototype,"valueType",void 0),o([Y("valueType",["description"])],mr.prototype,"readValueType",null),mr=Tv=o([b("esri.layers.support.Field")],mr);const yy=mr;var jv;const Av=new xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ut=jv=class extends D{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=ke.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const n=e[i],a=sn.fromJSON(n),u=n.geometry&&n.geometry.spatialReference;R(a.geometry)&&!u&&(a.geometry.spatialReference=r);const p=n.aggregateGeometries,d=a.aggregateGeometries;if(p&&R(d))for(const h in d){const f=d[h],y=p[h],m=y==null?void 0:y.spatialReference;R(f)&&!m&&(f.spatialReference=r)}s.push(a)}return s}writeGeometryType(e,t,r,s){if(e)return void Av.write(e,t,r,s);const{features:i}=this;if(i){for(const n of i)if(n&&R(n.geometry))return void Av.write(n.geometry.type,t,r,s)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,s=Hr(e);return!r&&t.spatialReference&&(s.spatialReference=ke.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const s of r)if(s&&R(s.geometry)&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new jv(this.cloneProperties())}cloneProperties(){return j({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const s=t.features[r];if(s.geometry){const i=e&&e[r];s.geometry=i&&i.toJSON()||s.geometry}}return t}quantize(e){const{scale:[t,r],translate:[s,i]}=e,n=d=>Math.round((d-s)/t),a=d=>Math.round((i-d)/r),u=this.features,p=this._getQuantizationFunction(this.geometryType,n,a);for(let d=0,h=u.length;d<h;d++)p(u[d].geometry)||(u.splice(d,1),d--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[s,i],scale:[n,a]}=r,u=h=>h*n+s,p=h=>i-h*a,d=this._getHydrationFunction(e,u,p);for(const{geometry:h}of t)R(h)&&d(h);return this.transform=null,this}_quantizePoints(e,t,r){let s,i;const n=[];for(let a=0,u=e.length;a<u;a++){const p=e[a];if(a>0){const d=t(p[0]),h=r(p[1]);d===s&&h===i||(n.push([d-s,h-i]),s=d,i=h)}else s=t(p[0]),i=r(p[1]),n.push([s,i])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return e==="point"?s=>(s.x=t(s.x),s.y=r(s.y),s):e==="polyline"||e==="polygon"?s=>{const i=Tl(s)?s.rings:s.paths,n=[];for(let a=0,u=i.length;a<u;a++){const p=i[a],d=this._quantizePoints(p,t,r);d&&n.push(d)}return n.length>0?(Tl(s)?s.rings=n:s.paths=n,s):null}:e==="multipoint"?s=>{const i=this._quantizePoints(s.points,t,r);return i.length>0?(s.points=i,s):null}:e==="extent"?s=>s:null}_getHydrationFunction(e,t,r){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y)}:e==="polyline"||e==="polygon"?s=>{const i=Tl(s)?s.rings:s.paths;let n,a;for(let u=0,p=i.length;u<p;u++){const d=i[u];for(let h=0,f=d.length;h<f;h++){const y=d[h];h>0?(n+=y[0],a+=y[1]):(n=y[0],a=y[1]),y[0]=t(n),y[1]=r(a)}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax)}:e==="multipoint"?s=>{const i=s.points;let n,a;for(let u=0,p=i.length;u<p;u++){const d=i[u];u>0?(n+=d[0],a+=d[1]):(n=d[0],a=d[1]),d[0]=t(n),d[1]=r(a)}}:void 0}};o([c({type:String,json:{write:!0}})],Ut.prototype,"displayFieldName",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ut.prototype,"exceededTransferLimit",void 0),o([c({type:[sn],json:{write:!0}})],Ut.prototype,"features",void 0),o([Y("features")],Ut.prototype,"readFeatures",null),o([c({type:[yy],json:{write:!0}})],Ut.prototype,"fields",void 0),o([c({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Av.read}}})],Ut.prototype,"geometryType",void 0),o([re("geometryType")],Ut.prototype,"writeGeometryType",null),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ut.prototype,"hasM",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ut.prototype,"hasZ",void 0),o([c({types:Oa,json:{write:!0}})],Ut.prototype,"queryGeometry",void 0),o([Y("queryGeometry")],Ut.prototype,"readQueryGeometry",null),o([c({type:ke,json:{write:!0}})],Ut.prototype,"spatialReference",void 0),o([re("spatialReference")],Ut.prototype,"writeSpatialReference",null),o([c({json:{write:!0}})],Ut.prototype,"transform",void 0),Ut=jv=o([b("esri.rest.support.FeatureSet")],Ut),Ut.prototype.toJSON.isDefaultToJSON=!0;const my=Ut;var h7=Object.freeze(Object.defineProperty({__proto__:null,default:my},Symbol.toStringTag,{value:"Module"}));let f7=0;const ym=te.getLogger("esri.layers.graphics.sources.MemorySource");let jn=class extends zp.LoadableMixin(ay(Sw(ut))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=R(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var e;const t=(e=this.layer)==null?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);Ev(e,this.layer.spatialReference,r);const s=my.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const i=this.layer.objectIdField;for(const n of s.features){const a=n.attributes[i],u=this._idToClientGraphic.get(a);u&&(n.geometry=u.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new F("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return Ev(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:Mt.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new F("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const s=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[t]!=null?d.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const h=n(d);h!=null&&s.push(h)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(i.push(this._serializeFeature(d)),a){const h=n(d);h!=null&&a.set(h,d)}}KE(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:u,featureEditResults:p}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:s});return this.fullExtent=u,r&&r.finish(p.uidToObjectId),this._updateClientGraphicIds(a,p),this._createEditsResult(p)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||ae(e))return;const r=[];for(const{geometry:s}of e)!R(s)||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new F("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let s=null;for(let n=0;n<e.length;n++){const a=e[n],u=this._serializeFeature(a);!s&&R(a.geometry)&&(s=a.geometry.type),r[n]=u,t.set(`${u.uid}`,a)}const i=this;return{features:r,inferredGeometryType:s,finish(n){const a=i.sourceJSON.objectIdField;for(const u in n){const p=n[u],d=t.get(u);d&&(d.attributes||(d.attributes={}),p===-1?delete d.attributes[a]:d.attributes[a]=p,i._addIdToClientGraphic(d))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];r!=null&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){var e,t,r;return(e=(t=this.layer)==null?void 0:t.geometryType)!=null?e:(r=this.sourceJSON)==null?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),s=(f7++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ae(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Ma.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await WE("MemorySourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:s,hasM:i,hasZ:n,timeInfo:a}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const p=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{ym.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const d={features:p.features,fields:t&&t.map(y=>y.toJSON()),geometryType:lg.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&i,hasZ:this.layerOrSourceGeometryType==="mesh"||n,objectIdField:s,spatialReference:u?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},h=await this._connection.invoke("load",d,{signal:e});for(const y of h.warnings)ym.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&ym.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(p.inferredGeometryType)&&(f.geometryType=lg.toJSON(p.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),p.finish(h.assignedObjectIds)}};o([rb({Type:sn,ensureType:rt(sn)})],jn.prototype,"itemType",void 0),o([c()],jn.prototype,"type",void 0),o([c({constructOnly:!0})],jn.prototype,"layer",void 0),o([c({readOnly:!0})],jn.prototype,"workerGeometryType",null),o([c()],jn.prototype,"sourceJSON",void 0),jn=o([b("esri.layers.graphics.sources.MemorySource")],jn);const _x=jn;function y7(e){return"portalItem"in e}const YE=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):y7(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return o([c({type:String})],t.prototype,"apiKey",null),t=o([b("esri.layers.mixins.APIKeyMixin")],t),t},XE={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},eT=Object.values(XE),tT=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eT.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),m7=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${eT.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),g7=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function v7(e){return!!tT.test(e)}function Gp(e){const t=Cr(e),r=t.path.match(tT)||t.path.match(m7);if(!r)return null;const[,s,i,n,a]=r,u=i.indexOf("/");return{title:gy(u!==-1?i.slice(u+1):i),serverType:XE[n.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:s}}}function rT(e){const t=Cr(e).path.match(g7);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function gy(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function sT(e,t){const r=[];if(e){const s=Gp(e);R(s)&&s.title&&r.push(s.title)}if(t){const s=gy(t);r.push(s)}if(r.length===2){if(r[0].toLowerCase().indexOf(r[1].toLowerCase())!==-1)return r[0];if(r[1].toLowerCase().indexOf(r[0].toLowerCase())!==-1)return r[1]}return r.join(" - ")}function Ow(e){if(!e)return!1;const t=".arcgis.com/",r="//services",s="//tiles",i="//features",n=(e=e.toLowerCase()).indexOf(t)!==-1,a=e.indexOf(r)!==-1||e.indexOf(s)!==-1||e.indexOf(i)!==-1;return n&&a}function iT(e,t){return e&&Kb(vO(e,t))}function nT(e){let{url:t}=e;if(!t)return{url:t};t=vO(t,e.logger);const r=Cr(t),s=Gp(r.path);let i;if(R(s))s.sublayer!=null&&e.layer.layerId==null&&(i=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const n=rT(r.path);R(n)&&(t=n.serviceUrl,i=n.sublayerId)}return{url:Kb(t),layerId:i}}function oT(e,t,r,s,i){ro(t,s,"url",i),s.url&&e.layerId!=null&&(s.url=$a(s.url,r,e.layerId.toString()))}function b7(e){if(!e)return!1;const t=e.toLowerCase(),r=t.indexOf("/services/")!==-1,s=t.indexOf("/mapserver/wmsserver")!==-1,i=t.indexOf("/imageserver/wmsserver")!==-1,n=t.indexOf("/wmsserver")!==-1;return r&&(s||i||n)}const aT=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Gp(this.url);if(R(r)&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",iT(r,te.getLogger(this.declaredClass)))}};return o([c()],t.prototype,"title",null),o([c({type:String})],t.prototype,"url",null),t=o([b("esri.layers.mixins.ArcGISService")],t),t};function Jp(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function w7(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _7(e,t,r,s,i,n,a,u,p,d,h,f,y,m,v,S){const _=new Float32Array(16);return _[0]=e,_[1]=t,_[2]=r,_[3]=s,_[4]=i,_[5]=n,_[6]=a,_[7]=u,_[8]=p,_[9]=d,_[10]=h,_[11]=f,_[12]=y,_[13]=m,_[14]=v,_[15]=S,_}function S7(e,t){return new Float32Array(e,t,16)}const x7=Jp();Object.freeze({__proto__:null,create:Jp,clone:w7,fromValues:_7,createView:S7,IDENTITY:x7});function $7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function co(e,t,r,s,i,n,a,u,p,d,h,f,y,m,v,S,_){return e[0]=t,e[1]=r,e[2]=s,e[3]=i,e[4]=n,e[5]=a,e[6]=u,e[7]=p,e[8]=d,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=v,e[14]=S,e[15]=_,e}function Ew(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function un(e,t){if(e===t){const r=t[1],s=t[2],i=t[3],n=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=n,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function lT(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],a=t[4],u=t[5],p=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],v=t[12],S=t[13],_=t[14],M=t[15],P=r*u-s*a,N=r*p-i*a,z=r*d-n*a,V=s*p-i*u,H=s*d-n*u,be=i*d-n*p,le=h*S-f*v,he=h*_-y*v,ue=h*M-m*v,we=f*_-y*S,Ee=f*M-m*S,Pe=y*M-m*_;let fe=P*Pe-N*Ee+z*we+V*ue-H*he+be*le;return fe?(fe=1/fe,e[0]=(u*Pe-p*Ee+d*we)*fe,e[1]=(i*Ee-s*Pe-n*we)*fe,e[2]=(S*be-_*H+M*V)*fe,e[3]=(y*H-f*be-m*V)*fe,e[4]=(p*ue-a*Pe-d*he)*fe,e[5]=(r*Pe-i*ue+n*he)*fe,e[6]=(_*z-v*be-M*N)*fe,e[7]=(h*be-y*z+m*N)*fe,e[8]=(a*Ee-u*ue+d*le)*fe,e[9]=(s*ue-r*Ee-n*le)*fe,e[10]=(v*H-S*z+M*P)*fe,e[11]=(f*z-h*H-m*P)*fe,e[12]=(u*he-a*we-p*le)*fe,e[13]=(r*we-s*he+i*le)*fe,e[14]=(S*N-v*V-_*P)*fe,e[15]=(h*V-f*N+y*P)*fe,e):null}function I7(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],a=t[4],u=t[5],p=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],v=t[12],S=t[13],_=t[14],M=t[15];return e[0]=u*(y*M-m*_)-f*(p*M-d*_)+S*(p*m-d*y),e[1]=-(s*(y*M-m*_)-f*(i*M-n*_)+S*(i*m-n*y)),e[2]=s*(p*M-d*_)-u*(i*M-n*_)+S*(i*d-n*p),e[3]=-(s*(p*m-d*y)-u*(i*m-n*y)+f*(i*d-n*p)),e[4]=-(a*(y*M-m*_)-h*(p*M-d*_)+v*(p*m-d*y)),e[5]=r*(y*M-m*_)-h*(i*M-n*_)+v*(i*m-n*y),e[6]=-(r*(p*M-d*_)-a*(i*M-n*_)+v*(i*d-n*p)),e[7]=r*(p*m-d*y)-a*(i*m-n*y)+h*(i*d-n*p),e[8]=a*(f*M-m*S)-h*(u*M-d*S)+v*(u*m-d*f),e[9]=-(r*(f*M-m*S)-h*(s*M-n*S)+v*(s*m-n*f)),e[10]=r*(u*M-d*S)-a*(s*M-n*S)+v*(s*d-n*u),e[11]=-(r*(u*m-d*f)-a*(s*m-n*f)+h*(s*d-n*u)),e[12]=-(a*(f*_-y*S)-h*(u*_-p*S)+v*(u*y-p*f)),e[13]=r*(f*_-y*S)-h*(s*_-i*S)+v*(s*y-i*f),e[14]=-(r*(u*_-p*S)-a*(s*_-i*S)+v*(s*p-i*u)),e[15]=r*(u*y-p*f)-a*(s*y-i*f)+h*(s*p-i*u),e}function M7(e){const t=e[0],r=e[1],s=e[2],i=e[3],n=e[4],a=e[5],u=e[6],p=e[7],d=e[8],h=e[9],f=e[10],y=e[11],m=e[12],v=e[13],S=e[14],_=e[15];return(t*a-r*n)*(f*_-y*S)-(t*u-s*n)*(h*_-y*v)+(t*p-i*n)*(h*S-f*v)+(r*u-s*a)*(d*_-y*m)-(r*p-i*a)*(d*S-f*m)+(s*p-i*u)*(d*v-h*m)}function Tw(e,t,r){const s=t[0],i=t[1],n=t[2],a=t[3],u=t[4],p=t[5],d=t[6],h=t[7],f=t[8],y=t[9],m=t[10],v=t[11],S=t[12],_=t[13],M=t[14],P=t[15];let N=r[0],z=r[1],V=r[2],H=r[3];return e[0]=N*s+z*u+V*f+H*S,e[1]=N*i+z*p+V*y+H*_,e[2]=N*n+z*d+V*m+H*M,e[3]=N*a+z*h+V*v+H*P,N=r[4],z=r[5],V=r[6],H=r[7],e[4]=N*s+z*u+V*f+H*S,e[5]=N*i+z*p+V*y+H*_,e[6]=N*n+z*d+V*m+H*M,e[7]=N*a+z*h+V*v+H*P,N=r[8],z=r[9],V=r[10],H=r[11],e[8]=N*s+z*u+V*f+H*S,e[9]=N*i+z*p+V*y+H*_,e[10]=N*n+z*d+V*m+H*M,e[11]=N*a+z*h+V*v+H*P,N=r[12],z=r[13],V=r[14],H=r[15],e[12]=N*s+z*u+V*f+H*S,e[13]=N*i+z*p+V*y+H*_,e[14]=N*n+z*d+V*m+H*M,e[15]=N*a+z*h+V*v+H*P,e}function uT(e,t,r){const s=r[0],i=r[1],n=r[2];let a,u,p,d,h,f,y,m,v,S,_,M;return t===e?(e[12]=t[0]*s+t[4]*i+t[8]*n+t[12],e[13]=t[1]*s+t[5]*i+t[9]*n+t[13],e[14]=t[2]*s+t[6]*i+t[10]*n+t[14],e[15]=t[3]*s+t[7]*i+t[11]*n+t[15]):(a=t[0],u=t[1],p=t[2],d=t[3],h=t[4],f=t[5],y=t[6],m=t[7],v=t[8],S=t[9],_=t[10],M=t[11],e[0]=a,e[1]=u,e[2]=p,e[3]=d,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=v,e[9]=S,e[10]=_,e[11]=M,e[12]=a*s+h*i+v*n+t[12],e[13]=u*s+f*i+S*n+t[13],e[14]=p*s+y*i+_*n+t[14],e[15]=d*s+m*i+M*n+t[15]),e}function cT(e,t,r){const s=r[0],i=r[1],n=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function pT(e,t,r,s){let i,n,a,u,p,d,h,f,y,m,v,S,_,M,P,N,z,V,H,be,le,he,ue,we,Ee=s[0],Pe=s[1],fe=s[2],ct=Math.sqrt(Ee*Ee+Pe*Pe+fe*fe);return ct<We?null:(ct=1/ct,Ee*=ct,Pe*=ct,fe*=ct,i=Math.sin(r),n=Math.cos(r),a=1-n,u=t[0],p=t[1],d=t[2],h=t[3],f=t[4],y=t[5],m=t[6],v=t[7],S=t[8],_=t[9],M=t[10],P=t[11],N=Ee*Ee*a+n,z=Pe*Ee*a+fe*i,V=fe*Ee*a-Pe*i,H=Ee*Pe*a-fe*i,be=Pe*Pe*a+n,le=fe*Pe*a+Ee*i,he=Ee*fe*a+Pe*i,ue=Pe*fe*a-Ee*i,we=fe*fe*a+n,e[0]=u*N+f*z+S*V,e[1]=p*N+y*z+_*V,e[2]=d*N+m*z+M*V,e[3]=h*N+v*z+P*V,e[4]=u*H+f*be+S*le,e[5]=p*H+y*be+_*le,e[6]=d*H+m*be+M*le,e[7]=h*H+v*be+P*le,e[8]=u*he+f*ue+S*we,e[9]=p*he+y*ue+_*we,e[10]=d*he+m*ue+M*we,e[11]=h*he+v*ue+P*we,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function O7(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[4],a=t[5],u=t[6],p=t[7],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*i+d*s,e[5]=a*i+h*s,e[6]=u*i+f*s,e[7]=p*i+y*s,e[8]=d*i-n*s,e[9]=h*i-a*s,e[10]=f*i-u*s,e[11]=y*i-p*s,e}function E7(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[0],a=t[1],u=t[2],p=t[3],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*i-d*s,e[1]=a*i-h*s,e[2]=u*i-f*s,e[3]=p*i-y*s,e[8]=n*s+d*i,e[9]=a*s+h*i,e[10]=u*s+f*i,e[11]=p*s+y*i,e}function T7(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[0],a=t[1],u=t[2],p=t[3],d=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*i+d*s,e[1]=a*i+h*s,e[2]=u*i+f*s,e[3]=p*i+y*s,e[4]=d*i-n*s,e[5]=h*i-a*s,e[6]=f*i-u*s,e[7]=y*i-p*s,e}function dT(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function hT(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fT(e,t,r){let s,i,n,a=r[0],u=r[1],p=r[2],d=Math.sqrt(a*a+u*u+p*p);return d<We?null:(d=1/d,a*=d,u*=d,p*=d,s=Math.sin(t),i=Math.cos(t),n=1-i,e[0]=a*a*n+i,e[1]=u*a*n+p*s,e[2]=p*a*n-u*s,e[3]=0,e[4]=a*u*n-p*s,e[5]=u*u*n+i,e[6]=p*u*n+a*s,e[7]=0,e[8]=a*p*n+u*s,e[9]=u*p*n-a*s,e[10]=p*p*n+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function yT(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j7(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A7(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mT(e,t,r){const s=t[0],i=t[1],n=t[2],a=t[3],u=s+s,p=i+i,d=n+n,h=s*u,f=s*p,y=s*d,m=i*p,v=i*d,S=n*d,_=a*u,M=a*p,P=a*d;return e[0]=1-(m+S),e[1]=f+P,e[2]=y-M,e[3]=0,e[4]=f-P,e[5]=1-(h+S),e[6]=v+_,e[7]=0,e[8]=y+M,e[9]=v-_,e[10]=1-(h+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function R7(e,t){const r=C7,s=-t[0],i=-t[1],n=-t[2],a=t[3],u=t[4],p=t[5],d=t[6],h=t[7],f=s*s+i*i+n*n+a*a;return f>0?(r[0]=2*(u*a+h*s+p*n-d*i)/f,r[1]=2*(p*a+h*i+d*s-u*n)/f,r[2]=2*(d*a+h*n+u*i-p*s)/f):(r[0]=2*(u*a+h*s+p*n-d*i),r[1]=2*(p*a+h*i+d*s-u*n),r[2]=2*(d*a+h*n+u*i-p*s)),mT(e,t,r),e}const C7=ja();function F7(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function k7(e,t){const r=t[0],s=t[1],i=t[2],n=t[4],a=t[5],u=t[6],p=t[8],d=t[9],h=t[10];return e[0]=Math.sqrt(r*r+s*s+i*i),e[1]=Math.sqrt(n*n+a*a+u*u),e[2]=Math.sqrt(p*p+d*d+h*h),e}function P7(e,t){const r=t[0]+t[5]+t[10];let s=0;return r>0?(s=2*Math.sqrt(r+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function N7(e,t,r,s){const i=t[0],n=t[1],a=t[2],u=t[3],p=i+i,d=n+n,h=a+a,f=i*p,y=i*d,m=i*h,v=n*d,S=n*h,_=a*h,M=u*p,P=u*d,N=u*h,z=s[0],V=s[1],H=s[2];return e[0]=(1-(v+_))*z,e[1]=(y+N)*z,e[2]=(m-P)*z,e[3]=0,e[4]=(y-N)*V,e[5]=(1-(f+_))*V,e[6]=(S+M)*V,e[7]=0,e[8]=(m+P)*H,e[9]=(S-M)*H,e[10]=(1-(f+v))*H,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function L7(e,t,r,s,i){const n=t[0],a=t[1],u=t[2],p=t[3],d=n+n,h=a+a,f=u+u,y=n*d,m=n*h,v=n*f,S=a*h,_=a*f,M=u*f,P=p*d,N=p*h,z=p*f,V=s[0],H=s[1],be=s[2],le=i[0],he=i[1],ue=i[2],we=(1-(S+M))*V,Ee=(m+z)*V,Pe=(v-N)*V,fe=(m-z)*H,ct=(1-(y+M))*H,st=(_+P)*H,$e=(v+N)*be,Ve=(_-P)*be,Jt=(1-(y+S))*be;return e[0]=we,e[1]=Ee,e[2]=Pe,e[3]=0,e[4]=fe,e[5]=ct,e[6]=st,e[7]=0,e[8]=$e,e[9]=Ve,e[10]=Jt,e[11]=0,e[12]=r[0]+le-(we*le+fe*he+$e*ue),e[13]=r[1]+he-(Ee*le+ct*he+Ve*ue),e[14]=r[2]+ue-(Pe*le+st*he+Jt*ue),e[15]=1,e}function D7(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],a=r+r,u=s+s,p=i+i,d=r*a,h=s*a,f=s*u,y=i*a,m=i*u,v=i*p,S=n*a,_=n*u,M=n*p;return e[0]=1-f-v,e[1]=h+M,e[2]=y-_,e[3]=0,e[4]=h-M,e[5]=1-d-v,e[6]=m+S,e[7]=0,e[8]=y+_,e[9]=m-S,e[10]=1-d-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function V7(e,t,r,s,i,n,a){const u=1/(r-t),p=1/(i-s),d=1/(n-a);return e[0]=2*n*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*p,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(i+s)*p,e[10]=(a+n)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n*2*d,e[15]=0,e}function z7(e,t,r,s,i){const n=1/Math.tan(t/2);let a;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(s-i),e[10]=(i+s)*a,e[14]=2*i*s*a):(e[10]=-1,e[14]=-2*s),e}function U7(e,t,r,s){const i=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),p=2/(a+u),d=2/(i+n);return e[0]=p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(a-u)*p*.5,e[9]=(i-n)*d*.5,e[10]=s/(r-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*r/(r-s),e[15]=0,e}function q7(e,t,r,s,i,n,a){const u=1/(t-r),p=1/(s-i),d=1/(n-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+r)*u,e[13]=(i+s)*p,e[14]=(a+n)*d,e[15]=1,e}function B7(e,t,r,s){let i,n,a,u,p,d,h,f,y,m;const v=t[0],S=t[1],_=t[2],M=s[0],P=s[1],N=s[2],z=r[0],V=r[1],H=r[2];return Math.abs(v-z)<We&&Math.abs(S-V)<We&&Math.abs(_-H)<We?Ew(e):(h=v-z,f=S-V,y=_-H,m=1/Math.sqrt(h*h+f*f+y*y),h*=m,f*=m,y*=m,i=P*y-N*f,n=N*h-M*y,a=M*f-P*h,m=Math.sqrt(i*i+n*n+a*a),m?(m=1/m,i*=m,n*=m,a*=m):(i=0,n=0,a=0),u=f*a-y*n,p=y*i-h*a,d=h*n-f*i,m=Math.sqrt(u*u+p*p+d*d),m?(m=1/m,u*=m,p*=m,d*=m):(u=0,p=0,d=0),e[0]=i,e[1]=u,e[2]=h,e[3]=0,e[4]=n,e[5]=p,e[6]=f,e[7]=0,e[8]=a,e[9]=d,e[10]=y,e[11]=0,e[12]=-(i*v+n*S+a*_),e[13]=-(u*v+p*S+d*_),e[14]=-(h*v+f*S+y*_),e[15]=1,e)}function G7(e,t,r,s){const i=t[0],n=t[1],a=t[2],u=s[0],p=s[1],d=s[2];let h=i-r[0],f=n-r[1],y=a-r[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let v=p*y-d*f,S=d*h-u*y,_=u*f-p*h;return m=v*v+S*S+_*_,m>0&&(m=1/Math.sqrt(m),v*=m,S*=m,_*=m),e[0]=v,e[1]=S,e[2]=_,e[3]=0,e[4]=f*_-y*S,e[5]=y*v-h*_,e[6]=h*S-f*v,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=i,e[13]=n,e[14]=a,e[15]=1,e}function J7(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function H7(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function W7(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function gT(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function K7(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Q7(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e[4]=t[4]+r[4]*s,e[5]=t[5]+r[5]*s,e[6]=t[6]+r[6]*s,e[7]=t[7]+r[7]*s,e[8]=t[8]+r[8]*s,e[9]=t[9]+r[9]*s,e[10]=t[10]+r[10]*s,e[11]=t[11]+r[11]*s,e[12]=t[12]+r[12]*s,e[13]=t[13]+r[13]*s,e[14]=t[14]+r[14]*s,e[15]=t[15]+r[15]*s,e}function vT(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function bT(e,t){if(e===t)return!0;const r=e[0],s=e[1],i=e[2],n=e[3],a=e[4],u=e[5],p=e[6],d=e[7],h=e[8],f=e[9],y=e[10],m=e[11],v=e[12],S=e[13],_=e[14],M=e[15],P=t[0],N=t[1],z=t[2],V=t[3],H=t[4],be=t[5],le=t[6],he=t[7],ue=t[8],we=t[9],Ee=t[10],Pe=t[11],fe=t[12],ct=t[13],st=t[14],$e=t[15];return Math.abs(r-P)<=We*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(s-N)<=We*Math.max(1,Math.abs(s),Math.abs(N))&&Math.abs(i-z)<=We*Math.max(1,Math.abs(i),Math.abs(z))&&Math.abs(n-V)<=We*Math.max(1,Math.abs(n),Math.abs(V))&&Math.abs(a-H)<=We*Math.max(1,Math.abs(a),Math.abs(H))&&Math.abs(u-be)<=We*Math.max(1,Math.abs(u),Math.abs(be))&&Math.abs(p-le)<=We*Math.max(1,Math.abs(p),Math.abs(le))&&Math.abs(d-he)<=We*Math.max(1,Math.abs(d),Math.abs(he))&&Math.abs(h-ue)<=We*Math.max(1,Math.abs(h),Math.abs(ue))&&Math.abs(f-we)<=We*Math.max(1,Math.abs(f),Math.abs(we))&&Math.abs(y-Ee)<=We*Math.max(1,Math.abs(y),Math.abs(Ee))&&Math.abs(m-Pe)<=We*Math.max(1,Math.abs(m),Math.abs(Pe))&&Math.abs(v-fe)<=We*Math.max(1,Math.abs(v),Math.abs(fe))&&Math.abs(S-ct)<=We*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(_-st)<=We*Math.max(1,Math.abs(_),Math.abs(st))&&Math.abs(M-$e)<=We*Math.max(1,Math.abs(M),Math.abs($e))}function wT(e){const t=We,r=e[0],s=e[1],i=e[2],n=e[4],a=e[5],u=e[6],p=e[8],d=e[9],h=e[10];return Math.abs(1-(r*r+n*n+p*p))<=t&&Math.abs(1-(s*s+a*a+d*d))<=t&&Math.abs(1-(i*i+u*u+h*h))<=t}const Z7=Tw,Y7=gT;Object.freeze({__proto__:null,copy:$7,set:co,identity:Ew,transpose:un,invert:lT,adjoint:I7,determinant:M7,multiply:Tw,translate:uT,scale:cT,rotate:pT,rotateX:O7,rotateY:E7,rotateZ:T7,fromTranslation:dT,fromScaling:hT,fromRotation:fT,fromXRotation:yT,fromYRotation:j7,fromZRotation:A7,fromRotationTranslation:mT,fromQuat2:R7,getTranslation:F7,getScaling:k7,getRotation:P7,fromRotationTranslationScale:N7,fromRotationTranslationScaleOrigin:L7,fromQuat:D7,frustum:V7,perspective:z7,perspectiveFromFieldOfView:U7,ortho:q7,lookAt:B7,targetTo:G7,str:J7,frob:H7,add:W7,subtract:gT,multiplyScalar:K7,multiplyScalarAndAdd:Q7,exactEquals:vT,equals:bT,isOrthoNormal:wT,mul:Z7,sub:Y7});const X7=(e,t)=>{const r=co(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return un(r,r)},eD=(e,t)=>{const r=co(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return un(r,r)},tD=(e,t)=>{const r=1-t,s=co(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return un(s,s)},rD=(e,t)=>{const r=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),i=co(e,.213+.787*s-.213*r,.715-.715*s-.715*r,.072-.072*s+.928*r,0,.213-.213*s+.143*r,.715+.285*s+.14*r,.072-.072*s-.283*r,0,.213-.213*s-.787*r,.715-.715*s+.715*r,.072+.928*s+.072*r,0,0,0,0,1);return un(i,i)},sD=(e,t)=>{const r=1-2*t,s=co(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return un(s,s)},iD=(e,t)=>{const r=co(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return un(r,r)},nD=(e,t)=>{const r=1-t,s=co(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return un(s,s)};class vy{constructor(t,r,s){this.strength=t,this.radius=r,this.threshold=s,this.type="bloom"}interpolate(t,r,s){this.strength=Er(t.strength,r.strength,s),this.radius=Er(t.radius,r.radius,s),this.threshold=Er(t.threshold,r.threshold,s)}clone(){return new vy(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Lc(this.radius),strength:this.strength,threshold:this.threshold}}}class by{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,s){this.radius=Math.round(Er(t.radius,r.radius,s))}clone(){return new by(this.radius)}toJSON(){return{type:"blur",radius:Lc(this.radius)}}}class mp{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,s){this.amount=Er(t.amount,r.amount,s),this._updateMatrix()}clone(){return new mp(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Jp();switch(this.type){case"brightness":this._colorMatrix=X7(t,this.amount);break;case"contrast":this._colorMatrix=eD(t,this.amount);break;case"grayscale":this._colorMatrix=tD(t,this.amount);break;case"invert":this._colorMatrix=sD(t,this.amount);break;case"saturate":this._colorMatrix=iD(t,this.amount);break;case"sepia":this._colorMatrix=nD(t,this.amount)}}}class wy{constructor(t,r,s,i){this.offsetX=t,this.offsetY=r,this.blurRadius=s,this.color=i,this.type="drop-shadow"}interpolate(t,r,s){this.offsetX=Er(t.offsetX,r.offsetX,s),this.offsetY=Er(t.offsetY,r.offsetY,s),this.blurRadius=Er(t.blurRadius,r.blurRadius,s),this.color[0]=Math.round(Er(t.color[0],r.color[0],s)),this.color[1]=Math.round(Er(t.color[1],r.color[1],s)),this.color[2]=Math.round(Er(t.color[2],r.color[2],s)),this.color[3]=Er(t.color[3],r.color[3],s)}clone(){return new wy(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Lc(this.offsetX),yoffset:Lc(this.offsetY),blurRadius:Lc(this.blurRadius),color:t}}}class _y{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,s){this.angle=Er(t.angle,r.angle,s),this._updateMatrix()}clone(){return new _y(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Jp();this._colorMatrix=rD(t,this.angle)}}class Sy{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,s){this.amount=Er(t.amount,r.amount,s)}clone(){return new Sy(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Er(e,t,r){return e+(t-e)*r}function Lc(e){return Math.round(1e3*rn(e))/1e3}function oD(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new mp(e.type,0);case"saturate":case"brightness":case"contrast":return new mp(e.type,1);case"opacity":return new Sy(1);case"hue-rotate":return new _y(0);case"blur":return new by(0);case"drop-shadow":return new wy(0,0,0,[...Ob("transparent")]);case"bloom":return new vy(0,0,1)}}function aD(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,i)=>s.type===r[i].type)}function lD(e,t){const r=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let i=s.length;i<r.length;i++)s.push(oD(r[i]))}function uD(e){const t=e[0];return!!t&&"type"in t}var Sx,xx,_T={exports:{}};function ST(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=$x(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new F("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:$x(r.value)}});t.sort((r,s)=>s.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!aD(t[r].effects,t[r+1].effects))throw new F("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});lD(t[r].effects,t[r+1].effects)}return t.sort((r,s)=>s.scale-r.scale),t}function $x(e){let t;if(!e)return[];try{t=_T.exports.parse(e)}catch(r){throw new F("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>cD(r))}function cD(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return pD(e);case"opacity":return dD(e);case"hue-rotate":return hD(e);case"blur":return fD(e);case"drop-shadow":return yD(e);case"bloom":return mD(e)}}catch(t){throw t.details.filter=e,t}throw new F("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function pD(e){let t=1;return yu(e.parameters,1),e.parameters.length===1&&(t=Ts(e.parameters[0])),new mp(e.name,t)}function dD(e){let t=1;return yu(e.parameters,1),e.parameters.length===1&&(t=Ts(e.parameters[0])),new Sy(t)}function hD(e){let t=0;return yu(e.parameters,1),e.parameters.length===1&&(t=SD(e.parameters[0])),new _y(t)}function fD(e){let t=0;return yu(e.parameters,1),e.parameters.length===1&&(t=Rw(e.parameters[0]),Hp(t,e.parameters[0])),new by(t)}function yD(e){const t=[];let r=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),r)throw new F("effect:type-error","Accepts only one color",{});r=xD(s)}else{const i=Rw(s);if(Object.isFrozen(t))throw new F("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&Hp(i,s)}if(t.length<2||t.length>3)throw new F("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new wy(t[0],t[1],t[2]||0,r||xT("black"))}function mD(e){let t=1,r=0,s=0;return yu(e.parameters,3),e.parameters[0]&&(t=Ts(e.parameters[0])),e.parameters[1]&&(r=Rw(e.parameters[1]),Hp(r,e.parameters[1])),e.parameters[2]&&(s=Ts(e.parameters[2])),new vy(t,r,s)}function yu(e,t){if(e.length>t)throw new F("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function xy(e){if(e.type==="color")return"<color>";if(e.unit){if(Aw[e.unit])return"<length>";if(jw[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Hp(e,t){if(e<0)throw new F("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function gD(e){if(e.type!=="quantity"||e.unit!==null)throw new F("effect:type-error",`Expected <double>, Actual: ${xy(e)}`,{term:e})}function vD(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new F("effect:type-error",`Expected <double> or <percentage>, Actual: ${xy(e)}`,{term:e})}xx=function(){function e(i,n){function a(){this.constructor=i}a.prototype=n.prototype,i.prototype=new a}function t(i,n,a,u){var p=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(p,t.prototype),p.expected=n,p.found=a,p.location=u,p.name="SyntaxError",p}function r(i,n,a){return a=a||" ",i.length>n?i:(n-=i.length,i+(a+=a.repeat(n)).slice(0,n))}function s(i,n){var a,u={},p=(n=n!==void 0?n:{}).grammarSource,d={start:Le},h=Le,f="none",y=")",m=",",v="(",S="%",_="px",M="cm",P="mm",N="in",z="pt",V="pc",H="deg",be="rad",le="grad",he="turn",ue="#",we=".",Ee="e",Pe=/^[ \t\n\r]/,fe=/^[a-z\-]/,ct=/^[0-9a-fA-F]/,st=/^[+\-]/,$e=/^[0-9]/,Ve=ot("none"),Jt=oe("none",!1),Dt=oe(")",!1),Us=oe(",",!1),Kr=ot("whitespace"),lr=ze([" ","	",`
`,"\r"],!1,!1),cn=ot("function"),po=oe("(",!1),ho=ot("identifier"),ur=ze([["a","z"],"-"],!1,!1),_i=ot("percentage"),fo=oe("%",!1),cr=ot("length"),yo=oe("px",!1),pn=oe("cm",!1),x=oe("mm",!1),$=oe("in",!1),O=oe("pt",!1),L=oe("pc",!1),U=ot("angle"),Q=oe("deg",!1),X=oe("rad",!1),W=oe("grad",!1),Z=oe("turn",!1),B=ot("number"),pe=ot("color"),ne=oe("#",!1),ee=ze([["0","9"],["a","f"],["A","F"]],!1,!1),ge=ze(["+","-"],!1,!1),Ie=ze([["0","9"]],!1,!1),Ge=oe(".",!1),Je=oe("e",!1),Ze=function(){return[]},pr=function(w,C){return{type:"function",name:w,parameters:C||[]}},qs=function(w,C){return C.length>0?A4(w,C,3):[w]},La=function(w){return{type:"quantity",value:w.value,unit:w.unit}},Si=function(w){return{type:"color",colorType:w.type,value:w.value}},Da=function(w){return w},Ht=function(){return J()},dr=function(w){return{value:w,unit:"%"}},Va=function(w){return{value:w,unit:"px"}},Ry=function(w){return{value:w,unit:"cm"}},bu=function(w){return{value:w,unit:"mm"}},Cy=function(w){return{value:w,unit:"in"}},wu=function(w){return{value:w,unit:"pt"}},za=function(w){return{value:w,unit:"pc"}},Wp=function(w){return{value:w,unit:"deg"}},Kp=function(w){return{value:w,unit:"rad"}},ps=function(w){return{value:w,unit:"grad"}},xi=function(w){return{value:w,unit:"turn"}},Qp=function(w){return{value:w,unit:null}},Fy=function(){return{type:"hex",value:J()}},$i=function(w){return{type:"function",value:w}},Zp=function(){return{type:"named",value:J()}},Yp=function(){return parseFloat(J())},T=0,Ne=0,Ua=[{line:1,column:1}],Fr=0,E=[],I=0;if("startRule"in n){if(!(n.startRule in d))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');h=d[n.startRule]}function J(){return i.substring(Ne,T)}function oe(w,C){return{type:"literal",text:w,ignoreCase:C}}function ze(w,C,q){return{type:"class",parts:w,inverted:C,ignoreCase:q}}function xt(){return{type:"end"}}function ot(w){return{type:"other",description:w}}function Ot(w){var C,q=Ua[w];if(q)return q;for(C=w-1;!Ua[C];)C--;for(q={line:(q=Ua[C]).line,column:q.column};C<w;)i.charCodeAt(C)===10?(q.line++,q.column=1):q.column++,C++;return Ua[w]=q,q}function it(w,C){var q=Ot(w),Ae=Ot(C);return{source:p,start:{offset:w,line:q.line,column:q.column},end:{offset:C,line:Ae.line,column:Ae.column}}}function ie(w){T<Fr||(T>Fr&&(Fr=T,E=[]),E.push(w))}function at(w,C,q){return new t(t.buildMessage(w,C),w,C,q)}function Le(){var w;return(w=xr())===u&&(w=kr()),w}function xr(){var w,C;return I++,w=T,Vt(),i.substr(T,4)===f?(C=f,T+=4):(C=u,I===0&&ie(Jt)),C!==u?(Vt(),Ne=w,w=Ze()):(T=w,w=u),I--,w===u&&I===0&&ie(Ve),w}function kr(){var w,C;if(w=[],(C=Bs())!==u)for(;C!==u;)w.push(C),C=Bs();else w=u;return w}function Bs(){var w,C,q,Ae;return w=T,Vt(),(C=$4())!==u?(Vt(),(q=ky())===u&&(q=null),Vt(),i.charCodeAt(T)===41?(Ae=y,T++):(Ae=u,I===0&&ie(Dt)),Ae!==u?(Vt(),Ne=w,w=pr(C,q)):(T=w,w=u)):(T=w,w=u),w}function ky(){var w,C,q,Ae,Wt,gt,Zr,Xp;if(w=T,(C=Py())!==u){for(q=[],Ae=T,Wt=Vt(),i.charCodeAt(T)===44?(gt=m,T++):(gt=u,I===0&&ie(Us)),gt===u&&(gt=null),Zr=Vt(),(Xp=Py())!==u?Ae=Wt=[Wt,gt,Zr,Xp]:(T=Ae,Ae=u);Ae!==u;)q.push(Ae),Ae=T,Wt=Vt(),i.charCodeAt(T)===44?(gt=m,T++):(gt=u,I===0&&ie(Us)),gt===u&&(gt=null),Zr=Vt(),(Xp=Py())!==u?Ae=Wt=[Wt,gt,Zr,Xp]:(T=Ae,Ae=u);Ne=w,w=qs(C,q)}else T=w,w=u;return w}function Py(){var w,C;return w=T,(C=I4())===u&&(C=M4())===u&&(C=O4())===u&&(C=E4()),C!==u&&(Ne=w,C=La(C)),(w=C)===u&&(w=T,(C=T4())!==u&&(Ne=w,C=Si(C)),w=C),w}function Vt(){var w,C;for(I++,w=[],Pe.test(i.charAt(T))?(C=i.charAt(T),T++):(C=u,I===0&&ie(lr));C!==u;)w.push(C),Pe.test(i.charAt(T))?(C=i.charAt(T),T++):(C=u,I===0&&ie(lr));return I--,C=u,I===0&&ie(Kr),w}function $4(){var w,C,q;return I++,w=T,(C=Yw())!==u?(i.charCodeAt(T)===40?(q=v,T++):(q=u,I===0&&ie(po)),q!==u?(Ne=w,w=Da(C)):(T=w,w=u)):(T=w,w=u),I--,w===u&&(C=u,I===0&&ie(cn)),w}function Yw(){var w,C,q;if(I++,w=T,C=[],fe.test(i.charAt(T))?(q=i.charAt(T),T++):(q=u,I===0&&ie(ur)),q!==u)for(;q!==u;)C.push(q),fe.test(i.charAt(T))?(q=i.charAt(T),T++):(q=u,I===0&&ie(ur));else C=u;return C!==u&&(Ne=w,C=Ht()),I--,(w=C)===u&&(C=u,I===0&&ie(ho)),w}function I4(){var w,C,q;return I++,w=T,Vt(),(C=Qr())!==u?(i.charCodeAt(T)===37?(q=S,T++):(q=u,I===0&&ie(fo)),q!==u?(Ne=w,w=dr(C)):(T=w,w=u)):(T=w,w=u),I--,w===u&&I===0&&ie(_i),w}function M4(){var w,C,q;return I++,w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===_?(q=_,T+=2):(q=u,I===0&&ie(yo)),q!==u?(Ne=w,w=Va(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===M?(q=M,T+=2):(q=u,I===0&&ie(pn)),q!==u?(Ne=w,w=Ry(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===P?(q=P,T+=2):(q=u,I===0&&ie(x)),q!==u?(Ne=w,w=bu(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===N?(q=N,T+=2):(q=u,I===0&&ie($)),q!==u?(Ne=w,w=Cy(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===z?(q=z,T+=2):(q=u,I===0&&ie(O)),q!==u?(Ne=w,w=wu(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,Vt(),(C=Qr())!==u?(i.substr(T,2)===V?(q=V,T+=2):(q=u,I===0&&ie(L)),q!==u?(Ne=w,w=za(C)):(T=w,w=u)):(T=w,w=u)))))),I--,w===u&&I===0&&ie(cr),w}function O4(){var w,C,q;return I++,w=T,(C=Qr())!==u?(i.substr(T,3)===H?(q=H,T+=3):(q=u,I===0&&ie(Q)),q!==u?(Ne=w,w=Wp(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,(C=Qr())!==u?(i.substr(T,3)===be?(q=be,T+=3):(q=u,I===0&&ie(X)),q!==u?(Ne=w,w=Kp(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,(C=Qr())!==u?(i.substr(T,4)===le?(q=le,T+=4):(q=u,I===0&&ie(W)),q!==u?(Ne=w,w=ps(C)):(T=w,w=u)):(T=w,w=u),w===u&&(w=T,(C=Qr())!==u?(i.substr(T,4)===he?(q=he,T+=4):(q=u,I===0&&ie(Z)),q!==u?(Ne=w,w=xi(C)):(T=w,w=u)):(T=w,w=u)))),I--,w===u&&(C=u,I===0&&ie(U)),w}function E4(){var w,C;return I++,w=T,Vt(),(C=Qr())!==u?(Ne=w,w=Qp(C)):(T=w,w=u),I--,w===u&&I===0&&ie(B),w}function T4(){var w,C,q,Ae;if(I++,w=T,i.charCodeAt(T)===35?(C=ue,T++):(C=u,I===0&&ie(ne)),C!==u){if(q=[],ct.test(i.charAt(T))?(Ae=i.charAt(T),T++):(Ae=u,I===0&&ie(ee)),Ae!==u)for(;Ae!==u;)q.push(Ae),ct.test(i.charAt(T))?(Ae=i.charAt(T),T++):(Ae=u,I===0&&ie(ee));else q=u;q!==u?(Ne=w,w=Fy()):(T=w,w=u)}else T=w,w=u;return w===u&&(w=T,(C=Bs())!==u&&(Ne=w,C=$i(C)),(w=C)===u&&(w=T,(C=Yw())!==u&&(Ne=w,C=Zp()),w=C)),I--,w===u&&(C=u,I===0&&ie(pe)),w}function Qr(){var w,C,q,Ae,Wt,gt,Zr;for(w=T,st.test(i.charAt(T))?(i.charAt(T),T++):I===0&&ie(ge),C=T,q=[],$e.test(i.charAt(T))?(Ae=i.charAt(T),T++):(Ae=u,I===0&&ie(Ie));Ae!==u;)q.push(Ae),$e.test(i.charAt(T))?(Ae=i.charAt(T),T++):(Ae=u,I===0&&ie(Ie));if(i.charCodeAt(T)===46?(Ae=we,T++):(Ae=u,I===0&&ie(Ge)),Ae!==u){if(Wt=[],$e.test(i.charAt(T))?(gt=i.charAt(T),T++):(gt=u,I===0&&ie(Ie)),gt!==u)for(;gt!==u;)Wt.push(gt),$e.test(i.charAt(T))?(gt=i.charAt(T),T++):(gt=u,I===0&&ie(Ie));else Wt=u;Wt!==u?C=q=[q,Ae,Wt]:(T=C,C=u)}else T=C,C=u;if(C===u)if(C=[],$e.test(i.charAt(T))?(q=i.charAt(T),T++):(q=u,I===0&&ie(Ie)),q!==u)for(;q!==u;)C.push(q),$e.test(i.charAt(T))?(q=i.charAt(T),T++):(q=u,I===0&&ie(Ie));else C=u;if(C!==u){if(q=T,i.charCodeAt(T)===101?(Ae=Ee,T++):(Ae=u,I===0&&ie(Je)),Ae!==u){if(st.test(i.charAt(T))?(Wt=i.charAt(T),T++):(Wt=u,I===0&&ie(ge)),Wt===u&&(Wt=null),gt=[],$e.test(i.charAt(T))?(Zr=i.charAt(T),T++):(Zr=u,I===0&&ie(Ie)),Zr!==u)for(;Zr!==u;)gt.push(Zr),$e.test(i.charAt(T))?(Zr=i.charAt(T),T++):(Zr=u,I===0&&ie(Ie));else gt=u;gt!==u?q=Ae=[Ae,Wt,gt]:(T=q,q=u)}else T=q,q=u;q===u&&(q=null),Ne=w,w=Yp()}else T=w,w=u;return w}function j4(w,C){return w.map(function(q){return q[C]})}function A4(w,C,q){return[w].concat(j4(C,q))}if((a=h())!==u&&T===i.length)return a;throw a!==u&&T<i.length&&ie(xt()),at(E,Fr<i.length?i.charAt(Fr):null,Fr<i.length?it(Fr,Fr+1):it(Fr,Fr))}return e(t,Error),t.prototype.format=function(i){var n="Error: "+this.message;if(this.location){var a,u=null;for(a=0;a<i.length;a++)if(i[a].source===this.location.source){u=i[a].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source+":"+p.line+":"+p.column;if(u){var h=this.location.end,f=r("",p.line.toString().length),y=u[p.line-1],m=p.line===h.line?h.column:y.length+1;n+=`
 --> `+d+`
`+f+` |
`+p.line+" | "+y+`
`+f+" | "+r("",p.column-1)+r("",m-p.column,"^")}else n+=`
 at `+d}return n},t.buildMessage=function(i,n){var a={literal:function(m){return'"'+p(m.text)+'"'},class:function(m){var v=m.parts.map(function(S){return Array.isArray(S)?d(S[0])+"-"+d(S[1]):d(S)});return"["+(m.inverted?"^":"")+v+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function u(m){return m.charCodeAt(0).toString(16).toUpperCase()}function p(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+u(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+u(v)})}function d(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+u(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+u(v)})}function h(m){return a[m.type](m)}function f(m){var v,S,_=m.map(h);if(_.sort(),_.length>0){for(v=1,S=1;v<_.length;v++)_[v-1]!==_[v]&&(_[S]=_[v],S++);_.length=S}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function y(m){return m?'"'+p(m)+'"':"end of input"}return"Expected "+f(i)+" but "+y(n)+" found."},{SyntaxError:t,parse:s}},(Sx=_T).exports&&(Sx.exports=xx());const jw={deg:1,grad:.9,rad:180/Math.PI,turn:360};function bD(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&jw[e.unit]!=null))throw new F("effect:type-error",`Expected <angle>, Actual: ${xy(e)}`,{term:e})}const Aw={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function wD(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Aw[e.unit]!=null))throw new F("effect:type-error",`Expected <length>, Actual: ${xy(e)}`,{term:e})}function Ts(e){vD(e);const t=e.value;return Hp(t,e),e.unit==="%"?.01*t:t}function _D(e){return gD(e),Hp(e.value,e),e.value}function SD(e){return bD(e),e.value*jw[e.unit]||0}function Rw(e){return wD(e),e.value*Aw[e.unit]||0}function xD(e){switch(e.colorType){case"hex":return gF(e.value);case"named":return xT(e.value);case"function":return MD(e.value)}}function xT(e){if(!dM(e))throw new F("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return mF(e)}const $D=/^rgba?/i,ID=/^hsla?/i;function MD(e){if(yu(e.parameters,4),$D.test(e.name))return[Ts(e.parameters[0]),Ts(e.parameters[1]),Ts(e.parameters[2]),e.parameters[3]?Ts(e.parameters[3]):1];if(ID.test(e.name))return hM(_D(e.parameters[0]),Ts(e.parameters[1]),Ts(e.parameters[2]),e.parameters[3]?Ts(e.parameters[3]):1);throw new F("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Rv(e,t,r){try{return ED(e)}catch(i){var s;r==null||(s=r.messages)==null||s.push(i)}return null}function Cv(e,t,r,s){try{const i=OD(e);Ar(r,i,t)}catch(i){s.messages&&s.messages.push(i)}}function OD(e){const t=ST(e);return t?uD(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:s})=>({scale:r,value:s.map(i=>i.toJSON())})):null}function ED(e){if(!e||e.length===0)return null;if(TD(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:Ix(r.value)});return t}return Ix(e)}function TD(e){const t=e[0];return!!t&&"scale"in t}function Ix(e){if(!e||!e.length)return"";const t=[];for(const r of e){let s=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Ii(r,"amount")];break;case"blur":s=[Ii(r,"radius","pt")];break;case"hue-rotate":s=[Ii(r,"angle","deg")];break;case"drop-shadow":s=[Ii(r,"xoffset","pt"),Ii(r,"yoffset","pt"),Ii(r,"blurRadius","pt"),jD(r,"color")];break;case"bloom":s=[Ii(r,"strength"),Ii(r,"radius","pt"),Ii(r,"threshold")]}const i=`${r.type}(${s.filter(Boolean).join(" ")})`;ST(i),t.push(i)}return t.join(" ")}function Ii(e,t,r){if(e[t]==null)throw new F("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function jD(e,t){if(e[t]==null)throw new F("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const $T=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return o([c({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),o([c({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:Rv},write:{allowNull:!0,writer:Cv}}}}})],t.prototype,"effect",void 0),t=o([b("esri.layers.mixins.BlendLayer")],t),t},IT=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return o([c({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=o([b("esri.layers.mixins.CustomParametersMixin")],t),t},Mx={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},AD={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function RD(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}function da(e,t,r){const s=new Date(e.getTime());if(t&&r){const i=AD[r],{getter:n,setter:a,multiplier:u}=i;if(r==="months"){const p=RD(s.getFullYear(),s.getMonth()+t);s.getDate()>p&&s.setDate(p)}s[a](s[n]()+t*u)}return s}function Ox(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function CD(e,t,r){return e===0?0:e*Mx[t]/Mx[r]}var $s;let zr=$s=class extends D{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return Ex}static get empty(){return FD}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals($s.allTime)}get isEmpty(){return this.equals($s.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new $s({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=R(this.start)?this.start.getTime():this.start,r=R(this.end)?this.end.getTime():this.end,s=R(e.start)?e.start.getTime():e.start,i=R(e.end)?e.end.getTime():e.end;return t===s&&r===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=qh(this.start,s=>Ox(s,e)),r=qh(this.end,s=>da(Ox(s,e),1,e));return new $s({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return $s.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=fl(this.start,-1/0,u=>u.getTime()),r=fl(this.end,1/0,u=>u.getTime()),s=fl(e.start,-1/0,u=>u.getTime()),i=fl(e.end,1/0,u=>u.getTime());let n,a;if(s>=t&&s<=r?n=s:t>=s&&t<=i&&(n=t),r>=s&&r<=i?a=r:i>=t&&i<=r&&(a=i),!isNaN(n)&&!isNaN(a)){const u=new $s;return u.start=n===-1/0?null:new Date(n),u.end=a===1/0?null:new Date(a),u}return $s.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new $s,{start:s,end:i}=this;return R(s)&&(r.start=da(s,e,t)),R(i)&&(r.end=da(i,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Ex.clone();const t=R(this.start)&&R(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=R(this.end)&&R(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new $s({start:t,end:r})}};o([c({type:Date,json:{write:{allowNull:!0}}})],zr.prototype,"end",void 0),o([Y("end")],zr.prototype,"readEnd",null),o([re("end")],zr.prototype,"writeEnd",null),o([c({readOnly:!0,json:{read:!1}})],zr.prototype,"isAllTime",null),o([c({readOnly:!0,json:{read:!1}})],zr.prototype,"isEmpty",null),o([c({type:Date,json:{write:{allowNull:!0}}})],zr.prototype,"start",void 0),o([Y("start")],zr.prototype,"readStart",null),o([re("start")],zr.prototype,"writeStart",null),zr=$s=o([b("esri.TimeExtent")],zr);const Ex=new zr,FD=new zr({start:void 0,end:void 0}),wi=zr;var Fv;let Xo=Fv=class extends D{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Fv({mapLayerId:e,gdbVersion:t})}};o([de({mapLayer:"map-layer"})],Xo.prototype,"type",void 0),o([c({type:At,json:{write:!0}})],Xo.prototype,"mapLayerId",void 0),o([c({type:String,json:{write:!0}})],Xo.prototype,"gdbVersion",void 0),Xo=Fv=o([b("esri.layers.support.source.MapLayerSource")],Xo);var kv;let ki=kv=class extends D{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:s,spatialReference:i,geometryType:n}=this,a={workspaceId:t,query:r,oidFields:s,spatialReference:(e=i==null?void 0:i.clone())!=null?e:void 0,geometryType:n};return new kv(a)}};o([de({queryTable:"query-table"})],ki.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],ki.prototype,"workspaceId",void 0),o([c({type:String,json:{write:!0}})],ki.prototype,"query",void 0),o([c({type:String,json:{write:!0}})],ki.prototype,"oidFields",void 0),o([c({type:ke,json:{write:!0}})],ki.prototype,"spatialReference",void 0),o([de(GI)],ki.prototype,"geometryType",void 0),ki=kv=o([b("esri.layers.support.source.QueryTableDataSource")],ki);var Pv;let rl=Pv=class extends D{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Pv({workspaceId:e,dataSourceName:t})}};o([de({raster:"raster"})],rl.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],rl.prototype,"dataSourceName",void 0),o([c({type:String,json:{write:!0}})],rl.prototype,"workspaceId",void 0),rl=Pv=o([b("esri.layers.support.source.RasterDataSource")],rl);var Nv;let Bo=Nv=class extends D{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new Nv({workspaceId:e,gdbVersion:t,dataSourceName:r})}};o([de({table:"table"})],Bo.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Bo.prototype,"workspaceId",void 0),o([c({type:String,json:{write:!0}})],Bo.prototype,"gdbVersion",void 0),o([c({type:String,json:{write:!0}})],Bo.prototype,"dataSourceName",void 0),Bo=Nv=o([b("esri.layers.support.source.TableDataSource")],Bo);var Lv,Dv;const kD=Gt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Nr=Lv=class extends D{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return Tx()(e,t,r)}castLeftTableSource(e){return yi(Vv(),e)}readRightTableSource(e,t,r){return Tx()(e,t,r)}castRightTableSource(e){return yi(Vv(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:s,leftTableSource:i,rightTableSource:n,joinType:a}=this,u={leftTableKey:r,rightTableKey:s,leftTableSource:(e=i==null?void 0:i.clone())!=null?e:void 0,rightTableSource:(t=n==null?void 0:n.clone())!=null?t:void 0,joinType:a};return new Lv(u)}};o([de({joinTable:"join-table"})],Nr.prototype,"type",void 0),o([c({type:String,json:{write:!0}})],Nr.prototype,"leftTableKey",void 0),o([c({type:String,json:{write:!0}})],Nr.prototype,"rightTableKey",void 0),o([c({json:{write:!0}})],Nr.prototype,"leftTableSource",void 0),o([Y("leftTableSource")],Nr.prototype,"readLeftTableSource",null),o([_t("leftTableSource")],Nr.prototype,"castLeftTableSource",null),o([c({json:{write:!0}})],Nr.prototype,"rightTableSource",void 0),o([Y("rightTableSource")],Nr.prototype,"readRightTableSource",null),o([_t("rightTableSource")],Nr.prototype,"castRightTableSource",null),o([de(kD)],Nr.prototype,"joinType",void 0),Nr=Lv=o([b("esri.layers.support.source.JoinTableDataSource")],Nr);let mm=null;function Tx(){return mm||(mm=Ia({types:Vv()})),mm}let gm=null;function Vv(){return gm||(gm={key:"type",base:null,typeMap:{"data-layer":ns,"map-layer":Xo}}),gm}const PD={key:"type",base:null,typeMap:{"join-table":Nr,"query-table":ki,raster:rl,table:Bo}};let ns=Dv=class extends D{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Dv({fields:e,dataSource:t})}};o([de({dataLayer:"data-layer"})],ns.prototype,"type",void 0),o([c({type:[yy],json:{write:!0}})],ns.prototype,"fields",void 0),o([c({types:PD,json:{write:!0}})],ns.prototype,"dataSource",void 0),ns=Dv=o([b("esri.layers.support.source.DataLayerSource")],ns),ns.from=rt(ns);var zv;const jx=new xe({upperLeft:"upper-left",lowerLeft:"lower-left"});let Go=zv=class extends D{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new zv(j({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};o([c({type:Mt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Go.prototype,"extent",void 0),o([c({type:["view","edit"],json:{write:!0}})],Go.prototype,"mode",void 0),o([c({type:String,json:{read:jx.read,write:jx.write}})],Go.prototype,"originPosition",void 0),o([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Go.prototype,"tolerance",void 0),Go=zv=o([b("esri.rest.support.QuantizationParameters")],Go);const MT=Go;var Uv;const Ax=new xe({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Is=Uv=class extends D{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=j(e))}clone(){return new Uv({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:j(this.statisticParameters)})}};o([c({type:Number,json:{write:!0}})],Is.prototype,"maxPointCount",void 0),o([c({type:Number,json:{write:!0}})],Is.prototype,"maxRecordCount",void 0),o([c({type:Number,json:{write:!0}})],Is.prototype,"maxVertexCount",void 0),o([c({type:String,json:{write:!0}})],Is.prototype,"onStatisticField",void 0),o([c({type:String,json:{write:!0}})],Is.prototype,"outStatisticFieldName",void 0),o([c({type:String,json:{read:{source:"statisticType",reader:Ax.read},write:{target:"statisticType",writer:Ax.write}}})],Is.prototype,"statisticType",void 0),o([c({type:Object})],Is.prototype,"statisticParameters",void 0),o([re("statisticParameters")],Is.prototype,"writeStatisticParameters",null),Is=Uv=o([b("esri.rest.support.StatisticDefinition")],Is);const OT=Is;var Rl;const ND=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),LD=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ye=Rl=class extends D{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Hf(Rl,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const s in e){const i=e[s];Array.isArray(i)?r[s]=i.map(n=>n instanceof Date?n.getTime():n):i instanceof Date?r[s]=i.getTime():r[s]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Rl(j({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:R(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ye.MAX_MAX_RECORD_COUNT_FACTOR=5,o([c({json:{write:!0}})],ye.prototype,"aggregateIds",void 0),o([c({type:Boolean,json:{write:!0}})],ye.prototype,"cacheHint",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"compactGeometryEnabled",void 0),o([c({json:{write:!0}})],ye.prototype,"datumTransformation",void 0),o([_t("datumTransformation")],ye.prototype,"castDatumTransformation",null),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"defaultSpatialReferenceEnabled",void 0),o([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ye.prototype,"distance",void 0),o([c({type:ns,json:{write:!0}})],ye.prototype,"dynamicDataSource",void 0),o([c({type:String,json:{write:!0}})],ye.prototype,"formatOf3DObjects",void 0),o([c({type:String,json:{write:!0}})],ye.prototype,"gdbVersion",void 0),o([c({types:Oa,json:{read:Hr,write:!0}})],ye.prototype,"geometry",void 0),o([c({type:Number,json:{write:!0}})],ye.prototype,"geometryPrecision",void 0),o([c({type:[String],json:{write:!0}})],ye.prototype,"groupByFieldsForStatistics",void 0),o([c({type:String,json:{write:!0}})],ye.prototype,"having",void 0),o([c({type:Date})],ye.prototype,"historicMoment",void 0),o([re("historicMoment")],ye.prototype,"writeHistoricMoment",null),o([c({type:Number,json:{write:!0}})],ye.prototype,"maxAllowableOffset",void 0),o([c({type:Number,cast:e=>e<1?1:e>Rl.MAX_MAX_RECORD_COUNT_FACTOR?Rl.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ye.prototype,"maxRecordCountFactor",void 0),o([c({type:["xyFootprint"],json:{write:!0}})],ye.prototype,"multipatchOption",void 0),o([c({type:Number,json:{read:{source:"resultRecordCount"}}})],ye.prototype,"num",void 0),o([c({json:{write:!0}})],ye.prototype,"objectIds",void 0),o([c({type:[String],json:{write:!0}})],ye.prototype,"orderByFields",void 0),o([c({type:[String],json:{write:!0}})],ye.prototype,"outFields",void 0),o([c({type:ke,json:{name:"outSR",write:!0}})],ye.prototype,"outSpatialReference",void 0),o([c({type:[OT],json:{write:{enabled:!0,overridePolicy(){return{enabled:R(this.outStatistics)&&this.outStatistics.length>0}}}}})],ye.prototype,"outStatistics",void 0),o([c({json:{write:!0}})],ye.prototype,"parameterValues",void 0),o([re("parameterValues")],ye.prototype,"writeParameterValues",null),o([c({type:nt,json:{write:!0}})],ye.prototype,"pixelSize",void 0),o([c({type:MT,json:{write:!0}})],ye.prototype,"quantizationParameters",void 0),o([c({type:[Object],json:{write:!0}})],ye.prototype,"rangeValues",void 0),o([c({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ye.prototype,"relationParameter",void 0),o([c({type:String,json:{write:!0}})],ye.prototype,"resultType",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"returnCentroid",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"returnDistinctValues",void 0),o([c({type:Boolean,json:{default:!0,write:!0}})],ye.prototype,"returnExceededLimitFeatures",void 0),o([c({type:Boolean,json:{write:!0}})],ye.prototype,"returnGeometry",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"returnQueryGeometry",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"returnM",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ye.prototype,"returnZ",void 0),o([c({type:ke,json:{write:!0}})],ye.prototype,"sourceSpatialReference",void 0),o([de(ND,{ignoreUnknown:!1,name:"spatialRel"})],ye.prototype,"spatialRelationship",void 0),o([c({type:Number,json:{read:{source:"resultOffset"}}})],ye.prototype,"start",void 0),o([re("start"),re("num")],ye.prototype,"writeStart",null),o([c({type:String,json:{write:!0}})],ye.prototype,"sqlFormat",void 0),o([c({type:String,json:{write:!0}})],ye.prototype,"text",void 0),o([c({type:wi,json:{write:!0}})],ye.prototype,"timeExtent",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],ye.prototype,"timeReferenceUnknownClient",void 0),o([de(LD,{ignoreUnknown:!1}),c({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ye.prototype,"units",void 0),o([c({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],ye.prototype,"where",void 0),o([re("where")],ye.prototype,"writeWhere",null),ye=Rl=o([b("esri.rest.support.Query")],ye);const ea=ye;var qv;const vm=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),bm=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ni=qv=class extends D{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:s,timeExtent:i,objectIds:n,units:a,distance:u}=this;return new ea(A({geometry:j(r),objectIds:j(n),spatialRelationship:s,timeExtent:j(i),where:t,units:a,distance:u},e))}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:s,objectIds:i,units:n,distance:a}=this;return new qv({geometry:j(t),objectIds:j(i),spatialRelationship:r,timeExtent:j(s),where:e,units:n,distance:a})}};o([c({type:String,json:{write:!0}})],ni.prototype,"where",void 0),o([c({types:Oa,json:{write:!0}})],ni.prototype,"geometry",void 0),o([c({type:vm.apiValues,json:{name:"spatialRel",read:{reader:vm.read},write:{allowNull:!1,writer:vm.write,overridePolicy(){return{enabled:R(this.geometry)}}}}})],ni.prototype,"spatialRelationship",void 0),o([c({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ni.prototype,"distance",void 0),o([c({type:[Number],json:{write:!0}})],ni.prototype,"objectIds",void 0),o([c({type:bm.apiValues,json:{read:bm.read,write:{writer:bm.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ni.prototype,"units",void 0),o([c({type:wi,json:{write:!0}})],ni.prototype,"timeExtent",void 0),ni=qv=o([b("esri.layers.support.FeatureFilter")],ni);const DD=ni;var Bv;let Jo=Bv=class extends D{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const n=Object.keys(r.filter);var s;if(n.length>1||n[0]!=="where")return(s=t.messages)==null||s.push(new F("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var i;if("showExcludedLabels"in r)return(i=t.messages)==null||i.push(new F("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new Bv({filter:R(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};o([c({type:DD,json:{write:{allowNull:!0,writer(e,t,r,s){const i=e==null?void 0:e.write({},s);i&&Object.keys(i).length!==0?Ar(r,i,t):Ar(r,null,t)}}}})],Jo.prototype,"filter",void 0),o([c({json:{write:!0,origins:{"web-map":{read:{reader:Rv},write:{writer:Cv,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}}}}})],Jo.prototype,"includedEffect",void 0),o([c({json:{write:!0,origins:{"web-map":{read:{reader:Rv},write:{writer:Cv,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}}}}})],Jo.prototype,"excludedEffect",void 0),o([c({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],Jo.prototype,"excludedLabelsVisible",void 0),Jo=Bv=o([b("esri.layers.support.FeatureEffect")],Jo);const VD=Jo,ET=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return o([c({type:VD,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=o([b("esri.layers.mixins.FeatureEffectLayer")],t),t},zD={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function UD(e){if(!e)return e;const{start:t,end:r}=e;return new wi({start:R(t)?da(t,-t.getTimezoneOffset(),"minutes"):t,end:R(r)?da(r,-r.getTimezoneOffset(),"minutes"):r})}function qD(e){if(!e)return e;const{start:t,end:r}=e;return new wi({start:R(t)?da(t,t.getTimezoneOffset(),"minutes"):t,end:R(r)?da(r,r.getTimezoneOffset(),"minutes"):r})}var Gv;let mc=Gv=class extends D{async collectRequiredFields(e,t){return on(e,t,this.expression)}clone(){return new Gv({expression:this.expression,title:this.title})}};o([c({type:String,json:{write:!0}})],mc.prototype,"expression",void 0),o([c({type:String,json:{write:!0}})],mc.prototype,"title",void 0),mc=Gv=o([b("esri.layers.support.FeatureExpressionInfo")],mc);const Rx=mc;function BD(){const e=Object.keys(dE);return e.sort(),e}const GD=BD();var Jv;const Ed=Gt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Cx=new xe({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Pi=Jv=class extends D{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,s){t[r]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):R(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new Jv({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};o([c({type:Rx,json:{write:!0}})],Pi.prototype,"featureExpressionInfo",void 0),o([Y("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Pi.prototype,"readFeatureExpressionInfo",null),o([re("featureExpressionInfo",{featureExpressionInfo:{type:Rx},"featureExpression.value":{type:[0]}})],Pi.prototype,"writeFeatureExpressionInfo",null),o([c({type:Ed.apiValues,nonNullable:!0,json:{type:Ed.jsonValues,read:Ed.read,write:{writer:Ed.write,isRequired:!0}}})],Pi.prototype,"mode",null),o([c({type:Number,json:{write:!0}})],Pi.prototype,"offset",void 0),o([c({type:GD,json:{type:String,read:Cx.read,write:Cx.write}})],Pi.prototype,"unit",null),Pi=Jv=o([b("esri.layers.support.ElevationInfo")],Pi);const TT=Pi,jT={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Cw={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},Fw={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},AT={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:ro}}},RT={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},CT={value:null,type:TT,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function JD(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Dc={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},FT=ve(A({},Dc),{json:ve(A({},Dc.json),{origins:{"web-document":ve(A({},Dc.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?lp(t.layerDefinition.drawingInfo.transparency):void 0:lp(t.drawingInfo.transparency)}})}),HD={type:wi,readOnly:!0,get(){var e,t;if((e=this.layer)==null||!e.timeInfo)return null;const{datesInUnknownTimezone:r,timeOffset:s,useViewTime:i}=this.layer,n=(t=this.view)==null?void 0:t.timeExtent;let a=this.layer.timeExtent;r&&(a=qD(a));let u=i?n&&a?n.intersection(a):n||a:a;if(!u||u.isEmpty||u.isAllTime)return u;s&&(u=u.offset(-s.value,s.unit)),r&&(u=UD(u));const p=this._get("timeExtent");return u.equals(p)?p:u}},WD={type:Mt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=Mt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=ke.fromJSON(t.spatialReference)),r}}}},read:!1}},kT={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},PT={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},NT={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},LT=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,s,i,n){(n&&n.layerContainerType==="ground"||r&&_I(this,i,{},n))&&(s[i]=r)}writeOperationalLayerType(r,s,i,n){!r||n&&n.layerContainerType==="tables"||(s.layerType=r)}writeTitle(r,s){s.title=r||"Layer"}read(r,s){s&&(s.layer=this),w6(this,r,i=>super.read(r,i),s)}write(r,s){if(s!=null&&s.origin){const p=`${s.origin}/${s.layerContainerType||"operational-layers"}`,d=zD[p];let h=d&&d[this.operationalLayerType];var i;if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(h=!1),!h)return(i=s.messages)==null||i.push(new F("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const n=super.write(r,ve(A({},s),{layer:this})),a=!!s&&!!s.messages&&!!s.messages.filter(p=>p instanceof F&&p.name==="web-document-write:property-required").length;var u;return Vp(n==null?void 0:n.url)?(s==null||(u=s.messages)==null||u.push(new F("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:n}beforeSave(){}};return o([c({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),o([c({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),o([re("listMode")],t.prototype,"writeListMode",null),o([c({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),o([re("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),o([c(Dc)],t.prototype,"opacity",void 0),o([c({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),o([re("title")],t.prototype,"writeTitle",null),o([c({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=o([b("esri.layers.mixins.OperationalLayer")],t),t};var Hv;const wm=new xe({asc:"ascending",desc:"descending"});let sl=Hv=class extends D{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Hv({field:this.field,valueExpression:this.valueExpression,order:this.order})}};o([c({type:String,json:{write:!0}})],sl.prototype,"field",void 0),o([c({type:String,json:{write:!0}})],sl.prototype,"valueExpression",void 0),o([c({type:wm.apiValues,json:{read:wm.read,write:wm.write}})],sl.prototype,"order",void 0),sl=Hv=o([b("esri.layers.support.OrderByInfo")],sl);const DT=sl;function KD(e,t,r){if(!e)return null;const s=e.find(n=>!!n.field);if(!s)return null;const i=new DT;return i.read(s,r),[i]}function QD(e,t,r,s){const i=e.find(n=>!!n.field);i&&Ar(r,[i.toJSON()],t)}const VT=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return o([c({type:[DT],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:KD},write:{target:"layerDefinition.orderBy",writer:QD}}})],t.prototype,"orderBy",void 0),t=o([b("esri.layers.mixins.OrderedLayer")],t),t};function ZD(e,t,r){return fi(e.map((s,i)=>t.apply(r,[s,i])))}function YD(e,t,r){return fi(e.map((s,i)=>t.apply(r,[s,i]))).then(s=>s.map(i=>i.value))}function kw(e){return ae(e)?G3():e.then(t=>({ok:!0,value:t})).catch(t=>({ok:!1,error:t}))}function XD(e){return e.then(t=>({ok:!0,value:t})).catch(t=>(eu(t),{ok:!1,error:t}))}const eV=te.getLogger("esri.portal.PortalItemResource");let An=class extends ht{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?ve(A({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){R(e)&&jr(e)?eV.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(ae(r))throw new F("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:y3(t,"signal")})}async update(e,t){return(await Re(()=>import("./resourceUtils.2428bc7b.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return R(this.path)}_normalizePath(e,t){return ae(e)?e:(e=e.replace(/^\/+/,""),R(t)&&jr(e)&&(e=iy(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};o([c()],An.prototype,"portalItem",void 0),o([c({type:String,value:null})],An.prototype,"path",null),o([_t("path")],An.prototype,"_castPath",null),o([c({type:String,readOnly:!0})],An.prototype,"url",null),o([c({type:String,readOnly:!0})],An.prototype,"itemRelativeUrl",null),An=o([b("esri.portal.PortalItemResource")],An);const tV=An;let gc=class extends ht{constructor(e){super(e),this.created=null,this.rating=null}};o([c()],gc.prototype,"created",void 0),o([c()],gc.prototype,"rating",void 0),gc=o([b("esri.portal.PortalRating")],gc);const _m=gc;var il;let je=il=class extends Kf(zp){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Hf(il,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":e==="Image Service"?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Media Service"?r="Media Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.indexOf("Spatiotemporal")===-1&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&t.indexOf("Relational")===-1?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.indexOf("configurableApp")>-1&&(r="Instant App"),r}readExtent(e){return e&&e.length?new Mt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",s="16";let i,n=!1,a=!1,u=!1,p=!1,d=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.indexOf("Hosted Service")>-1,e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(a=t.indexOf("Table")>-1,u=t.indexOf("Route Layer")>-1,p=t.indexOf("Markup")>-1,d=t.indexOf("Spatiotemporal")!==-1,h=t.indexOf("UtilityNetwork")!==-1,i=d&&a?"spatiotemporaltable":a?"table":u?"routelayer":p?"markup":d?"spatiotemporal":n?"featureshosted":h?"utilitynetwork":"features"):i=e==="map service"||e==="wms"||e==="wmts"?n||t.indexOf("Tiled")>-1||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="media service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):i=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.indexOf("configurableApp")>-1?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.indexOf("ArcGIS Pro")>-1||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":"maps",i?fu(r+i+s+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=_r.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:R(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof _m&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new _m({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:j(this.applicationProxies),avgRating:this.avgRating,categories:j(this.categories),created:j(this.created),culture:this.culture,description:this.description,extent:j(this.extent),groupCategories:j(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:j(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:j(this.screenshots),size:this.size,snippet:this.snippet,tags:j(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:j(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new il({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",ve(A({responseType:e},t),{query:{token:this.apiKey}}))}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",A({query:{token:this.apiKey}},e)).then(t=>t.rating!=null?(t.created=new Date(t.created),new _m(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",A({query:ve(A({},e),{token:this.apiKey})},t),il)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const s in r.query)r.query[s]===null&&(r.query[s]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new F("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,s={method:"post"};if(typeof t=="string")oo(t)?s.query={data:t}:s.query={url:ls(t)},R(r)&&(s.query.filename=r);else{const i=new FormData;R(r)?i.append("file",t,r):i.append("file",t),s.body=i}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new F("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await Re(()=>import("./resourceUtils.2428bc7b.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,r){const s=await Re(()=>import("./resourceUtils.2428bc7b.js"),[],import.meta.url);return e.portalItem=this,s.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await Re(()=>import("./resourceUtils.2428bc7b.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new F("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return(await Re(()=>import("./resourceUtils.2428bc7b.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new tV({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return J1(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new il({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};o([c({type:["private","shared","org","public"]})],je.prototype,"access",void 0),o([c()],je.prototype,"accessInformation",void 0),o([c({type:String})],je.prototype,"apiKey",void 0),o([c({json:{read:{source:"appProxies"}}})],je.prototype,"applicationProxies",void 0),o([c()],je.prototype,"avgRating",void 0),o([c()],je.prototype,"categories",void 0),o([c({type:Date})],je.prototype,"created",void 0),o([c()],je.prototype,"culture",void 0),o([c()],je.prototype,"description",void 0),o([c({readOnly:!0})],je.prototype,"displayName",null),o([c({type:Mt})],je.prototype,"extent",void 0),o([Y("extent")],je.prototype,"readExtent",null),o([c()],je.prototype,"groupCategories",void 0),o([c({readOnly:!0})],je.prototype,"iconUrl",null),o([c()],je.prototype,"id",void 0),o([c({readOnly:!0})],je.prototype,"isLayer",null),o([c()],je.prototype,"itemControl",void 0),o([c({readOnly:!0})],je.prototype,"itemUrl",null),o([c()],je.prototype,"licenseInfo",void 0),o([c({type:Date})],je.prototype,"modified",void 0),o([c()],je.prototype,"name",void 0),o([c()],je.prototype,"numComments",void 0),o([c()],je.prototype,"numRatings",void 0),o([c()],je.prototype,"numViews",void 0),o([c()],je.prototype,"owner",void 0),o([c()],je.prototype,"ownerFolder",void 0),o([c({type:_r})],je.prototype,"portal",void 0),o([c()],je.prototype,"screenshots",void 0),o([c()],je.prototype,"size",void 0),o([c()],je.prototype,"snippet",void 0),o([c()],je.prototype,"sourceJSON",void 0),o([c()],je.prototype,"tags",void 0),o([c()],je.prototype,"thumbnail",void 0),o([c({readOnly:!0})],je.prototype,"thumbnailUrl",null),o([c()],je.prototype,"title",void 0),o([c()],je.prototype,"type",void 0),o([c()],je.prototype,"typeKeywords",void 0),o([c()],je.prototype,"url",void 0),o([c({readOnly:!0})],je.prototype,"userItemUrl",null),je=il=o([b("esri.portal.PortalItem")],je);const bf=je;var zT=Object.freeze(Object.defineProperty({__proto__:null,default:bf},Symbol.toStringTag,{value:"Module"}));const rV=te.getLogger("esri.layers.mixins.PortalLayer"),UT=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var r;(r=this.portalItem)==null||r.destroy(),this.portalItem=null}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,s,i){if(s.itemId)return new bf({id:s.itemId,portal:i&&i.portal})}writePortalItem(r,s){r&&r.id&&(s.itemId=r.id)}async loadFromPortal(r,s){if(this.portalItem&&this.portalItem.id)try{const i=await Re(()=>import("./layersLoader.193828dd.js"),["layersLoader.193828dd.js","lazyLayerLoader.d98b0711.js","jsonContext.a04ce04f.js"],import.meta.url).then(function(n){return n.l});return Vs(s),await i.load({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData},s)}catch(i){throw zs(i)||rV.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(s=>(eu(s),!0)))}async _fetchUserHasEditingPrivileges(r){const s=this.url?wt==null?void 0:wt.findCredential(this.url):null;if(!s)return!0;const i=Td.credential===s?Td.user:await this._fetchEditingUser(r);return Td.credential=s,Td.user=i,ae(i)||i.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var s,i;const n=(s=this.portalItem)==null||(i=s.portal)==null?void 0:i.user;if(n)return n;const a=wt.findServerInfo(this.url);if(a==null||!a.owningSystemUrl)return null;const u=`${a.owningSystemUrl}/sharing/rest`,p=_r.getDefault();if(p&&p.loaded&&cs(p.restUrl)===cs(u))return p.user;const d=`${u}/community/self`,h=R(r)?r.signal:null,f=await kw(mt(d,{authMode:"no-prompt",query:{f:"json"},signal:h}));return f.ok?Xb.fromJSON(f.value.data):null}read(r,s){s&&(s.layer=this),super.read(r,s)}write(r,s){const i=s&&s.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||_r.getDefault());return i&&n&&!hO(n.restUrl,i.restUrl)?(s.messages&&s.messages.push(new F("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,ve(A({},s),{layer:this}))}};return o([c({type:bf})],t.prototype,"portalItem",null),o([Y("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),o([re("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),o([c({clonable:!1})],t.prototype,"resourceReferences",void 0),o([c({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=o([b("esri.layers.mixins.PortalLayer")],t),t},Td={credential:null,user:null},gp=new ut,Vc=new WeakMap;function sV(e){qT(e)&&gp.push(e)}function iV(e){qT(e)&&gp.includes(e)&&gp.remove(e)}function qT(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function BT(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:BT(t,e%t):0}let Sm=0,jd=0;function nV(){const e=Date.now();for(const r of gp)if(r.refreshInterval){var t;e-((t=Vc.get(r))!=null?t:0)+5>=6e4*r.refreshInterval&&(Vc.set(r,e),r.refresh(e))}}Z3(()=>{const e=Date.now();let t=0;for(const r of gp)t=BT(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Vc.get(r)||Vc.set(r,e):Vc.delete(r);if(t!==jd){if(jd=t,clearInterval(Sm),jd===0)return void(Sm=0);Sm=setInterval(nV,jd)}});const GT=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Z1(()=>this.hasDataChanged()),this.when().then(()=>{sV(this)},()=>{})}destroy(){iV(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){B3(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:s})},s=>{te.getLogger(this.declaredClass).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return o([c({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),o([c({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),o([c()],t.prototype,"refreshParameters",null),t=o([b("esri.layers.mixins.RefreshableLayer")],t),t},JT=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&oV(r,s.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===r.minScale&&i.maxScale===r.maxScale?i:r}};return o([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),o([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),o([c({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=o([b("esri.layers.mixins.ScaleRangeLayer")],t),t};function oV(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const oa=Gt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var Wv;let vc=Wv=class extends D{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return CD(this.value,this.unit,"milliseconds")}clone(){return new Wv({value:this.value,unit:this.unit})}};o([c({type:Number,json:{write:!0},nonNullable:!0})],vc.prototype,"value",void 0),o([c({type:oa.apiValues,json:{type:oa.jsonValues,read:oa.read,write:oa.write},nonNullable:!0})],vc.prototype,"unit",void 0),vc=Wv=o([b("esri.TimeInterval")],vc);const vp=vc;var Kv;let nl=Kv=class extends D{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new Kv({respectsDaylightSaving:e,timezone:t})}};o([c({type:Boolean,json:{write:!0}})],nl.prototype,"respectsDaylightSaving",void 0),o([Y("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],nl.prototype,"readRespectsDaylightSaving",null),o([c({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],nl.prototype,"timezone",void 0),nl=Kv=o([b("esri.layers.support.TimeReference")],nl);const aV=nl;var Qv;let sr=Qv=class extends D{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const r=new Date(t.timeExtent[0]),s=new Date(t.timeExtent[1]);return new wi({start:r,end:s})}writeFullTimeExtent(e,t){e&&R(e.start)&&R(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new vp({value:t.timeInterval,unit:oa.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new vp({value:t.defaultTimeInterval,unit:oa.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:s,startField:i,timeReference:n,fullTimeExtent:a,trackIdField:u,useTime:p}=this;return new Qv({cumulative:e,endField:t,hasLiveData:r,interval:s,startField:i,timeReference:j(n),fullTimeExtent:j(a),trackIdField:u,useTime:p})}};o([c({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],sr.prototype,"cumulative",void 0),o([c({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],sr.prototype,"endField",void 0),o([c({type:wi,json:{write:{enabled:!0,allowNull:!0}}})],sr.prototype,"fullTimeExtent",void 0),o([Y("fullTimeExtent",["timeExtent"])],sr.prototype,"readFullTimeExtent",null),o([re("fullTimeExtent")],sr.prototype,"writeFullTimeExtent",null),o([c({type:Boolean,json:{write:!0}})],sr.prototype,"hasLiveData",void 0),o([c({type:vp,json:{write:{enabled:!0,allowNull:!0}}})],sr.prototype,"interval",void 0),o([Y("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],sr.prototype,"readInterval",null),o([re("interval")],sr.prototype,"writeInterval",null),o([c({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],sr.prototype,"startField",void 0),o([c({type:aV,json:{write:{enabled:!0,allowNull:!0}}})],sr.prototype,"timeReference",void 0),o([c({type:String,json:{write:{enabled:!0,allowNull:!0}}})],sr.prototype,"trackIdField",void 0),o([c({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],sr.prototype,"useTime",void 0),sr=Qv=o([b("esri.layers.support.TimeInfo")],sr);const Pw=sr,HT=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,s){const i=s.timeInfo.exportOptions;if(!i)return null;const n=i.timeOffset,a=oa.fromJSON(i.timeOffsetUnits);return n&&a?new vp({value:n,unit:a}):null}set timeInfo(r){gb(r,this.fieldsIndex),this._set("timeInfo",r)}};return o([c({type:wi,json:{write:!1}})],t.prototype,"timeExtent",void 0),o([c({type:vp})],t.prototype,"timeOffset",void 0),o([Y("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),o([c({value:null,type:Pw,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),o([c({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=o([b("esri.layers.mixins.TemporalLayer")],t),t};var Zv;let qi=Zv=class extends D{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:s,description:i}=this;return new Zv({name:e,fields:t,isAscending:r,isUnique:s,description:i})}};o([c({constructOnly:!0})],qi.prototype,"name",void 0),o([c({constructOnly:!0})],qi.prototype,"fields",void 0),o([c({constructOnly:!0})],qi.prototype,"isAscending",void 0),o([c({constructOnly:!0})],qi.prototype,"isUnique",void 0),o([c({constructOnly:!0})],qi.prototype,"description",void 0),qi=Zv=o([b("esri.layers.support.FeatureIndex")],qi);let Ah=class extends D{constructor(){super(...arguments),this.type=null}};o([c({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],Ah.prototype,"type",void 0),Ah=o([b("esri.layers.support.FeatureReduction")],Ah);const zc=Ah;var Yv;let ol=Yv=class extends D{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new Yv({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};o([c({type:String,json:{write:!0}})],ol.prototype,"statisticType",void 0),o([c({type:String,json:{write:!0}})],ol.prototype,"onStatisticField",void 0),o([c({type:String,json:{write:!0}})],ol.prototype,"onStatisticValueExpression",void 0),ol=Yv=o([b("esri.layers.support.OutStatistic")],ol);const lV=ol;var Xv;let bc=Xv=class extends D{constructor(){super(...arguments),this.name=null}clone(){return new Xv({name:this.name,outStatistic:this.outStatistic.clone()})}};o([c({type:String,json:{write:!0}})],bc.prototype,"name",void 0),o([c({type:lV,json:{write:!0}})],bc.prototype,"outStatistic",void 0),bc=Xv=o([b("esri.layers.support.AggregateField")],bc);const uV=bc,Nw="__begin__",Lw="__end__",cV=new RegExp(Nw,"ig"),pV=new RegExp(Lw,"ig"),Fx=new RegExp("^"+Nw,"i"),kx=new RegExp(Lw+"$","i"),wf='"',dV=wf+" + ",hV=" + "+wf;function fV(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function yV(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function $y(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=fV(e.labelExpression),t.type="conventional"),t}function mV(e){const t=$y(e);if(!t)return null;switch(t.type){case"conventional":return e1(t.expression);case"arcade":return t.expression}return null}function gV(e){const t=$y(e);if(!t)return null;switch(t.type){case"conventional":return bV(t.expression);case"arcade":return Dw(t.expression)}return null}function e1(e){let t;return e?(t=$p(e,r=>Nw+'$feature["'+r+'"]'+Lw),t=Fx.test(t)?t.replace(Fx,""):wf+t,t=kx.test(t)?t.replace(kx,""):t+wf,t=t.replace(cV,dV).replace(pV,hV)):t='""',t}const vV=/^\s*\{([^}]+)\}\s*$/i;function bV(e){const t=e.match(vV);return t&&t[1].trim()||null}const wV=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,_V=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,SV=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function Dw(e){if(!e)return null;let t=wV.exec(e)||_V.exec(e);return t?t[1]||t[3]:(t=SV.exec(e),t?t[2]:null)}var t1;let Rn=t1=class extends D{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?e1(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=e1(this.value)),e!=null&&(t[r]=e)}clone(){return new t1({expression:this.expression,title:this.title,value:this.value})}};o([c({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Rn.prototype,"expression",void 0),o([Y("expression",["expression","value"])],Rn.prototype,"readExpression",null),o([re("expression")],Rn.prototype,"writeExpression",null),o([c({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Rn.prototype,"title",void 0),o([c({json:{read:!1,write:!1}})],Rn.prototype,"value",void 0),Rn=t1=o([b("esri.layers.support.LabelExpressionInfo")],Rn);const WT=Rn,KT=[252,146,31,255],QT={type:"esriSMS",style:"esriSMSCircle",size:6,color:KT,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ZT={type:"esriSLS",style:"esriSLSSolid",width:.75,color:KT},YT={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},xV={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},XT={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},e5={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},t5={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};Fa.fromJSON(QT);Wr.fromJSON(ZT);ao.fromJSON(YT);const $V=lo.fromJSON(xV);Fa.fromJSON(XT);Wr.fromJSON(e5);ao.fromJSON(t5);var r1;const Ad=new xe({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function r5(e){return!e||e.origin!=="service"&&!s5(e.layer)}function s5(e){return(e==null?void 0:e.type)==="map-image"}function i5(e){var t,r;return!!s5(e)&&!((t=e.capabilities)==null||(r=t.exportMap)==null||!r.supportsArcadeExpressionForLabeling)}function IV(e){return r5(e)||i5(e.layer)}let It=r1=class extends D{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=$V,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(s,i,n){switch(i){case"=":return s==n;case"<>":return s!=n;case">":return s>n;case">=":return s>=n;case"<":return s<n;case"<=":return s<=n}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(t[s[0]],s[1],s[2]);if(s.length===7){const i=r(t[s[0]],s[1],s[2]),n=s[3],a=r(t[s[4]],s[5],s[6]);switch(n){case"AND":return i&&a;case"OR":return i||a}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=yV(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Dw(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,s){if(e==null&&this.labelExpression!=null&&r5(s))e=new WT({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(s);i.expression&&(t[r]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return $y(this)}getLabelExpressionArcade(){return mV(this)}getLabelExpressionSingleField(){return gV(this)}hash(){return JSON.stringify(this)}clone(){return new r1({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:j(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:j(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};o([c({type:String,json:{write:!0}})],It.prototype,"name",void 0),o([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],It.prototype,"allowOverrun",void 0),o([c({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],It.prototype,"deconflictionStrategy",void 0),o([c({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&i5(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],It.prototype,"labelExpression",void 0),o([Y("labelExpression")],It.prototype,"readLabelExpression",null),o([re("labelExpression")],It.prototype,"writeLabelExpression",null),o([c({type:WT,json:{write:{overridePolicy:(e,t,r)=>IV(r)?{allowNull:!0}:{enabled:!1}}}})],It.prototype,"labelExpressionInfo",void 0),o([re("labelExpressionInfo")],It.prototype,"writeLabelExpressionInfo",null),o([c({type:Ad.apiValues,json:{type:Ad.jsonValues,read:Ad.read,write:Ad.write}})],It.prototype,"labelPlacement",void 0),o([c({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],It.prototype,"labelPosition",void 0),o([c({type:Number})],It.prototype,"maxScale",void 0),o([re("maxScale")],It.prototype,"writeMaxScale",null),o([c({type:Number})],It.prototype,"minScale",void 0),o([re("minScale")],It.prototype,"writeMinScale",null),o([c({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],It.prototype,"repeatLabel",void 0),o([c({type:Number,cast:Be,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"repeatLabelDistance",void 0),o([c({types:D9,json:{origins:{"web-scene":{types:V9,write:BS,default:null}},write:BS,default:null}})],It.prototype,"symbol",void 0),o([c({type:Boolean,json:{write:!0}})],It.prototype,"useCodedValues",void 0),o([c({type:String,json:{write:!0}})],It.prototype,"where",void 0),It=r1=o([b("esri.layers.support.LabelClass")],It);const Iy=It;var s1;let Lr=s1=class extends D{constructor(e){super(e),this.type="cluster",this.clusterRadius=Be("80px"),this.clusterMinSize=Be("12px"),this.clusterMaxSize=Be("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new s1({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:j(this.labelingInfo),labelsVisible:this.labelsVisible,fields:j(this.fields),popupEnabled:this.popupEnabled,popupTemplate:j(this.popupTemplate)})}};o([c({type:["cluster"],readOnly:!0,json:{write:!0}})],Lr.prototype,"type",void 0),o([c({type:Number,cast:e=>e==="auto"?e:Be(e),json:{write:!0}})],Lr.prototype,"clusterRadius",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],Lr.prototype,"clusterMinSize",void 0),o([c({type:Number,cast:Be,json:{write:!0}})],Lr.prototype,"clusterMaxSize",void 0),o([c(Cw)],Lr.prototype,"popupEnabled",void 0),o([c({type:Ta,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Lr.prototype,"popupTemplate",void 0),o([c({types:N9})],Lr.prototype,"symbol",void 0),o([c({type:[Iy],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Lr.prototype,"labelingInfo",void 0),o([c(Fw)],Lr.prototype,"labelsVisible",void 0),o([c({type:[uV],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Lr.prototype,"fields",void 0),Lr=s1=o([b("esri.layers.support.FeatureReductionCluster")],Lr);const Px=Lr;var i1;let Rh=i1=class extends zc{constructor(e){super(e),this.type="selection"}clone(){return new i1}};o([c({type:["selection"]})],Rh.prototype,"type",void 0),Rh=i1=o([b("esri.layers.support.FeatureReductionSelection")],Rh);const n1=Rh,n5={types:{key:"type",base:zc,typeMap:{selection:n1,cluster:Px}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:zc,typeMap:{selection:Px}}},"web-scene":{types:{key:"type",base:zc,typeMap:{selection:n1}}}}}},Nx=new xe({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Cn=class extends ln(D){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};o([c({json:{write:!0}})],Cn.prototype,"name",void 0),o([c({json:{write:!0}})],Cn.prototype,"description",void 0),o([c({json:{read:Nx.read,write:Nx.write}})],Cn.prototype,"drawingTool",void 0),o([c({json:{write:!0}})],Cn.prototype,"prototype",void 0),o([c({json:{write:!0}})],Cn.prototype,"thumbnail",void 0),Cn=o([b("esri.layers.support.FeatureTemplate")],Cn);const My=Cn;let Ni=class extends ln(D){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=bw(e[r]);return t}writeDomains(e,t){const r={};for(const i of Object.keys(e)){var s;e[i]&&(r[i]=(s=e[i])==null?void 0:s.toJSON())}t.domains=r}};o([c({json:{write:!0}})],Ni.prototype,"id",void 0),o([c({json:{write:!0}})],Ni.prototype,"name",void 0),o([c({json:{write:!0}})],Ni.prototype,"domains",void 0),o([Y("domains")],Ni.prototype,"readDomains",null),o([re("domains")],Ni.prototype,"writeDomains",null),o([c({type:[My],json:{write:!0}})],Ni.prototype,"templates",void 0),Ni=o([b("esri.layers.support.FeatureType")],Ni);const Vw=Ni;function MV(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function Lx(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function Dx(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class o5{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const r=[];for(const s of t){const i=s&&s.name;if(i){const n=Vx(i);this._fieldsMap.set(i,s),this._fieldsMap.set(n,s),r.push(n),MV(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):wb(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Lx(s)||Dx(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Lx(t)||Dx(t)||t.nullable||HI(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(Vx(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name}}function Vx(e){return e.toLowerCase().trim()}const OV=te.getLogger("esri.layers.support.fieldProperties");function a5(){return{fields:{type:[yy],value:null},fieldsIndex:{readOnly:!0,get(){return new o5(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||OV.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return O8(this.fieldsIndex,e)}}}}let al=class extends ln(D){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};o([c({type:String,json:{read:{source:"shapeAreaFieldName"}}})],al.prototype,"shapeAreaField",void 0),o([c({type:String,json:{read:{source:"shapeLengthFieldName"}}})],al.prototype,"shapeLengthField",void 0),o([c({type:String,json:{read:e=>fN.read(e)||yN.read(e)}})],al.prototype,"units",void 0),al=o([b("esri.layers.support.GeometryFieldsInfo")],al);const EV=al,TV=/\[([^\[\]]+)\]/gi;function o1(e,t,r){return e?e.map(s=>{const i=new Iy;if(i.read(s,r),i.labelExpression){const n=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;i.labelExpression=i.labelExpression.replace(TV,(a,u)=>`[${jV(u,n)}]`)}return i}):null}function jV(e,t){if(!t)return e;const r=e.toLowerCase();for(let s=0;s<t.length;s++){const i=t[s].name;if(i.toLowerCase()===r)return i}return e}var a1;let ll=a1=class extends D{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ut}clone(){return new a1({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};o([c({type:String,json:{write:!0}})],ll.prototype,"floorField",void 0),o([c({json:{read:!1,write:!1}})],ll.prototype,"viewAllMode",void 0),o([c({json:{read:!1,write:!1}})],ll.prototype,"viewAllLevelIds",void 0),ll=a1=o([b("esri.layers.support.LayerFloorInfo")],ll);const l5=ll,zx=new xe({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Ux=new xe({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let is=class extends ln(D){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};o([c({json:{read:zx.read,write:zx.write}})],is.prototype,"cardinality",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"composite",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"id",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"keyField",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"keyFieldInRelationshipTable",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"name",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"relatedTableId",void 0),o([c({json:{read:!0,write:!0}})],is.prototype,"relationshipTableId",void 0),o([c({json:{read:Ux.read,write:Ux.write}})],is.prototype,"role",void 0),is=o([b("esri.layers.support.Relationship")],is);const AV=is,Ms=[];function u5(e,t){if(Ow(e.url))return!0;const{wkid:r}=t;for(const s of Ms){if(e.version>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(r))return!1}return!0}Ms.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),Ms.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Ms.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Ms.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Ms.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Ms.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Ms.push([10.61,()=>new Set([102497])]),Ms.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Ms.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Ms.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function c5(e,t,r){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const i=await kw(s.populateFromStyle());if(Vs(r),i.ok===!1){const n=i.error;t&&t.messages&&t.messages.push(new Rr("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t.origin)}}}var l1;let Kt=l1=class extends D{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new l1(j({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};o([c({type:[String],json:{write:!0}})],Kt.prototype,"attachmentTypes",void 0),o([c({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Kt.prototype,"attachmentsWhere",void 0),o([c({type:[String],json:{write:!0}})],Kt.prototype,"keywords",void 0),o([c({type:[Number],json:{write:!0}})],Kt.prototype,"globalIds",void 0),o([c({json:{write:!0}})],Kt.prototype,"name",void 0),o([c({type:Number,json:{read:{source:"resultRecordCount"}}})],Kt.prototype,"num",void 0),o([c({type:[Number],json:{write:!0}})],Kt.prototype,"objectIds",void 0),o([c({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"returnMetadata",void 0),o([c({type:[Number],json:{write:!0}})],Kt.prototype,"size",void 0),o([c({type:Number,json:{read:{source:"resultOffset"}}})],Kt.prototype,"start",void 0),o([re("start"),re("num")],Kt.prototype,"writeStart",null),o([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Kt.prototype,"where",void 0),Kt=l1=o([b("esri.rest.support.AttachmentQuery")],Kt),Kt.from=rt(Kt);const p5=Kt;var u1;let bt=u1=class extends D{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new u1(j({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};o([c({type:ns,json:{write:!0}})],bt.prototype,"dynamicDataSource",void 0),o([c({type:String,json:{write:!0}})],bt.prototype,"gdbVersion",void 0),o([c({type:Number,json:{write:!0}})],bt.prototype,"geometryPrecision",void 0),o([c({type:Date})],bt.prototype,"historicMoment",void 0),o([re("historicMoment")],bt.prototype,"_writeHistoricMoment",null),o([c({type:Number,json:{write:!0}})],bt.prototype,"maxAllowableOffset",void 0),o([c({type:[Number],json:{write:!0}})],bt.prototype,"objectIds",void 0),o([c({type:[String],json:{write:!0}})],bt.prototype,"orderByFields",void 0),o([c({type:[String],json:{write:!0}})],bt.prototype,"outFields",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],bt.prototype,"outSpatialReference",void 0),o([c({json:{write:!0}})],bt.prototype,"relationshipId",void 0),o([c({type:Number,json:{read:{source:"resultOffset"}}})],bt.prototype,"start",void 0),o([re("start"),re("num")],bt.prototype,"writeStart",null),o([c({type:Number,json:{read:{source:"resultRecordCount"}}})],bt.prototype,"num",void 0),o([c({json:{write:!0}})],bt.prototype,"returnGeometry",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bt.prototype,"returnM",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bt.prototype,"returnZ",void 0),o([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],bt.prototype,"where",void 0),bt=u1=o([b("esri.rest.support.RelationshipQuery")],bt),bt.from=rt(bt);const c1=bt;var p1;let ul=p1=class extends D{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new p1({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};o([c({type:[String],json:{write:!0}})],ul.prototype,"groupByFields",void 0),o([c({type:Number,json:{write:!0}})],ul.prototype,"topCount",void 0),o([c({type:[String],json:{write:!0}})],ul.prototype,"orderByFields",void 0),ul=p1=o([b("esri.rest.support.TopFilter")],ul);const RV=ul;var d1;const qx=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Bx=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let dt=d1=class extends D{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new d1(j({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};o([c({type:Boolean,json:{write:!0}})],dt.prototype,"cacheHint",void 0),o([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],dt.prototype,"distance",void 0),o([c({types:Oa,json:{read:Hr,write:!0}})],dt.prototype,"geometry",void 0),o([c({type:Number,json:{write:!0}})],dt.prototype,"geometryPrecision",void 0),o([c({type:Number,json:{write:!0}})],dt.prototype,"maxAllowableOffset",void 0),o([c({type:Number,json:{read:{source:"resultRecordCount"}}})],dt.prototype,"num",void 0),o([c({json:{write:!0}})],dt.prototype,"objectIds",void 0),o([c({type:[String],json:{write:!0}})],dt.prototype,"orderByFields",void 0),o([c({type:[String],json:{write:!0}})],dt.prototype,"outFields",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],dt.prototype,"outSpatialReference",void 0),o([c({type:String,json:{write:!0}})],dt.prototype,"resultType",void 0),o([c({json:{write:!0}})],dt.prototype,"returnGeometry",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],dt.prototype,"returnM",void 0),o([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],dt.prototype,"returnZ",void 0),o([c({type:Number,json:{read:{source:"resultOffset"}}})],dt.prototype,"start",void 0),o([re("start"),re("num")],dt.prototype,"writeStart",null),o([c({type:String,json:{read:{source:"spatialRel",reader:qx.read},write:{target:"spatialRel",writer:qx.write}}})],dt.prototype,"spatialRelationship",void 0),o([c({type:wi,json:{write:!0}})],dt.prototype,"timeExtent",void 0),o([c({type:RV,json:{write:!0}})],dt.prototype,"topFilter",void 0),o([c({type:String,json:{read:Bx.read,write:{writer:Bx.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],dt.prototype,"units",void 0),o([c({type:String,json:{write:!0}})],dt.prototype,"where",void 0),dt=d1=o([b("esri.rest.support.TopFeaturesQuery")],dt),dt.from=rt(dt);const wc=dt,CV=["oid","global-id"],FV=["oid","global-id","guid"];function d5({displayField:e,editFieldsInfo:t,fields:r,objectIdField:s,title:i},n){if(!r)return null;const a=VV({editFieldsInfo:t,fields:r,objectIdField:s},n);if(!a.length)return null;const u=qV({titleBase:i,fields:r,displayField:e}),p=UV();return new Ta({title:u,content:p,fieldInfos:a})}const kV=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],PV=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:s})=>s?s.has(e.name):!h5(e.name,t)&&(!r||e.name!==r)&&!(CV.indexOf(e.type)>-1)&&!kV.some(i=>i.test(e.name));function NV(e,t){const r=e;return t&&(e=e.filter(s=>t.indexOf(s.type)===-1)),e===r&&(e=e.slice()),e.sort(LV),e}function LV(e,t){return e.type==="oid"?-1:t.type==="oid"?1:Gx(e)?-1:Gx(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h5(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:s,editDateField:i,editorField:n}=t;return[r&&r.toLowerCase(),s&&s.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())!==-1}function DV(e,t){return e.editable&&FV.indexOf(e.type)===-1&&!h5(e.name,t)}function VV({editFieldsInfo:e,fields:t,objectIdField:r},s){return NV(t,(s==null?void 0:s.ignoreFieldTypes)||BV).map(i=>new $b({fieldName:i.name,isEditable:DV(i,e),label:i.alias,format:zV(i),visible:PV(i,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:s==null?void 0:s.visibleFieldNames})}))}function zV(e){switch(e.type){case"small-integer":case"integer":case"single":return new Zd({digitSeparator:!0,places:0});case"double":return new Zd({digitSeparator:!0,places:2});case"date":return new Zd({dateFormat:"long-month-day-year"});default:return null}}function UV(){return[new ap,new ip]}function qV(e){const t=T8(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}function Gx(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const BV=["geometry","blob","raster","guid","xml"],xm=new xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),GV={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},$t="FeatureLayer",Jx=te.getLogger("esri.layers.FeatureLayer");function Hx(e){return e&&e instanceof ut}function Se(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function Rd(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function JV(e){var t;const r=e==null||(t=e.supportedSpatialAggregationStatistics)==null?void 0:t.map(s=>s.toLowerCase());return{envelope:!(r==null||!r.includes("envelopeaggregate")),centroid:!(r==null||!r.includes("centroidaggregate")),convexHull:!(r==null||!r.includes("convexhullaggregate"))}}const $m=a5();function Im(e,t,r){const s=!(r==null||!r.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let G=class extends ET($T(VT(HT(JT(GT(aT(LT(UT(gw(IT(YE(ln(LE))))))))))))){constructor(...e){super(...e),this._handles=new Pa,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=ke.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(ut.ofType(qi)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Bh(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?A({url:e},t):e}load(e){const t=R(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this._initLayerProperties(s)));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(eu).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new F("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,s){this._writeEditingEnabled(e,t,!0,s)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,s){s!=null&&s.writeLayerSchema&&Ar(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}get parsedUrl(){const e=this.url?Cr(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=$a(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=$a(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){ug(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const s=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(s){const i=ME(s,t,r)||void 0;return i||Jx.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}if(t.defaultSymbol)return t.types&&t.types.length?new hy({defaultSymbol:Mm(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:Mm(i.symbol,i,r)}))}):new dy({symbol:Mm(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(Hx(t)&&this._resetMemorySource(t),Hx(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ut?new _x({layer:this,items:e}):e:null}readSource(e,t){const r=my.fromJSON(t.featureSet);return new _x({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,s=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map(n=>My.fromJSON(n)),this._fixTemplates(e,s),this._fixTemplates(e,i),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,s=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const i=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?sT(this.url,r):r;let n=r;if(!n&&this.url){const a=Gp(this.url);R(a)&&(n=a.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&i&&i!==n&&(n=i+" - "+n),gy(n)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const s=t.fields.find(i=>i.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,s=r&&r.creatorField,i=r&&r.editorField;return e&&e.map(n=>(n=Vw.fromJSON(n),this._fixTemplates(n.templates,s),this._fixTemplates(n.templates,i),n))}set url(e){const t=nT({layer:this,url:e,nonStandardUrlAllowed:!0,logger:Jx});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,r,s){oT(this,e,null,t,s)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new F($t,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,r){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new F($t,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)})}async applyEdits(e,t){const r=await Re(()=>import("./editingSupport.dbb9c003.js"),["editingSupport.dbb9c003.js","normalizeUtils.371a33a9.js"],import.meta.url);return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return d5(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await q3(Re(()=>import("./FeatureLayerSource.80090a8b.js"),["FeatureLayerSource.80090a8b.js","clientSideDefaults.85acf5c3.js","QueryEngineCapabilities.9e441dc1.js","query.1108caef.js","normalizeUtils.371a33a9.js","pbfQueryUtils.8b1bed95.js","pbf.242b1286.js","OptimizedGeometry.2877750c.js","OptimizedFeatureSet.2574e09f.js","executeQueryJSON.a63347ea.js","featureConversionUtils.f055c068.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new ea,t=this.get("capabilities.data"),r=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:s,timeExtent:i}=this;return e.timeExtent=s!=null&&i!=null?i.offset(-s.value,s.unit):i||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new F($t,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new F($t,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const s=e.attributes?e.attributes[t]:void 0;if(s==null)return null;let i=null;return r.some(n=>{const{id:a}=n;return a!=null&&(a.toString()===s.toString()&&(i=n),!!i)}),i}getFieldDomain(e,t){const r=t&&t.feature,s=this.getFeatureType(r);if(s){const i=s.domains&&s.domains[e];if(i&&i.type!=="inherited")return i}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=p5.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new F($t,"this layer doesn't support attachments");const{attachmentTypes:r,objectIds:s,globalIds:i,num:n,size:a,start:u,where:p}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const d=s&&s.length>1,h=r&&r.length,f=i&&i.length,y=a&&a.length;if(d||h||f||y||n||u||p)throw new F($t,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(s&&s.length||p))throw new F($t,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new F($t,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(ea.from(e)||this.createQuery(),t)).then(r=>{if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(ea.from(e)||this.createQuery(),t);throw new F($t,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(ea.from(e)||this.createQuery(),t);throw new F($t,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(ea.from(e)||this.createQuery(),t);throw new F($t,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(c1.from(e),t);throw new F($t,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(c1.from(e),t);throw new F($t,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(wc.from(e),t).then(r=>{if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r});throw new F($t,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(wc.from(e),t);throw new F($t,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(wc.from(e),t);throw new F($t,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(wc.from(e),t);throw new F($t,"Layer source does not support queryFeatureCount capability")})}read(e,t){const r=e.featureCollection;if(r){const s=r.layers;s&&s.length===1&&(super.read(s[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var r,s;const i=(t=ve(A({},t),{writeLayerSchema:(r=(s=t)==null?void 0:s.writeLayerSchema)!=null?r:this._hasMemorySource()})).origin,n=t.layerContainerType,a=t.messages;if(this.isTable){if(i==="web-scene"||i==="web-map"&&n!=="tables")return a&&a.push(new F("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return a&&a.push(new F("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&i==="web-map"&&n==="tables")return a&&a.push(new F("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new F($t,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||u5(this,e))}_readEditingEnabled(e,t,r){var s;let i=(s=e.layerDefinition)==null?void 0:s.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,s){if(!e){var i,n;const a=(i=this.capabilities)!=null&&(n=i.operations)!=null&&n.supportsSync?"Query,Sync":"Query";Ar("layerDefinition.capabilities",a,t),!r||s!=null&&s.writeLayerSchema||(t.capabilities=a)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new F($t,`feature is missing the identifying attribute ${r}`)):Promise.reject(new F($t,"'attributes' are required on a feature to query attachments")):Promise.reject(new F($t,"A feature is required to add/delete/update attachments")):Promise.reject(new F($t,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return mt(this.url,{query:ve(A({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),ug(this.renderer,this.fieldsIndex),gb(this.timeInfo,this.fieldsIndex),c5(this,{origin:"service"})}async hasDataChanged(){var e;if((e=this.source)!=null&&e.refresh)try{var t;const{dataChanged:r,updates:s}=await((t=this.source)==null?void 0:t.refresh());if(R(s)&&(this.sourceJSON=A(A({},this.sourceJSON),s),this.read(s,{origin:"service",url:this.parsedUrl})),r)return!0}catch{}if(this.definitionExpression)try{return(await uL(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields&&this.fields.some(function(t){return t.type==="geometry"})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const s=r.prototype&&r.prototype.attributes;s&&t&&delete s[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new F("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new F("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(r=>{const s=GV[r.name];s&&(t[s]=!!r.isEnabled)}),t}_readDataCapabilities(e){return{isVersioned:Se(e,"isDataVersioned",!1),supportsAttachment:Se(e,"hasAttachments",!1),supportsM:Se(e,"hasM",!1),supportsZ:Se(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:Se(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map(p=>p.trim()):[],s=r.includes("editing")&&!t.datesInUnknownTimezone;let i=s&&r.includes("create"),n=s&&r.includes("delete"),a=s&&r.includes("update");const u=r.includes("changetracking");return s&&!(i||n||a)&&(i=n=a=!0),{supportsCalculate:Se(t,"supportsCalculate",!1),supportsTruncate:Se(t,"supportsTruncate",!1),supportsValidateSql:Se(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:n,supportsEditing:s,supportsChangeTracking:u,supportsQuery:r.includes("query"),supportsQueryAttachments:Se(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Se(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:a,supportsExceedsLimitStatistics:Se(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,s=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,n=(t=this.url)==null?void 0:t.includes("MapServer"),a=!k("mapserver-pbf-enabled")&&n&&this.version<10.81,u=Ow(this.url),p=(e.supportedQueryFormats||"").split(",").reduce((d,h)=>{const f=h.toLowerCase().trim();return f&&d.add(f),d},new Set);return{supportsStatistics:Se(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Se(r,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Se(r,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:JV(r),supportsCentroid:Se(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Se(r,"supportsQueryWithDistance",!1),supportsDistinct:Se(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Se(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Se(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Se(r,"supportsHavingClause",!1),supportsOrderBy:Se(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Se(r,"supportsPagination",!1),supportsQuantization:Se(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Se(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Se(e,"supportsReturningQueryGeometry",!1),supportsResultType:Se(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Se(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Se(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Se(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Se(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Se(s,"allowOthersToQuery",!0),supportsHistoricMoment:Se(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!a&&p.has("pbf"),supportsDisjointSpatialRelationship:Se(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Se(r,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:Se(r,"supportsDefaultSR",!1),supportsCompactGeometry:u,maxRecordCountFactor:Rd(e,"maxRecordCountFactor",void 0),maxRecordCount:Rd(e,"maxRecordCount",void 0),standardMaxRecordCount:Rd(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Rd(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=Se(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Se(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Se(e,"allowGeometryUpdates",!0),supportsGlobalId:Se(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Se(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Se(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Se(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Se(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Se(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Se(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Se(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Se(t,"allowOthersToUpdate",!0)}}};o([c({readOnly:!0,json:{read:!1}})],G.prototype,"capabilities",void 0),o([Y("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],G.prototype,"readCapabilities",null),o([c({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],G.prototype,"charts",void 0),o([c({readOnly:!0})],G.prototype,"createQueryVersion",null),o([c({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],G.prototype,"copyright",void 0),o([c({type:Boolean})],G.prototype,"datesInUnknownTimezone",void 0),o([c({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],G.prototype,"displayField",void 0),o([c({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],G.prototype,"definitionExpression",void 0),o([c({types:Qn,readOnly:!0})],G.prototype,"defaultSymbol",void 0),o([c({type:ns})],G.prototype,"dynamicDataSource",void 0),o([c({readOnly:!0})],G.prototype,"editFieldsInfo",void 0),o([c({type:Boolean})],G.prototype,"editingEnabled",null),o([Y(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],G.prototype,"readEditingEnabled",null),o([Y("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],G.prototype,"readEditingEnabledFromWebMap",null),o([re(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],G.prototype,"writeEditingEnabled",null),o([re("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],G.prototype,"writeEditingEnabledToWebMap",null),o([c({readOnly:!0})],G.prototype,"editingInfo",void 0),o([Y("editingInfo")],G.prototype,"readEditingInfo",null),o([c(CT)],G.prototype,"elevationInfo",void 0),o([c(n5)],G.prototype,"featureReduction",void 0),o([c(ve(A({},$m.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Im}}}}}))],G.prototype,"fields",void 0),o([c($m.fieldsIndex)],G.prototype,"fieldsIndex",void 0),o([c({type:l5,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],G.prototype,"floorInfo",void 0),o([c({type:xL,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],G.prototype,"formTemplate",void 0),o([c({type:Mt,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],G.prototype,"fullExtent",void 0),o([c()],G.prototype,"gdbVersion",void 0),o([c({readOnly:!0,type:EV,json:{read:{source:"geometryProperties"}}})],G.prototype,"geometryFieldsInfo",void 0),o([c({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:xm.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Im,writer(e,t,r){const s=e?xm.toJSON(e):null;s&&Ar(r,s,t)}}}},read:{source:"layerDefinition.geometryType",reader:xm.read}}})],G.prototype,"geometryType",void 0),o([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],G.prototype,"hasM",void 0),o([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],G.prototype,"hasZ",void 0),o([c({readOnly:!0,type:NE})],G.prototype,"heightModelInfo",void 0),o([c({type:Date})],G.prototype,"historicMoment",void 0),o([c(kT)],G.prototype,"id",void 0),o([c({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],G.prototype,"infoFor3D",void 0),o([c({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],G.prototype,"isTable",void 0),o([Y("service","isTable",["type","geometryType"]),Y("isTable",["layerDefinition.type","layerDefinition.geometryType"])],G.prototype,"readIsTable",null),o([re("web-map","isTable")],G.prototype,"writeIsTable",null),o([c(Fw)],G.prototype,"labelsVisible",void 0),o([c({type:[Iy],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:o1},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:o1},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],G.prototype,"labelingInfo",void 0),o([c(FT)],G.prototype,"opacity",void 0),o([c({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],G.prototype,"layerId",void 0),o([c(RT)],G.prototype,"legendEnabled",void 0),o([c({type:["show","hide"]})],G.prototype,"listMode",void 0),o([c(PT)],G.prototype,"minScale",void 0),o([Y("service","minScale",["minScale","effectiveMinScale"])],G.prototype,"readMinScale",null),o([c(NT)],G.prototype,"maxScale",void 0),o([Y("service","maxScale",["maxScale","effectiveMaxScale"])],G.prototype,"readMaxScale",null),o([c({type:String})],G.prototype,"globalIdField",void 0),o([Y("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Y("service","globalIdField",["globalIdField","fields"])],G.prototype,"readGlobalIdFieldFromService",null),o([c({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Im}}}}})],G.prototype,"objectIdField",void 0),o([Y("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Y("service","objectIdField",["objectIdField","fields"])],G.prototype,"readObjectIdFieldFromService",null),o([c({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],G.prototype,"operationalLayerType",void 0),o([c($m.outFields)],G.prototype,"outFields",void 0),o([c({readOnly:!0})],G.prototype,"parsedUrl",null),o([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],G.prototype,"path",void 0),o([c(Cw)],G.prototype,"popupEnabled",void 0),o([c({type:Ta,json:{name:"popupInfo",write:!0}})],G.prototype,"popupTemplate",void 0),o([c({readOnly:!0})],G.prototype,"defaultPopupTemplate",null),o([c({type:[AV],readOnly:!0})],G.prototype,"relationships",void 0),o([c({types:yw,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:IE,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],G.prototype,"renderer",null),o([Y("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Y("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],G.prototype,"readRenderer",null),o([c()],G.prototype,"sourceJSON",void 0),o([c({type:Boolean})],G.prototype,"returnM",void 0),o([c({type:Boolean})],G.prototype,"returnZ",void 0),o([c(jT)],G.prototype,"screenSizePerspectiveEnabled",void 0),o([c({clonable:!1})],G.prototype,"source",null),o([_t("source")],G.prototype,"castSource",null),o([Y("portal-item","source",["featureSet"]),Y("web-map","source",["featureSet"])],G.prototype,"readSource",null),o([c({readOnly:!0})],G.prototype,"serviceDefinitionExpression",void 0),o([Y("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],G.prototype,"readServiceDefinitionExpression",null),o([c({type:ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],G.prototype,"spatialReference",void 0),o([c({type:Number})],G.prototype,"subtypeCode",void 0),o([c({type:[My]})],G.prototype,"templates",void 0),o([Y("templates",["editFieldsInfo","creatorField","editorField","templates"])],G.prototype,"readTemplates",null),o([c({type:Pw})],G.prototype,"timeInfo",void 0),o([c()],G.prototype,"title",void 0),o([Y("service","title",["name"]),Y("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],G.prototype,"readTitle",null),o([Y("web-map","title",["layerDefinition.name","title"])],G.prototype,"readTitleFromWebMap",null),o([c({type:String})],G.prototype,"sublayerTitleMode",void 0),o([c({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],G.prototype,"trackIdField",void 0),o([c({json:{read:!1}})],G.prototype,"type",void 0),o([c({type:String})],G.prototype,"typeIdField",void 0),o([Y("service","typeIdField"),Y("typeIdField",["layerDefinition.typeIdField"])],G.prototype,"readTypeIdField",null),o([c({type:[Vw]})],G.prototype,"types",void 0),o([Y("service","types",["types"]),Y("types",["layerDefinition.types"])],G.prototype,"readTypes",null),o([c({readOnly:!0,json:{write:!1}})],G.prototype,"serverGens",void 0),o([c({type:ut.ofType(qi),readOnly:!0})],G.prototype,"indexes",void 0),o([c(AT)],G.prototype,"url",null),o([re("url")],G.prototype,"writeUrl",null),o([c({readOnly:!0})],G.prototype,"userIsAdmin",void 0),o([c({json:{origins:{service:{read:!0}},read:!1}})],G.prototype,"version",void 0),o([Y("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],G.prototype,"readVersion",null),o([c({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],G.prototype,"visible",void 0),o([Y("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],G.prototype,"readVisible",null),G=o([b("esri.layers.FeatureLayer")],G);const Mm=Ia({types:iw}),Oy=G;var HV=Object.freeze(Object.defineProperty({__proto__:null,default:Oy},Symbol.toStringTag,{value:"Module"}));const WV=/\?(\.|$)/g;function _f(e,t,r,s){const i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],n=h1(e,t,r,s);for(const a of i){const u=a.trim().replace(WV,"$1"),p=e.get(u);r.call(e,p,p,u,e)}return n}function h1(e,t,r,s){return e.watch(t,r,s)}function KV(e,t,r,s){return YV(e,t,XV,r,s)}function QV(e,t,r,s,i,n,a){const u={};function p(h){const f=u[h];f&&(n&&n(f.target,h,e,r),f.handle.remove(),delete u[h])}const d=_f(e,t,(h,f,y)=>{p(y),zf(h)&&(u[y]={handle:Tp(h,r,s),target:h},i&&i(h,y,e,r))},a);return{remove(){d.remove();for(const h in u)p(h)}}}function ZV(e,t,r,s,i){const n=e.watch(t,(a,u,p,d)=>{r&&!r(a)||s==null||s.call(e,a,u,p,d)},i);if(Array.isArray(t))for(const a of t){const u=e.get(a);r&&r(u)&&(s==null||s.call(e,u,u,t,e))}else{const a=e.get(t);r&&r(a)&&(s==null||s.call(e,a,a,t,e))}return n}function YV(e,t,r,s,i){const n=typeof s=="function"?s:null,a=typeof s=="object"?s:null;typeof s=="boolean"&&(i=s);let u,p=!1;function d(){u&&(u.remove(),u=null)}const h=ma();tn(a,()=>{d(),h.reject(Xt())});const f={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:d};return Object.freeze(f),u=ZV(e,t,r,(y,m,v,S)=>{p=!0,d(),n&&n.call(e,y,m,v,S),h.resolve({value:y,oldValue:m,propertyName:v,target:S})},i),p&&d(),f}function XV(e){return!e}function ez(e){return typeof e=="string"?document.getElementById(e):e}function f5(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var tz="[object Object]";function rz(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function sz(e,t){return function(r){return e(t(r))}}var iz=Function.prototype,y5=Object.prototype,m5=iz.toString,nz=y5.hasOwnProperty,oz=m5.call(Object),az=y5.toString,lz=sz(Object.getPrototypeOf,Object);function uz(e){return!!e&&typeof e=="object"}function cz(e){if(!uz(e)||az.call(e)!=tz||rz(e))return!1;var t=lz(e);if(t===null)return!0;var r=nz.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&m5.call(r)==oz}var pz=cz,gl={exports:{}},St={},bp={exports:{}},Na={};function g5(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function dz(e,t,r){}function hz(e,t,r){}var fz=/javascript\s*\:/img;function yz(e,t){return fz.test(t)?"":t}Na.whiteList=g5();Na.getDefaultWhiteList=g5;Na.onAttr=dz;Na.onIgnoreAttr=hz;Na.safeAttrValue=yz;var mz={indexOf:function(e,t){var r,s;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var s,i;if(Array.prototype.forEach)return e.forEach(t,r);for(s=0,i=e.length;s<i;s++)t.call(r,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Ru=mz;function gz(e,t){e=Ru.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,s=!1,i=0,n=0,a="";function u(){if(!s){var h=Ru.trim(e.slice(i,n)),f=h.indexOf(":");if(f!==-1){var y=Ru.trim(h.slice(0,f)),m=Ru.trim(h.slice(f+1));if(y){var v=t(i,a.length,y,m,h);v&&(a+=v+"; ")}}}i=n+1}for(;n<r;n++){var p=e[n];if(p==="/"&&e[n+1]==="*"){var d=e.indexOf("*/",n+2);if(d===-1)break;n=d+1,i=n+1,s=!1}else p==="("?s=!0:p===")"?s=!1:p===";"?s||u():p===`
`&&u()}return Ru.trim(a)}var vz=gz,Cd=Na,bz=vz;function Wx(e){return e==null}function wz(e){var t={};for(var r in e)t[r]=e[r];return t}function v5(e){e=wz(e||{}),e.whiteList=e.whiteList||Cd.whiteList,e.onAttr=e.onAttr||Cd.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Cd.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Cd.safeAttrValue,this.options=e}v5.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,s=r.whiteList,i=r.onAttr,n=r.onIgnoreAttr,a=r.safeAttrValue,u=bz(e,function(p,d,h,f,y){var m=s[h],v=!1;if(m===!0?v=m:typeof m=="function"?v=m(f):m instanceof RegExp&&(v=m.test(f)),v!==!0&&(v=!1),f=a(h,f),!!f){var S={position:d,sourcePosition:p,source:y,isWhite:v};if(v){var _=i(h,f,S);return Wx(_)?h+":"+f:_}else{var _=n(h,f,S);if(!Wx(_))return _}}});return u};var _z=v5;(function(e,t){var r=Na,s=_z;function i(a,u){var p=new s(u);return p.process(a)}t=e.exports=i,t.FilterCSS=s;for(var n in r)t[n]=r[n]})(bp,bp.exports);var zw={indexOf:function(e,t){var r,s;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var s,i;if(Array.prototype.forEach)return e.forEach(t,r);for(s=0,i=e.length;s<i;s++)t.call(r,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Sz=bp.exports.FilterCSS,xz=bp.exports.getDefaultWhiteList,Sf=zw;function b5(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var w5=new Sz;function $z(e,t,r){}function Iz(e,t,r){}function Mz(e,t,r){}function Oz(e,t,r){}function _5(e){return e.replace(Tz,"&lt;").replace(jz,"&gt;")}function Ez(e,t,r,s){if(r=O5(r),t==="href"||t==="src"){if(r=Sf.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Fd.lastIndex=0,Fd.test(r))return""}else if(t==="style"){if(Kx.lastIndex=0,Kx.test(r)||(Qx.lastIndex=0,Qx.test(r)&&(Fd.lastIndex=0,Fd.test(r))))return"";s!==!1&&(s=s||w5,r=s.process(r))}return r=E5(r),r}var Tz=/</g,jz=/>/g,Az=/"/g,Rz=/&quot;/g,Cz=/&#([a-zA-Z0-9]*);?/gim,Fz=/&colon;?/gim,kz=/&newline;?/gim,Fd=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Kx=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Qx=/u\s*r\s*l\s*\(.*/gi;function S5(e){return e.replace(Az,"&quot;")}function x5(e){return e.replace(Rz,'"')}function $5(e){return e.replace(Cz,function(r,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function I5(e){return e.replace(Fz,":").replace(kz," ")}function M5(e){for(var t="",r=0,s=e.length;r<s;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Sf.trim(t)}function O5(e){return e=x5(e),e=$5(e),e=I5(e),e=M5(e),e}function E5(e){return e=S5(e),e=_5(e),e}function Pz(){return""}function Nz(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function s(a){return r?!0:Sf.indexOf(e,a)!==-1}var i=[],n=!1;return{onIgnoreTag:function(a,u,p){if(s(a))if(p.isClosing){var d="[/removed]",h=p.position+d.length;return i.push([n!==!1?n:p.position,h]),n=!1,d}else return n||(n=p.position),"[removed]";else return t(a,u,p)},remove:function(a){var u="",p=0;return Sf.forEach(i,function(d){u+=a.slice(p,d[0]),p=d[1]}),u+=a.slice(p),u}}}function Lz(e){for(var t="",r=0;r<e.length;){var s=e.indexOf("<!--",r);if(s===-1){t+=e.slice(r);break}t+=e.slice(r,s);var i=e.indexOf("-->",s);if(i===-1)break;r=i+3}return t}function Dz(e){var t=e.split("");return t=t.filter(function(r){var s=r.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}St.whiteList=b5();St.getDefaultWhiteList=b5;St.onTag=$z;St.onIgnoreTag=Iz;St.onTagAttr=Mz;St.onIgnoreTagAttr=Oz;St.safeAttrValue=Ez;St.escapeHtml=_5;St.escapeQuote=S5;St.unescapeQuote=x5;St.escapeHtmlEntities=$5;St.escapeDangerHtml5Entities=I5;St.clearNonPrintableCharacter=M5;St.friendlyAttrValue=O5;St.escapeAttrValue=E5;St.onIgnoreTagStripAll=Pz;St.StripTagBody=Nz;St.stripCommentTag=Lz;St.stripBlankChar=Dz;St.cssFilter=w5;St.getDefaultCSSWhiteList=xz;var Ey={},zn=zw;function Vz(e){var t=zn.spaceIndex(e);if(t===-1)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=zn.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function zz(e){return e.slice(0,2)==="</"}function Uz(e,t,r){var s="",i=0,n=!1,a=!1,u=0,p=e.length,d="",h="";e:for(u=0;u<p;u++){var f=e.charAt(u);if(n===!1){if(f==="<"){n=u;continue}}else if(a===!1){if(f==="<"){s+=r(e.slice(i,u)),n=u,i=u;continue}if(f===">"){s+=r(e.slice(i,n)),h=e.slice(n,u+1),d=Vz(h),s+=t(n,s.length,d,h,zz(h)),i=u+1,n=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(u-y);m.trim()===""||m==="=";){if(m==="="){a=f;continue e}m=e.charAt(u-++y)}}else if(f===a){a=!1;continue}}return i<e.length&&(s+=r(e.substr(i))),s}var qz=/[^a-zA-Z0-9_:\.\-]/gim;function Bz(e,t){var r=0,s=[],i=!1,n=e.length;function a(f,y){if(f=zn.trim(f),f=f.replace(qz,"").toLowerCase(),!(f.length<1)){var m=t(f,y||"");m&&s.push(m)}}for(var u=0;u<n;u++){var p=e.charAt(u),d,h;if(i===!1&&p==="="){i=e.slice(r,u),r=u+1;continue}if(i!==!1&&u===r&&(p==='"'||p==="'")&&e.charAt(u-1)==="="){if(h=e.indexOf(p,u+1),h===-1)break;d=zn.trim(e.slice(r+1,h)),a(i,d),i=!1,u=h,r=u+1;continue}if(/\s|\n|\t/.test(p))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(h=Gz(e,u),h===-1){d=zn.trim(e.slice(r,u)),a(d),i=!1,r=u+1;continue}else{u=h-1;continue}else if(h=Jz(e,u-1),h===-1){d=zn.trim(e.slice(r,u)),d=Zx(d),a(i,d),i=!1,r=u+1;continue}else continue}return r<e.length&&(i===!1?a(e.slice(r)):a(i,Zx(zn.trim(e.slice(r))))),zn.trim(s.join(" "))}function Gz(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Jz(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Hz(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Zx(e){return Hz(e)?e.substr(1,e.length-2):e}Ey.parseTag=Uz;Ey.parseAttr=Bz;var Wz=bp.exports.FilterCSS,Es=St,T5=Ey,Kz=T5.parseTag,Qz=T5.parseAttr,Ch=zw;function kd(e){return e==null}function Zz(e){var t=Ch.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ch.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Ch.trim(e.slice(0,-1))),{html:e,closing:r}}function Yz(e){var t={};for(var r in e)t[r]=e[r];return t}function j5(e){e=Yz(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Es.onIgnoreTagStripAll),e.whiteList=e.whiteList||Es.whiteList,e.onTag=e.onTag||Es.onTag,e.onTagAttr=e.onTagAttr||Es.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Es.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Es.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Es.safeAttrValue,e.escapeHtml=e.escapeHtml||Es.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Wz(e.css))}j5.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,s=r.whiteList,i=r.onTag,n=r.onIgnoreTag,a=r.onTagAttr,u=r.onIgnoreTagAttr,p=r.safeAttrValue,d=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=Es.stripBlankChar(e)),r.allowCommentTag||(e=Es.stripCommentTag(e));var f=!1;if(r.stripIgnoreTagBody){var f=Es.StripTagBody(r.stripIgnoreTagBody,n);n=f.onIgnoreTag}var y=Kz(e,function(m,v,S,_,M){var P={sourcePosition:m,position:v,isClosing:M,isWhite:s.hasOwnProperty(S)},N=i(S,_,P);if(!kd(N))return N;if(P.isWhite){if(P.isClosing)return"</"+S+">";var z=Zz(_),V=s[S],H=Qz(z.html,function(le,he){var ue=Ch.indexOf(V,le)!==-1,we=a(S,le,he,ue);if(!kd(we))return we;if(ue)return he=p(S,le,he,h),he?le+'="'+he+'"':le;var we=u(S,le,he,ue);return kd(we)?void 0:we}),_="<"+S;return H&&(_+=" "+H),z.closing&&(_+=" /"),_+=">",_}else{var N=n(S,_,P);return kd(N)?d(_):N}},d);return f&&(y=f.remove(y)),y};var Xz=j5;(function(e,t){var r=St,s=Ey,i=Xz;function n(p,d){var h=new i(d);return h.process(p)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=i;for(var a in r)t[a]=r[a];for(var a in s)t[a]=s[a];function u(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}u()&&(self.filterXSS=e.exports)})(gl,gl.exports);var eU=function(){function e(t,r){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,a,u,p){return n==="a"&&a==="href"||(n==="img"||n==="source")&&a==="src"?s.sanitizeUrl(u):gl.exports.safeAttrValue(n,a,u,p)}};var i;t&&!r?i=t:t&&r?(i=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(n){n==="whiteList"?i.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]):i[n]=t[n]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList),this.xssFilterOptions=i,this._xssFilter=new gl.exports.FilterXSS(i)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t){var r=this._trim(t.substring(0,t.indexOf(":")));return t==="/"||t==="#"||t[0]==="#"||this.allowedProtocols.indexOf(r.toLowerCase())>-1?gl.exports.escapeAttrValue(t):""},e.prototype.sanitizeHTMLAttribute=function(t,r,s,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,s,i):gl.exports.safeAttrValue(t,r,s,i)},e.prototype.validate=function(t,r){r===void 0&&(r={});var s=this.sanitize(t,r);return{isValid:t===s,sanitized:s}},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(s){Object.keys(s).forEach(function(i){Array.isArray(s[i])&&Array.isArray(r[i])?r[i]=r[i].concat(s[i]):r[i]=s[i]})}),r},e.prototype._iterateOverObject=function(t,r){var s=this;r===void 0&&(r={});try{var i=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(u,p){var d=s.validate(p,r);return d.isValid?u.concat([p]):(i=!0,u.concat([d.sanitized]))},[]);else if(pz(t)){var a=Object.keys(t);n=a.reduce(function(u,p){var d=t[p],h=s.validate(d,r);return h.isValid?u[p]=d:(i=!0,u[p]=h.sanitized),u},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return i?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Ty=new Map;function A5(){Ty.clear()}function tU(e){return Ty.get(e)}function rU(e,t){Ty.set(e,t)}function Om(e){Ty.delete(e)}const sU=te.getLogger("esri.widgets.support.widgetUtils");function iU(e){const t=As.acquire();for(let s=0;s<arguments.length;s++){const i=arguments[s],n=typeof i;if(n==="string")t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if(n==="object")for(const a in i)i[a]&&t.push(a)}const r=t.join(" ");return As.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(r=>{A5();for(const s of r)e.get(s.target)(s)});return(r,s,i)=>(e.has(r)&&sU.error("Already observing element",r),e.set(r,s),t.observe(r,i),Ip(()=>{t.unobserve(r),e.delete(r)}))})();function _c(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const nU=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],oU=nU.reduce((e,t)=>(e[t]=[],e),{}),aU=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],R5=new eU({whiteList:oU,onTagAttr:(e,t,r)=>{const s=`${t}="${r}"`;if(aU.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function lU(e,t){const r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),i=r.top+r.height,n=s.top+s.height,a=r.top,u=s.top;(i>n||a<u)&&e.scrollIntoView({block:"end"})}function C5(e){return e==="Enter"||e===" "}const F5="http://www.w3.org/",jy=`${F5}2000/svg`,k5=`${F5}1999/xlink`;let xf,Yx=[],Uw=(e,t)=>{let r={};return Object.keys(e).forEach(s=>{r[s]=e[s]}),t&&Object.keys(t).forEach(s=>{r[s]=t[s]}),r},qw=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),P5=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},uU=(e,t,r)=>{if(t.vnodeSelector!==""){for(let s=r;s<e.length;s++)if(qw(e[s],t))return s}return-1},Em=(e,t,r,s)=>{let i=e[t];if(i.vnodeSelector==="")return;let n=i.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let a=0;a<e.length;a++)if(a!==t){let u=e[a];if(qw(u,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},cU=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},f1=[],y1=!1,N5=e=>{(e.children||[]).forEach(N5),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},Xx=()=>{y1=!1,f1.forEach(N5),f1.length=0},e$=e=>{f1.push(e),y1||(y1=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Xx,{timeout:16}):setTimeout(Xx,16))},t$=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),e$(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),e$(e))},pU=(e,t,r)=>{if(!t)return;let s=r.eventHandlerInterceptor,i=Object.keys(t),n=i.length;for(let a=0;a<n;a++){let u=i[a],p=t[u];if(u==="className")throw new Error('Property "className" is not supported, use "class".');if(u==="class")m1(e,p,!0);else if(u==="classes"){let d=Object.keys(p),h=d.length;for(let f=0;f<h;f++){let y=d[f];p[y]&&e.classList.add(y)}}else if(u==="styles"){let d=Object.keys(p),h=d.length;for(let f=0;f<h;f++){let y=d[f],m=p[y];m&&(P5(m),r.styleApplyer(e,y,m))}}else if(u!=="key"&&p!=null){let d=typeof p;d==="function"?(u.lastIndexOf("on",0)===0&&(s&&(p=s(u,p,e,t)),u==="oninput"&&function(){let h=p;p=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[u]=p):r.namespace===jy?u==="href"?e.setAttributeNS(k5,u,p):e.setAttribute(u,p):d==="string"&&u!=="value"?u==="innerHTML"?e[u]=R5.sanitize(p):e.setAttribute(u,p):e[u]=p}}},dU=(e,t,r)=>{if(t)for(let s of t)vl(s,e,void 0,r)},L5=(e,t,r)=>{dU(e,t.children,r),t.text&&(e.textContent=t.text),pU(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},vl=(e,t,r,s)=>{let i,n=0,a=e.vnodeSelector,u=t.ownerDocument;if(a==="")i=e.domNode=u.createTextNode(e.text),r!==void 0?t.insertBefore(i,r):t.appendChild(i);else{for(let p=0;p<=a.length;++p){let d=a.charAt(p);if(p===a.length||d==="."||d==="#"){let h=a.charAt(n-1),f=a.slice(n,p);h==="."?i.classList.add(f):h==="#"?i.id=f:(f==="svg"&&(s=Uw(s,{namespace:jy})),s.namespace!==void 0?i=e.domNode=u.createElementNS(s.namespace,f):(i=e.domNode=e.domNode||u.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&i.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),n=p+1}}L5(i,e,s)}},m1=(e,t,r)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,r)})},hU=(e,t,r,s)=>{if(!r)return;let i=!1,n=Object.keys(r),a=n.length;for(let u=0;u<a;u++){let p=n[u],d=r[p],h=t[p];if(p==="class")h!==d&&(m1(e,h,!1),m1(e,d,!0));else if(p==="classes"){let f=e.classList,y=Object.keys(d),m=y.length;for(let v=0;v<m;v++){let S=y[v],_=!!d[S];_!==!!h[S]&&(i=!0,_?f.add(S):f.remove(S))}}else if(p==="styles"){let f=Object.keys(d),y=f.length;for(let m=0;m<y;m++){let v=f[m],S=d[v];S!==h[v]&&(i=!0,S?(P5(S),s.styleApplyer(e,v,S)):s.styleApplyer(e,v,""))}}else if(d||typeof h!="string"||(d=""),p==="value"){let f=e[p];f!==d&&(e["oninput-value"]?f===e["oninput-value"]:d!==h)&&(e[p]=d,e["oninput-value"]=void 0),d!==h&&(i=!0)}else if(d!==h){let f=typeof d;f==="function"&&s.eventHandlerInterceptor||(s.namespace===jy?p==="href"?e.setAttributeNS(k5,p,d):e.setAttribute(p,d):f==="string"?p==="innerHTML"?e[p]=R5.sanitize(d):p==="role"&&d===""?e.removeAttribute(p):e.setAttribute(p,d):e[p]!==d&&(e[p]=d),i=!0)}}return i},fU=(e,t,r,s,i)=>{if(r===s)return!1;s=s||Yx;let n,a=(r=r||Yx).length,u=s.length,p=0,d=0,h=!1;for(;d<u;){let f=p<a?r[p]:void 0,y=s[d];if(f!==void 0&&qw(f,y))h=xf(f,y,i)||h,p++;else{let m=uU(r,y,p+1);if(m>=0){for(n=p;n<m;n++)t$(r[n]),Em(r,n,e,"removed");h=xf(r[m],y,i)||h,p=m+1}else vl(y,t,p<a?r[p].domNode:void 0,i),cU(y),Em(s,d,e,"added")}d++}if(a>p)for(n=p;n<a;n++)t$(r[n]),Em(r,n,e,"removed");return h};xf=(e,t,r)=>{let s=e.domNode,i=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let a=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(a,s),t.domNode=a,i=!0,i}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=Uw(r,{namespace:jy})),e.text!==t.text&&(n=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,n=fU(t,s,e.children,t.children,r)||n,n=hU(s,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),i};let Cu=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=r,xf(s,r,t)},domNode:e.domNode});const yU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Fu=e=>Uw(yU,e),Pd={create:(e,t)=>(t=Fu(t),vl(e,document.createElement("div"),void 0,t),Cu(e,t)),append:(e,t,r)=>(r=Fu(r),vl(t,e,void 0,r),Cu(t,r)),insertBefore:(e,t,r)=>(r=Fu(r),vl(t,e.parentNode,e,r),Cu(t,r)),merge:(e,t,r)=>(r=Fu(r),t.domNode=e,L5(e,t,r),Cu(t,r)),replace:(e,t,r)=>(r=Fu(r),vl(t,e.parentNode,e,r),e.parentNode.removeChild(e),Cu(t,r))};const mU={handleInterceptedEvent:(e,t,r,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||r,[s]))},gU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},vU=e=>A(A({},gU),e),bU=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},wU=(e,t)=>e.find(t),r$=(e,t,r=!1)=>{let s=e;return t.forEach((i,n)=>{var a;const u=(a=s)!=null&&a.children?wU(s.children,p=>p.domNode===i):void 0;r&&!u&&n!==t.length-1||(s=u)}),s},_U=e=>{let t;const r=A(A({},mU),e),s=vU(r),i=s.performanceLogger;let n,a=!0,u=!1;const p=[],d=[],h=(y,m,v)=>{let S;s.eventHandlerInterceptor=(M,P,N,z)=>function(V){let H;i("domEvent",V);const be=bU(V.currentTarget,S.domNode),le=be.some(ue=>{var we;return customElements.get(ue==null||(we=ue.tagName)==null?void 0:we.toLowerCase())});if(V.eventPhase===Event.CAPTURING_PHASE||!le)be.reverse(),H=r$(S.getLastRender(),be);else{const ue=V.composedPath(),we=ue.slice(ue.indexOf(V.currentTarget),ue.indexOf(S.domNode)).filter(Ee=>Ee.getRootNode()===Ee.ownerDocument).reverse();H=r$(S.getLastRender(),we,!0)}let he;return H&&(he=r.handleInterceptedEvent(t,H,this,V)),i("domEventProcessed",V),he},r.postProcessProjectionOptions==null||r.postProcessProjectionOptions(s);const _=v();S=y(m,_,s),p.push(S),d.push(v),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(S,_)};let f=()=>{if(n=void 0,a){a=!1,i("renderStart",void 0);for(let y=0;y<p.length;y++){const m=d[y]();i("rendered",void 0),p[y].update(m),i("patched",void 0)}i("renderDone",void 0),a=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,p,d)),t={renderNow:f,scheduleRender:()=>{n||u||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),u=!0},resume:()=>{u=!1,a=!0,t.scheduleRender()},append:(y,m)=>{h(Pd.append,y,m)},insertBefore:(y,m)=>{h(Pd.insertBefore,y,m)},merge:(y,m)=>{h(Pd.merge,y,m)},replace:(y,m)=>{h(Pd.replace,y,m)},detach:y=>{for(let m=0;m<d.length;m++)if(d[m]===y)return d.splice(m,1),p.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},D5=typeof window<"u"?window:{};D5.document;D5.HTMLElement||class{};const SU=e=>e;let V5;function xU(){SU(ls(fu(V5)))}V5="components/assets";const z5=Symbol("widget"),$U=[],IU={},$f=new WeakMap;function U5(e,t){let r=t.children;if(r&&r.length)for(let i=0;i<r.length;++i)r[i]=U5(e,r[i]);else r=$U;const s=t.vnodeSelector;if(Bw(s)){const i=t.properties||IU,n=i.key||s;return{vnodeSelector:"div",properties:{key:n,afterCreate:MU,afterUpdate:OU,afterRemoved:q5,parentWidget:e,widgetConstructor:s,widgetProperties:ve(A({},i),{key:n,children:r})},children:void 0,text:void 0,domNode:null}}return t}function MU(e,t,r,{parentWidget:s,widgetConstructor:i,widgetProperties:n}){const a=new i(n);a.container=e,$f.set(e,a),a.afterCreate==null||a.afterCreate(a,e),s._internalHandles.add(Ip(()=>q5(e)))}function OU(e,t,r,{widgetProperties:s}){const i=$f.get(e);i&&(i.set(s),i.afterUpdate==null||i.afterUpdate(i,e))}function q5(e){const t=$f.get(e);t&&(t.destroy(),$f.delete(e))}function Bw(e){return typeof e=="function"&&e[z5]}function EU(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}const B5="esri.widgets.Widget",s$=te.getLogger(B5);let TU=0;const jU={widgetIcon:"esri-icon-checkbox-unchecked"};function G5(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?G5(e[r],t[r]):e[r]=t[r]);return e}const AU=_U({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(s,i,n,a)=>{const u=t(s,i,n,a),p=r.test(s);if(!((s=s.replace(r,"")).toLowerCase()in n)||p){const d=s[2].toLowerCase()+s.slice(3),h=m=>u.call(n,m);n.addEventListener(d,h,p);const f=()=>n.removeEventListener(d,h,p),y=a.afterRemoved;a.afterRemoved=m=>{y==null||y(m),f()}}return u}},handleInterceptedEvent(e,t,r,s){const{eventPhase:i,type:n}=s,a=i===Event.CAPTURING_PHASE;let u=`on${n}${a?"capture":""}`;const p=t.properties;(u in p||(u=`on${n[0].toUpperCase()}${n.slice(1)}${a?"Capture":""}`,u in p))&&(A5(),e.scheduleRender(),p[u].call(p.bind||r,s))}});let Tm=!1,Ft=class extends ay(Rp.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Pa,this._projector=AU,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=jU.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=Z1(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const u=await fi(this._messageBundleProps.map(async({bundlePath:p,propertyName:d})=>{let h=await Iw(p);this.uiStrings&&Object.keys(this.uiStrings)&&(h=G5(j(h),this.uiStrings)),this[d]=h}));for(const p of u)p.error&&s$.error("widget-intl:locale-error",this.declaredClass,p.error)}await this.loadLocale()}),xU();const r=["light","dark"],s=EU()||"light";r.includes(s)||Pf(s$,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const i="esri-widget-uid-"+f5(),n=this.render.bind(this);this._trackingTarget=new Gf(()=>this.scheduleRender());const a=()=>{var u;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const p=n();let{properties:d}=p;d||(p.properties=d={});let{key:h,styles:f}=d;h||(d.key=i),f||(d.styles=f={}),f.display||(f.display="");let y=0;return(u=p.children)==null||u.forEach(m=>{if(Bw(m.vnodeSelector))return;let{properties:v}=m;v||(m.properties=v={}),v.key||(v.key=`${this.id}--${y++}`)}),U5(this,p)};this.render=()=>{if(Tm)return a();let u=tU(this);if(u)return u;this._trackingTarget.clear(),Tm=!0;try{u=en(this._trackingTarget,a)}finally{Tm=!1}return rU(this,u),u},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(e,t){const r=A({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Hm)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Bh(this._trackingTarget),this.viewModel=Bh(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Om(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return ez(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+TU++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Om(this),this._projector.scheduleRender())}classes(...e){return iU.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){Om(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),(e=this._delegatedEventNames)!=null&&e.length&&this._internalHandles.add(Wl(()=>this.viewModel,(r,s)=>{s&&this._internalHandles.remove("delegated-events"),r&&this._internalHandles.add(this._delegatedEventNames.map(i=>r.on(i,n=>{this.emit(i,n)})),"delegated-events")},UE)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(Hm),this.scheduleRender()};this._internalHandles.add([XI(t),Wl(()=>this.uiStrings,t),ww(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Ft[z5]=!0,o([c()],Ft.prototype,"_readyForTrueRender",void 0),o([c({value:null})],Ft.prototype,"container",null),o([_t("container")],Ft.prototype,"castContainer",null),o([c({aliasOf:"container"})],Ft.prototype,"domNode",void 0),o([c()],Ft.prototype,"iconClass",void 0),o([c()],Ft.prototype,"id",null),o([c()],Ft.prototype,"label",void 0),o([c()],Ft.prototype,"renderable",null),o([c()],Ft.prototype,"uiStrings",void 0),o([c()],Ft.prototype,"viewModel",void 0),o([c()],Ft.prototype,"visible",void 0),o([c()],Ft.prototype,"key",void 0),o([c()],Ft.prototype,"children",void 0),o([c()],Ft.prototype,"afterCreate",void 0),o([c()],Ft.prototype,"afterUpdate",void 0),o([c()],Ft.prototype,"afterRemoved",void 0),Ft=o([b(B5)],Ft);const Gw=Ft;function RU(e){return e&&typeof e.highlight=="function"}let Tt=class extends kp(D){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};o([c()],Tt.prototype,"autoNavigate",void 0),o([c()],Tt.prototype,"filter",void 0),o([c()],Tt.prototype,"getResults",void 0),o([c()],Tt.prototype,"getSuggestions",void 0),o([c()],Tt.prototype,"maxResults",void 0),o([c()],Tt.prototype,"maxSuggestions",void 0),o([c()],Tt.prototype,"minSuggestCharacters",void 0),o([c()],Tt.prototype,"outFields",void 0),o([c()],Tt.prototype,"placeholder",void 0),o([c()],Tt.prototype,"popupEnabled",void 0),o([c()],Tt.prototype,"popupTemplate",void 0),o([c()],Tt.prototype,"prefix",void 0),o([c()],Tt.prototype,"resultGraphicEnabled",void 0),o([c()],Tt.prototype,"resultSymbol",void 0),o([c()],Tt.prototype,"suggestionsEnabled",void 0),o([c()],Tt.prototype,"suffix",void 0),o([c()],Tt.prototype,"withinViewEnabled",void 0),o([c()],Tt.prototype,"zoomScale",void 0),Tt=o([b("esri.widgets.Search.SearchSource")],Tt);const Jw=Tt,J5=96;function CU(e,t){const r=t||e.extent,s=e.width,i=pu(r&&r.spatialReference);return r&&s?r.width/s*i*tE*J5:0}function FU(e,t){return e/(pu(t)*tE*J5)}function kU(e,t){const r=e.extent,s=e.width,i=FU(t,r.spatialReference);return r.clone().expand(i*s/r.width)}const i$=te.getLogger("esri.widgets.Search.support.geometryUtils");function PU(e,t){var r,s;if(!t)return i$.error("missing-parameter: view is missing."),Promise.reject(new F("searchgeometryutils:missing-parameter","view is missing."));if(!e)return i$.error("missing-parameter: point is missing."),Promise.reject(new F("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const i=t==null||(r=t.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:(s=t.basemapTerrain)==null?void 0:s.elevationQueryCache}).then(n=>n.geometry):Promise.resolve(e)}function n$(e){if(ae(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function Hw(e,t,r){return ae(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?H5(e,t,r):void 0}function g1(e,t,r){return ae(e)||ae(t)?null:H5(e.center,t,r)}function H5(e,t,r){const s=e.hasZ?e.z:void 0;return t&&t.map?(r?kU(t,r):t.extent).clone().centerAt(e).set({zmax:s,zmin:s}):new Mt({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:s,zmax:s})}const NU=/https?:\/\/services.*\.arcgis\.com/i,LU=/(?:\{([^}]+)\})/g,Cl=te.getLogger("esri.widgets.Search.support.layerSearchUtils");function DU(e,t){const{exactMatch:r=!1,location:s,maxResults:i,spatialReference:n,source:a,sourceIndex:u,suggestResult:p,view:d}=e,{layer:h,filter:f,zoomScale:y}=a,m=d&&d.scale,v=W5(a,d),S=t&&t.signal;return Q5(h).then(()=>{const _=h.popupTemplate;return _?_.getRequiredFields(h.fieldsIndex):null}).then(_=>{var M,P,N;const{objectIdField:z,returnZ:V}=h,H=Y5(a);if(!Ww(h,H))throw Cl.error("invalid-field: displayField is invalid."),new F("getResults():invalid-field","displayField is invalid.");const be=_&&_.length?_:[H],le=a.outFields||be,he=K5(le);if(le.indexOf(z)!==-1||he||le.push(z),(M=h.floorInfo)!=null&&M.floorField&&le.push(h.floorInfo.floorField),!(he||If(h,le)))throw Cl.error("invalid-field: outField is invalid."),new F("getResults():invalid-field","outField is invalid.");const ue=h.createQuery(),{orderByFields:we}=a;if(we&&(ue.orderByFields=we),n){ue.outSpatialReference=n;const fe=1/pu(n);fe&&(ue.maxAllowableOffset=fe)}const Ee=h.geometryType==="mesh"||h.geometryType==="multipatch",Pe=((P=h.capabilities)==null||(N=P.data)==null?void 0:N.supportsZ)&&!Ee;if(ue.returnZ=Pe&&V!==!1,ue.returnGeometry=!0,ue.multipatchOption=Ee?"xyFootprint":null,le&&(ue.outFields=le),s)ue.geometry=s;else if(p.key)ue.objectIds=[p.key];else{const fe=a.searchFields||[H];if(!If(h,fe))throw Cl.error("invalid-field: search field is invalid."),new F("getResults():invalid-field","search field is invalid.");if(Z5(h)&&(ue.num=i),v&&(ue.geometry=v),!p.text.trim())return[];const{prefix:ct="",suffix:st=""}=a,$e=e4({searchTerm:X5(`${ct}${p.text}${st}`),layer:h,searchFields:fe,filter:f,exactMatch:r,type:"search"});if(!$e)return[];ue.where=$e}return h.queryFeatures(ue,{signal:S}).then(fe=>ZU(fe,d,a,u,H,m,y))})}function VU(e,t){const{source:r,spatialReference:s,view:i,suggestTerm:n,maxSuggestions:a,sourceIndex:u,exactMatch:p}=e,{layer:d,filter:h}=r,f=t&&t.signal,y=W5(r,i);return Q5(d).then(()=>{if(!Z5(d))return[];const m=Y5(r),v=r.searchFields||[m],S=[];r.suggestionTemplate?r.suggestionTemplate.replace(LU,(he,ue)=>(S.push(ue),he)):S.push(m);const _=K5(S);S.indexOf(d.objectIdField)!==-1||_||S.push(d.objectIdField);const M=Ww(d,m),P=_||If(d,S),N=If(d,v);if(!M)throw Cl.error("invalid-field: displayField is invalid."),new F("getSuggestions():invalid-field","displayField is invalid.");if(!P)throw Cl.error("invalid-field: outField is invalid."),new F("getSuggestions():invalid-field","outField is invalid.");if(!N)throw Cl.error("invalid-field: search field is invalid."),new F("getSuggestions():invalid-field","search field is invalid.");const z=d.createQuery(),{orderByFields:V}=r;if(V&&(z.orderByFields=V),z.outSpatialReference=s,z.returnGeometry=!1,z.num=a,z.outFields=S,y&&(z.geometry=y),!n.trim())return[];const{prefix:H="",suffix:be=""}=r,le=e4({searchTerm:X5(`${H}${n}${be}`),layer:d,searchFields:v,filter:h,exactMatch:p,type:"suggest"});return le?(z.where=le,d.queryFeatures(z,{signal:f}).then(he=>KU(he,r,u,m))):[]})}function W5(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.extent;return r&&r.geometry||(s&&i?i:void 0)}function K5(e){return e&&e.indexOf("*")!==-1}async function Q5(e){e&&await e.load()}function Z5(e){var t,r,s;return(t=e==null||(r=e.capabilities)==null||(s=r.query)==null?void 0:s.supportsPagination)!=null&&t}function zU(e){var t,r,s,i;return(t=e==null||(r=e.fieldsIndex)==null||(s=r.fields)==null||(i=s.find(n=>n.type==="string"))==null?void 0:i.name)!=null?t:""}function Y5(e){return e.displayField||e.layer.displayField||zU(e.layer)}function If(e,t){return!(!e||!t)&&t.every(r=>Ww(e,r))}function Ww(e,t){return!!e.getField(t)}function UU(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function qU(e,t,r){let s=null;const{codedValues:i}=e;return i&&i.some(n=>{const a=n.name,u=r?a:a.toLowerCase();return(r?t:t.toLowerCase())===u&&(s=n.code.toString(),!0)}),s}function X5(e){return e.replace(/\'/g,"''")}function Nd(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function BU({currentTerm:e,field:t,filter:r,exactMatch:s,url:i,type:n}){const a=t.type,u=t.name;if(a==="string"||a==="date"||a==="global-id"){const p=NU.test(i),d=p&&UU(e)?"N":"";if(s&&n==="search")return Nd(`${u} = ${d}'${e}'`,r);const h=p?u:`UPPER(${u})`,f=p?e:e.toUpperCase();return Nd(`${h} LIKE ${d}${s?`'${f}%'`:`'%${f}%'`}`,r)}if(a==="oid"||a==="small-integer"||a==="integer"||a==="single"||a==="double"){const p=Number(e);return isNaN(p)?null:Nd(`${u} = ${p}`,r)}return Nd(`${u} = ${e}`,r)}function GU(e,t){return e?` OR (${t})`:`(${t})`}function e4({searchTerm:e,layer:t,searchFields:r,filter:s,exactMatch:i,type:n}){const{definitionExpression:a,url:u}=t;let p="";return e&&r&&r.forEach(d=>{const h=t.getField(d),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(d),y=(f&&f.type==="coded-value"?qU(f,e,i):null)||e||null;if(y!==null){const m=BU({currentTerm:y,field:h,filter:s,exactMatch:i,url:u,type:n});m&&(p+=GU(p,m))}}),a?`(${a}) AND (${p})`:p}function JU(e,t){let r=null;const{codedValues:s}=e;return s&&s.length&&s.some(i=>i.code===t&&(r=i.name,!0)),r}function HU(e,t){return e[Object.keys(e).find(r=>r.toLowerCase()===t.toLowerCase())]}function t4(e,t,r){const s=e.sourceLayer,{attributes:i}=e,n=typeof s.getFieldDomain=="function"&&s.getFieldDomain(r);if(t)return xw(t,i);if(r&&i){const a=s.getField(r),u=HU(i,r);return u==null?"":n&&n.type==="coded-value"?JU(n,u):(a==null?void 0:a.type)==="date"?xa(new Date(u)):typeof u=="number"?u.toString():typeof u!="string"?"":u.trim()}return""}function WU(e,t,r,s){const i=e.sourceLayer,{attributes:n}=e,{objectIdField:a}=i,u=n[a];return{text:t4(e,t.suggestionTemplate,s),key:u,sourceIndex:r}}function KU(e,t,r,s){return e.features.map(i=>WU(i,t,r,s))}function QU(e,t,r,s,i,n,a){const u=e.clone(),p=e.sourceLayer,d=p&&p.objectIdField,h=d&&e.attributes[d],f=t4(e,r.searchTemplate,i),y=Hw(u.geometry,t,n),m=typeof a=="number"?g1(j(y),t,a):y,v=e.clone();return R(m)&&(v.geometry=Ma.fromExtent(m)),{extent:m,target:v,feature:u,key:h,name:f,sourceIndex:s}}function ZU(e,t,r,s,i,n,a){return e.features.map(u=>QU(u,t,r,s,i,n,a))}var v1;let Os=v1=class extends Jw{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,r)=>DU(A({source:this},t),r),this.getSuggestions=(t,r)=>VU(A({source:this},t),r)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new v1({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?j(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?j(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(e=(t=this.layer.fieldsIndex.fields.find(r=>r.type==="string"))==null?void 0:t.name)!=null?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(r=>{const s=e.getField(r);return s&&s.alias||r}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};o([c({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Os.prototype,"displayField",void 0),o([c({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Os.prototype,"exactMatch",void 0),o([c({value:null})],Os.prototype,"layer",null),o([c()],Os.prototype,"name",null),o([c({type:[String],json:{write:!0}})],Os.prototype,"orderByFields",void 0),o([c()],Os.prototype,"searchFields",void 0),o([c()],Os.prototype,"searchTemplate",void 0),o([c()],Os.prototype,"suggestionTemplate",void 0),Os=v1=o([b("esri.widgets.Search.LayerSearchSource")],Os);const cl=Os;function mu(e,t){return t?ve(A({},t),{query:A(A({},e),t.query)}):{query:e}}function gu(e){return typeof e=="string"?Cr(e):e}function vu(e,t,r){const s={};for(const i in e){if(i==="declaredClass")continue;const n=e[i];if(n!=null&&typeof n!="function")if(Array.isArray(n)){s[i]=[];for(let a=0;a<n.length;a++)s[i][a]=vu(n[a])}else if(typeof n=="object")if(n.toJSON){const a=n.toJSON(r&&r[i]);s[i]=t?a:JSON.stringify(a)}else s[i]=t?n:JSON.stringify(n);else s[i]=n}return s}function YU(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function XU(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let Fn=class extends D{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};o([c({type:String,json:{write:!0}})],Fn.prototype,"address",void 0),o([c({type:Object,json:{write:!0}})],Fn.prototype,"attributes",void 0),o([c({type:Mt,json:{write:!0}})],Fn.prototype,"extent",void 0),o([c({type:nt,json:{write:!0}})],Fn.prototype,"location",void 0),o([c({type:Number,json:{write:!0}})],Fn.prototype,"score",void 0),Fn=o([b("esri.rest.support.AddressCandidate")],Fn);const Kw=Fn,Ay={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Qt=class extends D{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};o([c({type:Object,json:{write:!0}})],Qt.prototype,"address",void 0),o([c(Ay)],Qt.prototype,"apiKey",void 0),o([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Qt.prototype,"categories",void 0),o([c({type:String,json:{write:!0}})],Qt.prototype,"countryCode",void 0),o([c({type:Boolean,json:{write:!0}})],Qt.prototype,"forStorage",void 0),o([c({type:nt,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Qt.prototype,"location",void 0),o([c({type:String,json:{write:!0}})],Qt.prototype,"locationType",void 0),o([c({type:String,json:{write:!0}})],Qt.prototype,"magicKey",void 0),o([c({type:Number,json:{write:!0}})],Qt.prototype,"maxLocations",void 0),o([c({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],Qt.prototype,"outFields",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Qt.prototype,"outSpatialReference",void 0),o([c({type:Mt,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],Qt.prototype,"searchExtent",void 0),Qt=o([b("esri.rest.support.AddressToLocationsParameters")],Qt),Qt.from=rt(Qt);const r4=Qt;async function s4(e,t,r){t=r4.from(t);const s=gu(e),i=t.toJSON(),{address:n}=i,a=uR(i,["address"]),u=ve(A(A({},n),a),{f:"json"}),p=vu(A(A({},s.query),u)),d=mu(p,r),h=`${s.path}/findAddressCandidates`;return mt(h,d).then(eq)}function eq({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map(s=>{if(!s)return;const{extent:i,location:n}=s,a=!i||XU(i);return YU(n)&&a?(i&&(i.spatialReference=r),n.spatialReference=r,Kw.fromJSON(s)):void 0}):[]}let oi=class extends D{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};o([c({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map(t=>t.attributes):null},write:{writer:(e,t)=>{const r=[];Array.isArray(e)&&e.forEach(s=>{r.push({attributes:s})}),t.addresses={records:r}}}}})],oi.prototype,"addresses",void 0),o([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],oi.prototype,"categories",void 0),o([c({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],oi.prototype,"countryCode",void 0),o([c({type:String,json:{write:!0}})],oi.prototype,"locationType",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],oi.prototype,"outSpatialReference",void 0),oi=o([b("esri.rest.support.AddressesToLocationsParameters")],oi),oi.from=rt(oi);const tq=oi;async function rq(e,t,r){t=tq.from(t);const s=gu(e),i=ve(A({},t.toJSON()),{f:"json"}),n=vu(A(A({},s.query),i)),a=mu(n,r),u=`${s.path}/geocodeAddresses`;return mt(u,a).then(sq)}function sq(e){const{data:t}=e;if(!t)return[];const{locations:r,spatialReference:s}=t;return r?r.map(i=>{const{location:n}=i;return n&&(n.spatialReference=s),Kw.fromJSON(i)}):[]}let Li=class extends D{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};o([c(Ay)],Li.prototype,"apiKey",void 0),o([c({type:nt,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,s=r!==void 0;t.location=s?r:null}}}})],Li.prototype,"location",void 0),o([c({type:String,json:{write:!0}})],Li.prototype,"locationType",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Li.prototype,"outSpatialReference",void 0),Li=o([b("esri.rest.support.LocationToAddressParameters")],Li),Li.from=rt(Li);const i4=Li;async function n4(e,t,r){t=i4.from(t);const s=gu(e),i=ve(A({},t.toJSON()),{f:"json"}),n=vu(A(A({},s.query),i)),a=mu(n,r),u=`${s.path}/reverseGeocode`;return mt(u,a).then(iq)}function iq({data:e}){if(!e)return;const{address:t,location:r}=e,s=t&&t.Match_addr||"";return Kw.fromJSON({address:s,attributes:t||{},location:r,score:100})}let pl=class extends D{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};o([c({type:Boolean,json:{write:!0}})],pl.prototype,"isCollection",void 0),o([c({type:String,json:{write:!0}})],pl.prototype,"magicKey",void 0),o([c({type:String,json:{write:!0}})],pl.prototype,"text",void 0),pl=o([b("esri.rest.support.SuggestionCandidate")],pl);const nq=pl;let Dr=class extends D{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};o([c(Ay)],Dr.prototype,"apiKey",void 0),o([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Dr.prototype,"categories",void 0),o([c({type:String,json:{write:!0}})],Dr.prototype,"countryCode",void 0),o([c({type:nt,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Dr.prototype,"location",void 0),o([c({type:Number,json:{write:!0}})],Dr.prototype,"maxSuggestions",void 0),o([c({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Dr.prototype,"outSpatialReference",void 0),o([c({type:Mt,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],Dr.prototype,"searchExtent",void 0),o([c({type:String,json:{write:!0}})],Dr.prototype,"text",void 0),Dr=o([b("esri.rest.support.SuggestLocationsParameters")],Dr),Dr.from=rt(Dr);const o4=Dr;async function a4(e,t,r){const s=gu(e),i=ve(A({},(t=o4.from(t)).toJSON()),{f:"json"}),n=vu(A(A({},s.query),i)),a=mu(n,r),u=`${s.path}/suggest`;return mt(u,a).then(oq)}function oq(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map(s=>new nq(s)):[]}let dl=class extends ht{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return typeof e!="string"?e:A({url:e},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Cr(e):null}_encode(e,t,r){const s={};for(const i in e){if(i==="declaredClass")continue;const n=e[i];if(n!=null&&typeof n!="function")if(Array.isArray(n)){s[i]=[];for(let a=0;a<n.length;a++)s[i][a]=this._encode(n[a])}else if(typeof n=="object")if(n.toJSON){const a=n.toJSON(r&&r[i]);s[i]=t?a:JSON.stringify(a)}else s[i]=t?n:JSON.stringify(n);else s[i]=n}return s}};o([c({readOnly:!0})],dl.prototype,"parsedUrl",null),o([c()],dl.prototype,"requestOptions",void 0),o([c({type:String})],dl.prototype,"url",void 0),dl=o([b("esri.tasks.Task")],dl);const l4=dl;let Sc=class extends l4{constructor(e){super(e),this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=A(A({},this.requestOptions),t);return s4(this.url,e,r)}suggestLocations(e,t){const r=A(A({},this.requestOptions),t);return a4(this.url,e,r)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=A(A({},this.requestOptions),t);return rq(this.url,e,r)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r=A(A({},this.requestOptions),t);return n4(this.url,e,r)}};o([c({type:ke})],Sc.prototype,"outSpatialReference",void 0),o([c()],Sc.prototype,"url",void 0),Sc=o([b("esri.tasks.Locator")],Sc);const aq=Sc,lq="Single Line Input",uq=3e5;function cq(e,t){return e.location?yq(e,t):mq(e,t)}function u4(e,t){if(t.localSearchDisabled)return null;const r=e==null?void 0:e.scale;return typeof r=="number"&&r<=uq?e.get("extent.center"):null}function pq(e,t){const{source:r,spatialReference:s,view:i,suggestTerm:n,maxSuggestions:a,sourceIndex:u}=e,p=new o4,{apiKey:d,url:h}=r,f=c4(r,i),y=t&&t.signal;if(!h)return Promise.resolve(null);d&&(p.apiKey=d),r.categories&&(p.categories=r.categories),s&&(p.outSpatialReference=s);const m=u4(i,r);if(m&&(p.location=m),!n.trim())return Promise.resolve(null);const{prefix:v="",suffix:S=""}=r,_=`${v}${n}${S}`;return p.text=_,f&&(p.searchExtent=f),p.maxSuggestions=a,r.countryCode&&(p.countryCode=r.countryCode),a4(h,p,{signal:y}).then(M=>vq(M,u))}function dq(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function hq(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function o$(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}const fq="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function yq(e,t){const{source:r,spatialReference:s,location:i,sourceIndex:n,view:a}=e,{apiKey:u,url:p,zoomScale:d,defaultZoomScale:h}=r,f=a&&a.scale,y=t&&t.signal,m=new i4;return m.location=i,u&&(m.apiKey=u),s&&(m.outSpatialReference=s),n4(p,m,{signal:y}).then(v=>p4([v],{sourceIndex:n,scale:f,view:a,zoomScale:d,defaultZoomScale:h})).catch(()=>[])}function c4(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.scale,n=t&&t.extent,a=r&&r.geometry;return Hw(a,t,i)||(s&&n?n:void 0)}function mq(e,t){const{source:r,suggestResult:s,spatialReference:i,view:n,maxResults:a,sourceIndex:u}=e,p=r&&r.zoomScale,d=r&&r.defaultZoomScale;if(!s.text.trim())return Promise.resolve(null);const h=!s.key&&r.prefix?r.prefix:"",f=!s.key&&r.suffix?r.suffix:"",y=`${h}${s.text}${f}`,m=new r4,{apiKey:v,url:S}=r,_=n&&n.scale,M=c4(r,n),P=t&&t.signal;if(v&&(m.apiKey=v),!S)return Promise.resolve(null);r.categories&&(m.categories=r.categories),r.locationType&&(m.locationType=r.locationType),i&&(m.outSpatialReference=i);const N=u4(n,r);N&&(m.location=N),m.maxLocations=a,M&&(m.searchExtent=M),r.countryCode&&(m.countryCode=r.countryCode);const{key:z}=s,V=`${z}`;return z&&(m.magicKey=V),m.address={},m.address[r.singleLineFieldName||lq]=y,r.outFields&&(m.outFields=r.outFields),s4(S,m,{signal:P}).then(H=>p4(H,{key:V,scale:_,sourceIndex:u,view:n,zoomScale:p,defaultZoomScale:d}))}function gq(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function vq(e,t){return e.map(r=>gq(r,t))}function bq(e,t){const{key:r,scale:s,sourceIndex:i,view:n,zoomScale:a,defaultZoomScale:u}=t,{attributes:p,extent:d,location:h,address:f}=e,y=new sn({geometry:h,attributes:p}),m=d||h,v=Hw(m,n,s),S=typeof a=="number"?g1(v,n,a):typeof u=="number"&&m.type==="point"?g1(v,n,u):v,_=h?`${h.x},${h.y}`:"",M=f||_,P=y.clone();return R(S)&&(P.geometry=Ma.fromExtent(S)),{extent:S,feature:y,target:P,key:r,name:M,sourceIndex:i}}function p4(e,t){return e.filter(Boolean).map(r=>bq(r,t))}var b1;const d4="esri.widgets.Search.LocatorSearchSource",a$=te.getLogger(d4);let Zt=b1=class extends Jw{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,r)=>cq(A({source:this},t),r),this.getSuggestions=(t,r)=>pq(A({source:this},t),r)}set locator(e){Kc(a$,"locator",{replacement:"url",version:"4.22"}),this._set("url",e.url),this._set("locator",e)}get locator(){return Kc(a$,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new b1({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?j(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?j(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};o([c()],Zt.prototype,"apiKey",void 0),o([c()],Zt.prototype,"categories",void 0),o([c()],Zt.prototype,"countryCode",void 0),o([c({json:{write:!0}})],Zt.prototype,"defaultZoomScale",void 0),o([c()],Zt.prototype,"localSearchDisabled",void 0),o([c({type:aq,json:{read:!1,write:!1}})],Zt.prototype,"locator",null),o([c()],Zt.prototype,"locationType",void 0),o([c({json:{write:!0}})],Zt.prototype,"name",void 0),o([c({json:{write:!0}})],Zt.prototype,"placeholder",void 0),o([c()],Zt.prototype,"searchTemplate",void 0),o([c({json:{write:!0}})],Zt.prototype,"singleLineFieldName",void 0),o([c({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Zt.prototype,"suggestionsEnabled",void 0),o([c({json:{write:!0}})],Zt.prototype,"url",void 0),o([c({json:{write:!0}})],Zt.prototype,"zoomScale",void 0),Zt=b1=o([b(d4)],Zt);const h4=Zt,wq=new xe({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),_q=new xe({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function Sq(e){const{geometries:t,deviationUnit:r,maxDeviation:s}=e.toJSON(),i={maxDeviation:s};return t&&t.length&&(i.geometries=JSON.stringify({geometryType:eo(t[0]),geometries:t}),i.sr=JSON.stringify(t[0].spatialReference)),_q.write(r,i,"deviationUnit"),i}let kn=class extends D{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};o([c({type:String,json:{write:!0}})],kn.prototype,"deviationUnit",void 0),o([c({json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],kn.prototype,"geometries",void 0),o([c({type:Number,json:{write:!0}})],kn.prototype,"maxDeviation",void 0),kn=o([b("esri.rest.support.GeneralizeParameters")],kn),kn.from=rt(kn);const xq=kn,$q=new xe({preserveShape:"preserve-shape"});function Iq(e){const{polylines:t,lengthUnit:r,geodesic:s,calculationType:i}=e.toJSON(),n={};n.polylines=JSON.stringify(t);const a=e.polylines[0].spatialReference;return n.sr=a.wkid?a.wkid:JSON.stringify(a.toJSON()),r&&(n.lengthUnit=r),s&&(n.geodesic=s),i&&(n.calculationType=$q.toJSON(i)),n}let Di=class extends D{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};o([c({type:String,json:{write:!0}})],Di.prototype,"calculationType",void 0),o([c({type:Boolean,json:{write:!0}})],Di.prototype,"geodesic",void 0),o([c({json:{write:!0}})],Di.prototype,"lengthUnit",void 0),o([c({type:[su],json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],Di.prototype,"polylines",void 0),Di=o([b("esri.rest.support.LengthsParameters")],Di),Di.from=rt(Di);const Mq=Di,Oq=new xe({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),Eq=new xe({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function Tq(e){const{geometries:t,bevelRatio:r,offsetDistance:s,offsetHow:i,offsetUnit:n}=e.toJSON(),a={bevelRatio:r,offsetDistance:s};return t&&t.length&&(a.geometries=JSON.stringify({geometryType:eo(t[0]),geometries:t}),a.sr=JSON.stringify(t[0].spatialReference)),i&&(a.offsetHow=Oq.toJSON(i)),n&&(a.offsetUnit=Eq.toJSON(n)),a}let ai=class extends D{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};o([c({type:Number,json:{write:!0}})],ai.prototype,"bevelRatio",void 0),o([c({json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],ai.prototype,"geometries",void 0),o([c({type:Number,json:{write:!0}})],ai.prototype,"offsetDistance",void 0),o([c({type:String,json:{write:!0}})],ai.prototype,"offsetHow",void 0),o([c({type:String,json:{write:!0}})],ai.prototype,"offsetUnit",void 0),ai=o([b("esri.rest.support.OffsetParameters")],ai),ai.from=rt(ai);const jq=ai;function Aq(e){return{geometryType:eo(e[0]),geometries:e.map(t=>t.toJSON())}}function f4(e,t,r){const s=JI(t);return e.map(i=>{const n=s.fromJSON(i);return n.spatialReference=r,n})}let Ho=class extends D{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(function(s){return s.toJSON()}),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:eo(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};o([c()],Ho.prototype,"geometries",void 0),o([c({json:{read:{source:"outSR"}}})],Ho.prototype,"outSpatialReference",void 0),o([c()],Ho.prototype,"transformation",void 0),o([c()],Ho.prototype,"transformForward",void 0),Ho=o([b("esri.rest.support.ProjectParameters")],Ho);const y4=Ho,Rq=rt(y4);async function m4(e,t,r){t=Rq(t);const s=gu(e),i=A(ve(A({},s.query),{f:"json"}),t.toJSON()),n=t.outSpatialReference,a=eo(t.geometries[0]),u=mu(i,r);return mt(s.path+"/project",u).then(({data:{geometries:p}})=>f4(p,a,n))}const Cq=new xe({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function Fq(e){const{geometries1:t,geometries2:r,relation:s,relationParameter:i}=e.toJSON(),n={};if(t&&t.length){n.geometries1=JSON.stringify({geometryType:eo(t[0]),geometries:t});const a=t[0].spatialReference;n.sr=a.wkid?a.wkid:JSON.stringify(a)}return r&&r.length>0&&(n.geometries2=JSON.stringify({geometryType:eo(r[0]),geometries:r})),s&&(n.relation=Cq.toJSON(s)),i&&(n.relationParam=i),n}let Vi=class extends D{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};o([c({json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(r=>r.toJSON())}}}})],Vi.prototype,"geometries1",void 0),o([c({json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(r=>r.toJSON())}}}})],Vi.prototype,"geometries2",void 0),o([c({type:String,json:{write:!0}})],Vi.prototype,"relation",void 0),o([c({type:String,json:{write:!0}})],Vi.prototype,"relationParameter",void 0),Vi=o([b("esri.rest.support.RelationParameters")],Vi),Vi.from=rt(Vi);const kq=Vi,Pq=new xe({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function Nq(e){const{extendHow:t,polylines:r,trimExtendTo:s}=e.toJSON(),i={};return i.extendHow=Pq.toJSON(t),r&&r.length&&(i.polylines=JSON.stringify(r),i.sr=JSON.stringify(r[0].spatialReference)),s&&(i.trimExtendTo=JSON.stringify(s)),i}let Pn=class extends D{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};o([c({type:String,json:{write:!0}})],Pn.prototype,"extendHow",void 0),o([c({type:[su],json:{read:{reader:e=>e?e.map(t=>Hr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],Pn.prototype,"polylines",void 0),o([c({json:{read:{reader:e=>e?Hr(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Pn.prototype,"trimExtendTo",void 0),Pn=o([b("esri.rest.support.TrimExtendParameters")],Pn),Pn.from=rt(Pn);const Lq=Pn,g4=te.getLogger("esri.widgets.support.geolocationUtils"),Dq={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Vq(){const e=k("esri-geolocation");return e||g4.warn("geolocation-unsupported","Geolocation unsupported."),e}function zq(){const e=window.isSecureContext;return e||g4.warn("insecure-context","Geolocation requires a secure origin."),e}function l$(){return Vq()&&zq()}function Uq(e){return e||(e=Dq),new Promise((r,s)=>{setTimeout(()=>s(new F("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(r,s,e)})}function qq(e,t){const{position:r,view:s}=e;return Jq(Gq(Bq(r)),s,t)}function Bq(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:r,timestamp:e.timestamp}}function Gq(e){const t=e&&e.coords;return t?new nt({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function Jq(e,t,r){if(!t)return Promise.resolve(e);const s=t.spatialReference;return s.isWGS84?Promise.resolve(e):s.isWebMercator?Promise.resolve(Ec(e)):Hq(r).then(i=>{if(!i)throw new F("geometry-service:missing-url","Geometry service URL is missing");const n=new y4({geometries:[e],outSpatialReference:s});return m4(i,n,r).then(a=>a[0])})}function Hq(e){if(Qe.geometryServiceUrl)return Promise.resolve(Qe.geometryServiceUrl);const t=_r.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}const Wq=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:s}=this;return this.goToOverride?this.goToOverride(s,r):s.goTo(r.target,r.options)}};return o([c()],t.prototype,"goToOverride",void 0),o([c()],t.prototype,"view",void 0),t=o([b("esri.widgets.support.GoTo")],t),t};function er(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const Kq=()=>Iw("esri/widgets/Search/t9n/Search"),v4="esri.widgets.Search.SearchViewModel",fs=te.getLogger(v4),u$="highlight",Fh=ut.ofType({key:e=>e.layer?"layer":"locator",base:Jw,typeMap:{layer:cl,locator:h4}}),c$=ke.WGS84,Qq="esri/images/search/search-symbol-32.svg",Zq="esri/images/search/search-symbol-32.png",Yq=/<(?:.|\s)*?>/g,hl=-1;let Me=class extends Wq(Rp.EventedMixin(ht)){constructor(e){super(e),this._handles=new Pa,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Fh,this.defaultSymbols={point:new cu({url:fu(k("trident")?Zq:Qq),size:24,width:24,height:24}),polyline:new Wr({color:[130,130,130,1],width:2}),polygon:new ao({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=_r.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Fh,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await Kq();this.messages=t,this.defaultPopupTemplate=new Ta({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([_f(this,["includeDefaultSources","view","portal"],()=>this._update()),XI(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:hl}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,s=typeof r=="function"?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,i=this._get("allSources")||new Fh;return i.removeAll(),i.addMany(s.filter(Boolean)),i}get defaultSymbol(){return Kc(fs,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){Kc(fs,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||l$()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=l$();if(e&&!t){const r=new F("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});fs.error(r)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===hl)return r;const s=e.getItemAt(t);return s?s.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),s=this.when().then(()=>this._getResultsFromSources(r,t).then(i=>{var n;if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,i,r);const u=this._getFirstResult(a.results),p=(r.location&&u?u.name:r.text).replace(Yq,"");return this._set("searchTerm",p),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce((d,h)=>d+h.results.length,0)),this.emit("search-complete",a),this._selectFirstResult(u).then(()=>a)})).then(i=>(this._clearSearching(),i),i=>{throw this._clearSearching(),i});return this._searching=s,s}searchNearby(e){if(!this.locationEnabled){const r=new F("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return fs.error(r),Promise.reject(r)}const t=Uq().then(r=>qq({position:r,view:this.view},e)).then(r=>this.search(r,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const M=new F("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return fs.error(M),Promise.reject(M)}const{view:t}=this,r=er(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=this.allSources.getItemAt(r);if(!s){const M=new F("select:missing-source","Cannot select without a source.",{source:s});return fs.error(M),Promise.reject(M)}const i=s instanceof cl?this._getLayerSourcePopupTemplate(s):s.popupTemplate,n=s.resultSymbol||this._getDefaultSymbol(e),a=er(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,u=er(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,p=er(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,d=p?i||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const M=new F("select:missing-feature","Cannot select without a feature.",{feature:h});return fs.error(M),Promise.reject(M)}const{attributes:f,geometry:y,layer:m,sourceLayer:v}=h,S=n$(y),_={layerViewQuery:this._getLayerView(h),elevationQuery:t&&R(S)?PU(S,t).catch(()=>S):Promise.resolve(S)};return fi(_).then(M=>{const P=M.layerViewQuery.value,N=M.elevationQuery.value;n instanceof lo&&(n.text=e.name);const z=t&&u?e.target||e.extent:null;return(R(z)?this._goToSearchResult(z):Promise.resolve()).then(()=>{var V;const H=P?h:new sn({geometry:y,symbol:n,attributes:f,layer:m,sourceLayer:v,popupTemplate:d}),be=p&&((V=this.view)==null?void 0:V.popup),le=be&&H.getEffectivePopupTemplate(be.defaultPopupTemplateEnabled);return le&&t.popup.open({features:[H],location:N}),P&&RU(P)&&!le&&this._highlightFeature({graphic:H,layerView:P}),!P&&a&&t&&t.graphics.push(H),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",H),this.emit("select-result",{result:e,source:s,sourceIndex:r}),e})})}suggest(e,t,r){const s=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(t,r).then(()=>this._suggestImmediate(s,r).then(i=>(this._set("suggestions",i.results),this._set("suggestionCount",i.results.reduce((n,a)=>n+a.results.length,0)),this.emit("suggest-complete",i),i)))}async when(){await Iv(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=fi([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await Iv(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var e,t;const r=(e=this.portal)==null||(t=e.helperServices)==null?void 0:t.geocode;return r?r.map(s=>{if(s.placefinding===!1)return;const i=Qe.apiKey&&o$(s.url)?{url:fq}:null,n=h4.fromJSON(A(A({},s),i)),a=n.url;if(o$(a)||hq(a)||dq(a)){const u=n.outFields||["Addr_type","Match_addr","StAddr","City"],p=n.placeholder||this.messages.placeholder,d=typeof n.defaultZoomScale=="number"?n.defaultZoomScale:2500;n.set({singleLineFieldName:"SingleLine",outFields:u,placeholder:p,defaultZoomScale:d})}return n.singleLineFieldName?n:void 0}).filter(Boolean):[]}_getLayerSources(e,t){var r;const s=(r=this.view)==null?void 0:r.map;return e.map(i=>{const n=s.findLayerById(i.id);if(!n)return;const a=this._getLayerJSON(i),u=cl.fromJSON(a);return u.placeholder=t,this._getLayer(n,a).then(p=>{u.layer=p}),u}).filter(Boolean).toArray()}_getTableSources(e,t){var r;const s=(r=this.view)==null?void 0:r.map;return e.map(i=>{const n=s.findTableById(i.id);if(!n)return;const a=this._getLayerJSON(i),u=cl.fromJSON(a);return u.placeholder=t,this._getLayer(n,a).then(p=>{u.layer=p}),u}).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,r;const s=(e=this.view)==null?void 0:e.map,i=s==null||(t=s.applicationProperties)==null||(r=t.viewing)==null?void 0:r.search;if(!i)return[];const{enabled:n,hintText:a,layers:u,tables:p}=i;return n?[...this._getLayerSources(u,a),...this._getTableSources(p,a)]:[]}_getSubLayer(e,t){return e.load().then(()=>{if(!e.allSublayers)return Promise.reject();const r=e.allSublayers.find(s=>s.id===t.subLayer);return r?r.createFeatureLayer():Promise.reject()})}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find(s=>s.id===t.subLayer);return(r==null?void 0:r.type)!=="building-component"?Promise.reject():(await r.load(),r.associatedLayer==null?Promise.reject():(await r.associatedLayer.load(),r))}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const r=new F("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return fs.error(r),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=(e=this.view)==null?void 0:e.popup,{resultGraphic:r}=this;if(!t||!r)return;const{selectedFeature:s}=t;s&&s===r&&t.close()}_suggestTimer(e,t){const r=e!=null?e:this.suggestionDelay;return Q1(r,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof sn?n$(e.geometry):e instanceof nt?e:Array.isArray(e)&&e.length===2?new nt({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&er(e,"key")&&er(e,"text")&&er(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:s,selectedResult:i}=this,n=!e&&s&&i,a=n&&s.key===i.key&&s.sourceIndex===i.sourceIndex,u=n&&s.location;return a||u?s:{location:t,text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(r=>{const{results:s}=r,i=s[0],n=!!i;return n&&(t=i),n}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(r=>{var s;if((s=t==null?void 0:t.signal)!=null&&s.aborted)return null;const i={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(i,r),i})}_formatSourceResponse(e,t,r){const s=t&&t.value||[],i=t&&t.error,n=this.allSources.getItemAt(r);if(i){const a={sourceIndex:r,source:n,error:i};e.errors.push(a),fs.error(i),e.numErrors++}else{const a={sourceIndex:r,source:n,results:s};e.results.push(a),e.numResults+=s.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===hl){const s=r&&er(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;t.forEach((i,n)=>{const a=s!==void 0?s:n;this._formatSourceResponse(e,i,a)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:r}=this,s=!e.location&&er(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!r.length){const n=new F("search:no-sources-defined","At least one source is required.",{allSources:r});return fs.error(n),Promise.reject(n)}return s===hl?r.forEach((n,a)=>{i.push(this._getResultsFromSource(e,a,t))}):i.push(this._getResultsFromSource(e,s,t)),fi(i)}_getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:s}=this,i=[];if(!r.length){const n=new F("suggest:no-sources-defined","At least one source is required.",{allSources:r});return fs.error(n),Promise.reject(n)}return s===hl?r.forEach((n,a)=>{i.push(this._getSuggestionsFromSource(e,a,t))}):i.push(this._getSuggestionsFromSource(e,s,t)),fi(i)}_getResultsFromSource(e,t,r){var s;const i=this.allSources.getItemAt(t),{location:n=null}=e,a=((s=this.view)==null?void 0:s.spatialReference)||c$,u=er(i,"maxResults")?i.maxResults:this.maxResults,p=!!(i instanceof cl&&er(i,"exactMatch"))&&i.exactMatch,{view:d}=this;return i.getResults({view:d,sourceIndex:t,location:n,suggestResult:e,spatialReference:a,exactMatch:p,maxResults:u},r)}_getSuggestionsFromSource(e,t,r){const s=this.allSources.getItemAt(t),i=er(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,n=e.length,a=er(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&n>=a){var u;const p=((u=this.view)==null?void 0:u.spatialReference)||c$,d=er(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(s instanceof cl&&er(s,"exactMatch"))&&s.exactMatch;return s.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:p,maxSuggestions:d,exactMatch:f},r)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return er(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let r=null;return t.some(s=>s.results.some(i=>i===e&&(r=s.sourceIndex,!0))),r}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const r=new AbortController;this._gotoController=r;const s={target:{target:e},options:{animate:t,signal:r.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var t;const{defaultSymbols:r}=this,s=(t=e.feature)==null?void 0:t.geometry;if(!R(s))return null;const i=this._get("defaultSymbol");if(i&&(s.type==="point"||s.type==="multipoint"))return i;switch(s.type){case"point":case"multipoint":return r.point;case"polyline":return r.polyline;case"extent":case"polygon":return r.polygon;default:return null}}_removeHighlight(){this._handles.remove(u$)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return Promise.resolve(null);const{layer:r}=e;return await t.when(),t.whenLayerView(r)}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:s,layer:i}=t,{objectIdField:n}=i,a=s&&s[n],u=r.highlight(a||t);this._handles.add(u,u$)}_setResultFloor(e){var t,r,s;const{view:i}=this,n=(t=e.feature)==null?void 0:t.attributes,a=(r=e.feature)==null?void 0:r.sourceLayer;if(a&&"floorInfo"in a&&a!=null&&(s=a.floorInfo)!=null&&s.floorField&&n){const u=n[a.floorInfo.floorField];i.emit("select-result-floor",u)}}};Me.ALL_INDEX=hl,o([c()],Me.prototype,"_searching",void 0),o([c()],Me.prototype,"_updatingPromise",void 0),o([c({readOnly:!0,value:null})],Me.prototype,"activeSource",null),o([c()],Me.prototype,"activeSourceIndex",null),o([c()],Me.prototype,"allPlaceholder",null),o([c({readOnly:!0})],Me.prototype,"allSources",null),o([c()],Me.prototype,"autoNavigate",void 0),o([c()],Me.prototype,"autoSelect",void 0),o([c()],Me.prototype,"defaultPopupTemplate",void 0),o([c({readOnly:!0})],Me.prototype,"defaultSources",void 0),o([c()],Me.prototype,"defaultSymbol",null),o([c()],Me.prototype,"defaultSymbols",void 0),o([c()],Me.prototype,"includeDefaultSources",void 0),o([c()],Me.prototype,"locationEnabled",null),o([c()],Me.prototype,"maxInputLength",void 0),o([c()],Me.prototype,"maxResults",void 0),o([c()],Me.prototype,"maxSuggestions",void 0),o([c()],Me.prototype,"messages",void 0),o([c()],Me.prototype,"minSuggestCharacters",void 0),o([c({readOnly:!0})],Me.prototype,"placeholder",null),o([c()],Me.prototype,"popupEnabled",void 0),o([c({type:Ta})],Me.prototype,"popupTemplate",void 0),o([c({type:_r})],Me.prototype,"portal",void 0),o([c()],Me.prototype,"resultCount",void 0),o([c()],Me.prototype,"resultGraphicEnabled",void 0),o([c({readOnly:!0})],Me.prototype,"resultGraphic",void 0),o([c({readOnly:!0})],Me.prototype,"results",void 0),o([c({readOnly:!0})],Me.prototype,"selectedSuggestion",void 0),o([c()],Me.prototype,"searchAllEnabled",void 0),o([c({readOnly:!0})],Me.prototype,"selectedResult",void 0),o([c()],Me.prototype,"searchTerm",null),o([c({type:Fh})],Me.prototype,"sources",void 0),o([c({readOnly:!0})],Me.prototype,"state",null),o([c()],Me.prototype,"suggestionDelay",void 0),o([c()],Me.prototype,"suggestionCount",void 0),o([c({readOnly:!0})],Me.prototype,"suggestions",void 0),o([c()],Me.prototype,"suggestionsEnabled",void 0),o([c({readOnly:!0})],Me.prototype,"updating",null),o([c()],Me.prototype,"view",void 0),o([c()],Me.prototype,"clear",null),Me=o([b(v4)],Me);const bl=Me;function p$(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:eB(e[t])}}}function Xq(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function eB(e){return function(t,...r){Xq(t)?C5(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Mf(e){return function(t,r){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var tB=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},b4=function(e,t){for(var r=0,s=e.length;r<s;r++){var i=e[r];Array.isArray(i)?b4(i,t):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=tB(i)),t.push(i))}},rB=function(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var i=[];return b4(r,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}};function me(e,t,...r){return typeof e!="function"||Bw(e)?rB(e,t,...r):e(t,...r)}const Mi={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let Nn=class extends Gw{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[Mi.showMoreResults]:this.showMoreResultsOpen};return me("div",{class:Mi.base},me("div",{key:"esri-search-renderer__container",class:this.classes(Mi.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return me("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=(e=this.viewModel)==null?void 0:e.selectedResult,r=t&&t.name||"";return me("div",{key:"esri-search-renderer__result-name",class:Mi.moreResultsItem},r)}renderMoreResultsLists(){var e;const t=(e=this.viewModel)==null?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const s=t.map(i=>this.renderMoreResultsList(i));return me("div",{key:"esri-search-renderer__more-results-container",class:Mi.moreResultsList},s)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:me("div",{key:"esri-search-renderer__more-results-button",class:Mi.moreResultsItem},me("a",{class:Mi.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return me("div",{key:`esri-search-result-renderer__header-${t}`,class:Mi.moreResultsListHeader},e)}renderMoreResultsList(e){var t,r;const{results:s}=e,i=s.length,n=!!i,a=(t=this.viewModel)==null?void 0:t.selectedResult,u=i===1&&s[0]===a,p=this._getSourceName(e.source,e.sourceIndex),d=((r=this.viewModel)==null?void 0:r.results.length)>1&&!u?this.renderMoreResultsHeader(p,e.sourceIndex):null,h=n&&s.map((y,m)=>this.renderMoreResultsListItem(y,m)),f=n&&!u?me("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},h):null;return n?me("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},d,f):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?me("li",{key:`esri-search-result-renderer__list-item-${t}`},me("a",{class:Mi.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===bl.ALL_INDEX?this.messages.all:e.name}};o([c(),Mf("esri/widgets/Search/t9n/Search")],Nn.prototype,"messages",void 0),o([c()],Nn.prototype,"showMoreResultsOpen",void 0),o([c()],Nn.prototype,"viewModel",void 0),o([p$()],Nn.prototype,"_showMoreResultsClick",null),o([p$()],Nn.prototype,"_selectResultClick",null),Nn=o([b("esri.widgets.Search.SearchResultRenderer")],Nn);const sB=Nn;function iB(e){return e.split(",").map(t=>t.trim())}function nB(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,s=Array.isArray(e)?e:iB(e);r.push(...s)}}const ce={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},oB=/<[a-z/][\s\S]*>/i;let Te=class extends Gw{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new Pa,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new sB,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=ce.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new bl,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var s;const i=r.relatedTarget;i&&(s=this._container)!=null&&s.contains(i)||this._clearActiveMenu()},this.own(h1(this,"searchTerm",r=>{(r&&this.activeMenu==="warning"||!r&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),QV(this,"viewModel.allSources","change",()=>this._watchSourceChanges()),_f(this,"activeMenu",()=>this._resetActiveMenuItemIndex()),_f(this,"viewModel.defaultPopupTemplate",r=>{r&&(r.content=this._renderSearchResultsContent.bind(this))}))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:r}=t;return this._searchController=t,this.viewModel.search(e,{signal:r}).catch(s=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,s}).then(s=>{if(this._searchController===t)return this.activeMenu=s.numResults?"none":"warning",this._searchController=null,s})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:r}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:r}).then(s=>{if(this._suggestController===t)return this._suggestController=null,s.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),s}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[ce.disabled]:e==="disabled",[ce.esriWidgetDisabled]:this.disabled};return me("div",{class:this.classes(ce.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return me("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(ce.submitButton,ce.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},me("span",{"aria-hidden":"true",class:ce.searchIcon}))}renderWarningMenu(){return me("div",{key:"esri-search__error-menu",class:this.classes(ce.menu,ce.warningMenu)},me("div",{class:ce.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:r,sourceMenuButtonId:s}=this,{activeSourceIndex:i,allSources:n}=this.viewModel;return n.length>1?me("button",{id:s,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":r,class:this.classes(ce.sourcesButton,ce.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:_c,"data-node-ref":"_sourceMenuButtonNode",type:"button"},me("span",{"aria-hidden":"true",class:ce.dropdownIcon}),me("span",{"aria-hidden":"true",class:ce.dropupIcon}),me("span",{class:ce.sourceName},this._getSourceName(i))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:s,sourceMenuId:i,sourceMenuButtonId:n}=this,a=s==="source"&&r>-1?this._buildId("source-item",r):null;return e.length>1?me("ul",{"aria-activedescendant":a,"aria-labelledby":n,id:i,role:"menu",bind:this,afterCreate:_c,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:ce.menuList,tabIndex:-1},t?this.renderSource(bl.ALL_INDEX):null,e.map((u,p)=>this.renderSource(p)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?me("div",{key:"esri-search__source-menu",class:this.classes(ce.menu,ce.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return me("div",{class:ce.loader,key:"base-loader"},me("span",{"aria-hidden":"true",class:ce.loaderAnimation}),me("span",{class:ce.fallbackText},e.searchButtonTitle),me("span",{class:ce.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:r}=this,s={[ce.hasMultipleSources]:e.length>1,[ce.isLoading]:t==="loading",[ce.isSearching]:t==="searching",[ce.showWarning]:r==="warning",[ce.showSources]:r==="source",[ce.showSuggestions]:r==="suggestion"};return me("div",{tabIndex:-1,afterCreate:i=>{this._container=i,i.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:i=>{i.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(s,ce.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?me("button",{bind:this,class:this.classes(ce.clearButton,ce.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},me("span",{"aria-hidden":"true",class:ce.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:r}=this,s=t&&!r,i=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return s?me("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(ce.menuList,ce.suggestionList,ce.suggestionListCurrentLocation)},me("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(ce.menuItem,i?ce.menuItemFocus:null)},me("span",{"aria-hidden":"true",class:ce.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:r,messages:s,suggestionsMenuId:i,inputId:n,_activeMenuItemIndex:a}=this,{maxInputLength:u,placeholder:p,searchTerm:d,suggestionCount:h}=this.viewModel,f=!(!(t&&!r)&&!h),y=e==="suggestion"&&a>-1?this._buildId("suggestion-item",a):null;return me("input",{"aria-activedescendant":y,"aria-autocomplete":"list","aria-expanded":(f&&e==="suggestion").toString(),"aria-controls":f?i:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,placeholder:p,maxlength:u,autocomplete:"off",type:"text",class:this.classes(ce.esriInput,ce.input),value:d,id:n,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:_c,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:d?"":p})}renderForm(){return me("form",{key:"esri-search__form",bind:this,class:ce.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,r=e.results.length,s=e.results;return r?me("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(ce.menuList,ce.suggestionList)},s.map(i=>this.renderSuggestion(i,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:r,inputId:s}=this,{suggestionCount:i}=this.viewModel,n=t&&!e||i;return this._menuItemCount=0,n?me("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(ce.menu,ce.suggestionsMenu),role:"listbox","aria-labelledby":s,bind:this,afterCreate:_c,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return me("div",{key:"esri-search__input-container",class:ce.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:r}=this.viewModel,{sourceIndex:s}=e,i=e.results.length,n=t.length>1&&r===bl.ALL_INDEX;return i&&n?me("div",{key:`esri-search__suggestion-header-${s}`,class:ce.menuHeader},this._getSourceName(s)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:r,messages:s}=this,{searchTerm:i}=this.viewModel;if(i){const{text:n}=e,a=n||s.untitledResult,u=oB.test(a),p=[];if(u)p.push(me("div",{innerHTML:a}));else{const h=this._splitResult(a,i),f=i.toLowerCase();h.forEach((y,m)=>{y&&y.length&&(y.toLowerCase()===f?p.push(me("strong",{key:m},y)):p.push(y))})}const d=this.activeMenu==="suggestion"&&r===t;return me("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(ce.menuItem,d?ce.menuItemFocus:null)},p)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:r}=this.viewModel,s={[ce.menuItemActive]:e===t,[ce.menuItemFocus]:this.activeMenu==="source"&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},i=r?e+1:e;return me("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",i),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(ce.source,ce.menuItem,s)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,r=e?xw(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return me("div",{key:"esri-search__no_results"},me("div",{class:ce.warningMenuHeader},t.noResults),me("div",{class:ce.warningMenuText},r))}renderEmptySearchWarning(){const{messages:e}=this;return me("div",{key:"esri-search__empty-search"},me("span",{"aria-hidden":"true",class:ce.noticeIcon}),me("span",{class:ce.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return me("div",{key:"esri-search__locate-error"},me("span",{"aria-hidden":"true",class:ce.noticeIcon}),me("span",{class:ce.noValueText},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:r}=this,{viewModel:s}=this;return r?this.renderLocateWarning():(e=s.selectedSuggestion)!=null&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,r="sources";e.remove(r),t.forEach(s=>e.add(h1(s,"name",()=>this.scheduleRender()),r))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){const e=this.activeMenu==="source";var t;this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(r=>{this.activeMenu=r.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const r=e["data-source-index"];this.viewModel.activeSourceIndex=r,this._clearActiveMenu(),(t=this._sourceMenuButtonNode)==null||t.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const r=Gy(e);if(e.ctrlKey||e.metaKey||r==="Copy"||r==="ArrowLeft"||r==="ArrowRight"||r==="Shift")return;if(r==="Tab"||r==="Escape"||e.shiftKey&&r==="Tab")return this._cancelSuggest(),void(r==="Escape"&&this._clearActiveMenu());const s=r==="Home"||r==="End"||r==="ArrowUp"||r==="ArrowDown";if(r==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const i=(t=this._suggestionListNode)==null?void 0:t.getElementsByTagName("li");if(i!=null&&i.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),s)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(r,i,this._suggestionListNode);const n=i[this._activeMenuItemIndex];if(r==="Enter"&&n){const a=n["data-suggestion"];return void(a?(this._focus(),this.search(a)):n["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,r){const s=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&lU(t[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Gy(e);if(C5(t)){e.preventDefault();const r=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(r)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var t;const r=Gy(e),s=r==="ArrowUp"||r==="ArrowDown"||r==="End"||r==="Home";var i;if(s&&e.preventDefault(),r==="Escape")return this._clearActiveMenu(),void((i=this._sourceMenuButtonNode)==null||i.focus());const n=(t=this._sourceListNode)==null?void 0:t.getElementsByTagName("li");return n&&n.length!==0&&s?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(r,n,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,r=this.viewModel,{allSources:s}=r,i=s.getItemAt(e);return e===bl.ALL_INDEX?t.all:i&&i.name||t.untitledSource}_splitResult(e,t){const r=j3(t);return e.replace(new RegExp(`(^|)(${r})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};o([c()],Te.prototype,"_activeMenuItemIndex",void 0),o([c()],Te.prototype,"displayedSearchTerm",null),o([c({readOnly:!0})],Te.prototype,"inputId",null),o([c({readOnly:!0})],Te.prototype,"suggestionsMenuId",null),o([c({readOnly:!0})],Te.prototype,"sourceMenuId",null),o([c({readOnly:!0})],Te.prototype,"sourceMenuButtonId",null),o([c()],Te.prototype,"activeMenu",void 0),o([Xe("viewModel.activeSource")],Te.prototype,"activeSource",void 0),o([Xe("viewModel.activeSourceIndex")],Te.prototype,"activeSourceIndex",void 0),o([Xe("viewModel.allPlaceholder")],Te.prototype,"allPlaceholder",void 0),o([Xe("viewModel.allSources")],Te.prototype,"allSources",void 0),o([Xe("viewModel.autoNavigate")],Te.prototype,"autoNavigate",void 0),o([Xe("viewModel.autoSelect")],Te.prototype,"autoSelect",void 0),o([Xe("viewModel.defaultSources")],Te.prototype,"defaultSources",void 0),o([c()],Te.prototype,"disabled",void 0),o([Xe("viewModel.goToOverride")],Te.prototype,"goToOverride",void 0),o([c()],Te.prototype,"iconClass",void 0),o([Xe("viewModel.includeDefaultSources")],Te.prototype,"includeDefaultSources",void 0),o([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Te.prototype,"label",void 0),o([Xe("viewModel.locationEnabled")],Te.prototype,"locationEnabled",void 0),o([Xe("viewModel.maxResults")],Te.prototype,"maxResults",void 0),o([Xe("viewModel.maxSuggestions")],Te.prototype,"maxSuggestions",void 0),o([c(),Mf("esri/widgets/Search/t9n/Search")],Te.prototype,"messages",void 0),o([c(),Mf("esri/t9n/common")],Te.prototype,"messagesCommon",void 0),o([Xe("viewModel.minSuggestCharacters")],Te.prototype,"minSuggestCharacters",void 0),o([Xe("viewModel.popupEnabled")],Te.prototype,"popupEnabled",void 0),o([Xe("viewModel.popupTemplate")],Te.prototype,"popupTemplate",void 0),o([Xe("viewModel.portal")],Te.prototype,"portal",void 0),o([Xe("viewModel.resultGraphic")],Te.prototype,"resultGraphic",void 0),o([Xe("viewModel.resultGraphicEnabled")],Te.prototype,"resultGraphicEnabled",void 0),o([Xe("viewModel.results")],Te.prototype,"results",void 0),o([Xe("viewModel.searchAllEnabled")],Te.prototype,"searchAllEnabled",void 0),o([Xe("viewModel.searchTerm")],Te.prototype,"searchTerm",void 0),o([Xe("viewModel.selectedResult")],Te.prototype,"selectedResult",void 0),o([Xe("viewModel.sources")],Te.prototype,"sources",void 0),o([Xe("viewModel.suggestions")],Te.prototype,"suggestions",void 0),o([Xe("viewModel.suggestionsEnabled")],Te.prototype,"suggestionsEnabled",void 0),o([Xe("viewModel.view")],Te.prototype,"view",void 0),o([nB(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c({type:bl})],Te.prototype,"viewModel",void 0),o([Xe("viewModel.clear")],Te.prototype,"clear",null),Te=o([b("esri.widgets.Search")],Te);const aB=Te,Zi=F$(""),as=gi({activeSourceIndex:0}),Qw=ya(()=>{var e;return new aB(ve(A({},as),{sources:(e=as.sources)==null?void 0:e.map(t=>t.layer?ve(A({},t),{layer:new Oy(t.layer)}):t)}))}),w1=ya(()=>{var e,t;return(t=as.sources)==null?void 0:t[(e=as.activeSourceIndex)!=null?e:0]}),ui=gi({loading:!1,data:[]});async function w4(){if(ui.status=void 0,!Zi.value)throw"Invalid input";ui.loading=!0,ui.status="Searching...";try{const{results:e}=await Qw.value.search(Zi.value),{results:t}=e[0];return ui.status=t.length?void 0:"Your search returned no results.",ui.data=t.map(({name:r,extent:s,feature:i})=>({name:r,extent:s.toJSON(),feature:i.toJSON()})),t}catch(e){return console.warn(e),ui.status="An error occurred when searching.",[]}finally{ui.loading=!1}}function lB(e,t=500){let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>{e(...s)},t)}}la(()=>as.activeSourceIndex,()=>{Zi.value="",Jn.data=[]});const Jn=gi({loading:!1,data:[]}),uB=ya(()=>[...new Map(Jn.data.map(e=>[e.key,e])).values()]);async function _4(){if(!!Zi.value){Jn.loading=!0,Jn.error=void 0;try{const{results:e}=await Qw.value.suggest(Zi.value),{results:t}=e[0];Jn.data=t}catch{}finally{Jn.loading=!1}}}const _1=lB(_4),Zw=gi({}),xc=gi({loading:!1,data:[]});async function S4(e,t){xc.loading=!0,xc.data=[];try{const r=new Oy(Zw),{features:s}=await r.queryFeatures(ve(A({outFields:["*"]},t),{geometry:e}));return xc.data=s.map(i=>i.toJSON()),s}finally{xc.loading=!1}}const cB={name:"Address",placeholder:"Search by Address",url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/Composite_Address_Locator_Overall/GeocodeServer",singleLineFieldName:"SingleLine",minSuggestCharacters:2},pB={name:"Folio Number",placeholder:"Search by Folio Number",layer:{url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0",outFields:["FOLIO","SITE_ADDR"],displayField:"FOLIO"},searchFields:["FOLIO","FOLIO_NUMB"],minSuggestCharacters:2},dB=["onSubmit"],hB={key:0},fB=se("legend",null,"Search Source:",-1),yB={class:"form-check form-check-inline"},mB=["value","id"],gB=["for"],vB=se("legend",null,"Search:",-1),bB=["placeholder","aria-label"],wB={class:"btn btn-outline-secondary",type:"submit",id:"search-button"},_B={key:0,class:"spinner-border spinner-border-sm",role:"status"},SB=se("span",{class:"visually-hidden"},"Loading...",-1),xB=[SB],$B={key:1},IB={id:"suggestions"},MB={class:"form-text"},x4=_p({props:{small:{type:Boolean},large:{type:Boolean},hcSources:{type:Boolean},hideSources:{type:Boolean}},emits:["results"],setup(e,{emit:t}){const r=e;la(()=>r.hcSources,()=>{as.includeDefaultSources=!r.hcSources,as.sources=r.hcSources?[cB,pB]:void 0},{immediate:!0});const s=async i=>{const n=await w4();t("results",n)};return(i,n)=>{var a,u,p;return Yt(),vr("form",{onSubmit:qm(s,["prevent"])},[(a=Ke(as).sources)!=null&&a.length?Hi((Yt(),vr("fieldset",hB,[fB,(Yt(!0),vr(Ur,null,Dh(Ke(as).sources,(d,h)=>(Yt(),vr("div",yB,[Hi(se("input",{type:"radio",name:"search-source",value:h,id:`source-${h}`,"onUpdate:modelValue":n[0]||(n[0]=f=>Ke(as).activeSourceIndex=f),class:"form-check-input"},null,8,mB),[[ZA,Ke(as).activeSourceIndex]]),se("label",{for:`source-${h}`,class:"form-check-label"},Rs(d.name),9,gB)]))),256))],512)),[[p3,!e.hideSources]]):n3("",!0),se("fieldset",null,[vB,se("div",{class:Kl(["input-group",{"input-group-sm":e.small,"input-group-lg":e.large}])},[Hi(se("input",{type:"text",class:"form-control",placeholder:((u=Ke(w1))==null?void 0:u.placeholder)||"Find Address","aria-label":((p=Ke(w1))==null?void 0:p.placeholder)||"Find Address","aria-describedby":"search-button","onUpdate:modelValue":n[1]||(n[1]=d=>qt(Zi)?Zi.value=d:null),onInput:n[2]||(n[2]=(...d)=>Ke(_1)&&Ke(_1)(...d)),list:"suggestions",required:"",id:"esriSearchInput"},null,40,bB),[[u3,Ke(Zi)]]),se("button",wB,[Ke(ui).loading?(Yt(),vr("div",_B,xB)):(Yt(),vr("span",$B,"Search"))]),se("datalist",IB,[(Yt(!0),vr(Ur,null,Dh(Ke(Jn).data,({text:d})=>(Yt(),vr("option",null,Rs(d),1))),256))])],2),se("div",MB,Rs(Ke(ui).status),1)])],40,dB)}}}),EG=Object.freeze(Object.defineProperty({__proto__:null,$:dp,A:my,B:Ev,C:mt,D:wc,E:o,F:c,G:$a,H:b,I:l4,J:k,get K(){return ns},L:q3,M:Mt,N:xe,O:zp,P:KE,Q:wi,R:Mc,S:IP,T:Ar,U:Z1,V:QT,W:ZT,X:YT,Y:At,get Z(){return D},_:ru,a:su,a$:Y,a0:yb,a1:mb,a2:fb,a3:Xi,a4:mR,a5:Mf,a6:Gw,a7:me,a8:xw,a9:_c,aA:nt,aB:yy,aC:U3,aD:G3,aE:dC,aF:io,aG:Ds,aH:Yf,aI:AI,aJ:cC,aK:tu,aL:rf,aM:Qb,aN:pu,aO:ia,aP:Iw,aQ:fu,aR:Kf,aS:_O,aT:an,aU:Vs,aV:fi,aW:Pf,aX:re,aY:YD,aZ:kw,a_:dI,aa:Ip,ab:Rp,get ac(){return wt},ad:J1,ae:ca,af:J3,ag:tn,ah:Xn,ai:up,aj:Bb,ak:TP,al:Tp,am:Gl,an:cs,ao:Dp,ap:xp,aq:ls,ar:Yg,as:t9,at:j3,au:Gp,av:rT,aw:LP,ax:bf,ay:c5,az:_r,b:Cr,b$:T0,b0:Gt,b1:de,b2:mu,b3:Kb,b4:WE,b5:v3,b6:aT,b7:LT,b8:UT,b9:gw,bA:Tq,bB:kq,bC:Fq,bD:f4,bE:Lq,bF:Nq,bG:m4,bH:rt,bI:vu,bJ:cw,bK:rn,bL:gN,bM:vN,bN,bO:A8,bP:TN,bQ:Ok,bR:Zb,bS:Mk,bT:xR,bU:$E,bV:sL,bW:LN,bX:gO,bY:xE,bZ:Ca,b_:iL,ba:bR,bb:eu,bc:NE,bd:AT,be:LE,bf:OR,bg:Sw,bh:vE,bi:Wl,bj:zs,bk:bC,bl:Yc,bm:_t,bn:ht,bo:OL,bp:Xt,bq:vi,br:$I,bs:ab,bt:Aq,bu:wq,bv:xq,bw:Sq,bx:Mq,by:Iq,bz:jq,c:Tl,c$:zk,get c0(){return jl},c1:hf,c2:nL,c3:y3,c4:qP,c5:to,c6:Sr,c7:JO,c8:HO,c9:hC,cA:El,cB:Oc,cC:g8,cD:aE,cE:D8,cF:db,cG:RI,cH:o8,cI:OI,cJ:jI,cK:hb,cL:lb,cM:q6,cN:K1,cO:UE,cP:U1,cQ:Sp,cR:yC,cS:Pa,cT:ww,cU:Wm,cV:gE,cW:ry,cX:VN,cY:Bh,cZ:nO,c_:Jg,ca:HI,cb:va,cc:ra,cd:II,ce:o5,cf:Jr,cg:Fp,ch:Cp,ci:eE,cj:sp,ck:F6,cl:eN,get cm(){return ga},cn:ff,co:yf,cp:Qf,cq:Zf,cr:bk,cs:ja,ct:Pp,cu:vk,cv:dT,cw:un,cx:Ew,cy:KM,cz:Qk,d:Hr,d$:z8,d0:yR,d1:c8,d2:$R,d3:G1,d4:B1,d5:$M,d6:cf,d7:os,d8:ER,d9:jR,dA:jM,dB:U6,dC:cT,dD:nE,dE:Vr,dF:kM,dG:NM,dH:zM,dI:GM,dJ:JM,dK:kb,dL:Pb,dM:BM,dN:HM,dO:WM,dP:FM,dQ:XD,get dR(){return Mv},dS:q1,dT:zE,dU:ma,get dV(){return Nc},dW:Pw,dX:KV,dY:ZE,dZ:wb,d_:V8,da:Eb,db:uf,dc:Fb,dd:OM,de:wk,df:CM,dg:Tb,dh:Ab,di:fk,dj:PM,dk:We,dl:Bn,dm:Aa,dn:hT,dp:pT,dq:uT,dr:lT,ds:TM,dt:tN,du:Tw,dv:bT,dw:RM,dx:vT,dy:fM,dz:C6,e:JI,e$:kT,e0:H8,e1:_k,e2:$l,e3:SE,e4:_E,e5:x8,e6:GE,e7:B3,e8:YN,e9:pC,eA:Hf,eB:iy,eC:SM,eD:fT,eE:MM,eF:ay,eG:$T,eH:JT,eI:ar,eJ:GT,eK:kp,get eL(){return nv},eM:JD,eN:Oy,eO:d5,eP:TT,eQ:IE,eR:Cw,eS:Ta,eT:a5,eU:Rr,eV:Lb,eW:f5,eX:YE,eY:WD,eZ:CT,e_:Z3,ea:qf,eb:Bf,ec:Q1,ed:Hm,ee:f3,ef:Ow,eg:_R,eh:SR,ei:qh,ej:fl,ek:Iv,el:As,em:MT,en:yk,eo:AR,ep:AM,eq:De,er:py,es:QO,et:b3,eu:mO,ev:ny,ew:GI,ex:Lf,ey:ro,ez:ou,f:te,f$:l5,f0:sT,f1:gy,f2:nT,f3:oT,f4:oy,f5:RT,f6:Wr,f7:cu,f8:Fa,f9:ao,fA:xM,fB:lw,fC:jN,fD:hw,fE:hp,fF:hy,fG:zC,fH:aw,fI:fp,fJ:iT,fK:Y1,get fL(){return Jl},fM:Ki,fN:jr,fO:wO,fP:Vp,fQ:Ep,fR:WP,fS:$v,fT:Zk,fU:p8,fV:DR,fW:HD,get fX(){return Fe},fY:CU,fZ:Jf,get f_(){return Xo},fa:VT,fb:IT,fc:ET,fd:HT,fe:ug,ff:gb,fg:n5,fh:Fw,fi:Iy,fj:o1,fk:Dc,fl:yw,fm:jT,fn:My,fo:Vw,fp:dw,fq:Xe,fr:Oa,fs:oI,ft:Ap,fu:u5,fv:du,fw:Be,fx:WO,fy:P9,fz:ZD,g:sn,g$:Sk,g0:Qc,g1:SO,g2:rb,g3:lo,g4:lg,g5:$p,g6:uM,g7:Qn,g8:Ay,g9:gR,gA:xa,gB:tM,gC:Bl,gD:Dw,gE:oo,gF:eI,gG:AP,gH:EP,gI:yT,gJ:Zc,gK:mM,gL:ty,gM:_3,gN:w3,gO:Jk,gP:Xk,gQ:sP,gR:EM,gS:Rb,gT:S3,gU:IR,gV:vR,gW:IO,gX:gk,gY:Hk,gZ:Wk,g_:Cb,ga:ME,gb:zc,gc:n1,gd:lp,ge:dy,gf:NT,gg:PT,gh:Ia,gi:iw,gj:v7,gk:Ra,gl:SP,gm:FT,gn:b7,go:_I,gp:fC,gq:g,gr:sN,gs:OT,gt:mk,gu:iu,gv:XT,gw:e5,gx:t5,gy:$y,gz:S8,h:Qe,h0:wT,h1:Jp,h2:Uk,h3:yM,h4:Kk,h5:jb,h6:x4,h7:Zi,h8:as,h9:Qw,ha:w1,hb:ui,hc:w4,hd:Jn,he:uB,hf:_4,hg:_1,hh:Zw,hi:xc,hj:S4,hk:EO,hl:qN,hm:h7,hn:HV,i:Ma,j:ut,k:ke,l:Ec,m:j,n:Hb,o:Lu,p:r9,q:gu,r:R,s:F,t:ae,u:p5,v:eo,w:ea,x:QE,y:X9,z:c1},Symbol.toStringTag,{value:"Module"})),Fl=F$(null),OB=_p({__name:"LookupForm",setup(e){const t=async s=>{var i;try{if(!s.length)throw"No Search Results";const[n]=s;Zw.url="https://maps.hillsboroughcounty.org/arcgis/rest/services/DSD_Viewer_Services/Mobility_Fees/MapServer/0";const[{attributes:a}]=await S4((i=n==null?void 0:n.feature)==null?void 0:i.geometry);Fl.value=r(a.DATA)}catch(n){console.warn(n)}};function r(s){return s.charAt(0).toUpperCase()+s.toLowerCase().slice(1)}return(s,i)=>(Yt(),s3(Ke(x4),{"hc-sources":"",large:"",onResults:t}))}}),EB={"Single Family Detached":{Urban:[[0,1499,8178],[1500,2499,9183],[2500,Number.POSITIVE_INFINITY,10550]],Rural:[[0,1499,11633],[1500,2499,13038],[2500,Number.POSITIVE_INFINITY,14938]]},"Mobile Home":{Urban:[[0,Number.POSITIVE_INFINITY,3455]],Rural:[[0,Number.POSITIVE_INFINITY,4885]]}},TB=[[0,499,777],[500,749,1126],[750,999,1368],[1e3,1249,1555],[1250,1499,1710],[1500,1999,1957],[2e3,2499,2145],[2500,2999,2299],[3e3,3999,2540],[4e3,Number.POSITIVE_INFINITY,2742]],jB=[[0,899,1645],[900,1299,3891],[1300,1799,7027],[1800,2499,8227],[2500,3399,9369],[3400,Number.POSITIVE_INFINITY,10976]],jm={"Single Family Detached":335,"Mobile Home":299},Of=()=>({mobility:0,park:0,school:0,fire:0}),js=gi({year:new Date().getFullYear(),isNewConstruction:!0,newPricing:Of(),existingPricing:Of()}),ku=ya(()=>{let e=Of(),t;for(t in e){let r=0;js.isNewConstruction?r=js.newPricing[t]:r=js.newPricing[t]-js.existingPricing[t],e[t]=r>0?r:0}return{...e,total:Object.values(e).reduce((r,s)=>r+s)}}),AB=e=>{let t=Of();const r=s=>s.map(([i,n,a])=>i<=e.squareFootage&&e.squareFootage<=n?a:0).filter(Boolean)[0];return e.housingType!=null&&e.squareFootage&&Fl.value&&(t.mobility=r(EB[e.housingType][Fl.value])),e.squareFootage&&(t.park=r(TB),t.school=r(jB)),(e.housingType||e.squareFootage)&&(t.fire=jm[e.housingType],e.mobilePark?t.fire=jm[e.housingType]:t.fire=jm["Single Family Detached"]),t},RB=["Single Family Detached","Mobile Home"],CB=["Urban","Rural"],FB={class:"card-header d-flex align-items-center justify-content-between"},kB=["onClick"],PB=se("span",{class:"fas fa-history","aria-hidden":"true"},null,-1),NB=V1(" Reset "),LB=[PB,NB],DB={class:"card-body"},VB={class:"mb-3"},zB=se("label",null,"Housing Type",-1),UB=se("option",{value:null},null,-1),qB=se("label",null,"Mobile Home Park",-1),BB=["disabled"],GB=se("option",{value:!0},"In a Park",-1),JB=se("option",{value:!1},"Not in a Park",-1),HB=[GB,JB],WB={class:"mb-3"},KB=se("label",null,"Living Area Square Footage",-1),QB={class:"input-group mb-1"},ZB=se("span",{class:"input-group-text"},[V1(" ft "),se("sup",null,"2")],-1),YB={class:"mb-3"},XB=se("label",null,"Mobility Assessment District",-1),eG=se("option",{value:null},null,-1),d$=_p({__name:"CalcForm",props:{title:null,existing:{type:Boolean},modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,s=gi({housingType:null,squareFootage:null,mobilePark:null}),i=ya(()=>s.housingType=="Mobile Home"),n=ya(()=>AB(s)),a=()=>confirm(`Are you sure? This will remove the selections made in "${r.title}"`)?(s.housingType=null,s.squareFootage=null,s.mobilePark=null,!0):!1;return la(()=>s.housingType,()=>{s.mobilePark=i.value?!0:null}),la(n,()=>t("update:modelValue",n.value)),(u,p)=>(Yt(),vr("form",{class:"card",onSubmit:p[5]||(p[5]=qm(()=>{},["prevent"]))},[se("div",FB,[se("strong",null,Rs(e.title),1),se("button",{onClick:qm(a,["prevent"]),type:"button",class:"btn btn-sm btn-outline-warning"},LB,8,kB)]),se("div",DB,[se("div",VB,[zB,Hi(se("select",{"onUpdate:modelValue":p[0]||(p[0]=d=>s.housingType=d),class:"form-select"},[UB,(Yt(!0),vr(Ur,null,Dh(Ke(RB),(d,h)=>(Yt(),vr("option",{key:h},Rs(d),1))),128))],512),[[Uy,s.housingType]])]),se("div",{class:Kl(["mb-3",Ke(i)?null:"text-muted"])},[qB,Hi(se("select",{"onUpdate:modelValue":p[1]||(p[1]=d=>s.mobilePark=d),class:"form-select",disabled:!Ke(i)},HB,8,BB),[[Uy,s.mobilePark]])],2),se("div",WB,[KB,se("div",QB,[Hi(se("input",{type:"number","onUpdate:modelValue":p[2]||(p[2]=d=>s.squareFootage=d),class:"form-control text-right",min:0,step:50},null,512),[[u3,s.squareFootage]]),ZB]),n3("",!0)]),se("div",YB,[XB,Hi(se("select",{"onUpdate:modelValue":p[4]||(p[4]=d=>qt(Fl)?Fl.value=d:null),class:"form-select"},[eG,(Yt(!0),vr(Ur,null,Dh(Ke(CB),(d,h)=>(Yt(),vr("option",{key:h},Rs(d),1))),128))],512),[[Uy,Ke(Fl)]])])])],32))}}),tG={class:"card"},rG=se("div",{class:"card-header bg-secondary text-light d-flex align-items-center justify-content-between"},[se("strong",null,"Balance Due")],-1),sG={class:"table table-striped border-0 mb-0"},iG=se("th",null,"Mobility Amount",-1),nG={class:"text-right",width:"10"},oG=se("th",null,"Park Amount",-1),aG={class:"text-right"},lG=se("th",null,"School Amount",-1),uG={class:"text-right"},cG=se("th",null,"Fire Amount",-1),pG={class:"text-right"},dG=se("th",null,"TOTAL",-1),hG={class:"text-right"},fG=se("footer",{class:"card-footer small"},[se("em",null," All fees provided by this calculator are only estimates to assist in planning, actual fees will be assessed on building permits based on application data provided. ")],-1),yG=_p({__name:"Results",setup(e){const t=r=>r>0?"$"+r.toFixed(2):"-";return(r,s)=>(Yt(),vr("div",tG,[rG,se("table",sG,[se("tbody",null,[se("tr",null,[iG,se("td",nG,Rs(t(Ke(ku).mobility)),1)]),se("tr",null,[oG,se("td",aG,Rs(t(Ke(ku).park)),1)]),se("tr",null,[lG,se("td",uG,Rs(t(Ke(ku).school)),1)]),se("tr",null,[cG,se("td",pG,Rs(t(Ke(ku).fire)),1)]),se("tr",null,[dG,se("th",hG,Rs(t(Ke(ku).total)),1)])])]),fG]))}}),mG=se("h3",null,"Mobility/Impact Fee Calculator (Residential Only)",-1),gG=se("p",null,"Search by address to determine the mobility assessment district.",-1),vG=se("legend",null,"New Construction",-1),bG={class:"form-check"},wG=se("label",{class:"form-check-label",for:"newConstruction"}," This estimate is for a site with no existing home. ",-1),_G={class:"mb-3"},SG=se("legend",null,"Home Information",-1),xG={class:"row justify-content-center"},$G={class:"col-sm-6"},IG={class:"col-sm-6"},MG={class:"col"},OG=_p({__name:"App",setup(e){const t="container-fluid pt-2";return(r,s)=>(Yt(),vr("main",{class:Kl(Ke(t))},[mG,gG,qr(OB),se("fieldset",null,[vG,se("div",bG,[Hi(se("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>Ke(js).isNewConstruction=i),class:"form-check-input",type:"checkbox",id:"newConstruction"},null,512),[[QA,Ke(js).isNewConstruction]]),wG])]),se("fieldset",_G,[SG,se("div",xG,[se("div",$G,[qr(d$,{title:"New Home",modelValue:Ke(js).newPricing,"onUpdate:modelValue":s[1]||(s[1]=i=>Ke(js).newPricing=i)},null,8,["modelValue"])]),Hi(se("div",IG,[qr(d$,{title:"Existing Home",existing:"",modelValue:Ke(js).existingPricing,"onUpdate:modelValue":s[2]||(s[2]=i=>Ke(js).existingPricing=i)},null,8,["modelValue"])],512),[[p3,!Ke(js).isNewConstruction]]),se("div",MG,[qr(yG)])])])],2))}});rR(OG).mount("#app");export{mt as $,mb as A,fb as B,o as C,tu as D,c as E,Mf as F,b as G,pu as H,Rp as I,wt as J,J1 as K,G3 as L,Mt as M,t9 as N,Gw as O,me as P,xw as Q,_c as R,Ip as S,D as T,Cr as U,J3 as V,tn as W,Xn as X,up as Y,ca as Z,Re as _,AI as a,At as a$,Bb as a0,TP as a1,Tp as a2,Gl as a3,Qe as a4,cs as a5,Dp as a6,xp as a7,ls as a8,Yg as a9,Mc as aA,Ec as aB,eo as aC,JI as aD,Lu as aE,aT as aF,LT as aG,UT as aH,gw as aI,bR as aJ,eu as aK,NE as aL,AT as aM,LE as aN,WE as aO,v3 as aP,Sw as aQ,vE as aR,Wl as aS,zs as aT,bC as aU,Yc as aV,_t as aW,OR as aX,OL as aY,Xt as aZ,ht as a_,Kf as aa,ut as ab,_O as ac,an as ad,Vs as ae,fi as af,_r as ag,Pf as ah,re as ai,Iw as aj,bf as ak,fu as al,zp as am,YD as an,kw as ao,dI as ap,Y as aq,sn as ar,l4 as as,gu as at,my as au,Gt as av,de as aw,xe as ax,mu as ay,Kb as az,Yf as b,sp as b$,vi as b0,$I as b1,ru as b2,ab as b3,m4 as b4,Aq as b5,wq as b6,xq as b7,Sq as b8,Mq as b9,$E as bA,sL as bB,LN as bC,T0 as bD,jl as bE,hf as bF,nL as bG,Gp as bH,rT as bI,LP as bJ,c5 as bK,to as bL,Sr as bM,JO as bN,HO as bO,hC as bP,HI as bQ,va as bR,ra as bS,II as bT,o5 as bU,Jr as bV,Fp as bW,Cp as bX,bk as bY,ja as bZ,eE as b_,Iq as ba,jq as bb,Tq as bc,kq as bd,Fq as be,f4 as bf,Lq as bg,Nq as bh,rt as bi,vu as bj,A8 as bk,TN as bl,Ok as bm,Hb as bn,Zb as bo,Mk as bp,rn as bq,cw as br,gN as bs,vN as bt,bN as bu,xR as bv,xE as bw,Ca as bx,iL as by,gO as bz,Ds as c,fk as c$,F6 as c0,eN as c1,ga as c2,ff as c3,yf as c4,Qf as c5,Zf as c6,Pp as c7,vk as c8,KM as c9,db as cA,RI as cB,o8 as cC,lb as cD,q6 as cE,Wm as cF,OI as cG,jI as cH,QT as cI,ZT as cJ,YT as cK,$R as cL,G1 as cM,B1 as cN,os as cO,$M as cP,cf as cQ,ER as cR,jR as cS,Ab as cT,Eb as cU,uf as cV,Fb as cW,wk as cX,CM as cY,OM as cZ,Tb as c_,dT as ca,Ew as cb,un as cc,Qk as cd,El as ce,gE as cf,ry as cg,Oc as ch,K1 as ci,UE as cj,U1 as ck,Sp as cl,yC as cm,Pa as cn,ww as co,VN as cp,Bh as cq,nO as cr,Jg as cs,zk as ct,yR as cu,hb as cv,c8 as cw,g8 as cx,aE as cy,D8 as cz,Hr as d,Ow as d$,PM as d0,We as d1,Bn as d2,Aa as d3,hT as d4,pT as d5,uT as d6,lT as d7,TM as d8,tN as d9,Pw as dA,q3 as dB,KV as dC,ea as dD,Mv as dE,q1 as dF,zE as dG,XD as dH,Ev as dI,$a as dJ,Xi as dK,ZE as dL,wb as dM,z8 as dN,H8 as dO,V8 as dP,_k as dQ,QE as dR,X9 as dS,$l as dT,qf as dU,Bf as dV,Q1 as dW,y3 as dX,B3 as dY,Iv as dZ,Hm as d_,Tw as da,bT as db,RM as dc,vT as dd,fM as de,jM as df,U6 as dg,C6 as dh,cT as di,nE as dj,dp as dk,Vr as dl,kM as dm,NM as dn,zM as dp,GM as dq,JM as dr,kb as ds,Pb as dt,BM as du,HM as dv,WM as dw,FM as dx,ma as dy,Nc as dz,mR as e,Z3 as e$,SE as e0,_R as e1,SR as e2,_E as e3,qh as e4,x8 as e5,f3 as e6,fl as e7,As as e8,MT as e9,Oy as eA,OT as eB,HD as eC,$T as eD,HT as eE,JT as eF,GT as eG,YE as eH,IT as eI,Ki as eJ,Fe as eK,CU as eL,u5 as eM,kp as eN,Jf as eO,Xo as eP,ar as eQ,d5 as eR,l5 as eS,Iy as eT,Ta as eU,yw as eV,IE as eW,Hf as eX,kT as eY,Cw as eZ,Qc as e_,wi as ea,YN as eb,pC as ec,GE as ed,yk as ee,AR as ef,AM as eg,De as eh,py as ei,QO as ej,b3 as ek,mO as el,ny as em,GI as en,Lf as eo,qP as ep,ns as eq,Z1 as er,KE as es,Ar as et,IP as eu,r9 as ev,c1 as ew,p5 as ex,wc as ey,Vw as ez,U3 as f,rb as f$,JD as f0,ay as f1,TT as f2,Lb as f3,WD as f4,CT as f5,nv as f6,a5 as f7,Rr as f8,f5 as f9,du as fA,Be as fB,WO as fC,lw as fD,jN as fE,hw as fF,hp as fG,zC as fH,aw as fI,P9 as fJ,hy as fK,ZD as fL,xM as fM,fp as fN,iT as fO,$v as fP,Y1 as fQ,Ep as fR,ou as fS,Jl as fT,jr as fU,wO as fV,Vp as fW,WP as fX,DR as fY,p8 as fZ,Zk as f_,sT as fa,gy as fb,nT as fc,oT as fd,oy as fe,ro as ff,RT as fg,Wr as fh,cu as fi,Fa as fj,ao as fk,VT as fl,ET as fm,ug as fn,gb as fo,n5 as fp,Fw as fq,o1 as fr,Dc as fs,jT as ft,My as fu,Xe as fv,Oa as fw,dw as fx,oI as fy,Ap as fz,ke as g,Rb as g$,lo as g0,SO as g1,lg as g2,$p as g3,uM as g4,Qn as g5,Ay as g6,gR as g7,ME as g8,zc as g9,Dw as gA,iy as gB,fT as gC,SM as gD,MM as gE,Jk as gF,Xk as gG,sP as gH,eI as gI,yT as gJ,oo as gK,EP as gL,Zc as gM,mM as gN,_3 as gO,w3 as gP,ty as gQ,AP as gR,Jp as gS,Cb as gT,Sk as gU,Kk as gV,Uk as gW,jb as gX,EM as gY,IO as gZ,yM as g_,n1 as ga,lp as gb,dy as gc,NT as gd,PT as ge,Ia as gf,iw as gg,v7 as gh,Ra as gi,SP as gj,FT as gk,b7 as gl,_I as gm,fC as gn,g as go,sN as gp,XT as gq,e5 as gr,t5 as gs,iu as gt,mk as gu,$y as gv,S8 as gw,xa as gx,tM as gy,Bl as gz,k as h,Hk as h0,Wk as h1,S3 as h2,vR as h3,wT as h4,IR as h5,gk as h6,EG as h7,j as i,nt as j,dC as k,Qb as l,su as m,ia as n,j3 as o,io as p,te as q,R as r,cC as s,ae as t,F as u,Ma as v,yb as w,Tl as x,yy as y,rf as z};
