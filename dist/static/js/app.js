webpackJsonp([1],{0:function(t,e,s){s("j1ja"),t.exports=s("NHnr")},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("7+uW"),o=s("XRdY"),n=s("NO98"),i=s.n(n),a=s("Dd8w"),l=s.n(a),c=s("//Fk"),u=s.n(c),d=s("d7EF"),h=s.n(d),m=s("Meid"),f=s("NYxO"),p={state:{mobilityAssessment:null,parkSchoolAssessment:null},actions:{fetchDistricts:function(t,e){var s=t.commit,r=t.dispatch;return s("setMAD",null),s("setPSAD",null),m.loadModules(["esri/tasks/support/Query"]).then(function(t){var s=new(0,h()(t,1)[0]);return s.geometry=e,s.spatialRelationship="within",u.a.all([r("fetchMobilityDistrict",s),r("fetchParkSchoolDistrict",s)])})},fetchMobilityDistrict:function(t,e){var s=t.commit,r=t.getters;return m.loadModules(["esri/tasks/QueryTask"]).then(function(t){return new(0,h()(t,1)[0])({url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/DSD_Viewer_Services/Mobility_Fees/MapServer/0"}).execute(e).then(function(t){if(!t.features.length)throw new Error("A Mobility District could not be determined.");s("setMAD",r.formatDistrictStr(t.features[0].attributes.DATA))})})},fetchParkSchoolDistrict:function(t,e){var s=t.commit,r=t.getters;return m.loadModules(["esri/tasks/QueryTask"]).then(function(t){return new(0,h()(t,1)[0])({url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/infoLayers/MapServer/3"}).execute(e).then(function(t){if(!t.features.length)throw new Error("A Park/Schools Impact Fee Zone could not be determined.");s("setPSAD",r.formatDistrictStr(t.features[0].attributes.ZONE))})})}},mutations:{setMAD:function(t,e){t.mobilityAssessment=e},setPSAD:function(t,e){t.parkSchoolAssessment=e}},getters:{formatDistrictStr:function(t){return function(t){return t.charAt().toUpperCase()+t.toLowerCase().slice(1)}}}},v={computed:{madModel:{get:function(){return this.$store.state.districts.mobilityAssessment},set:function(t){this.setMAD(t)}},psadModel:{get:function(){return this.$store.state.districts.parkSchoolAssessment},set:function(t){this.setPSAD(t)}}},methods:l()({},Object(f.b)(["fetchDistricts"]),Object(f.d)(["setMAD","setPSAD"]))},g={"Single Family Detached":{Urban:{"0-499":2942,"500-749":2942,"750-999":2942,"1000-1249":2942,"1250-1499":2942,"1500-1999":3184,"2000-2499":3184,"2500-2999":3576,"3000-3999":3576,"4000+":3576},Rural:{"0-499":3609,"500-749":3609,"750-999":3609,"1000-1249":3609,"1250-1499":3609,"1500-1999":4611,"2000-2499":4611,"2500-2999":5176,"3000-3999":5176,"4000+":5176}},"Mobile Home":{Urban:{"0-499":1174,"500-749":1174,"750-999":1174,"1000-1249":1174,"1250-1499":1174,"1500-1999":1174,"2000-2499":1174,"2500-2999":1174,"3000-3999":1174,"4000+":1174},Rural:{"0-499":1703,"500-749":1703,"750-999":1703,"1000-1249":1703,"1250-1499":1703,"1500-1999":1703,"2000-2499":1703,"2500-2999":1703,"3000-3999":1703,"4000+":1703}}},_={"Single Family Detached":{Northwest:{1:317.2,2:317.2,3:421.6,4:517.34,"5+":593.31},Northeast:{1:264.9,2:264.9,3:352.09,4:432.04,"5+":495.49},Central:{1:313.53,2:313.53,3:416.72,4:511.36,"5+":586.45},South:{1:168.36,2:168.36,3:223.78,4:274.59,"5+":314.92}},"Mobile Home":{Northwest:{1:279.74,2:328.7,3:461.78,4:461.78,"5+":461.78},Northeast:{1:233.61,2:274.51,3:385.64,4:385.64,"5+":385.64},Central:{1:276.49,2:324.89,3:456.44,4:456.44,"5+":456.44},South:{1:148.48,2:174.46,3:245.1,4:245.1,"5+":245.1}}},b={"0-499":1207,"500-749":1774,"750-999":2357,"1000-1249":2793,"1250-1499":3146,"1500-1999":3565,"2000-2499":4e3,"2500-2999":4345,"3000-3999":4764,"4000+":5200},y={getters:{calculatePricing:function(t,e,s){return function(t){var e={mobility:0,park:0,school:0,fire:0};return t.housingType&&t.squareFootage&&s.districts.mobilityAssessment&&(e.mobility=g[t.housingType][s.districts.mobilityAssessment][t.squareFootage]),t.housingType&&t.bedrooms&&s.districts.parkSchoolAssessment&&(e.park=_[t.housingType][s.districts.parkSchoolAssessment][t.bedrooms]),t.squareFootage&&(e.school=b[t.squareFootage]),(t.housingType||t.bedrooms||t.squareFootage)&&(e.fire=48.66),e}}}},S={name:"calc-form",props:["title"],mixins:[v,{computed:Object(f.c)(["selectOptions"])},{computed:Object(f.c)(["calculatePricing"])}],data:function(){return{housingType:null,bedrooms:null,squareFootage:null}},methods:{reset:function(){this.housingType=null,this.bedrooms=null,this.squareFootage=null}},computed:{results:function(){return this.calculatePricing(this.$data)}},watch:{results:function(t){this.$emit("update",t)}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"card mb-3",attrs:{id:"calc-form"}},[s("strong",{staticClass:"card-header font-weight-bold"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Housing Type")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.housingType,expression:"housingType"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.housingType=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.selectOptions.housingType,function(e,r){return s("option",{key:r},[t._v(t._s(e))])})],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Number of Bedrooms")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.bedrooms,expression:"bedrooms"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.bedrooms=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.selectOptions.bedrooms,function(e,r){return s("option",{key:r},[t._v(t._s(e))])})],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Living Area Square Footage Range")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.squareFootage,expression:"squareFootage"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.squareFootage=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.selectOptions.squareFootage,function(e,r){return s("option",{key:r},[t._v(t._s(e))])})],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Mobility Assessment District")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.madModel,expression:"madModel"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.madModel=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.selectOptions.mobilityAssessmentDist,function(e,r){return s("option",{key:r},[t._v(t._s(e))])})],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Park/Schools Impact Fee Zone")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.psadModel,expression:"psadModel"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.psadModel=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.selectOptions.parkSchoolAssessmentDist,function(e,r){return s("option",{key:r},[t._v(t._s(e))])})],2)])])])},staticRenderFns:[]},C=s("VU/8")(S,w,!1,null,null,null).exports,A=s("gRE1"),x=s.n(A),k=s("fZjL"),M=s.n(k),F=s("woOf"),N=s.n(F),D={state:{totals:{mobility:0,park:0,school:0,fire:0,total:0}},actions:{updateTotals:function(t,e){var s=t.commit,r={},o=N()({},e.formNew.results);if(e.formExisting){var n=N()({},e.formExisting.results);M()(o).forEach(function(t){var e=o[t]-n[t];r[t]=e>0?e:0})}else r=o;r.total=x()(r).reduce(function(t,e){return t+e}),s("setTotals",r)}},mutations:{setTotals:function(t,e){t.totals=e}}},$={methods:Object(f.b)(["updateTotals"]),computed:Object(f.e)({totals:function(t){return t.results.totals}})},T={name:"results",mixins:[$],methods:{currency:function(t){return t<=0?"-":"$"+t.toFixed(2)}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mb-3"},[s("strong",{staticClass:"card-header bg-secondary text-light font-weight-bold"},[t._v("\n    Balance Due\n  ")]),t._v(" "),s("table",{staticClass:"table table-striped border-0 mb-0"},[s("tbody",[s("tr",[s("th",[t._v("\n          Mobility Amount\n        ")]),t._v(" "),s("td",{staticClass:"text-right",attrs:{width:"10"}},[t._v("\n          "+t._s(t.currency(t.totals.mobility))+"\n        ")])]),t._v(" "),s("tr",[s("th",[t._v("\n          Park Amount\n        ")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v("\n          "+t._s(t.currency(t.totals.park))+"\n        ")])]),t._v(" "),s("tr",[s("th",[t._v("\n          School Amount\n        ")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v("\n          "+t._s(t.currency(t.totals.school))+"\n        ")])]),t._v(" "),s("tr",[s("th",[t._v("\n          Fire Amount\n        ")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v("\n          "+t._s(t.currency(t.totals.fire))+"\n        ")])]),t._v(" "),s("tr",[s("th",[t._v("\n          TOTAL\n        ")]),t._v(" "),s("th",{staticClass:"text-right"},[t._v("\n          "+t._s(t.currency(t.totals.total))+"\n        ")])])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"card-footer small"},[e("em",[this._v("\n      All fees provided by this calculator are only estimates to assist in planning, actual fees will be assessed on building permits based on application data provided.\n    ")])])}]},E=s("VU/8")(T,I,!1,null,null,null).exports,R={name:"index",mixins:[v,$],components:{HcEsriSearchWidget:o.c,HcErrorAlerts:i.a,CalcForm:C,Results:E},data:function(){return{searchResult:null}},methods:{reset:function(t){this.searchResult=null,this.$refs.errorAlerts.clearAlerts()},handleResult:function(t){var e=this;this.searchResult=t,this.searchResult.error?this.handleError(this.searchResult.error):this.searchResult.hasFeature()&&(this.$refs.searchWidget.isSearching=!0,this.$refs.searchWidget.status="Finding Districts...",this.fetchDistricts(this.searchResult.result.feature.geometry).catch(this.handleError).then(function(){e.$refs.searchWidget.status=null,e.$refs.searchWidget.isSearching=!1}))},handleError:function(t){console.warn(t),this.$refs.errorAlerts.addAlert(t)},touchCalcForms:function(t){this.updateTotals(this.$refs)}},computed:{searchSources:function(){return[o.a.esriSearchSource,o.b.esriSearchSource]}},watch:{"$store.state.isNewContruction":function(t){t&&confirm('This will remove the selections made in "Existing Home"')?this.$refs.formExisting.reset():this.$store.state.isNewContruction=!1,this.updateTotals(this.$refs)}}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("HcEsriSearchWidget",{ref:"searchWidget",tag:"form",attrs:{"search-sources":t.searchSources,"load-map":!0},on:{submit:t.reset,result:t.handleResult}}),t._v(" "),s("p",{staticClass:"mb-3 text-muted form-text small"},[t._v('\n    Your address or folio number will be used to populate the "Mobility Assessment District" and "Park/Schools Impact Fee Zone" fields below.\n  ')]),t._v(" "),s("HcErrorAlerts",{ref:"errorAlerts",tag:"div"}),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"font-weight-bold"},[t._v("New Construction")]),t._v(" "),s("div",{staticClass:"checkbox"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.isNewContruction,expression:"$store.state.isNewContruction"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$store.state.isNewContruction)?t._i(t.$store.state.isNewContruction,null)>-1:t.$store.state.isNewContruction},on:{change:function(e){var s=t.$store.state.isNewContruction,r=e.target,o=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&t.$set(t.$store.state,"isNewContruction",s.concat([null])):n>-1&&t.$set(t.$store.state,"isNewContruction",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.$store.state,"isNewContruction",o)}}}),t._v("\n        This estimate is for a site with no existing home.\n      ")])])]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-6"},[s("CalcForm",{ref:"formNew",tag:"form",attrs:{title:"New Home"},on:{update:t.touchCalcForms}})]),t._v(" "),t.$store.state.isNewContruction?t._e():s("div",{staticClass:"col-md-6"},[s("CalcForm",{ref:"formExisting",tag:"form",attrs:{title:"Existing Home"},on:{update:t.touchCalcForms}})]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("Results",{tag:"div"})])])])},staticRenderFns:[]},O=s("VU/8")(R,P,!1,null,null,null).exports;r.a.use(f.a);var W=new f.a.Store({modules:{pricing:y,results:D,districts:p,selectOptions:{getters:{selectOptions:function(t){return{housingType:["Single Family Detached","Mobile Home"],bedrooms:[1,2,3,4,"5+"],squareFootage:["0-499","500-749","750-999","1000-1249","1250-1499","1500-1999","2000-2499","2500-2999","3000-3999","4000+"],mobilityAssessmentDist:["Urban","Rural"],parkSchoolAssessmentDist:["Northwest","Northeast","Central","South"]}}}}},state:{isNewContruction:!0}});r.a.config.productionTip=!1,new r.a({el:"#app",store:W,template:"<App/>",components:{App:O}})},ZV0I:function(t,e,s){"use strict";var r=s("Meid"),o=s("iX0M"),n=s.n(o),i=s("OTcg"),a=s("y1vT"),l=s.n(a),c=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var s=[],r=!0,o=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(s.push(i.value),!e||s.length!==e);r=!0);}catch(t){o=!0,n=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw n}}return s}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u={components:{EsriPortalMap:n.a},props:{loadMap:{type:Boolean,default:!1},showMap:{type:Boolean,default:!1},searchSources:{type:Array,default:function(){return[i.a.esriSearchSource]}}},data:function(){return{userInput:"",status:null,searchResult:{},searchWidget:null,isSearching:!1,selectedSourceIndex:0,allSuggestions:[]}},mounted:function(){var t=this;this.initSearchWidget().then(function(e){t.searchWidget=e,t.searchWidget.sources=t.searchSources,t.loadMap&&t.$refs.map.mapview.when(function(e){t.searchWidget.view=e})}).catch(function(t){console.error(t)})},methods:{search:function(t){var e=this;this.$emit("submit",t),this.isSearching=!0,this.status="Searching...",this.searchWidget.search(this.userInput).then(function(t){if(!(t&&t.results&&t.results[e.selectedSourceIndex]&&t.results[e.selectedSourceIndex].results))throw new Error("An error has occured with the geolocation service. Please try again at a later time.");if(!t.results[e.selectedSourceIndex].results.length)throw new Error("No search results were found. Is your search term formatted correctly?");e.setSearchResult({result:t.results[e.selectedSourceIndex].results[0]})}).catch(function(t){e.setSearchResult({error:t})}).then(function(){e.isSearching=!1,e.status=null,e.$emit("result",e.searchResult)})},setSearchResult:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.searchResult=Object.assign({userInput:this.userInput,source:this.searchSources[this.selectedSourceIndex],hasFeature:function(){return!(!this.result||!this.result.feature)}},t)},makeSuggestions:l()(function(t){var e=this;this.userInput.length&&this.searchWidget.suggest(this.userInput).then(function(t){e.allSuggestions=e.searchWidget.suggestions||[]})},300),initSearchWidget:function(){return Object(r.loadModules)(["esri/widgets/Search"]).then(function(t){return new(0,c(t,1)[0])({container:"searchWidget"})})}},computed:{btnText:function(){return"Find"},btnClass:function(){return this.isSearching?"btn-warning":"btn-secondary"},btnIcon:function(){return this.isSearching?"fa fa-fw fa-spinner fa-spin":"fa fa-fw fa-search"},placeholder:function(){return this.searchSources[this.selectedSourceIndex].placeholder},suggestions:function(){return this.allSuggestions.length?this.allSuggestions[this.selectedSourceIndex].results:[]},mapClass:function(){return this.loadMap&&this.showMap?null:"hide-map"}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{action:"#",id:"searchWidgetForm"},on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[t.searchSources.length>1?s("div",{staticClass:"form-group mb-1"},[s("div",{staticClass:"font-weight-bold"},[t._v("Search by:")]),t._v(" "),t._l(t.searchSources,function(e,r){return s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedSourceIndex,expression:"selectedSourceIndex"}],staticClass:"form-check-input",attrs:{type:"radio",name:"searchSources",id:"radio"+r},domProps:{value:r,checked:t._q(t.selectedSourceIndex,r)},on:{change:function(e){t.selectedSourceIndex=r}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"radio"+r}},[t._v(t._s(e.name))])])})],2):t._e(),t._v(" "),s("div",{staticClass:"form-group mb-2"},[s("div",{staticClass:"input-group input-group-lg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userInput,expression:"userInput"}],staticClass:"form-control data-hj-whitelist",attrs:{placeholder:t.placeholder,id:"searchWidget",list:"suggestions",autocomplete:"off",required:""},domProps:{value:t.userInput},on:{keyup:t.makeSuggestions,input:function(e){e.target.composing||(t.userInput=e.target.value)}}}),t._v(" "),s("datalist",{attrs:{id:"suggestions"}},t._l(t.suggestions,function(t,e){return s("option",{key:e,domProps:{value:t.text}})})),t._v(" "),s("span",{staticClass:"input-group-append input-group-btn"},[s("button",{staticClass:"btn text-white",class:t.btnClass,attrs:{type:"submit"}},[s("i",{class:t.btnIcon}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline-block"},[t._v("\n            "+t._s(t.btnText)+"\n          ")])])])]),t._v(" "),s("div",{staticClass:"small form-text text-muted",attrs:{id:"status"}},[t._v("\n      "+t._s(t.status)+"\n      Â \n    ")])]),t._v(" "),t.loadMap?s("EsriPortalMap",{ref:"map",tag:"div",class:t.mapClass}):t._e()])},staticRenderFns:[]};var h=s("VU/8")(u,d,!1,function(t){s("j30g")},null,null);e.a=h.exports},j30g:function(t,e){}},[0]);
//# sourceMappingURL=app.js.map